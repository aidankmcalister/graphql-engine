<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE ViewPatterns #-}</span><span>
</span><span id="line-2"></span><span>
</span><span id="line-3"></span><span class="annot"><span class="hs-comment">-- | The RQL query ('/v2/query')</span></span><span>
</span><span id="line-4"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Hasura.Server.API.V2Query.html"><span class="hs-identifier">Hasura.Server.API.V2Query</span></a></span><span>
</span><span id="line-5"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQLQuery"><span class="hs-identifier">RQLQuery</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-6"></span><span>    </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#queryModifiesSchema"><span class="hs-identifier">queryModifiesSchema</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-7"></span><span>    </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#runQuery"><span class="hs-identifier">runQuery</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-8"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-9"></span><span class="hs-keyword">where</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/lifted-async-0.10.2.5-7453f3a39fe1c149b1fdd3dbcd3716b82112049f5f698aafbd6eb5b568cc41a4/share/doc/html/src/Control.Concurrent.Async.Lifted.html/Control.Concurrent.Async.Lifted.html"><span class="hs-identifier">Control.Concurrent.Async.Lifted</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/lifted-async-0.10.2.5-7453f3a39fe1c149b1fdd3dbcd3716b82112049f5f698aafbd6eb5b568cc41a4/share/doc/html/src/Control.Concurrent.Async.Lifted.html/Control.Concurrent.Async.Lifted.html#mapConcurrently"><span class="hs-identifier">mapConcurrently</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/lens-5.3.2-7ec14d641784087c1f1350eada3cde7884c62d1ab2707daec993ceeca3096d32/share/doc/html/src/Control.Lens.html/Control.Lens.html"><span class="hs-identifier">Control.Lens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/lens-5.3.2-7ec14d641784087c1f1350eada3cde7884c62d1ab2707daec993ceeca3096d32/share/doc/html/src/Control.Lens.Fold.html/Control.Lens.Fold.html#preview"><span class="hs-identifier">preview</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/lens-5.3.2-7ec14d641784087c1f1350eada3cde7884c62d1ab2707daec993ceeca3096d32/share/doc/html/src/Control.Lens.Prism.html/Control.Lens.Prism.html#_Right"><span class="hs-identifier">_Right</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/monad-control-1.0.3.1-127c0b1895a90d6faa345827c6b6be6447278996974a93c84184eef9ccf5fbbc/share/doc/html/src/Control.Monad.Trans.Control.html/Control.Monad.Trans.Control.html"><span class="hs-identifier">Control.Monad.Trans.Control</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/monad-control-1.0.3.1-127c0b1895a90d6faa345827c6b6be6447278996974a93c84184eef9ccf5fbbc/share/doc/html/src/Control.Monad.Trans.Control.html/Control.Monad.Trans.Control.html#MonadBaseControl"><span class="hs-identifier">MonadBaseControl</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.html/Data.Aeson.html"><span class="hs-identifier">Data.Aeson</span></a></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.html/Data.Aeson.Types.html"><span class="hs-identifier">Data.Aeson.Types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#Parser"><span class="hs-identifier">Parser</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/GHC.Generics.Extended.html/GHC.Generics.Extended.html"><span class="hs-identifier">GHC.Generics.Extended</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/GHC.Generics.Extended.html/GHC.Generics.Extended.html#constrName"><span class="hs-identifier">constrName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.App.State.html"><span class="hs-identifier">Hasura.App.State</span></a></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Authentication.User.html"><span class="hs-identifier">Hasura.Authentication.User</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Authentication.User.html#UserInfoM"><span class="hs-identifier">UserInfoM</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Backends.BigQuery.DDL.RunSQL.html"><span class="hs-identifier">Hasura.Backends.BigQuery.DDL.RunSQL</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BigQuery</span></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Backends.DataConnector.Adapter.RunSQL.html"><span class="hs-identifier">Hasura.Backends.DataConnector.Adapter.RunSQL</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">DataConnector</span></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Backends.DataConnector.Adapter.Types.html"><span class="hs-identifier">Hasura.Backends.DataConnector.Adapter.Types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.DataConnector.html#DataConnectorName"><span class="hs-identifier">DataConnectorName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.DataConnector.html#mkDataConnectorName"><span class="hs-identifier">mkDataConnectorName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Backends.MSSQL.DDL.RunSQL.html"><span class="hs-identifier">Hasura.Backends.MSSQL.DDL.RunSQL</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">MSSQL</span></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.DDL.RunSQL.html"><span class="hs-identifier">Hasura.Backends.Postgres.DDL.RunSQL</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Postgres</span></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html"><span class="hs-identifier">Hasura.Base.Error</span></a></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-json-encoding-1.0.0/opt/doc/html/hasura-json-encoding/src/Hasura.EncJSON.html/Hasura.EncJSON.html"><span class="hs-identifier">Hasura.EncJSON</span></a></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Metadata.Class.html"><span class="hs-identifier">Hasura.Metadata.Class</span></a></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html"><span class="hs-identifier">Hasura.Prelude</span></a></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.QueryTags.html"><span class="hs-identifier">Hasura.QueryTags</span></a></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.Schema.html"><span class="hs-identifier">Hasura.RQL.DDL.Schema</span></a></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.Schema.Cache.Config.html"><span class="hs-identifier">Hasura.RQL.DDL.Schema.Cache.Config</span></a></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.DML.Count.html"><span class="hs-identifier">Hasura.RQL.DML.Count</span></a></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.DML.Delete.html"><span class="hs-identifier">Hasura.RQL.DML.Delete</span></a></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.DML.Insert.html"><span class="hs-identifier">Hasura.RQL.DML.Insert</span></a></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.DML.Select.html"><span class="hs-identifier">Hasura.RQL.DML.Select</span></a></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.DML.Types.html"><span class="hs-identifier">Hasura.RQL.DML.Types</span></a></span><span>
</span><span id="line-37"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.RQL.DML.Types.html#CountQuery"><span class="hs-identifier">CountQuery</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DML.Types.html#DeleteQuery"><span class="hs-identifier">DeleteQuery</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DML.Types.html#InsertQuery"><span class="hs-identifier">InsertQuery</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DML.Types.html#SelectQuery"><span class="hs-identifier">SelectQuery</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DML.Types.html#UpdateQuery"><span class="hs-identifier">UpdateQuery</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.DML.Update.html"><span class="hs-identifier">Hasura.RQL.DML.Update</span></a></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.BackendType.html"><span class="hs-identifier">Hasura.RQL.Types.BackendType</span></a></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html"><span class="hs-identifier">Hasura.RQL.Types.Common</span></a></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Metadata.html"><span class="hs-identifier">Hasura.RQL.Types.Metadata</span></a></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html"><span class="hs-identifier">Hasura.RQL.Types.SchemaCache</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html#MetadataWithResourceVersion"><span class="hs-identifier">MetadataWithResourceVersion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html#MetadataWithResourceVersion"><span class="hs-identifier">MetadataWithResourceVersion</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html#SchemaCache"><span class="hs-identifier">SchemaCache</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html#scInconsistentObjs"><span class="hs-identifier">scInconsistentObjs</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.Build.html"><span class="hs-identifier">Hasura.RQL.Types.SchemaCache.Build</span></a></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Source.html"><span class="hs-identifier">Hasura.RQL.Types.Source</span></a></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Server.Types.html"><span class="hs-identifier">Hasura.Server.Types</span></a></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Services.html"><span class="hs-identifier">Hasura.Services</span></a></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Tracing.html"><span class="hs-identifier">Hasura.Tracing</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Tracing</span></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.html/Language.GraphQL.Draft.Syntax.html"><span class="hs-identifier">Language.GraphQL.Draft.Syntax</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">GQL</span></span><span>
</span><span id="line-54"></span><span>
</span><span id="line-55"></span><span class="hs-keyword">data</span><span> </span><span id="RQLQuery"><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQLQuery"><span class="hs-identifier hs-var">RQLQuery</span></a></span></span><span>
</span><span id="line-56"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="RQInsert"><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQInsert"><span class="hs-identifier hs-var">RQInsert</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.DML.Types.html#InsertQuery"><span class="hs-identifier hs-type">InsertQuery</span></a></span><span>
</span><span id="line-57"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RQSelect"><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQSelect"><span class="hs-identifier hs-var">RQSelect</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.DML.Types.html#SelectQuery"><span class="hs-identifier hs-type">SelectQuery</span></a></span><span>
</span><span id="line-58"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RQUpdate"><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQUpdate"><span class="hs-identifier hs-var">RQUpdate</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.DML.Types.html#UpdateQuery"><span class="hs-identifier hs-type">UpdateQuery</span></a></span><span>
</span><span id="line-59"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RQDelete"><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQDelete"><span class="hs-identifier hs-var">RQDelete</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.DML.Types.html#DeleteQuery"><span class="hs-identifier hs-type">DeleteQuery</span></a></span><span>
</span><span id="line-60"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RQCount"><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQCount"><span class="hs-identifier hs-var">RQCount</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.DML.Types.html#CountQuery"><span class="hs-identifier hs-type">CountQuery</span></a></span><span>
</span><span id="line-61"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RQRunSql"><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQRunSql"><span class="hs-identifier hs-var">RQRunSql</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Backends.Postgres.DDL.RunSQL.html#RunSQL"><span class="hs-identifier hs-type">Postgres.RunSQL</span></a></span><span>
</span><span id="line-62"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RQMssqlRunSql"><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQMssqlRunSql"><span class="hs-identifier hs-var">RQMssqlRunSql</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Backends.MSSQL.DDL.RunSQL.html#MSSQLRunSQL"><span class="hs-identifier hs-type">MSSQL.MSSQLRunSQL</span></a></span><span>
</span><span id="line-63"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RQCitusRunSql"><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQCitusRunSql"><span class="hs-identifier hs-var">RQCitusRunSql</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Backends.Postgres.DDL.RunSQL.html#RunSQL"><span class="hs-identifier hs-type">Postgres.RunSQL</span></a></span><span>
</span><span id="line-64"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RQCockroachRunSql"><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQCockroachRunSql"><span class="hs-identifier hs-var">RQCockroachRunSql</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Backends.Postgres.DDL.RunSQL.html#RunSQL"><span class="hs-identifier hs-type">Postgres.RunSQL</span></a></span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RQBigqueryRunSql"><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQBigqueryRunSql"><span class="hs-identifier hs-var">RQBigqueryRunSql</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Backends.BigQuery.DDL.RunSQL.html#BigQueryRunSQL"><span class="hs-identifier hs-type">BigQuery.BigQueryRunSQL</span></a></span><span>
</span><span id="line-66"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RQDataConnectorRunSql"><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQDataConnectorRunSql"><span class="hs-identifier hs-var">RQDataConnectorRunSql</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.RQL.Types.DataConnector.html#DataConnectorName"><span class="hs-identifier hs-type">DataConnectorName</span></a></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Backends.DataConnector.Adapter.RunSQL.html#DataConnectorRunSQL"><span class="hs-identifier hs-type">DataConnector.DataConnectorRunSQL</span></a></span><span>
</span><span id="line-67"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RQBigqueryDatabaseInspection"><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQBigqueryDatabaseInspection"><span class="hs-identifier hs-var">RQBigqueryDatabaseInspection</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Backends.BigQuery.DDL.RunSQL.html#BigQueryRunSQL"><span class="hs-identifier hs-type">BigQuery.BigQueryRunSQL</span></a></span><span>
</span><span id="line-68"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RQBulk"><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQBulk"><span class="hs-identifier hs-var">RQBulk</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQLQuery"><span class="hs-identifier hs-type">RQLQuery</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-69"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- | A variant of 'RQBulk' that runs a bulk of read-only queries concurrently.</span><span>
</span><span id="line-70"></span><span>    </span><span class="hs-comment">--   Asserts that queries on this lists are not modifying the schema.</span><span>
</span><span id="line-71"></span><span>    </span><span class="hs-comment">--</span><span>
</span><span id="line-72"></span><span>    </span><span class="hs-comment">--   This is mainly used by the graphql-engine console.</span><span>
</span><span id="line-73"></span><span>    </span><span id="RQConcurrentBulk"><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQConcurrentBulk"><span class="hs-identifier hs-var">RQConcurrentBulk</span></a></span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQLQuery"><span class="hs-identifier hs-type">RQLQuery</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-74"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621688045521"><span id="local-6989586621688045523"><span class="annot"><span class="annottext">(forall x. RQLQuery -&gt; Rep RQLQuery x)
-&gt; (forall x. Rep RQLQuery x -&gt; RQLQuery) -&gt; Generic RQLQuery
forall x. Rep RQLQuery x -&gt; RQLQuery
forall x. RQLQuery -&gt; Rep RQLQuery x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. RQLQuery -&gt; Rep RQLQuery x
from :: forall x. RQLQuery -&gt; Rep RQLQuery x
$cto :: forall x. Rep RQLQuery x -&gt; RQLQuery
to :: forall x. Rep RQLQuery x -&gt; RQLQuery
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span>
</span><span id="line-76"></span><span class="annot"><span class="hs-comment">-- | This instance has been written by hand so that &quot;wildcard&quot; prefixes of _run_sql can be delegated to data connectors.</span></span><span>
</span><span id="line-77"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621688045530"><span id="local-6989586621688045534"><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.FromJSON.html/Data.Aeson.Types.FromJSON.html#FromJSON"><span class="hs-identifier hs-type">FromJSON</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQLQuery"><span class="hs-identifier hs-type">RQLQuery</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-78"></span><span>  </span><span id="local-6989586621688045643"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser RQLQuery
</span><a href="#local-6989586621688045643"><span class="hs-identifier hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; (Object -&gt; Parser RQLQuery) -&gt; Value -&gt; Parser RQLQuery
forall a. String -&gt; (Object -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.FromJSON.html/Data.Aeson.Types.FromJSON.html#withObject"><span class="hs-identifier hs-var">withObject</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;RQLQuery&quot;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688045646"><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621688045646"><span class="hs-identifier hs-var">o</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-79"></span><span>    </span><span id="local-6989586621688045647"><span class="annot"><a href="#local-6989586621688045647"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621688045646"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser Text
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.FromJSON.html/Data.Aeson.Types.FromJSON.html#.%3A"><span class="hs-operator hs-var">.:</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span>
</span><span id="line-80"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span class="annot"><a href="#local-6989586621688045649"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621688045288"><span class="annot"><a href="#local-6989586621688045288"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.FromJSON.html/Data.Aeson.Types.FromJSON.html#FromJSON"><span class="hs-identifier hs-type">FromJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045288"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#Parser"><span class="hs-identifier hs-type">Parser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045288"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-81"></span><span>        </span><span id="local-6989586621688045649"><span class="annot"><a href="#local-6989586621688045649"><span class="hs-identifier hs-var hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Object
</span><a href="#local-6989586621688045646"><span class="hs-identifier hs-var">o</span></a></span><span> </span><span class="annot"><span class="annottext">Object -&gt; Key -&gt; Parser a
forall a. FromJSON a =&gt; Object -&gt; Key -&gt; Parser a
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.FromJSON.html/Data.Aeson.Types.FromJSON.html#.%3A"><span class="hs-operator hs-var">.:</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;args&quot;</span></span><span>
</span><span id="line-82"></span><span>        </span><span id="local-6989586621688045665"><span class="annot"><a href="#local-6989586621688045665"><span class="hs-identifier hs-var hs-var">dcNameFromRunSql</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Maybe Text
</span><span class="hs-identifier hs-var">T.stripSuffix</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;_run_sql&quot;</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Maybe Text)
-&gt; (Text -&gt; Maybe DataConnectorName)
-&gt; Text
-&gt; Maybe DataConnectorName
forall (m :: * -&gt; *) a b c.
Monad m =&gt;
(a -&gt; m b) -&gt; (b -&gt; m c) -&gt; a -&gt; m c
</span><span class="hs-operator hs-var">&gt;=&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe Name
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.Name.html/Language.GraphQL.Draft.Syntax.Name.html#mkName"><span class="hs-identifier hs-var">GQL.mkName</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Maybe Name)
-&gt; (Name -&gt; Maybe DataConnectorName)
-&gt; Text
-&gt; Maybe DataConnectorName
forall (m :: * -&gt; *) a b c.
Monad m =&gt;
(a -&gt; m b) -&gt; (b -&gt; m c) -&gt; a -&gt; m c
</span><span class="hs-operator hs-var">&gt;=&gt;</span></span><span> </span><span class="annot"><span class="annottext">Getting
  (First DataConnectorName)
  (Either String DataConnectorName)
  DataConnectorName
-&gt; Either String DataConnectorName -&gt; Maybe DataConnectorName
forall s (m :: * -&gt; *) a.
MonadReader s m =&gt;
Getting (First a) s a -&gt; m (Maybe a)
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/lens-5.3.2-7ec14d641784087c1f1350eada3cde7884c62d1ab2707daec993ceeca3096d32/share/doc/html/src/Control.Lens.Fold.html/Control.Lens.Fold.html#preview"><span class="hs-identifier hs-var">preview</span></a></span><span> </span><span class="annot"><span class="annottext">Getting
  (First DataConnectorName)
  (Either String DataConnectorName)
  DataConnectorName
forall c a b (p :: * -&gt; * -&gt; *) (f :: * -&gt; *).
(Choice p, Applicative f) =&gt;
p a (f b) -&gt; p (Either c a) (f (Either c b))
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/lens-5.3.2-7ec14d641784087c1f1350eada3cde7884c62d1ab2707daec993ceeca3096d32/share/doc/html/src/Control.Lens.Prism.html/Control.Lens.Prism.html#_Right"><span class="hs-identifier hs-var">_Right</span></a></span><span> </span><span class="annot"><span class="annottext">(Either String DataConnectorName -&gt; Maybe DataConnectorName)
-&gt; (Name -&gt; Either String DataConnectorName)
-&gt; Name
-&gt; Maybe DataConnectorName
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Either String DataConnectorName
</span><a href="Hasura.RQL.Types.DataConnector.html#mkDataConnectorName"><span class="hs-identifier hs-var">mkDataConnectorName</span></a></span><span>
</span><span id="line-83"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621688045647"><span class="hs-identifier hs-type">t</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-84"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;insert&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">InsertQuery -&gt; RQLQuery
</span><a href="Hasura.Server.API.V2Query.html#RQInsert"><span class="hs-identifier hs-var">RQInsert</span></a></span><span> </span><span class="annot"><span class="annottext">(InsertQuery -&gt; RQLQuery) -&gt; Parser InsertQuery -&gt; Parser RQLQuery
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser InsertQuery
forall a. FromJSON a =&gt; Parser a
</span><a href="#local-6989586621688045649"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-85"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;select&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SelectQuery -&gt; RQLQuery
</span><a href="Hasura.Server.API.V2Query.html#RQSelect"><span class="hs-identifier hs-var">RQSelect</span></a></span><span> </span><span class="annot"><span class="annottext">(SelectQuery -&gt; RQLQuery) -&gt; Parser SelectQuery -&gt; Parser RQLQuery
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser SelectQuery
forall a. FromJSON a =&gt; Parser a
</span><a href="#local-6989586621688045649"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-86"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;update&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">UpdateQuery -&gt; RQLQuery
</span><a href="Hasura.Server.API.V2Query.html#RQUpdate"><span class="hs-identifier hs-var">RQUpdate</span></a></span><span> </span><span class="annot"><span class="annottext">(UpdateQuery -&gt; RQLQuery) -&gt; Parser UpdateQuery -&gt; Parser RQLQuery
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser UpdateQuery
forall a. FromJSON a =&gt; Parser a
</span><a href="#local-6989586621688045649"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-87"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;delete&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DeleteQuery -&gt; RQLQuery
</span><a href="Hasura.Server.API.V2Query.html#RQDelete"><span class="hs-identifier hs-var">RQDelete</span></a></span><span> </span><span class="annot"><span class="annottext">(DeleteQuery -&gt; RQLQuery) -&gt; Parser DeleteQuery -&gt; Parser RQLQuery
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser DeleteQuery
forall a. FromJSON a =&gt; Parser a
</span><a href="#local-6989586621688045649"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-88"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;count&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CountQuery -&gt; RQLQuery
</span><a href="Hasura.Server.API.V2Query.html#RQCount"><span class="hs-identifier hs-var">RQCount</span></a></span><span> </span><span class="annot"><span class="annottext">(CountQuery -&gt; RQLQuery) -&gt; Parser CountQuery -&gt; Parser RQLQuery
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser CountQuery
forall a. FromJSON a =&gt; Parser a
</span><a href="#local-6989586621688045649"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-89"></span><span>      </span><span class="hs-comment">-- Optionally, we can specify a `pg_` prefix. This primarily makes some</span><span>
</span><span id="line-90"></span><span>      </span><span class="hs-comment">-- string interpolation easier in the cross-backend tests.</span><span>
</span><span id="line-91"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;run_sql&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RunSQL -&gt; RQLQuery
</span><a href="Hasura.Server.API.V2Query.html#RQRunSql"><span class="hs-identifier hs-var">RQRunSql</span></a></span><span> </span><span class="annot"><span class="annottext">(RunSQL -&gt; RQLQuery) -&gt; Parser RunSQL -&gt; Parser RQLQuery
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser RunSQL
forall a. FromJSON a =&gt; Parser a
</span><a href="#local-6989586621688045649"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-92"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;pg_run_sql&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RunSQL -&gt; RQLQuery
</span><a href="Hasura.Server.API.V2Query.html#RQRunSql"><span class="hs-identifier hs-var">RQRunSql</span></a></span><span> </span><span class="annot"><span class="annottext">(RunSQL -&gt; RQLQuery) -&gt; Parser RunSQL -&gt; Parser RQLQuery
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser RunSQL
forall a. FromJSON a =&gt; Parser a
</span><a href="#local-6989586621688045649"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-93"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;mssql_run_sql&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MSSQLRunSQL -&gt; RQLQuery
</span><a href="Hasura.Server.API.V2Query.html#RQMssqlRunSql"><span class="hs-identifier hs-var">RQMssqlRunSql</span></a></span><span> </span><span class="annot"><span class="annottext">(MSSQLRunSQL -&gt; RQLQuery) -&gt; Parser MSSQLRunSQL -&gt; Parser RQLQuery
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser MSSQLRunSQL
forall a. FromJSON a =&gt; Parser a
</span><a href="#local-6989586621688045649"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-94"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;citus_run_sql&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RunSQL -&gt; RQLQuery
</span><a href="Hasura.Server.API.V2Query.html#RQCitusRunSql"><span class="hs-identifier hs-var">RQCitusRunSql</span></a></span><span> </span><span class="annot"><span class="annottext">(RunSQL -&gt; RQLQuery) -&gt; Parser RunSQL -&gt; Parser RQLQuery
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser RunSQL
forall a. FromJSON a =&gt; Parser a
</span><a href="#local-6989586621688045649"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-95"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;cockroach_run_sql&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RunSQL -&gt; RQLQuery
</span><a href="Hasura.Server.API.V2Query.html#RQCockroachRunSql"><span class="hs-identifier hs-var">RQCockroachRunSql</span></a></span><span> </span><span class="annot"><span class="annottext">(RunSQL -&gt; RQLQuery) -&gt; Parser RunSQL -&gt; Parser RQLQuery
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser RunSQL
forall a. FromJSON a =&gt; Parser a
</span><a href="#local-6989586621688045649"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-96"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;bigquery_run_sql&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BigQueryRunSQL -&gt; RQLQuery
</span><a href="Hasura.Server.API.V2Query.html#RQBigqueryRunSql"><span class="hs-identifier hs-var">RQBigqueryRunSql</span></a></span><span> </span><span class="annot"><span class="annottext">(BigQueryRunSQL -&gt; RQLQuery)
-&gt; Parser BigQueryRunSQL -&gt; Parser RQLQuery
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser BigQueryRunSQL
forall a. FromJSON a =&gt; Parser a
</span><a href="#local-6989586621688045649"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-97"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; Maybe DataConnectorName
</span><a href="#local-6989586621688045665"><span class="hs-identifier hs-var">dcNameFromRunSql</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621688045671"><span class="annot"><span class="annottext">DataConnectorName
</span><a href="#local-6989586621688045671"><span class="hs-identifier hs-var">t'</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DataConnectorName -&gt; DataConnectorRunSQL -&gt; RQLQuery
</span><a href="Hasura.Server.API.V2Query.html#RQDataConnectorRunSql"><span class="hs-identifier hs-var">RQDataConnectorRunSql</span></a></span><span> </span><span class="annot"><span class="annottext">DataConnectorName
</span><a href="#local-6989586621688045671"><span class="hs-identifier hs-var">t'</span></a></span><span> </span><span class="annot"><span class="annottext">(DataConnectorRunSQL -&gt; RQLQuery)
-&gt; Parser DataConnectorRunSQL -&gt; Parser RQLQuery
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser DataConnectorRunSQL
forall a. FromJSON a =&gt; Parser a
</span><a href="#local-6989586621688045649"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-98"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;bigquery_database_inspection&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BigQueryRunSQL -&gt; RQLQuery
</span><a href="Hasura.Server.API.V2Query.html#RQBigqueryDatabaseInspection"><span class="hs-identifier hs-var">RQBigqueryDatabaseInspection</span></a></span><span> </span><span class="annot"><span class="annottext">(BigQueryRunSQL -&gt; RQLQuery)
-&gt; Parser BigQueryRunSQL -&gt; Parser RQLQuery
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser BigQueryRunSQL
forall a. FromJSON a =&gt; Parser a
</span><a href="#local-6989586621688045649"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-99"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;bulk&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[RQLQuery] -&gt; RQLQuery
</span><a href="Hasura.Server.API.V2Query.html#RQBulk"><span class="hs-identifier hs-var">RQBulk</span></a></span><span> </span><span class="annot"><span class="annottext">([RQLQuery] -&gt; RQLQuery) -&gt; Parser [RQLQuery] -&gt; Parser RQLQuery
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser [RQLQuery]
forall a. FromJSON a =&gt; Parser a
</span><a href="#local-6989586621688045649"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-100"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;concurrent_bulk&quot;</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[RQLQuery] -&gt; RQLQuery
</span><a href="Hasura.Server.API.V2Query.html#RQConcurrentBulk"><span class="hs-identifier hs-var">RQConcurrentBulk</span></a></span><span> </span><span class="annot"><span class="annottext">([RQLQuery] -&gt; RQLQuery) -&gt; Parser [RQLQuery] -&gt; Parser RQLQuery
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser [RQLQuery]
forall a. FromJSON a =&gt; Parser a
</span><a href="#local-6989586621688045649"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-101"></span><span>      </span><span class="annot"><span class="annottext">Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; Parser RQLQuery
forall a. String -&gt; Parser a
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Parser RQLQuery) -&gt; String -&gt; Parser RQLQuery
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Unrecognised RQLQuery type: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; String
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; String
</span><span class="hs-identifier hs-var">T.unpack</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621688045647"><span class="hs-identifier hs-var">t</span></a></span><span>
</span><span id="line-102"></span><span>
</span><span id="line-103"></span><span id="local-6989586621688045326"><span class="annot"><a href="Hasura.Server.API.V2Query.html#runQuery"><span class="hs-identifier hs-type">runQuery</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-104"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="annot"><a href="#local-6989586621688045326"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-105"></span><span>    </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/monad-control-1.0.3.1-127c0b1895a90d6faa345827c6b6be6447278996974a93c84184eef9ccf5fbbc/share/doc/html/src/Control.Monad.Trans.Control.html/Control.Monad.Trans.Control.html#MonadBaseControl"><span class="hs-identifier hs-type">MonadBaseControl</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621688045326"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-106"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#QErr"><span class="hs-identifier hs-type">QErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045326"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-107"></span><span>    </span><span class="annot"><a href="Hasura.App.State.html#HasAppEnv"><span class="hs-identifier hs-type">HasAppEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045326"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-108"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.Schema.Cache.Config.html#HasCacheStaticConfig"><span class="hs-identifier hs-type">HasCacheStaticConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045326"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-109"></span><span>    </span><span class="annot"><a href="Hasura.Tracing.Class.html#MonadTrace"><span class="hs-identifier hs-type">Tracing.MonadTrace</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045326"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-110"></span><span>    </span><span class="annot"><a href="Hasura.Metadata.Class.html#MonadMetadataStorage"><span class="hs-identifier hs-type">MonadMetadataStorage</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045326"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-111"></span><span>    </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#MonadResolveSource"><span class="hs-identifier hs-type">MonadResolveSource</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045326"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-112"></span><span>    </span><span class="annot"><a href="Hasura.QueryTags.html#MonadQueryTags"><span class="hs-identifier hs-type">MonadQueryTags</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045326"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-113"></span><span>    </span><span class="annot"><a href="Hasura.Services.html#ProvidesHasuraServices"><span class="hs-identifier hs-type">ProvidesHasuraServices</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045326"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-114"></span><span>    </span><span class="annot"><a href="Hasura.Authentication.User.html#UserInfoM"><span class="hs-identifier hs-type">UserInfoM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045326"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-115"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-116"></span><span>  </span><span class="annot"><a href="Hasura.App.State.html#AppContext"><span class="hs-identifier hs-type">AppContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-117"></span><span>  </span><span class="annot"><a href="Hasura.RQL.DDL.Schema.Cache.Common.html#RebuildableSchemaCache"><span class="hs-identifier hs-type">RebuildableSchemaCache</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-118"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQLQuery"><span class="hs-identifier hs-type">RQLQuery</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-119"></span><span>  </span><span class="annot"><a href="#local-6989586621688045326"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-json-encoding-1.0.0/opt/doc/html/hasura-json-encoding/src/Hasura.EncJSON.html/Hasura.EncJSON.html#EncJSON"><span class="hs-identifier hs-type">EncJSON</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.Schema.Cache.Common.html#RebuildableSchemaCache"><span class="hs-identifier hs-type">RebuildableSchemaCache</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-120"></span><span id="runQuery"><span class="annot"><span class="annottext">runQuery :: forall (m :: * -&gt; *).
(MonadIO m, MonadBaseControl IO m, MonadError QErr m, HasAppEnv m,
 HasCacheStaticConfig m, MonadTrace m, MonadMetadataStorage m,
 MonadResolveSource m, MonadQueryTags m, ProvidesHasuraServices m,
 UserInfoM m) =&gt;
AppContext
-&gt; RebuildableSchemaCache
-&gt; RQLQuery
-&gt; m (EncJSON, RebuildableSchemaCache)
</span><a href="Hasura.Server.API.V2Query.html#runQuery"><span class="hs-identifier hs-var hs-var">runQuery</span></a></span></span><span> </span><span id="local-6989586621688045775"><span class="annot"><span class="annottext">AppContext
</span><a href="#local-6989586621688045775"><span class="hs-identifier hs-var">appContext</span></a></span></span><span> </span><span id="local-6989586621688045776"><span class="annot"><span class="annottext">RebuildableSchemaCache
</span><a href="#local-6989586621688045776"><span class="hs-identifier hs-var">schemaCache</span></a></span></span><span> </span><span id="local-6989586621688045777"><span class="annot"><span class="annottext">RQLQuery
</span><a href="#local-6989586621688045777"><span class="hs-identifier hs-var">rqlQuery</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-121"></span><span>  </span><span class="annot"><a href="Hasura.App.State.html#AppEnv"><span class="hs-identifier hs-type">AppEnv</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621688045779"><span id="local-6989586621688045780"><span id="local-6989586621688045781"><span id="local-6989586621688045782"><span id="local-6989586621688045783"><span id="local-6989586621688045784"><span id="local-6989586621688045785"><span id="local-6989586621688045786"><span id="local-6989586621688045787"><span id="local-6989586621688045788"><span id="local-6989586621688045789"><span id="local-6989586621688045790"><span id="local-6989586621688045791"><span id="local-6989586621688045792"><span id="local-6989586621688045793"><span id="local-6989586621688045794"><span id="local-6989586621688045795"><span id="local-6989586621688045796"><span id="local-6989586621688045797"><span id="local-6989586621688045798"><span id="local-6989586621688045799"><span id="local-6989586621688045800"><span id="local-6989586621688045801"><span id="local-6989586621688045802"><span id="local-6989586621688045803"><span id="local-6989586621688045804"><span id="local-6989586621688045805"><span id="local-6989586621688045806"><span id="local-6989586621688045807"><span id="local-6989586621688045808"><span id="local-6989586621688045809"><span id="local-6989586621688045810"><span id="local-6989586621688045811"><span id="local-6989586621688045812"><span id="local-6989586621688045813"><span class="annot"><a href="#local-6989586621688045779"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m AppEnv
forall (m :: * -&gt; *). HasAppEnv m =&gt; m AppEnv
</span><a href="Hasura.App.State.html#askAppEnv"><span class="hs-identifier hs-var">askAppEnv</span></a></span><span>
</span><span id="line-122"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">when</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621688045790"><span class="hs-identifier hs-type">appEnvEnableReadOnlyMode</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">==</span></span><span> </span><span class="annot"><a href="Hasura.Server.Types.html#ReadOnlyModeEnabled"><span class="hs-identifier hs-type">ReadOnlyModeEnabled</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">&amp;&amp;</span></span><span> </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#queryModifiesUserDB"><span class="hs-identifier hs-type">queryModifiesUserDB</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045777"><span class="hs-identifier hs-type">rqlQuery</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-123"></span><span>    </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-type">throw400</span></a></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#NotSupported"><span class="hs-identifier hs-type">NotSupported</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;Cannot run write queries when read-only mode is enabled&quot;</span></span><span>
</span><span id="line-124"></span><span>
</span><span id="line-125"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621688045856"><span class="annot"><a href="#local-6989586621688045856"><span class="hs-identifier hs-var hs-var">dynamicConfig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AppContext -&gt; CacheDynamicConfig
</span><a href="Hasura.App.State.html#buildCacheDynamicConfig"><span class="hs-identifier hs-var">buildCacheDynamicConfig</span></a></span><span> </span><span class="annot"><span class="annottext">AppContext
</span><a href="#local-6989586621688045775"><span class="hs-identifier hs-var">appContext</span></a></span><span>
</span><span id="line-126"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html#MetadataWithResourceVersion"><span class="hs-identifier hs-type">MetadataWithResourceVersion</span></a></span><span> </span><span id="local-6989586621688045858"><span class="annot"><a href="#local-6989586621688045858"><span class="hs-identifier hs-var">metadata</span></a></span></span><span> </span><span id="local-6989586621688045859"><span class="annot"><a href="#local-6989586621688045859"><span class="hs-identifier hs-var">currentResourceVersion</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Hasura.Tracing.Class.html#newSpan"><span class="hs-identifier hs-type">Tracing.newSpan</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;fetchMetadata&quot;</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#liftEitherM"><span class="hs-identifier hs-type">liftEitherM</span></a></span><span> </span><span class="annot"><a href="Hasura.Metadata.Class.html#fetchMetadata"><span class="hs-identifier hs-type">fetchMetadata</span></a></span><span>
</span><span id="line-127"></span><span>  </span><span class="hs-special">(</span><span class="hs-special">(</span><span id="local-6989586621688045863"><span class="annot"><a href="#local-6989586621688045863"><span class="hs-identifier hs-var">result</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688045864"><span class="annot"><a href="#local-6989586621688045864"><span class="hs-identifier hs-var">updatedMetadata</span></a></span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span id="local-6989586621688045865"><span class="annot"><a href="#local-6989586621688045865"><span class="hs-identifier hs-var">modSchemaCache</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688045866"><span class="annot"><a href="#local-6989586621688045866"><span class="hs-identifier hs-var">invalidations</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688045867"><span class="annot"><a href="#local-6989586621688045867"><span class="hs-identifier hs-var">sourcesIntrospection</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688045868"><span class="annot"><a href="#local-6989586621688045868"><span class="hs-identifier hs-var">schemaRegistryAction</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-128"></span><span>    </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#runQueryM"><span class="hs-identifier hs-type">runQueryM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.App.State.html#acSQLGenCtx"><span class="hs-identifier hs-var">acSQLGenCtx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045775"><span class="hs-identifier hs-type">appContext</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621688045777"><span class="hs-identifier hs-type">rqlQuery</span></a></span><span>
</span><span id="line-129"></span><span>      </span><span class="hs-comment">-- We can use defaults here unconditionally, since there is no MD export function in V2Query</span><span>
</span><span id="line-130"></span><span>      </span><span class="annot"><span class="hs-operator hs-type">&amp;</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.Build.html#runMetadataT"><span class="hs-identifier hs-type">runMetadataT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045858"><span class="hs-identifier hs-type">metadata</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.App.State.html#acMetadataDefaults"><span class="hs-identifier hs-var">acMetadataDefaults</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045775"><span class="hs-identifier hs-type">appContext</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-131"></span><span>      </span><span class="annot"><span class="hs-operator hs-type">&amp;</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.Schema.Cache.html#runCacheRWT"><span class="hs-identifier hs-type">runCacheRWT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045856"><span class="hs-identifier hs-type">dynamicConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045776"><span class="hs-identifier hs-type">schemaCache</span></a></span><span>
</span><span id="line-132"></span><span>  </span><span class="hs-keyword">if</span><span> </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#queryModifiesSchema"><span class="hs-identifier hs-type">queryModifiesSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045777"><span class="hs-identifier hs-type">rqlQuery</span></a></span><span>
</span><span id="line-133"></span><span>    </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621688045787"><span class="hs-identifier hs-type">appEnvEnableMaintenanceMode</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-134"></span><span>      </span><span class="annot"><span class="annottext">MaintenanceMode ()
</span><a href="Hasura.Server.Types.html#MaintenanceModeDisabled"><span class="hs-identifier hs-var">MaintenanceModeDisabled</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-135"></span><span>        </span><span class="hs-comment">-- set modified metadata in storage</span><span>
</span><span id="line-136"></span><span>        </span><span id="local-6989586621688045876"><span class="annot"><a href="#local-6989586621688045876"><span class="hs-identifier hs-var">newResourceVersion</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-137"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; m MetadataResourceVersion -&gt; m MetadataResourceVersion
forall (m :: * -&gt; *) a.
(MonadIO m, MonadTrace m) =&gt;
Text -&gt; m a -&gt; m a
</span><a href="Hasura.Tracing.Class.html#newSpan"><span class="hs-identifier hs-var">Tracing.newSpan</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;setMetadata&quot;</span></span><span>
</span><span id="line-138"></span><span>            </span><span class="annot"><span class="annottext">(m MetadataResourceVersion -&gt; m MetadataResourceVersion)
-&gt; m MetadataResourceVersion -&gt; m MetadataResourceVersion
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">m (Either QErr MetadataResourceVersion)
-&gt; m MetadataResourceVersion
forall e (m :: * -&gt; *) a. MonadError e m =&gt; m (Either e a) -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#liftEitherM"><span class="hs-identifier hs-var">liftEitherM</span></a></span><span>
</span><span id="line-139"></span><span>            </span><span class="annot"><span class="annottext">(m (Either QErr MetadataResourceVersion)
 -&gt; m MetadataResourceVersion)
-&gt; m (Either QErr MetadataResourceVersion)
-&gt; m MetadataResourceVersion
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MetadataResourceVersion
-&gt; Metadata -&gt; m (Either QErr MetadataResourceVersion)
forall (m :: * -&gt; *).
MonadMetadataStorage m =&gt;
MetadataResourceVersion
-&gt; Metadata -&gt; m (Either QErr MetadataResourceVersion)
</span><a href="Hasura.Metadata.Class.html#setMetadata"><span class="hs-identifier hs-var">setMetadata</span></a></span><span> </span><span class="annot"><span class="annottext">MetadataResourceVersion
</span><a href="#local-6989586621688045859"><span class="hs-identifier hs-var">currentResourceVersion</span></a></span><span> </span><span class="annot"><span class="annottext">Metadata
</span><a href="#local-6989586621688045864"><span class="hs-identifier hs-var">updatedMetadata</span></a></span><span>
</span><span id="line-140"></span><span>
</span><span id="line-141"></span><span>        </span><span class="hs-comment">-- notify schema cache sync</span><span>
</span><span id="line-142"></span><span>        </span><span class="annot"><a href="Hasura.Tracing.Class.html#newSpan"><span class="hs-identifier hs-type">Tracing.newSpan</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;notifySchemaCacheSync&quot;</span></span><span>
</span><span id="line-143"></span><span>          </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#liftEitherM"><span class="hs-identifier hs-type">liftEitherM</span></a></span><span>
</span><span id="line-144"></span><span>          </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Hasura.Metadata.Class.html#notifySchemaCacheSync"><span class="hs-identifier hs-type">notifySchemaCacheSync</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045876"><span class="hs-identifier hs-type">newResourceVersion</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045786"><span class="hs-identifier hs-type">appEnvInstanceId</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045866"><span class="hs-identifier hs-type">invalidations</span></a></span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621688045879"><span class="annot"><a href="#local-6989586621688045879"><span class="hs-identifier hs-var">modSchemaCache'</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-147"></span><span>          </span><span class="annot"><a href="Hasura.Tracing.Class.html#newSpan"><span class="hs-identifier hs-type">Tracing.newSpan</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;setMetadataResourceVersionInSchemaCache&quot;</span></span><span>
</span><span id="line-148"></span><span>            </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.Build.html#setMetadataResourceVersionInSchemaCache"><span class="hs-identifier hs-type">setMetadataResourceVersionInSchemaCache</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045876"><span class="hs-identifier hs-type">newResourceVersion</span></a></span><span>
</span><span id="line-149"></span><span>            </span><span class="annot"><span class="hs-operator hs-type">&amp;</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.Schema.Cache.html#runCacheRWT"><span class="hs-identifier hs-type">runCacheRWT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045856"><span class="hs-identifier hs-type">dynamicConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045865"><span class="hs-identifier hs-type">modSchemaCache</span></a></span><span>
</span><span id="line-150"></span><span>
</span><span id="line-151"></span><span>        </span><span class="hs-comment">-- save sources introspection to stored-introspection DB</span><span>
</span><span id="line-152"></span><span>        </span><span class="annot"><a href="Hasura.Tracing.Class.html#newSpan"><span class="hs-identifier hs-type">Tracing.newSpan</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;storeSourcesIntrospection&quot;</span></span><span>
</span><span id="line-153"></span><span>          </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.Schema.Cache.html#saveSourcesIntrospection"><span class="hs-identifier hs-type">saveSourcesIntrospection</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.App.State.html#_lsLogger"><span class="hs-identifier hs-var">_lsLogger</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045784"><span class="hs-identifier hs-type">appEnvLoggers</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621688045867"><span class="hs-identifier hs-type">sourcesIntrospection</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045876"><span class="hs-identifier hs-type">newResourceVersion</span></a></span><span>
</span><span id="line-154"></span><span>
</span><span id="line-155"></span><span>        </span><span class="hs-comment">-- run schema registry action</span><span>
</span><span id="line-156"></span><span>        </span><span class="annot"><a href="Hasura.Tracing.Class.html#newSpan"><span class="hs-identifier hs-type">Tracing.newSpan</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;runSchemaRegistryAction&quot;</span></span><span>
</span><span id="line-157"></span><span>          </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">for_</span></span><span> </span><span class="annot"><a href="#local-6989586621688045868"><span class="hs-identifier hs-type">schemaRegistryAction</span></a></span><span>
</span><span id="line-158"></span><span>          </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621688045884"><span class="annot"><span class="annottext">MetadataResourceVersion
-&gt; [InconsistentMetadata] -&gt; Metadata -&gt; IO ()
</span><a href="#local-6989586621688045884"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-159"></span><span>            </span><span class="annot"><span class="annottext">IO () -&gt; m ()
forall a. IO a -&gt; m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; m ()) -&gt; IO () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MetadataResourceVersion
-&gt; [InconsistentMetadata] -&gt; Metadata -&gt; IO ()
</span><a href="#local-6989586621688045884"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="annot"><span class="annottext">MetadataResourceVersion
</span><a href="#local-6989586621688045876"><span class="hs-identifier hs-var">newResourceVersion</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SchemaCache -&gt; [InconsistentMetadata]
</span><a href="Hasura.RQL.Types.SchemaCache.html#scInconsistentObjs"><span class="hs-identifier hs-var">scInconsistentObjs</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RebuildableSchemaCache -&gt; SchemaCache
</span><a href="Hasura.RQL.DDL.Schema.Cache.Common.html#lastBuiltSchemaCache"><span class="hs-identifier hs-var">lastBuiltSchemaCache</span></a></span><span> </span><span class="annot"><span class="annottext">RebuildableSchemaCache
</span><a href="#local-6989586621688045879"><span class="hs-identifier hs-var">modSchemaCache'</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Metadata
</span><a href="#local-6989586621688045864"><span class="hs-identifier hs-var">updatedMetadata</span></a></span><span>
</span><span id="line-160"></span><span>
</span><span id="line-161"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621688045863"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621688045879"><span class="hs-identifier hs-type">modSchemaCache'</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-162"></span><span>      </span><span class="annot"><a href="Hasura.Server.Types.html#MaintenanceModeEnabled"><span class="hs-identifier hs-type">MaintenanceModeEnabled</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-163"></span><span>        </span><span class="annot"><span class="annottext">Text -&gt; m (EncJSON, RebuildableSchemaCache)
forall (m :: * -&gt; *) a. QErrM m =&gt; Text -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#throw500"><span class="hs-identifier hs-var">throw500</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;metadata cannot be modified in maintenance mode&quot;</span></span><span>
</span><span id="line-164"></span><span>    </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621688045863"><span class="hs-identifier hs-type">result</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621688045865"><span class="hs-identifier hs-type">modSchemaCache</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-165"></span><span>
</span><span id="line-166"></span><span class="annot"><a href="Hasura.Server.API.V2Query.html#queryModifiesSchema"><span class="hs-identifier hs-type">queryModifiesSchema</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQLQuery"><span class="hs-identifier hs-type">RQLQuery</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-167"></span><span id="queryModifiesSchema"><span class="annot"><span class="annottext">queryModifiesSchema :: RQLQuery -&gt; Bool
</span><a href="Hasura.Server.API.V2Query.html#queryModifiesSchema"><span class="hs-identifier hs-var hs-var">queryModifiesSchema</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-168"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQInsert"><span class="hs-identifier hs-type">RQInsert</span></a></span><span> </span><span class="annot"><span class="annottext">InsertQuery
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-169"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQSelect"><span class="hs-identifier hs-type">RQSelect</span></a></span><span> </span><span class="annot"><span class="annottext">SelectQuery
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-170"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQUpdate"><span class="hs-identifier hs-type">RQUpdate</span></a></span><span> </span><span class="annot"><span class="annottext">UpdateQuery
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-171"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQDelete"><span class="hs-identifier hs-type">RQDelete</span></a></span><span> </span><span class="annot"><span class="annottext">DeleteQuery
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-172"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQCount"><span class="hs-identifier hs-type">RQCount</span></a></span><span> </span><span class="annot"><span class="annottext">CountQuery
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-173"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQRunSql"><span class="hs-identifier hs-type">RQRunSql</span></a></span><span> </span><span id="local-6989586621688045889"><span class="annot"><span class="annottext">RunSQL
</span><a href="#local-6989586621688045889"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RunSQL -&gt; Bool
</span><a href="Hasura.Backends.Postgres.DDL.RunSQL.html#isSchemaCacheBuildRequiredRunSQL"><span class="hs-identifier hs-var">Postgres.isSchemaCacheBuildRequiredRunSQL</span></a></span><span> </span><span class="annot"><span class="annottext">RunSQL
</span><a href="#local-6989586621688045889"><span class="hs-identifier hs-var">q</span></a></span><span>
</span><span id="line-174"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQCitusRunSql"><span class="hs-identifier hs-type">RQCitusRunSql</span></a></span><span> </span><span id="local-6989586621688045891"><span class="annot"><span class="annottext">RunSQL
</span><a href="#local-6989586621688045891"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RunSQL -&gt; Bool
</span><a href="Hasura.Backends.Postgres.DDL.RunSQL.html#isSchemaCacheBuildRequiredRunSQL"><span class="hs-identifier hs-var">Postgres.isSchemaCacheBuildRequiredRunSQL</span></a></span><span> </span><span class="annot"><span class="annottext">RunSQL
</span><a href="#local-6989586621688045891"><span class="hs-identifier hs-var">q</span></a></span><span>
</span><span id="line-175"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQCockroachRunSql"><span class="hs-identifier hs-type">RQCockroachRunSql</span></a></span><span> </span><span id="local-6989586621688045892"><span class="annot"><span class="annottext">RunSQL
</span><a href="#local-6989586621688045892"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">RunSQL -&gt; Bool
</span><a href="Hasura.Backends.Postgres.DDL.RunSQL.html#isSchemaCacheBuildRequiredRunSQL"><span class="hs-identifier hs-var">Postgres.isSchemaCacheBuildRequiredRunSQL</span></a></span><span> </span><span class="annot"><span class="annottext">RunSQL
</span><a href="#local-6989586621688045892"><span class="hs-identifier hs-var">q</span></a></span><span>
</span><span id="line-176"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQMssqlRunSql"><span class="hs-identifier hs-type">RQMssqlRunSql</span></a></span><span> </span><span id="local-6989586621688045893"><span class="annot"><span class="annottext">MSSQLRunSQL
</span><a href="#local-6989586621688045893"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MSSQLRunSQL -&gt; Bool
</span><a href="Hasura.Backends.MSSQL.DDL.RunSQL.html#isSchemaCacheBuildRequiredRunSQL"><span class="hs-identifier hs-var">MSSQL.isSchemaCacheBuildRequiredRunSQL</span></a></span><span> </span><span class="annot"><span class="annottext">MSSQLRunSQL
</span><a href="#local-6989586621688045893"><span class="hs-identifier hs-var">q</span></a></span><span>
</span><span id="line-177"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQBigqueryRunSql"><span class="hs-identifier hs-type">RQBigqueryRunSql</span></a></span><span> </span><span class="annot"><span class="annottext">BigQueryRunSQL
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-178"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQDataConnectorRunSql"><span class="hs-identifier hs-type">RQDataConnectorRunSql</span></a></span><span> </span><span class="annot"><span class="annottext">DataConnectorName
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">DataConnectorRunSQL
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-179"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQBigqueryDatabaseInspection"><span class="hs-identifier hs-type">RQBigqueryDatabaseInspection</span></a></span><span> </span><span class="annot"><span class="annottext">BigQueryRunSQL
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-180"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQBulk"><span class="hs-identifier hs-type">RQBulk</span></a></span><span> </span><span id="local-6989586621688045895"><span class="annot"><span class="annottext">[RQLQuery]
</span><a href="#local-6989586621688045895"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(RQLQuery -&gt; Bool) -&gt; [RQLQuery] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="annot"><span class="annottext">RQLQuery -&gt; Bool
</span><a href="Hasura.Server.API.V2Query.html#queryModifiesSchema"><span class="hs-identifier hs-var">queryModifiesSchema</span></a></span><span> </span><span class="annot"><span class="annottext">[RQLQuery]
</span><a href="#local-6989586621688045895"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-181"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQConcurrentBulk"><span class="hs-identifier hs-type">RQConcurrentBulk</span></a></span><span> </span><span id="local-6989586621688045897"><span class="annot"><span class="annottext">[RQLQuery]
</span><a href="#local-6989586621688045897"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(RQLQuery -&gt; Bool) -&gt; [RQLQuery] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="annot"><span class="annottext">RQLQuery -&gt; Bool
</span><a href="Hasura.Server.API.V2Query.html#queryModifiesSchema"><span class="hs-identifier hs-var">queryModifiesSchema</span></a></span><span> </span><span class="annot"><span class="annottext">[RQLQuery]
</span><a href="#local-6989586621688045897"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-182"></span><span>
</span><span id="line-183"></span><span id="local-6989586621688045424"><span class="annot"><a href="Hasura.Server.API.V2Query.html#runQueryM"><span class="hs-identifier hs-type">runQueryM</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-184"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#QErr"><span class="hs-identifier hs-type">QErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045424"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-185"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="annot"><a href="#local-6989586621688045424"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-186"></span><span>    </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/monad-control-1.0.3.1-127c0b1895a90d6faa345827c6b6be6447278996974a93c84184eef9ccf5fbbc/share/doc/html/src/Control.Monad.Trans.Control.html/Control.Monad.Trans.Control.html#MonadBaseControl"><span class="hs-identifier hs-type">MonadBaseControl</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621688045424"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-187"></span><span>    </span><span class="annot"><a href="Hasura.Authentication.User.html#UserInfoM"><span class="hs-identifier hs-type">UserInfoM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045424"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-188"></span><span>    </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.Build.html#CacheRWM"><span class="hs-identifier hs-type">CacheRWM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045424"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-189"></span><span>    </span><span class="annot"><a href="Hasura.Tracing.Class.html#MonadTrace"><span class="hs-identifier hs-type">Tracing.MonadTrace</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045424"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-190"></span><span>    </span><span class="annot"><a href="Hasura.RQL.Types.Metadata.html#MetadataM"><span class="hs-identifier hs-type">MetadataM</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045424"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-191"></span><span>    </span><span class="annot"><a href="Hasura.QueryTags.html#MonadQueryTags"><span class="hs-identifier hs-type">MonadQueryTags</span></a></span><span> </span><span class="annot"><a href="#local-6989586621688045424"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-192"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-193"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#SQLGenCtx"><span class="hs-identifier hs-type">SQLGenCtx</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-194"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQLQuery"><span class="hs-identifier hs-type">RQLQuery</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-195"></span><span>  </span><span class="annot"><a href="#local-6989586621688045424"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-json-encoding-1.0.0/opt/doc/html/hasura-json-encoding/src/Hasura.EncJSON.html/Hasura.EncJSON.html#EncJSON"><span class="hs-identifier hs-type">EncJSON</span></a></span></span><span>
</span><span id="line-196"></span><span id="runQueryM"><span class="annot"><span class="annottext">runQueryM :: forall (m :: * -&gt; *).
(MonadError QErr m, MonadIO m, MonadBaseControl IO m, UserInfoM m,
 CacheRWM m, MonadTrace m, MetadataM m, MonadQueryTags m) =&gt;
SQLGenCtx -&gt; RQLQuery -&gt; m EncJSON
</span><a href="Hasura.Server.API.V2Query.html#runQueryM"><span class="hs-identifier hs-var hs-var">runQueryM</span></a></span></span><span> </span><span id="local-6989586621688046147"><span class="annot"><span class="annottext">SQLGenCtx
</span><a href="#local-6989586621688046147"><span class="hs-identifier hs-var">sqlGen</span></a></span></span><span> </span><span id="local-6989586621688046148"><span class="annot"><span class="annottext">RQLQuery
</span><a href="#local-6989586621688046148"><span class="hs-identifier hs-var">rq</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; m EncJSON -&gt; m EncJSON
forall (m :: * -&gt; *) a.
(MonadIO m, MonadTrace m) =&gt;
Text -&gt; m a -&gt; m a
</span><a href="Hasura.Tracing.Class.html#newSpan"><span class="hs-identifier hs-var">Tracing.newSpan</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; String -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RQLQuery -&gt; String
forall a. (HasConstructor (Rep a), Generic a) =&gt; a -&gt; String
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/GHC.Generics.Extended.html/GHC.Generics.Extended.html#constrName"><span class="hs-identifier hs-var">constrName</span></a></span><span> </span><span class="annot"><span class="annottext">RQLQuery
</span><a href="#local-6989586621688046148"><span class="hs-identifier hs-var">rq</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(m EncJSON -&gt; m EncJSON) -&gt; m EncJSON -&gt; m EncJSON
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RQLQuery
</span><a href="#local-6989586621688046148"><span class="hs-identifier hs-var">rq</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-197"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQInsert"><span class="hs-identifier hs-type">RQInsert</span></a></span><span> </span><span id="local-6989586621688046150"><span class="annot"><span class="annottext">InsertQuery
</span><a href="#local-6989586621688046150"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SQLGenCtx -&gt; InsertQuery -&gt; m EncJSON
forall (m :: * -&gt; *).
(QErrM m, UserInfoM m, CacheRM m, MonadIO m, MonadTrace m,
 MonadBaseControl IO m, MetadataM m) =&gt;
SQLGenCtx -&gt; InsertQuery -&gt; m EncJSON
</span><a href="Hasura.RQL.DML.Insert.html#runInsert"><span class="hs-identifier hs-var">runInsert</span></a></span><span> </span><span class="annot"><span class="annottext">SQLGenCtx
</span><a href="#local-6989586621688046147"><span class="hs-identifier hs-var">sqlGen</span></a></span><span> </span><span class="annot"><span class="annottext">InsertQuery
</span><a href="#local-6989586621688046150"><span class="hs-identifier hs-var">q</span></a></span><span>
</span><span id="line-198"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQSelect"><span class="hs-identifier hs-type">RQSelect</span></a></span><span> </span><span id="local-6989586621688046152"><span class="annot"><span class="annottext">SelectQuery
</span><a href="#local-6989586621688046152"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SQLGenCtx -&gt; SelectQuery -&gt; m EncJSON
forall (m :: * -&gt; *).
(QErrM m, UserInfoM m, CacheRM m, MonadIO m, MonadBaseControl IO m,
 MonadTrace m, MetadataM m) =&gt;
SQLGenCtx -&gt; SelectQuery -&gt; m EncJSON
</span><a href="Hasura.RQL.DML.Select.html#runSelect"><span class="hs-identifier hs-var">runSelect</span></a></span><span> </span><span class="annot"><span class="annottext">SQLGenCtx
</span><a href="#local-6989586621688046147"><span class="hs-identifier hs-var">sqlGen</span></a></span><span> </span><span class="annot"><span class="annottext">SelectQuery
</span><a href="#local-6989586621688046152"><span class="hs-identifier hs-var">q</span></a></span><span>
</span><span id="line-199"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQUpdate"><span class="hs-identifier hs-type">RQUpdate</span></a></span><span> </span><span id="local-6989586621688046154"><span class="annot"><span class="annottext">UpdateQuery
</span><a href="#local-6989586621688046154"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SQLGenCtx -&gt; UpdateQuery -&gt; m EncJSON
forall (m :: * -&gt; *).
(QErrM m, UserInfoM m, CacheRM m, MonadBaseControl IO m, MonadIO m,
 MonadTrace m, MetadataM m) =&gt;
SQLGenCtx -&gt; UpdateQuery -&gt; m EncJSON
</span><a href="Hasura.RQL.DML.Update.html#runUpdate"><span class="hs-identifier hs-var">runUpdate</span></a></span><span> </span><span class="annot"><span class="annottext">SQLGenCtx
</span><a href="#local-6989586621688046147"><span class="hs-identifier hs-var">sqlGen</span></a></span><span> </span><span class="annot"><span class="annottext">UpdateQuery
</span><a href="#local-6989586621688046154"><span class="hs-identifier hs-var">q</span></a></span><span>
</span><span id="line-200"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQDelete"><span class="hs-identifier hs-type">RQDelete</span></a></span><span> </span><span id="local-6989586621688046156"><span class="annot"><span class="annottext">DeleteQuery
</span><a href="#local-6989586621688046156"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">SQLGenCtx -&gt; DeleteQuery -&gt; m EncJSON
forall (m :: * -&gt; *).
(QErrM m, UserInfoM m, CacheRM m, MonadIO m, MonadTrace m,
 MonadBaseControl IO m, MetadataM m) =&gt;
SQLGenCtx -&gt; DeleteQuery -&gt; m EncJSON
</span><a href="Hasura.RQL.DML.Delete.html#runDelete"><span class="hs-identifier hs-var">runDelete</span></a></span><span> </span><span class="annot"><span class="annottext">SQLGenCtx
</span><a href="#local-6989586621688046147"><span class="hs-identifier hs-var">sqlGen</span></a></span><span> </span><span class="annot"><span class="annottext">DeleteQuery
</span><a href="#local-6989586621688046156"><span class="hs-identifier hs-var">q</span></a></span><span>
</span><span id="line-201"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQCount"><span class="hs-identifier hs-type">RQCount</span></a></span><span> </span><span id="local-6989586621688046158"><span class="annot"><span class="annottext">CountQuery
</span><a href="#local-6989586621688046158"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CountQuery -&gt; m EncJSON
forall (m :: * -&gt; *).
(QErrM m, UserInfoM m, CacheRM m, MonadIO m, MonadBaseControl IO m,
 MonadTrace m, MetadataM m) =&gt;
CountQuery -&gt; m EncJSON
</span><a href="Hasura.RQL.DML.Count.html#runCount"><span class="hs-identifier hs-var">runCount</span></a></span><span> </span><span class="annot"><span class="annottext">CountQuery
</span><a href="#local-6989586621688046158"><span class="hs-identifier hs-var">q</span></a></span><span>
</span><span id="line-202"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQRunSql"><span class="hs-identifier hs-type">RQRunSql</span></a></span><span> </span><span id="local-6989586621688046160"><span class="annot"><span class="annottext">RunSQL
</span><a href="#local-6989586621688046160"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (pgKind :: PostgresKind) (m :: * -&gt; *).
(BackendMetadata ('Postgres pgKind), ToMetadataFetchQuery pgKind,
 FetchTableMetadata pgKind, FetchFunctionMetadata pgKind,
 CacheRWM m, MetadataM m, MonadBaseControl IO m, MonadError QErr m,
 MonadIO m, MonadTrace m, UserInfoM m) =&gt;
SQLGenCtx -&gt; RunSQL -&gt; m EncJSON
</span><a href="Hasura.Backends.Postgres.DDL.RunSQL.html#runRunSQL"><span class="hs-identifier hs-var">Postgres.runRunSQL</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.RQL.Types.BackendType.html#Vanilla"><span class="hs-identifier hs-type">Vanilla</span></a></span><span> </span><span class="annot"><span class="annottext">SQLGenCtx
</span><a href="#local-6989586621688046147"><span class="hs-identifier hs-var">sqlGen</span></a></span><span> </span><span class="annot"><span class="annottext">RunSQL
</span><a href="#local-6989586621688046160"><span class="hs-identifier hs-var">q</span></a></span><span>
</span><span id="line-203"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQMssqlRunSql"><span class="hs-identifier hs-type">RQMssqlRunSql</span></a></span><span> </span><span id="local-6989586621688046162"><span class="annot"><span class="annottext">MSSQLRunSQL
</span><a href="#local-6989586621688046162"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">MSSQLRunSQL -&gt; m EncJSON
forall (m :: * -&gt; *).
(MonadIO m, MonadBaseControl IO m, CacheRWM m, MonadError QErr m,
 MetadataM m) =&gt;
MSSQLRunSQL -&gt; m EncJSON
</span><a href="Hasura.Backends.MSSQL.DDL.RunSQL.html#runSQL"><span class="hs-identifier hs-var">MSSQL.runSQL</span></a></span><span> </span><span class="annot"><span class="annottext">MSSQLRunSQL
</span><a href="#local-6989586621688046162"><span class="hs-identifier hs-var">q</span></a></span><span>
</span><span id="line-204"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQCitusRunSql"><span class="hs-identifier hs-type">RQCitusRunSql</span></a></span><span> </span><span id="local-6989586621688046164"><span class="annot"><span class="annottext">RunSQL
</span><a href="#local-6989586621688046164"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (pgKind :: PostgresKind) (m :: * -&gt; *).
(BackendMetadata ('Postgres pgKind), ToMetadataFetchQuery pgKind,
 FetchTableMetadata pgKind, FetchFunctionMetadata pgKind,
 CacheRWM m, MetadataM m, MonadBaseControl IO m, MonadError QErr m,
 MonadIO m, MonadTrace m, UserInfoM m) =&gt;
SQLGenCtx -&gt; RunSQL -&gt; m EncJSON
</span><a href="Hasura.Backends.Postgres.DDL.RunSQL.html#runRunSQL"><span class="hs-identifier hs-var">Postgres.runRunSQL</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.RQL.Types.BackendType.html#Citus"><span class="hs-identifier hs-type">Citus</span></a></span><span> </span><span class="annot"><span class="annottext">SQLGenCtx
</span><a href="#local-6989586621688046147"><span class="hs-identifier hs-var">sqlGen</span></a></span><span> </span><span class="annot"><span class="annottext">RunSQL
</span><a href="#local-6989586621688046164"><span class="hs-identifier hs-var">q</span></a></span><span>
</span><span id="line-205"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQCockroachRunSql"><span class="hs-identifier hs-type">RQCockroachRunSql</span></a></span><span> </span><span id="local-6989586621688046165"><span class="annot"><span class="annottext">RunSQL
</span><a href="#local-6989586621688046165"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (pgKind :: PostgresKind) (m :: * -&gt; *).
(BackendMetadata ('Postgres pgKind), ToMetadataFetchQuery pgKind,
 FetchTableMetadata pgKind, FetchFunctionMetadata pgKind,
 CacheRWM m, MetadataM m, MonadBaseControl IO m, MonadError QErr m,
 MonadIO m, MonadTrace m, UserInfoM m) =&gt;
SQLGenCtx -&gt; RunSQL -&gt; m EncJSON
</span><a href="Hasura.Backends.Postgres.DDL.RunSQL.html#runRunSQL"><span class="hs-identifier hs-var">Postgres.runRunSQL</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.RQL.Types.BackendType.html#Cockroach"><span class="hs-identifier hs-type">Cockroach</span></a></span><span> </span><span class="annot"><span class="annottext">SQLGenCtx
</span><a href="#local-6989586621688046147"><span class="hs-identifier hs-var">sqlGen</span></a></span><span> </span><span class="annot"><span class="annottext">RunSQL
</span><a href="#local-6989586621688046165"><span class="hs-identifier hs-var">q</span></a></span><span>
</span><span id="line-206"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQBigqueryRunSql"><span class="hs-identifier hs-type">RQBigqueryRunSql</span></a></span><span> </span><span id="local-6989586621688046166"><span class="annot"><span class="annottext">BigQueryRunSQL
</span><a href="#local-6989586621688046166"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BigQueryRunSQL -&gt; m EncJSON
forall (m :: * -&gt; *).
(MonadIO m, CacheRWM m, MonadError QErr m, MetadataM m) =&gt;
BigQueryRunSQL -&gt; m EncJSON
</span><a href="Hasura.Backends.BigQuery.DDL.RunSQL.html#runSQL"><span class="hs-identifier hs-var">BigQuery.runSQL</span></a></span><span> </span><span class="annot"><span class="annottext">BigQueryRunSQL
</span><a href="#local-6989586621688046166"><span class="hs-identifier hs-var">q</span></a></span><span>
</span><span id="line-207"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQDataConnectorRunSql"><span class="hs-identifier hs-type">RQDataConnectorRunSql</span></a></span><span> </span><span id="local-6989586621688046168"><span class="annot"><span class="annottext">DataConnectorName
</span><a href="#local-6989586621688046168"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621688046169"><span class="annot"><span class="annottext">DataConnectorRunSQL
</span><a href="#local-6989586621688046169"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">DataConnectorName -&gt; DataConnectorRunSQL -&gt; m EncJSON
forall (m :: * -&gt; *).
(MonadIO m, CacheRWM m, MonadError QErr m, MetadataM m) =&gt;
DataConnectorName -&gt; DataConnectorRunSQL -&gt; m EncJSON
</span><a href="Hasura.Backends.DataConnector.Adapter.RunSQL.html#runSQL"><span class="hs-identifier hs-var">DataConnector.runSQL</span></a></span><span> </span><span class="annot"><span class="annottext">DataConnectorName
</span><a href="#local-6989586621688046168"><span class="hs-identifier hs-var">t</span></a></span><span> </span><span class="annot"><span class="annottext">DataConnectorRunSQL
</span><a href="#local-6989586621688046169"><span class="hs-identifier hs-var">q</span></a></span><span>
</span><span id="line-208"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQBigqueryDatabaseInspection"><span class="hs-identifier hs-type">RQBigqueryDatabaseInspection</span></a></span><span> </span><span id="local-6989586621688046171"><span class="annot"><span class="annottext">BigQueryRunSQL
</span><a href="#local-6989586621688046171"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BigQueryRunSQL -&gt; m EncJSON
forall (m :: * -&gt; *).
(MonadIO m, CacheRWM m, MonadError QErr m, MetadataM m) =&gt;
BigQueryRunSQL -&gt; m EncJSON
</span><a href="Hasura.Backends.BigQuery.DDL.RunSQL.html#runDatabaseInspection"><span class="hs-identifier hs-var">BigQuery.runDatabaseInspection</span></a></span><span> </span><span class="annot"><span class="annottext">BigQueryRunSQL
</span><a href="#local-6989586621688046171"><span class="hs-identifier hs-var">q</span></a></span><span>
</span><span id="line-209"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQBulk"><span class="hs-identifier hs-type">RQBulk</span></a></span><span> </span><span id="local-6989586621688046173"><span class="annot"><span class="annottext">[RQLQuery]
</span><a href="#local-6989586621688046173"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[EncJSON] -&gt; EncJSON
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-json-encoding-1.0.0/opt/doc/html/hasura-json-encoding/src/Hasura.EncJSON.html/Hasura.EncJSON.html#encJFromList"><span class="hs-identifier hs-var">encJFromList</span></a></span><span> </span><span class="annot"><span class="annottext">([EncJSON] -&gt; EncJSON) -&gt; m [EncJSON] -&gt; m EncJSON
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(RQLQuery -&gt; m EncJSON) -&gt; [RQLQuery] -&gt; m [EncJSON]
forall (m :: * -&gt; *) a b. QErrM m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#indexedMapM"><span class="hs-identifier hs-var">indexedMapM</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SQLGenCtx -&gt; RQLQuery -&gt; m EncJSON
forall (m :: * -&gt; *).
(MonadError QErr m, MonadIO m, MonadBaseControl IO m, UserInfoM m,
 CacheRWM m, MonadTrace m, MetadataM m, MonadQueryTags m) =&gt;
SQLGenCtx -&gt; RQLQuery -&gt; m EncJSON
</span><a href="Hasura.Server.API.V2Query.html#runQueryM"><span class="hs-identifier hs-var">runQueryM</span></a></span><span> </span><span class="annot"><span class="annottext">SQLGenCtx
</span><a href="#local-6989586621688046147"><span class="hs-identifier hs-var">sqlGen</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[RQLQuery]
</span><a href="#local-6989586621688046173"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-210"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQConcurrentBulk"><span class="hs-identifier hs-type">RQConcurrentBulk</span></a></span><span> </span><span id="local-6989586621688046176"><span class="annot"><span class="annottext">[RQLQuery]
</span><a href="#local-6989586621688046176"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-211"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; m () -&gt; m ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">when</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RQLQuery -&gt; Bool
</span><a href="Hasura.Server.API.V2Query.html#queryModifiesSchema"><span class="hs-identifier hs-var">queryModifiesSchema</span></a></span><span> </span><span class="annot"><span class="annottext">RQLQuery
</span><a href="#local-6989586621688046148"><span class="hs-identifier hs-var">rq</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-212"></span><span>      </span><span class="annot"><span class="annottext">(m () -&gt; m ()) -&gt; m () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; m ()
forall (m :: * -&gt; *) a. QErrM m =&gt; Text -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#throw500"><span class="hs-identifier hs-var">throw500</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Only read-only queries are allowed in a concurrent_bulk&quot;</span></span><span>
</span><span id="line-213"></span><span>    </span><span class="annot"><span class="annottext">[EncJSON] -&gt; EncJSON
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-json-encoding-1.0.0/opt/doc/html/hasura-json-encoding/src/Hasura.EncJSON.html/Hasura.EncJSON.html#encJFromList"><span class="hs-identifier hs-var">encJFromList</span></a></span><span> </span><span class="annot"><span class="annottext">([EncJSON] -&gt; EncJSON) -&gt; m [EncJSON] -&gt; m EncJSON
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(RQLQuery -&gt; m EncJSON) -&gt; [RQLQuery] -&gt; m [EncJSON]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, MonadBaseControl IO m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/lifted-async-0.10.2.5-7453f3a39fe1c149b1fdd3dbcd3716b82112049f5f698aafbd6eb5b568cc41a4/share/doc/html/src/Control.Concurrent.Async.Lifted.html/Control.Concurrent.Async.Lifted.html#mapConcurrently"><span class="hs-identifier hs-var">mapConcurrently</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SQLGenCtx -&gt; RQLQuery -&gt; m EncJSON
forall (m :: * -&gt; *).
(MonadError QErr m, MonadIO m, MonadBaseControl IO m, UserInfoM m,
 CacheRWM m, MonadTrace m, MetadataM m, MonadQueryTags m) =&gt;
SQLGenCtx -&gt; RQLQuery -&gt; m EncJSON
</span><a href="Hasura.Server.API.V2Query.html#runQueryM"><span class="hs-identifier hs-var">runQueryM</span></a></span><span> </span><span class="annot"><span class="annottext">SQLGenCtx
</span><a href="#local-6989586621688046147"><span class="hs-identifier hs-var">sqlGen</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[RQLQuery]
</span><a href="#local-6989586621688046176"><span class="hs-identifier hs-var">l</span></a></span><span>
</span><span id="line-214"></span><span>
</span><span id="line-215"></span><span class="annot"><a href="Hasura.Server.API.V2Query.html#queryModifiesUserDB"><span class="hs-identifier hs-type">queryModifiesUserDB</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQLQuery"><span class="hs-identifier hs-type">RQLQuery</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-216"></span><span id="queryModifiesUserDB"><span class="annot"><span class="annottext">queryModifiesUserDB :: RQLQuery -&gt; Bool
</span><a href="Hasura.Server.API.V2Query.html#queryModifiesUserDB"><span class="hs-identifier hs-var hs-var">queryModifiesUserDB</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-217"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQInsert"><span class="hs-identifier hs-type">RQInsert</span></a></span><span> </span><span class="annot"><span class="annottext">InsertQuery
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-218"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQSelect"><span class="hs-identifier hs-type">RQSelect</span></a></span><span> </span><span class="annot"><span class="annottext">SelectQuery
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-219"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQUpdate"><span class="hs-identifier hs-type">RQUpdate</span></a></span><span> </span><span class="annot"><span class="annottext">UpdateQuery
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-220"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQDelete"><span class="hs-identifier hs-type">RQDelete</span></a></span><span> </span><span class="annot"><span class="annottext">DeleteQuery
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-221"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQCount"><span class="hs-identifier hs-type">RQCount</span></a></span><span> </span><span class="annot"><span class="annottext">CountQuery
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-222"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQRunSql"><span class="hs-identifier hs-type">RQRunSql</span></a></span><span> </span><span id="local-6989586621688046177"><span class="annot"><span class="annottext">RunSQL
</span><a href="#local-6989586621688046177"><span class="hs-identifier hs-var">runsql</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RunSQL -&gt; Bool
</span><a href="Hasura.Backends.Postgres.DDL.RunSQL.html#isReadOnly"><span class="hs-identifier hs-var">Postgres.isReadOnly</span></a></span><span> </span><span class="annot"><span class="annottext">RunSQL
</span><a href="#local-6989586621688046177"><span class="hs-identifier hs-var">runsql</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-223"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQCitusRunSql"><span class="hs-identifier hs-type">RQCitusRunSql</span></a></span><span> </span><span id="local-6989586621688046180"><span class="annot"><span class="annottext">RunSQL
</span><a href="#local-6989586621688046180"><span class="hs-identifier hs-var">runsql</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RunSQL -&gt; Bool
</span><a href="Hasura.Backends.Postgres.DDL.RunSQL.html#isReadOnly"><span class="hs-identifier hs-var">Postgres.isReadOnly</span></a></span><span> </span><span class="annot"><span class="annottext">RunSQL
</span><a href="#local-6989586621688046180"><span class="hs-identifier hs-var">runsql</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-224"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQCockroachRunSql"><span class="hs-identifier hs-type">RQCockroachRunSql</span></a></span><span> </span><span id="local-6989586621688046181"><span class="annot"><span class="annottext">RunSQL
</span><a href="#local-6989586621688046181"><span class="hs-identifier hs-var">runsql</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RunSQL -&gt; Bool
</span><a href="Hasura.Backends.Postgres.DDL.RunSQL.html#isReadOnly"><span class="hs-identifier hs-var">Postgres.isReadOnly</span></a></span><span> </span><span class="annot"><span class="annottext">RunSQL
</span><a href="#local-6989586621688046181"><span class="hs-identifier hs-var">runsql</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-225"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQMssqlRunSql"><span class="hs-identifier hs-type">RQMssqlRunSql</span></a></span><span> </span><span class="annot"><span class="annottext">MSSQLRunSQL
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-226"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQBigqueryRunSql"><span class="hs-identifier hs-type">RQBigqueryRunSql</span></a></span><span> </span><span class="annot"><span class="annottext">BigQueryRunSQL
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-227"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQDataConnectorRunSql"><span class="hs-identifier hs-type">RQDataConnectorRunSql</span></a></span><span> </span><span class="annot"><span class="annottext">DataConnectorName
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">DataConnectorRunSQL
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-228"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQBigqueryDatabaseInspection"><span class="hs-identifier hs-type">RQBigqueryDatabaseInspection</span></a></span><span> </span><span class="annot"><span class="annottext">BigQueryRunSQL
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-229"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQBulk"><span class="hs-identifier hs-type">RQBulk</span></a></span><span> </span><span id="local-6989586621688046182"><span class="annot"><span class="annottext">[RQLQuery]
</span><a href="#local-6989586621688046182"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(RQLQuery -&gt; Bool) -&gt; [RQLQuery] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">any</span></span><span> </span><span class="annot"><span class="annottext">RQLQuery -&gt; Bool
</span><a href="Hasura.Server.API.V2Query.html#queryModifiesUserDB"><span class="hs-identifier hs-var">queryModifiesUserDB</span></a></span><span> </span><span class="annot"><span class="annottext">[RQLQuery]
</span><a href="#local-6989586621688046182"><span class="hs-identifier hs-var">q</span></a></span><span>
</span><span id="line-230"></span><span>  </span><span class="annot"><a href="Hasura.Server.API.V2Query.html#RQConcurrentBulk"><span class="hs-identifier hs-type">RQConcurrentBulk</span></a></span><span> </span><span class="annot"><span class="annottext">[RQLQuery]
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-231"></span></pre></body></html>