<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE QuasiQuotes #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE TemplateHaskell #-}</span><span>
</span><span id="line-3"></span><span>
</span><span id="line-4"></span><span class="annot"><span class="hs-comment">-- | Funtions related to @hdb_catalog@ schema prior to metadata separation (catalog version &lt; 43).</span></span><span>
</span><span id="line-5"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html"><span class="hs-identifier">Hasura.RQL.DDL.Schema.LegacyCatalog</span></a></span><span>
</span><span id="line-6"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#saveMetadataToHdbTables"><span class="hs-identifier">saveMetadataToHdbTables</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-7"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#fetchMetadataFromHdbTables"><span class="hs-identifier">fetchMetadataFromHdbTables</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-8"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#recreateSystemMetadata"><span class="hs-identifier">recreateSystemMetadata</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addCronTriggerForeignKeyConstraint"><span class="hs-identifier">addCronTriggerForeignKeyConstraint</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><span class="hs-comment">-- * export for testing</span></span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#parseLegacyRemoteRelationshipDefinition"><span class="hs-identifier">parseLegacyRemoteRelationshipDefinition</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-14"></span><span class="hs-keyword">where</span><span>
</span><span id="line-15"></span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/lens-5.3.2-7ec14d641784087c1f1350eada3cde7884c62d1ab2707daec993ceeca3096d32/share/doc/html/src/Control.Lens.html/Control.Lens.html"><span class="hs-identifier">Control.Lens</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/lens-5.3.2-7ec14d641784087c1f1350eada3cde7884c62d1ab2707daec993ceeca3096d32/share/doc/html/src/Control.Lens.Setter.html/Control.Lens.Setter.html#.%3D"><span class="hs-operator">(.=)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.html/Data.Aeson.html"><span class="hs-identifier">Data.Aeson</span></a></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/file-embed-0.0.15.0-515808e58f03d959385c4d19dcff901545fbbb17eb4c8312a46b66f913b925ab/share/doc/html/src/Data.FileEmbed.html/Data.FileEmbed.html"><span class="hs-identifier">Data.FileEmbed</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/file-embed-0.0.15.0-515808e58f03d959385c4d19dcff901545fbbb17eb4c8312a46b66f913b925ab/share/doc/html/src/Data.FileEmbed.html/Data.FileEmbed.html#makeRelativeToProject"><span class="hs-identifier">makeRelativeToProject</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/unordered-containers-0.2.20-6d56f9b3abc6011ddb6e237c415126423ab5ceb5c078221bba2ff80dbe921009/share/doc/html/src/Data.HashMap.Strict.html/Data.HashMap.Strict.html"><span class="hs-identifier">Data.HashMap.Strict</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">HashMap</span></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/insert-ordered-containers-0.2.5.3-dcb71999c8104475fd299533bb40a6c15ee8a9411f3a03b68aa99a14a4143c19/share/doc/html/src/Data.HashMap.Strict.InsOrd.html/Data.HashMap.Strict.InsOrd.html"><span class="hs-identifier">Data.HashMap.Strict.InsOrd</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">InsOrdHashMap</span></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Extended.html/Data.Text.Extended.html"><span class="hs-identifier">Data.Text.Extended</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Extended.html/Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator">(&lt;&lt;&gt;)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.NonEmpty.html/Data.Text.NonEmpty.html"><span class="hs-identifier">Data.Text.NonEmpty</span></a></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Time.Clock</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">C</span></span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.html/Database.PG.Query.html"><span class="hs-identifier">Database.PG.Query</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">PG</span></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Connection.html"><span class="hs-identifier">Hasura.Backends.Postgres.Connection</span></a></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.SQL.Types.html"><span class="hs-identifier">Hasura.Backends.Postgres.SQL.Types</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Postgres</span></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html"><span class="hs-identifier">Hasura.Base.Error</span></a></span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Eventing.ScheduledTrigger.html"><span class="hs-identifier">Hasura.Eventing.ScheduledTrigger</span></a></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Function.Cache.html"><span class="hs-identifier">Hasura.Function.Cache</span></a></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Function.Metadata.html"><span class="hs-identifier">Hasura.Function.Metadata</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Function.Metadata.html#FunctionMetadata"><span class="hs-identifier">FunctionMetadata</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html"><span class="hs-identifier">Hasura.Prelude</span></a></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html"><span class="hs-identifier">Hasura.RQL.DDL.Action</span></a></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.ComputedField.html"><span class="hs-identifier">Hasura.RQL.DDL.ComputedField</span></a></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.Permission.html"><span class="hs-identifier">Hasura.RQL.DDL.Permission</span></a></span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.RemoteRelationship.html"><span class="hs-identifier">Hasura.RQL.DDL.RemoteRelationship</span></a></span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Action.html"><span class="hs-identifier">Hasura.RQL.Types.Action</span></a></span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Allowlist.html"><span class="hs-identifier">Hasura.RQL.Types.Allowlist</span></a></span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Backend.html"><span class="hs-identifier">Hasura.RQL.Types.Backend</span></a></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.BackendType.html"><span class="hs-identifier">Hasura.RQL.Types.BackendType</span></a></span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html"><span class="hs-identifier">Hasura.RQL.Types.Common</span></a></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html"><span class="hs-identifier">Hasura.RQL.Types.CustomTypes</span></a></span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.EventTrigger.html"><span class="hs-identifier">Hasura.RQL.Types.EventTrigger</span></a></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Metadata.html"><span class="hs-identifier">Hasura.RQL.Types.Metadata</span></a></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Permission.html"><span class="hs-identifier">Hasura.RQL.Types.Permission</span></a></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.QueryCollection.html"><span class="hs-identifier">Hasura.RQL.Types.QueryCollection</span></a></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Relationships.Local.html"><span class="hs-identifier">Hasura.RQL.Types.Relationships.Local</span></a></span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Relationships.Remote.html"><span class="hs-identifier">Hasura.RQL.Types.Relationships.Remote</span></a></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.ScheduledTrigger.html"><span class="hs-identifier">Hasura.RQL.Types.ScheduledTrigger</span></a></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html"><span class="hs-identifier">Hasura.RQL.Types.SchemaCache</span></a></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RemoteSchema.Metadata.html"><span class="hs-identifier">Hasura.RemoteSchema.Metadata</span></a></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Table.Metadata.html"><span class="hs-identifier">Hasura.Table.Metadata</span></a></span><span>
</span><span id="line-52"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.Table.Metadata.html#TableMetadata"><span class="hs-identifier">TableMetadata</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>    </span><span class="annot"><a href="Hasura.Table.Metadata.html#mkTableMeta"><span class="hs-identifier">mkTableMeta</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>    </span><span class="annot"><a href="Hasura.Table.Metadata.html#tmArrayRelationships"><span class="hs-identifier">tmArrayRelationships</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>    </span><span class="annot"><a href="Hasura.Table.Metadata.html#tmComputedFields"><span class="hs-identifier">tmComputedFields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>    </span><span class="annot"><a href="Hasura.Table.Metadata.html#tmDeletePermissions"><span class="hs-identifier">tmDeletePermissions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-57"></span><span>    </span><span class="annot"><a href="Hasura.Table.Metadata.html#tmEventTriggers"><span class="hs-identifier">tmEventTriggers</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span>    </span><span class="annot"><a href="Hasura.Table.Metadata.html#tmInsertPermissions"><span class="hs-identifier">tmInsertPermissions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>    </span><span class="annot"><a href="Hasura.Table.Metadata.html#tmObjectRelationships"><span class="hs-identifier">tmObjectRelationships</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>    </span><span class="annot"><a href="Hasura.Table.Metadata.html#tmRemoteRelationships"><span class="hs-identifier">tmRemoteRelationships</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>    </span><span class="annot"><a href="Hasura.Table.Metadata.html#tmSelectPermissions"><span class="hs-identifier">tmSelectPermissions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>    </span><span class="annot"><a href="Hasura.Table.Metadata.html#tmUpdatePermissions"><span class="hs-identifier">tmUpdatePermissions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-64"></span><span>
</span><span id="line-65"></span><span id="local-6989586621687988818"><span class="annot"><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#saveMetadataToHdbTables"><span class="hs-identifier hs-type">saveMetadataToHdbTables</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-66"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#MonadTx"><span class="hs-identifier hs-type">MonadTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687988818"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadReader</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#SystemDefined"><span class="hs-identifier hs-type">SystemDefined</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687988818"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Metadata.html#MetadataNoSources"><span class="hs-identifier hs-type">MetadataNoSources</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621687988818"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-67"></span><span id="saveMetadataToHdbTables"><span class="annot"><span class="annottext">saveMetadataToHdbTables :: forall (m :: * -&gt; *).
(MonadTx m, MonadReader SystemDefined m) =&gt;
MetadataNoSources -&gt; m ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#saveMetadataToHdbTables"><span class="hs-identifier hs-var hs-var">saveMetadataToHdbTables</span></a></span></span><span>
</span><span id="line-68"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Metadata.html#MetadataNoSources"><span class="hs-identifier hs-type">MetadataNoSources</span></a></span><span>
</span><span id="line-69"></span><span>      </span><span id="local-6989586621687989688"><span class="annot"><span class="annottext">Tables ('Postgres 'Vanilla)
</span><a href="#local-6989586621687989688"><span class="hs-identifier hs-var">tables</span></a></span></span><span>
</span><span id="line-70"></span><span>      </span><span id="local-6989586621687989689"><span class="annot"><span class="annottext">Functions ('Postgres 'Vanilla)
</span><a href="#local-6989586621687989689"><span class="hs-identifier hs-var">functions</span></a></span></span><span>
</span><span id="line-71"></span><span>      </span><span id="local-6989586621687989690"><span class="annot"><span class="annottext">RemoteSchemas
</span><a href="#local-6989586621687989690"><span class="hs-identifier hs-var">schemas</span></a></span></span><span>
</span><span id="line-72"></span><span>      </span><span id="local-6989586621687989691"><span class="annot"><span class="annottext">QueryCollections
</span><a href="#local-6989586621687989691"><span class="hs-identifier hs-var">collections</span></a></span></span><span>
</span><span id="line-73"></span><span>      </span><span id="local-6989586621687989692"><span class="annot"><span class="annottext">MetadataAllowlist
</span><a href="#local-6989586621687989692"><span class="hs-identifier hs-var">allowlist</span></a></span></span><span>
</span><span id="line-74"></span><span>      </span><span id="local-6989586621687989693"><span class="annot"><span class="annottext">CustomTypes
</span><a href="#local-6989586621687989693"><span class="hs-identifier hs-var">customTypes</span></a></span></span><span>
</span><span id="line-75"></span><span>      </span><span id="local-6989586621687989694"><span class="annot"><span class="annottext">Actions
</span><a href="#local-6989586621687989694"><span class="hs-identifier hs-var">actions</span></a></span></span><span>
</span><span id="line-76"></span><span>      </span><span id="local-6989586621687989695"><span class="annot"><span class="annottext">CronTriggers
</span><a href="#local-6989586621687989695"><span class="hs-identifier hs-var">cronTriggers</span></a></span></span><span>
</span><span id="line-77"></span><span>    </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-78"></span><span>    </span><span class="annot"><span class="annottext">Text -&gt; m () -&gt; m ()
forall (m :: * -&gt; *) a. QErrM m =&gt; Text -&gt; m a -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#withPathK"><span class="hs-identifier hs-var">withPathK</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;tables&quot;</span></span><span> </span><span class="annot"><span class="annottext">(m () -&gt; m ()) -&gt; m () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-79"></span><span>      </span><span class="annot"><span class="annottext">InsOrdHashMap QualifiedTable (TableMetadata ('Postgres 'Vanilla))
-&gt; (TableMetadata ('Postgres 'Vanilla) -&gt; m ()) -&gt; m ()
forall (m :: * -&gt; *) (t :: * -&gt; *) a b.
(QErrM m, Foldable t) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#indexedForM_"><span class="hs-identifier hs-var">indexedForM_</span></a></span><span> </span><span class="annot"><span class="annottext">Tables ('Postgres 'Vanilla)
InsOrdHashMap QualifiedTable (TableMetadata ('Postgres 'Vanilla))
</span><a href="#local-6989586621687989688"><span class="hs-identifier hs-var">tables</span></a></span><span> </span><span class="annot"><span class="annottext">((TableMetadata ('Postgres 'Vanilla) -&gt; m ()) -&gt; m ())
-&gt; (TableMetadata ('Postgres 'Vanilla) -&gt; m ()) -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="annot"><a href="Hasura.Table.Metadata.html#TableMetadata"><span class="hs-identifier hs-type">TableMetadata</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687989699"><span id="local-6989586621687989700"><span id="local-6989586621687989701"><span id="local-6989586621687989702"><span id="local-6989586621687989703"><span id="local-6989586621687989704"><span id="local-6989586621687989705"><span id="local-6989586621687989706"><span id="local-6989586621687989707"><span id="local-6989586621687989708"><span id="local-6989586621687989709"><span id="local-6989586621687989710"><span id="local-6989586621687989711"><span id="local-6989586621687989712"><span class="annot"><span class="annottext">Bool
Maybe ApolloFederationConfig
Maybe LogicalModelName
Permissions (UpdPermDef ('Postgres 'Vanilla))
Permissions (DelPermDef ('Postgres 'Vanilla))
Permissions (SelPermDef ('Postgres 'Vanilla))
Permissions (InsPermDef ('Postgres 'Vanilla))
RemoteRelationships
Relationships (ObjRelDef ('Postgres 'Vanilla))
Relationships (ArrRelDef ('Postgres 'Vanilla))
ComputedFields ('Postgres 'Vanilla)
EventTriggers ('Postgres 'Vanilla)
TableName ('Postgres 'Vanilla)
TableConfig ('Postgres 'Vanilla)
_tmTable :: TableName ('Postgres 'Vanilla)
_tmIsEnum :: Bool
_tmConfiguration :: TableConfig ('Postgres 'Vanilla)
_tmObjectRelationships :: Relationships (ObjRelDef ('Postgres 'Vanilla))
_tmArrayRelationships :: Relationships (ArrRelDef ('Postgres 'Vanilla))
_tmComputedFields :: ComputedFields ('Postgres 'Vanilla)
_tmRemoteRelationships :: RemoteRelationships
_tmInsertPermissions :: Permissions (InsPermDef ('Postgres 'Vanilla))
_tmSelectPermissions :: Permissions (SelPermDef ('Postgres 'Vanilla))
_tmUpdatePermissions :: Permissions (UpdPermDef ('Postgres 'Vanilla))
_tmDeletePermissions :: Permissions (DelPermDef ('Postgres 'Vanilla))
_tmEventTriggers :: EventTriggers ('Postgres 'Vanilla)
_tmApolloFederationConfig :: Maybe ApolloFederationConfig
_tmLogicalModel :: Maybe LogicalModelName
_tmLogicalModel :: forall (b :: BackendType).
TableMetadata b -&gt; Maybe LogicalModelName
_tmApolloFederationConfig :: forall (b :: BackendType).
TableMetadata b -&gt; Maybe ApolloFederationConfig
_tmEventTriggers :: forall (b :: BackendType). TableMetadata b -&gt; EventTriggers b
_tmDeletePermissions :: forall (b :: BackendType).
TableMetadata b -&gt; Permissions (DelPermDef b)
_tmUpdatePermissions :: forall (b :: BackendType).
TableMetadata b -&gt; Permissions (UpdPermDef b)
_tmSelectPermissions :: forall (b :: BackendType).
TableMetadata b -&gt; Permissions (SelPermDef b)
_tmInsertPermissions :: forall (b :: BackendType).
TableMetadata b -&gt; Permissions (InsPermDef b)
_tmRemoteRelationships :: forall (b :: BackendType). TableMetadata b -&gt; RemoteRelationships
_tmComputedFields :: forall (b :: BackendType). TableMetadata b -&gt; ComputedFields b
_tmArrayRelationships :: forall (b :: BackendType).
TableMetadata b -&gt; Relationships (ArrRelDef b)
_tmObjectRelationships :: forall (b :: BackendType).
TableMetadata b -&gt; Relationships (ObjRelDef b)
_tmConfiguration :: forall (b :: BackendType). TableMetadata b -&gt; TableConfig b
_tmIsEnum :: forall (b :: BackendType). TableMetadata b -&gt; Bool
_tmTable :: forall (b :: BackendType). TableMetadata b -&gt; TableName b
</span><a href="#local-6989586621687989699"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-80"></span><span>        </span><span class="hs-comment">-- Save table</span><span>
</span><span id="line-81"></span><span>        </span><span class="annot"><span class="annottext">QualifiedTable -&gt; Bool -&gt; TableConfig ('Postgres 'Vanilla) -&gt; m ()
forall (m :: * -&gt; *).
(MonadTx m, MonadReader SystemDefined m) =&gt;
QualifiedTable -&gt; Bool -&gt; TableConfig ('Postgres 'Vanilla) -&gt; m ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#saveTableToCatalog"><span class="hs-identifier hs-var">saveTableToCatalog</span></a></span><span> </span><span class="annot"><span class="annottext">TableName ('Postgres 'Vanilla)
QualifiedTable
</span><a href="#local-6989586621687989699"><span class="hs-identifier hs-var">_tmTable</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621687989700"><span class="hs-identifier hs-var">_tmIsEnum</span></a></span><span> </span><span class="annot"><span class="annottext">TableConfig ('Postgres 'Vanilla)
</span><a href="#local-6989586621687989701"><span class="hs-identifier hs-var">_tmConfiguration</span></a></span><span>
</span><span id="line-82"></span><span>
</span><span id="line-83"></span><span>        </span><span class="hs-comment">-- Relationships</span><span>
</span><span id="line-84"></span><span>        </span><span class="annot"><span class="annottext">Text -&gt; m () -&gt; m ()
forall (m :: * -&gt; *) a. QErrM m =&gt; Text -&gt; m a -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#withPathK"><span class="hs-identifier hs-var">withPathK</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;object_relationships&quot;</span></span><span>
</span><span id="line-85"></span><span>          </span><span class="annot"><span class="annottext">(m () -&gt; m ()) -&gt; m () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Relationships (ObjRelDef ('Postgres 'Vanilla))
-&gt; (ObjRelDef ('Postgres 'Vanilla) -&gt; m ()) -&gt; m ()
forall (m :: * -&gt; *) (t :: * -&gt; *) a b.
(QErrM m, Foldable t) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#indexedForM_"><span class="hs-identifier hs-var">indexedForM_</span></a></span><span> </span><span class="annot"><span class="annottext">Relationships (ObjRelDef ('Postgres 'Vanilla))
</span><a href="#local-6989586621687989702"><span class="hs-identifier hs-var">_tmObjectRelationships</span></a></span><span>
</span><span id="line-86"></span><span>          </span><span class="annot"><span class="annottext">((ObjRelDef ('Postgres 'Vanilla) -&gt; m ()) -&gt; m ())
-&gt; (ObjRelDef ('Postgres 'Vanilla) -&gt; m ()) -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621687989728"><span class="annot"><span class="annottext">ObjRelDef ('Postgres 'Vanilla)
</span><a href="#local-6989586621687989728"><span class="hs-identifier hs-var">objRel</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-87"></span><span>            </span><span class="annot"><span class="annottext">QualifiedTable -&gt; RelType -&gt; ObjRelDef ('Postgres 'Vanilla) -&gt; m ()
forall (m :: * -&gt; *) a.
(MonadTx m, MonadReader SystemDefined m, ToJSON a) =&gt;
QualifiedTable -&gt; RelType -&gt; RelDef a -&gt; m ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#insertRelationshipToCatalog"><span class="hs-identifier hs-var">insertRelationshipToCatalog</span></a></span><span> </span><span class="annot"><span class="annottext">TableName ('Postgres 'Vanilla)
QualifiedTable
</span><a href="#local-6989586621687989699"><span class="hs-identifier hs-var">_tmTable</span></a></span><span> </span><span class="annot"><span class="annottext">RelType
</span><a href="Hasura.RQL.Types.Common.html#ObjRel"><span class="hs-identifier hs-var">ObjRel</span></a></span><span> </span><span class="annot"><span class="annottext">ObjRelDef ('Postgres 'Vanilla)
</span><a href="#local-6989586621687989728"><span class="hs-identifier hs-var">objRel</span></a></span><span>
</span><span id="line-88"></span><span>        </span><span class="annot"><span class="annottext">Text -&gt; m () -&gt; m ()
forall (m :: * -&gt; *) a. QErrM m =&gt; Text -&gt; m a -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#withPathK"><span class="hs-identifier hs-var">withPathK</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;array_relationships&quot;</span></span><span>
</span><span id="line-89"></span><span>          </span><span class="annot"><span class="annottext">(m () -&gt; m ()) -&gt; m () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Relationships (ArrRelDef ('Postgres 'Vanilla))
-&gt; (ArrRelDef ('Postgres 'Vanilla) -&gt; m ()) -&gt; m ()
forall (m :: * -&gt; *) (t :: * -&gt; *) a b.
(QErrM m, Foldable t) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#indexedForM_"><span class="hs-identifier hs-var">indexedForM_</span></a></span><span> </span><span class="annot"><span class="annottext">Relationships (ArrRelDef ('Postgres 'Vanilla))
</span><a href="#local-6989586621687989703"><span class="hs-identifier hs-var">_tmArrayRelationships</span></a></span><span>
</span><span id="line-90"></span><span>          </span><span class="annot"><span class="annottext">((ArrRelDef ('Postgres 'Vanilla) -&gt; m ()) -&gt; m ())
-&gt; (ArrRelDef ('Postgres 'Vanilla) -&gt; m ()) -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621687989731"><span class="annot"><span class="annottext">ArrRelDef ('Postgres 'Vanilla)
</span><a href="#local-6989586621687989731"><span class="hs-identifier hs-var">arrRel</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-91"></span><span>            </span><span class="annot"><span class="annottext">QualifiedTable -&gt; RelType -&gt; ArrRelDef ('Postgres 'Vanilla) -&gt; m ()
forall (m :: * -&gt; *) a.
(MonadTx m, MonadReader SystemDefined m, ToJSON a) =&gt;
QualifiedTable -&gt; RelType -&gt; RelDef a -&gt; m ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#insertRelationshipToCatalog"><span class="hs-identifier hs-var">insertRelationshipToCatalog</span></a></span><span> </span><span class="annot"><span class="annottext">TableName ('Postgres 'Vanilla)
QualifiedTable
</span><a href="#local-6989586621687989699"><span class="hs-identifier hs-var">_tmTable</span></a></span><span> </span><span class="annot"><span class="annottext">RelType
</span><a href="Hasura.RQL.Types.Common.html#ArrRel"><span class="hs-identifier hs-var">ArrRel</span></a></span><span> </span><span class="annot"><span class="annottext">ArrRelDef ('Postgres 'Vanilla)
</span><a href="#local-6989586621687989731"><span class="hs-identifier hs-var">arrRel</span></a></span><span>
</span><span id="line-92"></span><span>
</span><span id="line-93"></span><span>        </span><span class="hs-comment">-- Computed Fields</span><span>
</span><span id="line-94"></span><span>        </span><span class="annot"><span class="annottext">Text -&gt; m () -&gt; m ()
forall (m :: * -&gt; *) a. QErrM m =&gt; Text -&gt; m a -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#withPathK"><span class="hs-identifier hs-var">withPathK</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;computed_fields&quot;</span></span><span>
</span><span id="line-95"></span><span>          </span><span class="annot"><span class="annottext">(m () -&gt; m ()) -&gt; m () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ComputedFields ('Postgres 'Vanilla)
-&gt; (ComputedFieldMetadata ('Postgres 'Vanilla) -&gt; m ()) -&gt; m ()
forall (m :: * -&gt; *) (t :: * -&gt; *) a b.
(QErrM m, Foldable t) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#indexedForM_"><span class="hs-identifier hs-var">indexedForM_</span></a></span><span> </span><span class="annot"><span class="annottext">ComputedFields ('Postgres 'Vanilla)
</span><a href="#local-6989586621687989704"><span class="hs-identifier hs-var">_tmComputedFields</span></a></span><span>
</span><span id="line-96"></span><span>          </span><span class="annot"><span class="annottext">((ComputedFieldMetadata ('Postgres 'Vanilla) -&gt; m ()) -&gt; m ())
-&gt; (ComputedFieldMetadata ('Postgres 'Vanilla) -&gt; m ()) -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Table.Metadata.html#ComputedFieldMetadata"><span class="hs-identifier hs-type">ComputedFieldMetadata</span></a></span><span> </span><span id="local-6989586621687989734"><span class="annot"><span class="annottext">ComputedFieldName
</span><a href="#local-6989586621687989734"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621687989735"><span class="annot"><span class="annottext">ComputedFieldDefinition ('Postgres 'Vanilla)
</span><a href="#local-6989586621687989735"><span class="hs-identifier hs-var">definition</span></a></span></span><span> </span><span id="local-6989586621687989736"><span class="annot"><span class="annottext">Comment
</span><a href="#local-6989586621687989736"><span class="hs-identifier hs-var">comment</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-97"></span><span>            </span><span class="annot"><span class="annottext">AddComputedField ('Postgres 'Vanilla) -&gt; m ()
forall (m :: * -&gt; *).
MonadTx m =&gt;
AddComputedField ('Postgres 'Vanilla) -&gt; m ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addComputedFieldToCatalog"><span class="hs-identifier hs-var">addComputedFieldToCatalog</span></a></span><span>
</span><span id="line-98"></span><span>              </span><span class="annot"><span class="annottext">(AddComputedField ('Postgres 'Vanilla) -&gt; m ())
-&gt; AddComputedField ('Postgres 'Vanilla) -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableName ('Postgres 'Vanilla)
-&gt; ComputedFieldName
-&gt; ComputedFieldDefinition ('Postgres 'Vanilla)
-&gt; Comment
-&gt; AddComputedField ('Postgres 'Vanilla)
forall (b :: BackendType).
SourceName
-&gt; TableName b
-&gt; ComputedFieldName
-&gt; ComputedFieldDefinition b
-&gt; Comment
-&gt; AddComputedField b
</span><a href="Hasura.RQL.DDL.ComputedField.html#AddComputedField"><span class="hs-identifier hs-var">AddComputedField</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="Hasura.RQL.Types.Common.html#defaultSource"><span class="hs-identifier hs-var">defaultSource</span></a></span><span> </span><span class="annot"><span class="annottext">TableName ('Postgres 'Vanilla)
</span><a href="#local-6989586621687989699"><span class="hs-identifier hs-var">_tmTable</span></a></span><span> </span><span class="annot"><span class="annottext">ComputedFieldName
</span><a href="#local-6989586621687989734"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">ComputedFieldDefinition ('Postgres 'Vanilla)
</span><a href="#local-6989586621687989735"><span class="hs-identifier hs-var">definition</span></a></span><span> </span><span class="annot"><span class="annottext">Comment
</span><a href="#local-6989586621687989736"><span class="hs-identifier hs-var">comment</span></a></span><span>
</span><span id="line-99"></span><span>
</span><span id="line-100"></span><span>        </span><span class="hs-comment">-- Remote Relationships</span><span>
</span><span id="line-101"></span><span>        </span><span class="annot"><span class="annottext">Text -&gt; m () -&gt; m ()
forall (m :: * -&gt; *) a. QErrM m =&gt; Text -&gt; m a -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#withPathK"><span class="hs-identifier hs-var">withPathK</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;remote_relationships&quot;</span></span><span>
</span><span id="line-102"></span><span>          </span><span class="annot"><span class="annottext">(m () -&gt; m ()) -&gt; m () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RemoteRelationships -&gt; (RemoteRelationship -&gt; m ()) -&gt; m ()
forall (m :: * -&gt; *) (t :: * -&gt; *) a b.
(QErrM m, Foldable t) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#indexedForM_"><span class="hs-identifier hs-var">indexedForM_</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteRelationships
</span><a href="#local-6989586621687989705"><span class="hs-identifier hs-var">_tmRemoteRelationships</span></a></span><span>
</span><span id="line-103"></span><span>          </span><span class="annot"><span class="annottext">((RemoteRelationship -&gt; m ()) -&gt; m ())
-&gt; (RemoteRelationship -&gt; m ()) -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="annot"><a href="Hasura.RQL.Types.Common.html#RemoteRelationship"><span class="hs-identifier hs-type">RemoteRelationship</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687989741"><span id="local-6989586621687989742"><span class="annot"><span class="annottext">RelName
RemoteRelationshipDefinition
_rrName :: RelName
_rrDefinition :: RemoteRelationshipDefinition
_rrDefinition :: forall definition. RemoteRelationshipG definition -&gt; definition
_rrName :: forall definition. RemoteRelationshipG definition -&gt; RelName
</span><a href="#local-6989586621687989741"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-104"></span><span>            </span><span class="annot"><span class="annottext">CreateFromSourceRelationship ('Postgres 'Vanilla) -&gt; m ()
forall (m :: * -&gt; *).
MonadTx m =&gt;
CreateFromSourceRelationship ('Postgres 'Vanilla) -&gt; m ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addRemoteRelationshipToCatalog"><span class="hs-identifier hs-var">addRemoteRelationshipToCatalog</span></a></span><span>
</span><span id="line-105"></span><span>              </span><span class="annot"><span class="annottext">(CreateFromSourceRelationship ('Postgres 'Vanilla) -&gt; m ())
-&gt; CreateFromSourceRelationship ('Postgres 'Vanilla) -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceName
-&gt; TableName ('Postgres 'Vanilla)
-&gt; RelName
-&gt; RemoteRelationshipDefinition
-&gt; CreateFromSourceRelationship ('Postgres 'Vanilla)
forall (b :: BackendType).
SourceName
-&gt; TableName b
-&gt; RelName
-&gt; RemoteRelationshipDefinition
-&gt; CreateFromSourceRelationship b
</span><a href="Hasura.RQL.DDL.RemoteRelationship.html#CreateFromSourceRelationship"><span class="hs-identifier hs-var">CreateFromSourceRelationship</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="Hasura.RQL.Types.Common.html#defaultSource"><span class="hs-identifier hs-var">defaultSource</span></a></span><span> </span><span class="annot"><span class="annottext">TableName ('Postgres 'Vanilla)
</span><a href="#local-6989586621687989699"><span class="hs-identifier hs-var">_tmTable</span></a></span><span> </span><span class="annot"><span class="annottext">RelName
</span><a href="#local-6989586621687989741"><span class="hs-identifier hs-var">_rrName</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteRelationshipDefinition
</span><a href="#local-6989586621687989742"><span class="hs-identifier hs-var">_rrDefinition</span></a></span><span>
</span><span id="line-106"></span><span>
</span><span id="line-107"></span><span>        </span><span class="hs-comment">-- Permissions</span><span>
</span><span id="line-108"></span><span>        </span><span class="annot"><span class="annottext">Text -&gt; m () -&gt; m ()
forall (m :: * -&gt; *) a. QErrM m =&gt; Text -&gt; m a -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#withPathK"><span class="hs-identifier hs-var">withPathK</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;insert_permissions&quot;</span></span><span> </span><span class="annot"><span class="annottext">(m () -&gt; m ()) -&gt; m () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QualifiedTable
-&gt; Permissions (InsPermDef ('Postgres 'Vanilla)) -&gt; m ()
forall {m :: * -&gt; *} {b :: BackendType} {t :: * -&gt; *}
       {a :: BackendType -&gt; *}.
(MonadReader SystemDefined m, MonadTx m, Backend b, Foldable t) =&gt;
QualifiedTable -&gt; t (PermDef b a) -&gt; m ()
</span><a href="#local-6989586621687989747"><span class="hs-identifier hs-var">processPerms</span></a></span><span> </span><span class="annot"><span class="annottext">TableName ('Postgres 'Vanilla)
QualifiedTable
</span><a href="#local-6989586621687989699"><span class="hs-identifier hs-var">_tmTable</span></a></span><span> </span><span class="annot"><span class="annottext">Permissions (InsPermDef ('Postgres 'Vanilla))
</span><a href="#local-6989586621687989706"><span class="hs-identifier hs-var">_tmInsertPermissions</span></a></span><span>
</span><span id="line-109"></span><span>        </span><span class="annot"><span class="annottext">Text -&gt; m () -&gt; m ()
forall (m :: * -&gt; *) a. QErrM m =&gt; Text -&gt; m a -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#withPathK"><span class="hs-identifier hs-var">withPathK</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;select_permissions&quot;</span></span><span> </span><span class="annot"><span class="annottext">(m () -&gt; m ()) -&gt; m () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QualifiedTable
-&gt; Permissions (SelPermDef ('Postgres 'Vanilla)) -&gt; m ()
forall {m :: * -&gt; *} {b :: BackendType} {t :: * -&gt; *}
       {a :: BackendType -&gt; *}.
(MonadReader SystemDefined m, MonadTx m, Backend b, Foldable t) =&gt;
QualifiedTable -&gt; t (PermDef b a) -&gt; m ()
</span><a href="#local-6989586621687989747"><span class="hs-identifier hs-var">processPerms</span></a></span><span> </span><span class="annot"><span class="annottext">TableName ('Postgres 'Vanilla)
QualifiedTable
</span><a href="#local-6989586621687989699"><span class="hs-identifier hs-var">_tmTable</span></a></span><span> </span><span class="annot"><span class="annottext">Permissions (SelPermDef ('Postgres 'Vanilla))
</span><a href="#local-6989586621687989707"><span class="hs-identifier hs-var">_tmSelectPermissions</span></a></span><span>
</span><span id="line-110"></span><span>        </span><span class="annot"><span class="annottext">Text -&gt; m () -&gt; m ()
forall (m :: * -&gt; *) a. QErrM m =&gt; Text -&gt; m a -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#withPathK"><span class="hs-identifier hs-var">withPathK</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;update_permissions&quot;</span></span><span> </span><span class="annot"><span class="annottext">(m () -&gt; m ()) -&gt; m () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QualifiedTable
-&gt; Permissions (UpdPermDef ('Postgres 'Vanilla)) -&gt; m ()
forall {m :: * -&gt; *} {b :: BackendType} {t :: * -&gt; *}
       {a :: BackendType -&gt; *}.
(MonadReader SystemDefined m, MonadTx m, Backend b, Foldable t) =&gt;
QualifiedTable -&gt; t (PermDef b a) -&gt; m ()
</span><a href="#local-6989586621687989747"><span class="hs-identifier hs-var">processPerms</span></a></span><span> </span><span class="annot"><span class="annottext">TableName ('Postgres 'Vanilla)
QualifiedTable
</span><a href="#local-6989586621687989699"><span class="hs-identifier hs-var">_tmTable</span></a></span><span> </span><span class="annot"><span class="annottext">Permissions (UpdPermDef ('Postgres 'Vanilla))
</span><a href="#local-6989586621687989708"><span class="hs-identifier hs-var">_tmUpdatePermissions</span></a></span><span>
</span><span id="line-111"></span><span>        </span><span class="annot"><span class="annottext">Text -&gt; m () -&gt; m ()
forall (m :: * -&gt; *) a. QErrM m =&gt; Text -&gt; m a -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#withPathK"><span class="hs-identifier hs-var">withPathK</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;delete_permissions&quot;</span></span><span> </span><span class="annot"><span class="annottext">(m () -&gt; m ()) -&gt; m () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QualifiedTable
-&gt; Permissions (DelPermDef ('Postgres 'Vanilla)) -&gt; m ()
forall {m :: * -&gt; *} {b :: BackendType} {t :: * -&gt; *}
       {a :: BackendType -&gt; *}.
(MonadReader SystemDefined m, MonadTx m, Backend b, Foldable t) =&gt;
QualifiedTable -&gt; t (PermDef b a) -&gt; m ()
</span><a href="#local-6989586621687989747"><span class="hs-identifier hs-var">processPerms</span></a></span><span> </span><span class="annot"><span class="annottext">TableName ('Postgres 'Vanilla)
QualifiedTable
</span><a href="#local-6989586621687989699"><span class="hs-identifier hs-var">_tmTable</span></a></span><span> </span><span class="annot"><span class="annottext">Permissions (DelPermDef ('Postgres 'Vanilla))
</span><a href="#local-6989586621687989709"><span class="hs-identifier hs-var">_tmDeletePermissions</span></a></span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span>        </span><span class="hs-comment">-- Event triggers</span><span>
</span><span id="line-114"></span><span>        </span><span class="annot"><span class="annottext">Text -&gt; m () -&gt; m ()
forall (m :: * -&gt; *) a. QErrM m =&gt; Text -&gt; m a -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#withPathK"><span class="hs-identifier hs-var">withPathK</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;event_triggers&quot;</span></span><span>
</span><span id="line-115"></span><span>          </span><span class="annot"><span class="annottext">(m () -&gt; m ()) -&gt; m () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">EventTriggers ('Postgres 'Vanilla)
-&gt; (EventTriggerConf ('Postgres 'Vanilla) -&gt; m ()) -&gt; m ()
forall (m :: * -&gt; *) (t :: * -&gt; *) a b.
(QErrM m, Foldable t) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#indexedForM_"><span class="hs-identifier hs-var">indexedForM_</span></a></span><span> </span><span class="annot"><span class="annottext">EventTriggers ('Postgres 'Vanilla)
</span><a href="#local-6989586621687989710"><span class="hs-identifier hs-var">_tmEventTriggers</span></a></span><span>
</span><span id="line-116"></span><span>          </span><span class="annot"><span class="annottext">((EventTriggerConf ('Postgres 'Vanilla) -&gt; m ()) -&gt; m ())
-&gt; (EventTriggerConf ('Postgres 'Vanilla) -&gt; m ()) -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621687989748"><span class="annot"><span class="annottext">EventTriggerConf ('Postgres 'Vanilla)
</span><a href="#local-6989586621687989748"><span class="hs-identifier hs-var">etc</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">QualifiedTable -&gt; EventTriggerConf ('Postgres 'Vanilla) -&gt; m ()
forall (m :: * -&gt; *) (pgKind :: PostgresKind).
(MonadTx m, Backend ('Postgres pgKind)) =&gt;
QualifiedTable -&gt; EventTriggerConf ('Postgres pgKind) -&gt; m ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addEventTriggerToCatalog"><span class="hs-identifier hs-var">addEventTriggerToCatalog</span></a></span><span> </span><span class="annot"><span class="annottext">TableName ('Postgres 'Vanilla)
QualifiedTable
</span><a href="#local-6989586621687989699"><span class="hs-identifier hs-var">_tmTable</span></a></span><span> </span><span class="annot"><span class="annottext">EventTriggerConf ('Postgres 'Vanilla)
</span><a href="#local-6989586621687989748"><span class="hs-identifier hs-var">etc</span></a></span><span>
</span><span id="line-117"></span><span>
</span><span id="line-118"></span><span>    </span><span class="hs-comment">-- sql functions</span><span>
</span><span id="line-119"></span><span>    </span><span class="annot"><span class="annottext">Text -&gt; m () -&gt; m ()
forall (m :: * -&gt; *) a. QErrM m =&gt; Text -&gt; m a -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#withPathK"><span class="hs-identifier hs-var">withPathK</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;functions&quot;</span></span><span>
</span><span id="line-120"></span><span>      </span><span class="annot"><span class="annottext">(m () -&gt; m ()) -&gt; m () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">InsOrdHashMap
  QualifiedFunction (FunctionMetadata ('Postgres 'Vanilla))
-&gt; (FunctionMetadata ('Postgres 'Vanilla) -&gt; m ()) -&gt; m ()
forall (m :: * -&gt; *) (t :: * -&gt; *) a b.
(QErrM m, Foldable t) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#indexedForM_"><span class="hs-identifier hs-var">indexedForM_</span></a></span><span> </span><span class="annot"><span class="annottext">Functions ('Postgres 'Vanilla)
InsOrdHashMap
  QualifiedFunction (FunctionMetadata ('Postgres 'Vanilla))
</span><a href="#local-6989586621687989689"><span class="hs-identifier hs-var">functions</span></a></span><span>
</span><span id="line-121"></span><span>      </span><span class="annot"><span class="annottext">((FunctionMetadata ('Postgres 'Vanilla) -&gt; m ()) -&gt; m ())
-&gt; (FunctionMetadata ('Postgres 'Vanilla) -&gt; m ()) -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Function.Metadata.html#FunctionMetadata"><span class="hs-identifier hs-type">FunctionMetadata</span></a></span><span> </span><span id="local-6989586621687989751"><span class="annot"><span class="annottext">FunctionName ('Postgres 'Vanilla)
</span><a href="#local-6989586621687989751"><span class="hs-identifier hs-var">function</span></a></span></span><span> </span><span id="local-6989586621687989752"><span class="annot"><span class="annottext">FunctionConfig ('Postgres 'Vanilla)
</span><a href="#local-6989586621687989752"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="annot"><span class="annottext">[FunctionPermissionInfo]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">QualifiedFunction -&gt; FunctionConfig ('Postgres 'Vanilla) -&gt; m ()
forall (m :: * -&gt; *).
(MonadTx m, MonadReader SystemDefined m) =&gt;
QualifiedFunction -&gt; FunctionConfig ('Postgres 'Vanilla) -&gt; m ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addFunctionToCatalog"><span class="hs-identifier hs-var">addFunctionToCatalog</span></a></span><span> </span><span class="annot"><span class="annottext">FunctionName ('Postgres 'Vanilla)
QualifiedFunction
</span><a href="#local-6989586621687989751"><span class="hs-identifier hs-var">function</span></a></span><span> </span><span class="annot"><span class="annottext">FunctionConfig ('Postgres 'Vanilla)
</span><a href="#local-6989586621687989752"><span class="hs-identifier hs-var">config</span></a></span><span>
</span><span id="line-122"></span><span>
</span><span id="line-123"></span><span>    </span><span class="hs-comment">-- query collections</span><span>
</span><span id="line-124"></span><span>    </span><span id="local-6989586621687989754"><span class="annot"><a href="#local-6989586621687989754"><span class="hs-identifier hs-var">systemDefined</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m SystemDefined
forall r (m :: * -&gt; *). MonadReader r m =&gt; m r
</span><span class="hs-identifier hs-var">ask</span></span><span>
</span><span id="line-125"></span><span>    </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#withPathK"><span class="hs-identifier hs-type">withPathK</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;query_collections&quot;</span></span><span>
</span><span id="line-126"></span><span>      </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#indexedForM_"><span class="hs-identifier hs-type">indexedForM_</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687989691"><span class="hs-identifier hs-type">collections</span></a></span><span>
</span><span id="line-127"></span><span>      </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621687989756"><span class="annot"><span class="annottext">CreateCollection
</span><a href="#local-6989586621687989756"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxE QErr () -&gt; m ()
forall a. TxE QErr a -&gt; m a
forall (m :: * -&gt; *) a. MonadTx m =&gt; TxE QErr a -&gt; m a
</span><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#liftTx"><span class="hs-identifier hs-var">liftTx</span></a></span><span> </span><span class="annot"><span class="annottext">(TxE QErr () -&gt; m ()) -&gt; TxE QErr () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CreateCollection -&gt; SystemDefined -&gt; TxE QErr ()
forall (m :: * -&gt; *).
MonadTx m =&gt;
CreateCollection -&gt; SystemDefined -&gt; m ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addCollectionToCatalog"><span class="hs-identifier hs-var">addCollectionToCatalog</span></a></span><span> </span><span class="annot"><span class="annottext">CreateCollection
</span><a href="#local-6989586621687989756"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">SystemDefined
</span><a href="#local-6989586621687989754"><span class="hs-identifier hs-var">systemDefined</span></a></span><span>
</span><span id="line-128"></span><span>
</span><span id="line-129"></span><span>    </span><span class="hs-comment">-- allow list</span><span>
</span><span id="line-130"></span><span>    </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#withPathK"><span class="hs-identifier hs-type">withPathK</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;allowlist&quot;</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-131"></span><span>      </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#indexedForM_"><span class="hs-identifier hs-type">indexedForM_</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687989692"><span class="hs-identifier hs-type">allowlist</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Allowlist.html#AllowlistEntry"><span class="hs-identifier hs-type">AllowlistEntry</span></a></span><span> </span><span id="local-6989586621687989760"><span class="annot"><span class="annottext">CollectionName
</span><a href="#local-6989586621687989760"><span class="hs-identifier hs-var">collectionName</span></a></span></span><span> </span><span id="local-6989586621687989761"><span class="annot"><span class="annottext">AllowlistScope
</span><a href="#local-6989586621687989761"><span class="hs-identifier hs-var">scope</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-132"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; m () -&gt; m ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">AllowlistScope
</span><a href="#local-6989586621687989761"><span class="hs-identifier hs-var">scope</span></a></span><span> </span><span class="annot"><span class="annottext">AllowlistScope -&gt; AllowlistScope -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">AllowlistScope
</span><a href="Hasura.RQL.Types.Allowlist.html#AllowlistScopeGlobal"><span class="hs-identifier hs-var">AllowlistScopeGlobal</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-133"></span><span>          </span><span class="annot"><span class="annottext">(m () -&gt; m ()) -&gt; m () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Code -&gt; Text -&gt; m ()
forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#NotSupported"><span class="hs-identifier hs-var">NotSupported</span></a></span><span>
</span><span id="line-134"></span><span>          </span><span class="annot"><span class="annottext">(Text -&gt; m ()) -&gt; Text -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;cannot downgrade to v1 because the &quot;</span></span><span>
</span><span id="line-135"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">CollectionName
</span><a href="#local-6989586621687989760"><span class="hs-identifier hs-var">collectionName</span></a></span><span>
</span><span id="line-136"></span><span>          </span><span class="annot"><span class="annottext">CollectionName -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Extended.html/Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; added to the allowlist is a role based allowlist&quot;</span></span><span>
</span><span id="line-137"></span><span>        </span><span class="annot"><span class="annottext">TxE QErr () -&gt; m ()
forall a. TxE QErr a -&gt; m a
forall (m :: * -&gt; *) a. MonadTx m =&gt; TxE QErr a -&gt; m a
</span><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#liftTx"><span class="hs-identifier hs-var">liftTx</span></a></span><span> </span><span class="annot"><span class="annottext">(TxE QErr () -&gt; m ()) -&gt; TxE QErr () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CollectionName -&gt; TxE QErr ()
forall (m :: * -&gt; *). MonadTx m =&gt; CollectionName -&gt; m ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addCollectionToAllowlistCatalog"><span class="hs-identifier hs-var">addCollectionToAllowlistCatalog</span></a></span><span> </span><span class="annot"><span class="annottext">CollectionName
</span><a href="#local-6989586621687989760"><span class="hs-identifier hs-var">collectionName</span></a></span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span>    </span><span class="hs-comment">-- remote schemas</span><span>
</span><span id="line-140"></span><span>    </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#withPathK"><span class="hs-identifier hs-type">withPathK</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;remote_schemas&quot;</span></span><span>
</span><span id="line-141"></span><span>      </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#indexedMapM_"><span class="hs-identifier hs-type">indexedMapM_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#liftTx"><span class="hs-identifier hs-type">liftTx</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addRemoteSchemaToCatalog"><span class="hs-identifier hs-type">addRemoteSchemaToCatalog</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621687989690"><span class="hs-identifier hs-type">schemas</span></a></span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span>    </span><span class="hs-comment">-- custom types</span><span>
</span><span id="line-144"></span><span>    </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#withPathK"><span class="hs-identifier hs-type">withPathK</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;custom_types&quot;</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#setCustomTypesInCatalog"><span class="hs-identifier hs-type">setCustomTypesInCatalog</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687989693"><span class="hs-identifier hs-type">customTypes</span></a></span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span>    </span><span class="hs-comment">-- cron triggers</span><span>
</span><span id="line-147"></span><span>    </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#withPathK"><span class="hs-identifier hs-type">withPathK</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;cron_triggers&quot;</span></span><span>
</span><span id="line-148"></span><span>      </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#indexedForM_"><span class="hs-identifier hs-type">indexedForM_</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687989695"><span class="hs-identifier hs-type">cronTriggers</span></a></span><span>
</span><span id="line-149"></span><span>      </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621687989771"><span class="annot"><span class="annottext">CronTriggerMetadata
</span><a href="#local-6989586621687989771"><span class="hs-identifier hs-var">ct</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">TxE QErr () -&gt; m ()
forall a. TxE QErr a -&gt; m a
forall (m :: * -&gt; *) a. MonadTx m =&gt; TxE QErr a -&gt; m a
</span><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#liftTx"><span class="hs-identifier hs-var">liftTx</span></a></span><span> </span><span class="annot"><span class="annottext">(TxE QErr () -&gt; m ()) -&gt; TxE QErr () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-150"></span><span>        </span><span class="annot"><span class="annottext">CronTriggerMetadata -&gt; TxE QErr ()
forall (m :: * -&gt; *). MonadTx m =&gt; CronTriggerMetadata -&gt; m ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addCronTriggerToCatalog"><span class="hs-identifier hs-var">addCronTriggerToCatalog</span></a></span><span> </span><span class="annot"><span class="annottext">CronTriggerMetadata
</span><a href="#local-6989586621687989771"><span class="hs-identifier hs-var">ct</span></a></span><span>
</span><span id="line-151"></span><span>
</span><span id="line-152"></span><span>    </span><span class="hs-comment">-- actions</span><span>
</span><span id="line-153"></span><span>    </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#withPathK"><span class="hs-identifier hs-type">withPathK</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;actions&quot;</span></span><span>
</span><span id="line-154"></span><span>      </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#indexedForM_"><span class="hs-identifier hs-type">indexedForM_</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687989694"><span class="hs-identifier hs-type">actions</span></a></span><span>
</span><span id="line-155"></span><span>      </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621687989773"><span class="annot"><span class="annottext">ActionMetadata
</span><a href="#local-6989586621687989773"><span class="hs-identifier hs-var">action</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-156"></span><span>        </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687989774"><span class="annot"><span class="annottext">createAction :: CreateAction
</span><a href="#local-6989586621687989774"><span class="hs-identifier hs-var hs-var hs-var">createAction</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-157"></span><span>              </span><span class="annot"><span class="annottext">ActionName -&gt; ActionDefinitionInput -&gt; Maybe Text -&gt; CreateAction
</span><a href="Hasura.RQL.DDL.Action.html#CreateAction"><span class="hs-identifier hs-var">CreateAction</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ActionMetadata -&gt; ActionName
</span><a href="Hasura.RQL.Types.Action.html#_amName"><span class="hs-identifier hs-var">_amName</span></a></span><span> </span><span class="annot"><span class="annottext">ActionMetadata
</span><a href="#local-6989586621687989773"><span class="hs-identifier hs-var">action</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ActionMetadata -&gt; ActionDefinitionInput
</span><a href="Hasura.RQL.Types.Action.html#_amDefinition"><span class="hs-identifier hs-var">_amDefinition</span></a></span><span> </span><span class="annot"><span class="annottext">ActionMetadata
</span><a href="#local-6989586621687989773"><span class="hs-identifier hs-var">action</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ActionMetadata -&gt; Maybe Text
</span><a href="Hasura.RQL.Types.Action.html#_amComment"><span class="hs-identifier hs-var">_amComment</span></a></span><span> </span><span class="annot"><span class="annottext">ActionMetadata
</span><a href="#local-6989586621687989773"><span class="hs-identifier hs-var">action</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-158"></span><span>        </span><span class="annot"><span class="annottext">CreateAction -&gt; m ()
forall (m :: * -&gt; *). MonadTx m =&gt; CreateAction -&gt; m ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addActionToCatalog"><span class="hs-identifier hs-var">addActionToCatalog</span></a></span><span> </span><span class="annot"><span class="annottext">CreateAction
</span><a href="#local-6989586621687989774"><span class="hs-identifier hs-var">createAction</span></a></span><span>
</span><span id="line-159"></span><span>        </span><span class="annot"><span class="annottext">Text -&gt; m () -&gt; m ()
forall (m :: * -&gt; *) a. QErrM m =&gt; Text -&gt; m a -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#withPathK"><span class="hs-identifier hs-var">withPathK</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;permissions&quot;</span></span><span>
</span><span id="line-160"></span><span>          </span><span class="annot"><span class="annottext">(m () -&gt; m ()) -&gt; m () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[ActionPermissionMetadata]
-&gt; (ActionPermissionMetadata -&gt; m ()) -&gt; m ()
forall (m :: * -&gt; *) (t :: * -&gt; *) a b.
(QErrM m, Foldable t) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#indexedForM_"><span class="hs-identifier hs-var">indexedForM_</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ActionMetadata -&gt; [ActionPermissionMetadata]
</span><a href="Hasura.RQL.Types.Action.html#_amPermissions"><span class="hs-identifier hs-var">_amPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">ActionMetadata
</span><a href="#local-6989586621687989773"><span class="hs-identifier hs-var">action</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-161"></span><span>          </span><span class="annot"><span class="annottext">((ActionPermissionMetadata -&gt; m ()) -&gt; m ())
-&gt; (ActionPermissionMetadata -&gt; m ()) -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621687989781"><span class="annot"><span class="annottext">ActionPermissionMetadata
</span><a href="#local-6989586621687989781"><span class="hs-identifier hs-var">permission</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-162"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687989782"><span class="annot"><span class="annottext">createActionPermission :: CreateActionPermission
</span><a href="#local-6989586621687989782"><span class="hs-identifier hs-var hs-var">createActionPermission</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-163"></span><span>                  </span><span class="annot"><span class="annottext">ActionName
-&gt; RoleName -&gt; Maybe Value -&gt; Maybe Text -&gt; CreateActionPermission
</span><a href="Hasura.RQL.DDL.Action.html#CreateActionPermission"><span class="hs-identifier hs-var">CreateActionPermission</span></a></span><span>
</span><span id="line-164"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ActionMetadata -&gt; ActionName
</span><a href="Hasura.RQL.Types.Action.html#_amName"><span class="hs-identifier hs-var">_amName</span></a></span><span> </span><span class="annot"><span class="annottext">ActionMetadata
</span><a href="#local-6989586621687989773"><span class="hs-identifier hs-var">action</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-165"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ActionPermissionMetadata -&gt; RoleName
</span><a href="Hasura.RQL.Types.Action.html#_apmRole"><span class="hs-identifier hs-var">_apmRole</span></a></span><span> </span><span class="annot"><span class="annottext">ActionPermissionMetadata
</span><a href="#local-6989586621687989781"><span class="hs-identifier hs-var">permission</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-166"></span><span>                    </span><span class="annot"><span class="annottext">Maybe Value
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-167"></span><span>                    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ActionPermissionMetadata -&gt; Maybe Text
</span><a href="Hasura.RQL.Types.Action.html#_apmComment"><span class="hs-identifier hs-var">_apmComment</span></a></span><span> </span><span class="annot"><span class="annottext">ActionPermissionMetadata
</span><a href="#local-6989586621687989781"><span class="hs-identifier hs-var">permission</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-168"></span><span>            </span><span class="annot"><span class="annottext">CreateActionPermission -&gt; m ()
forall (m :: * -&gt; *). MonadTx m =&gt; CreateActionPermission -&gt; m ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addActionPermissionToCatalog"><span class="hs-identifier hs-var">addActionPermissionToCatalog</span></a></span><span> </span><span class="annot"><span class="annottext">CreateActionPermission
</span><a href="#local-6989586621687989782"><span class="hs-identifier hs-var">createActionPermission</span></a></span><span>
</span><span id="line-169"></span><span>    </span><span class="hs-keyword">where</span><span>
</span><span id="line-170"></span><span>      </span><span id="local-6989586621687989747"><span class="annot"><span class="annottext">processPerms :: QualifiedTable -&gt; t (PermDef b a) -&gt; m ()
</span><a href="#local-6989586621687989747"><span class="hs-identifier hs-var hs-var">processPerms</span></a></span></span><span> </span><span id="local-6989586621687990642"><span class="annot"><span class="annottext">QualifiedTable
</span><a href="#local-6989586621687990642"><span class="hs-identifier hs-var">tableName</span></a></span></span><span> </span><span id="local-6989586621687990643"><span class="annot"><span class="annottext">t (PermDef b a)
</span><a href="#local-6989586621687990643"><span class="hs-identifier hs-var">perms</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">t (PermDef b a) -&gt; (PermDef b a -&gt; m ()) -&gt; m ()
forall (m :: * -&gt; *) (t :: * -&gt; *) a b.
(QErrM m, Foldable t) =&gt;
t a -&gt; (a -&gt; m b) -&gt; m ()
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#indexedForM_"><span class="hs-identifier hs-var">indexedForM_</span></a></span><span> </span><span class="annot"><span class="annottext">t (PermDef b a)
</span><a href="#local-6989586621687990643"><span class="hs-identifier hs-var">perms</span></a></span><span> </span><span class="annot"><span class="annottext">((PermDef b a -&gt; m ()) -&gt; m ()) -&gt; (PermDef b a -&gt; m ()) -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621687990644"><span class="annot"><span class="annottext">PermDef b a
</span><a href="#local-6989586621687990644"><span class="hs-identifier hs-var">perm</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-171"></span><span>        </span><span id="local-6989586621687990645"><span class="annot"><a href="#local-6989586621687990645"><span class="hs-identifier hs-var">systemDefined</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m SystemDefined
forall r (m :: * -&gt; *). MonadReader r m =&gt; m r
</span><span class="hs-identifier hs-var">ask</span></span><span>
</span><span id="line-172"></span><span>        </span><span class="annot"><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#liftTx"><span class="hs-identifier hs-type">liftTx</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addPermissionToCatalog"><span class="hs-identifier hs-type">addPermissionToCatalog</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687990642"><span class="hs-identifier hs-type">tableName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687990644"><span class="hs-identifier hs-type">perm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687990645"><span class="hs-identifier hs-type">systemDefined</span></a></span><span>
</span><span id="line-173"></span><span>
</span><span id="line-174"></span><span id="local-6989586621687988914"><span class="annot"><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#saveTableToCatalog"><span class="hs-identifier hs-type">saveTableToCatalog</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-175"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#MonadTx"><span class="hs-identifier hs-type">MonadTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687988914"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadReader</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#SystemDefined"><span class="hs-identifier hs-type">SystemDefined</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687988914"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.SQL.Types.html#QualifiedTable"><span class="hs-identifier hs-type">QualifiedTable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.Table.Cache.html#TableConfig"><span class="hs-identifier hs-type">TableConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.RQL.Types.BackendType.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.RQL.Types.BackendType.html#Vanilla"><span class="hs-identifier hs-type">Vanilla</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621687988914"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-176"></span><span id="saveTableToCatalog"><span class="annot"><span class="annottext">saveTableToCatalog :: forall (m :: * -&gt; *).
(MonadTx m, MonadReader SystemDefined m) =&gt;
QualifiedTable -&gt; Bool -&gt; TableConfig ('Postgres 'Vanilla) -&gt; m ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#saveTableToCatalog"><span class="hs-identifier hs-var hs-var">saveTableToCatalog</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.SQL.Types.html#QualifiedObject"><span class="hs-identifier hs-type">QualifiedObject</span></a></span><span> </span><span id="local-6989586621687990676"><span class="annot"><span class="annottext">SchemaName
</span><a href="#local-6989586621687990676"><span class="hs-identifier hs-var">sn</span></a></span></span><span> </span><span id="local-6989586621687990677"><span class="annot"><span class="annottext">TableName
</span><a href="#local-6989586621687990677"><span class="hs-identifier hs-var">tn</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621687990678"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621687990678"><span class="hs-identifier hs-var">isEnum</span></a></span></span><span> </span><span id="local-6989586621687990679"><span class="annot"><span class="annottext">TableConfig ('Postgres 'Vanilla)
</span><a href="#local-6989586621687990679"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-177"></span><span>  </span><span id="local-6989586621687990680"><span class="annot"><a href="#local-6989586621687990680"><span class="hs-identifier hs-var">systemDefined</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m SystemDefined
forall r (m :: * -&gt; *). MonadReader r m =&gt; m r
</span><span class="hs-identifier hs-var">ask</span></span><span>
</span><span id="line-178"></span><span>  </span><span class="annot"><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#liftTx"><span class="hs-identifier hs-type">liftTx</span></a></span><span>
</span><span id="line-179"></span><span>    </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#unitQE"><span class="hs-identifier hs-type">PG.unitQE</span></a></span><span>
</span><span id="line-180"></span><span>      </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.Types.html#defaultTxErrorHandler"><span class="hs-identifier hs-type">defaultTxErrorHandler</span></a></span><span>
</span><span id="line-181"></span><span>      </span><span class="annot"><span class="">[PG.sql|
    INSERT INTO &quot;hdb_catalog&quot;.&quot;hdb_table&quot;
      (table_schema, table_name, is_system_defined, is_enum, configuration)
    VALUES ($1, $2, $3, $4, $5)
  |]</span></span><span>
</span><span id="line-186"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621687990676"><span class="hs-identifier hs-type">sn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621687990677"><span class="hs-identifier hs-type">tn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621687990680"><span class="hs-identifier hs-type">systemDefined</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621687990678"><span class="hs-identifier hs-type">isEnum</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621687990683"><span class="hs-identifier hs-type">configVal</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-187"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">False</span></span><span>
</span><span id="line-188"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-189"></span><span>    </span><span id="local-6989586621687990683"><span class="annot"><span class="annottext">configVal :: ViaJSON Value
</span><a href="#local-6989586621687990683"><span class="hs-identifier hs-var hs-var">configVal</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value -&gt; ViaJSON Value
forall a. a -&gt; ViaJSON a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#ViaJSON"><span class="hs-identifier hs-var">PG.ViaJSON</span></a></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; ViaJSON Value) -&gt; Value -&gt; ViaJSON Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableConfig ('Postgres 'Vanilla) -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toJSON"><span class="hs-identifier hs-var">toJSON</span></a></span><span> </span><span class="annot"><span class="annottext">TableConfig ('Postgres 'Vanilla)
</span><a href="#local-6989586621687990679"><span class="hs-identifier hs-var">config</span></a></span><span>
</span><span id="line-190"></span><span>
</span><span id="line-191"></span><span id="local-6989586621687988916"><span id="local-6989586621687988917"><span class="annot"><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#insertRelationshipToCatalog"><span class="hs-identifier hs-type">insertRelationshipToCatalog</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-192"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#MonadTx"><span class="hs-identifier hs-type">MonadTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687988916"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadReader</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#SystemDefined"><span class="hs-identifier hs-type">SystemDefined</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687988916"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#ToJSON"><span class="hs-identifier hs-type">ToJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687988917"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-193"></span><span>  </span><span class="annot"><a href="Hasura.Backends.Postgres.SQL.Types.html#QualifiedTable"><span class="hs-identifier hs-type">QualifiedTable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-194"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#RelType"><span class="hs-identifier hs-type">RelType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-195"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Relationships.Local.html#RelDef"><span class="hs-identifier hs-type">RelDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687988917"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-196"></span><span>  </span><span class="annot"><a href="#local-6989586621687988916"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-197"></span><span id="insertRelationshipToCatalog"><span class="annot"><span class="annottext">insertRelationshipToCatalog :: forall (m :: * -&gt; *) a.
(MonadTx m, MonadReader SystemDefined m, ToJSON a) =&gt;
QualifiedTable -&gt; RelType -&gt; RelDef a -&gt; m ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#insertRelationshipToCatalog"><span class="hs-identifier hs-var hs-var">insertRelationshipToCatalog</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.SQL.Types.html#QualifiedObject"><span class="hs-identifier hs-type">QualifiedObject</span></a></span><span> </span><span id="local-6989586621687990702"><span class="annot"><span class="annottext">SchemaName
</span><a href="#local-6989586621687990702"><span class="hs-identifier hs-var">schema</span></a></span></span><span> </span><span id="local-6989586621687990703"><span class="annot"><span class="annottext">TableName
</span><a href="#local-6989586621687990703"><span class="hs-identifier hs-var">table</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621687990704"><span class="annot"><span class="annottext">RelType
</span><a href="#local-6989586621687990704"><span class="hs-identifier hs-var">relType</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Relationships.Local.html#RelDef"><span class="hs-identifier hs-type">RelDef</span></a></span><span> </span><span id="local-6989586621687990706"><span class="annot"><span class="annottext">RelName
</span><a href="#local-6989586621687990706"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621687990707"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621687990707"><span class="hs-identifier hs-var">using</span></a></span></span><span> </span><span id="local-6989586621687990708"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621687990708"><span class="hs-identifier hs-var">comment</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-198"></span><span>  </span><span id="local-6989586621687990709"><span class="annot"><a href="#local-6989586621687990709"><span class="hs-identifier hs-var">systemDefined</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m SystemDefined
forall r (m :: * -&gt; *). MonadReader r m =&gt; m r
</span><span class="hs-identifier hs-var">ask</span></span><span>
</span><span id="line-199"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687990710"><span class="annot"><a href="#local-6989586621687990710"><span class="hs-identifier hs-var hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SchemaName
</span><a href="#local-6989586621687990702"><span class="hs-identifier hs-var">schema</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TableName
</span><a href="#local-6989586621687990703"><span class="hs-identifier hs-var">table</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RelName
</span><a href="#local-6989586621687990706"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RelType -&gt; Text
</span><a href="Hasura.RQL.Types.Common.html#relTypeToTxt"><span class="hs-identifier hs-var">relTypeToTxt</span></a></span><span> </span><span class="annot"><span class="annottext">RelType
</span><a href="#local-6989586621687990704"><span class="hs-identifier hs-var">relType</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">a -&gt; ViaJSON a
forall a. a -&gt; ViaJSON a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#ViaJSON"><span class="hs-identifier hs-var">PG.ViaJSON</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621687990707"><span class="hs-identifier hs-var">using</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621687990708"><span class="hs-identifier hs-var">comment</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SystemDefined
</span><a href="#local-6989586621687990709"><span class="hs-identifier hs-var">systemDefined</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-200"></span><span>  </span><span class="annot"><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#liftTx"><span class="hs-identifier hs-type">liftTx</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#unitQE"><span class="hs-identifier hs-type">PG.unitQE</span></a></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.Types.html#defaultTxErrorHandler"><span class="hs-identifier hs-type">defaultTxErrorHandler</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687990712"><span class="hs-identifier hs-type">query</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687990710"><span class="hs-identifier hs-type">args</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">True</span></span><span>
</span><span id="line-201"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-202"></span><span>    </span><span id="local-6989586621687990712"><span class="annot"><span class="annottext">query :: Query
</span><a href="#local-6989586621687990712"><span class="hs-identifier hs-var hs-var">query</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-203"></span><span>      </span><span class="annot"><span class="">[PG.sql|
      INSERT INTO
        hdb_catalog.hdb_relationship
        (table_schema, table_name, rel_name, rel_type, rel_def, comment, is_system_defined)
      VALUES ($1, $2, $3, $4, $5 :: jsonb, $6, $7) |]</span></span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span id="local-6989586621687988940"><span id="local-6989586621687988941"><span class="annot"><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addEventTriggerToCatalog"><span class="hs-identifier hs-type">addEventTriggerToCatalog</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-210"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#MonadTx"><span class="hs-identifier hs-type">MonadTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687988940"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#Backend"><span class="hs-identifier hs-type">Backend</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.RQL.Types.BackendType.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687988941"><span class="hs-identifier hs-type">pgKind</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-211"></span><span>  </span><span class="annot"><a href="Hasura.Backends.Postgres.SQL.Types.html#QualifiedTable"><span class="hs-identifier hs-type">QualifiedTable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-212"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.EventTrigger.html#EventTriggerConf"><span class="hs-identifier hs-type">EventTriggerConf</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.RQL.Types.BackendType.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687988941"><span class="hs-identifier hs-type">pgKind</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-213"></span><span>  </span><span class="annot"><a href="#local-6989586621687988940"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span><span>
</span><span id="line-214"></span><span id="addEventTriggerToCatalog"><span class="annot"><span class="annottext">addEventTriggerToCatalog :: forall (m :: * -&gt; *) (pgKind :: PostgresKind).
(MonadTx m, Backend ('Postgres pgKind)) =&gt;
QualifiedTable -&gt; EventTriggerConf ('Postgres pgKind) -&gt; m ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addEventTriggerToCatalog"><span class="hs-identifier hs-var hs-var">addEventTriggerToCatalog</span></a></span></span><span> </span><span id="local-6989586621687990727"><span class="annot"><span class="annottext">QualifiedTable
</span><a href="#local-6989586621687990727"><span class="hs-identifier hs-var">qt</span></a></span></span><span> </span><span id="local-6989586621687990728"><span class="annot"><span class="annottext">EventTriggerConf ('Postgres pgKind)
</span><a href="#local-6989586621687990728"><span class="hs-identifier hs-var">etc</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxE QErr () -&gt; m ()
forall a. TxE QErr a -&gt; m a
forall (m :: * -&gt; *) a. MonadTx m =&gt; TxE QErr a -&gt; m a
</span><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#liftTx"><span class="hs-identifier hs-var">liftTx</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-215"></span><span>  </span><span class="annot"><span class="annottext">(PGTxErr -&gt; QErr)
-&gt; Query
-&gt; (TriggerName, SchemaName, TableName, ViaJSON Value)
-&gt; Bool
-&gt; TxE QErr ()
forall (m :: * -&gt; *) r e.
(MonadIO m, ToPrepArgs r) =&gt;
(PGTxErr -&gt; e) -&gt; Query -&gt; r -&gt; Bool -&gt; TxET e m ()
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#unitQE"><span class="hs-identifier hs-var">PG.unitQE</span></a></span><span>
</span><span id="line-216"></span><span>    </span><span class="annot"><span class="annottext">PGTxErr -&gt; QErr
</span><a href="Hasura.Backends.Postgres.Execute.Types.html#defaultTxErrorHandler"><span class="hs-identifier hs-var">defaultTxErrorHandler</span></a></span><span>
</span><span id="line-217"></span><span>    </span><span class="annot"><span class="">[PG.sql|
           INSERT into hdb_catalog.event_triggers
                       (name, type, schema_name, table_name, configuration)
           VALUES ($1, 'table', $2, $3, $4)
         |]</span></span><span>
</span><span id="line-222"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TriggerName
</span><a href="#local-6989586621687990729"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><a href="#local-6989586621687990730"><span class="hs-identifier hs-var">sn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TableName
</span><a href="#local-6989586621687990731"><span class="hs-identifier hs-var">tn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Value -&gt; ViaJSON Value
forall a. a -&gt; ViaJSON a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#ViaJSON"><span class="hs-identifier hs-var">PG.ViaJSON</span></a></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; ViaJSON Value) -&gt; Value -&gt; ViaJSON Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">EventTriggerConf ('Postgres pgKind) -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toJSON"><span class="hs-identifier hs-var">toJSON</span></a></span><span> </span><span class="annot"><span class="annottext">EventTriggerConf ('Postgres pgKind)
</span><a href="#local-6989586621687990728"><span class="hs-identifier hs-var">etc</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-223"></span><span>    </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-224"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-225"></span><span>    </span><span class="annot"><a href="Hasura.Backends.Postgres.SQL.Types.html#QualifiedObject"><span class="hs-identifier hs-type">QualifiedObject</span></a></span><span> </span><span id="local-6989586621687990730"><span class="annot"><span class="annottext">SchemaName
</span><a href="#local-6989586621687990730"><span class="hs-identifier hs-var">sn</span></a></span></span><span> </span><span id="local-6989586621687990731"><span class="annot"><span class="annottext">TableName
</span><a href="#local-6989586621687990731"><span class="hs-identifier hs-var">tn</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QualifiedTable
</span><a href="#local-6989586621687990727"><span class="hs-identifier hs-var">qt</span></a></span><span>
</span><span id="line-226"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.EventTrigger.html#EventTriggerConf"><span class="hs-identifier hs-type">EventTriggerConf</span></a></span><span> </span><span id="local-6989586621687990729"><span class="annot"><span class="annottext">TriggerName
</span><a href="#local-6989586621687990729"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span class="annot"><span class="annottext">TriggerOpsDef ('Postgres pgKind)
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe InputWebhook
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">RetryConf
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe [HeaderConf]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe RequestTransform
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe MetadataResponseTransform
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">Maybe AutoTriggerLogCleanupConfig
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">TriggerOnReplication
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EventTriggerConf ('Postgres pgKind)
</span><a href="#local-6989586621687990728"><span class="hs-identifier hs-var">etc</span></a></span><span>
</span><span id="line-227"></span><span>
</span><span id="line-228"></span><span id="local-6989586621687988923"><span class="annot"><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addComputedFieldToCatalog"><span class="hs-identifier hs-type">addComputedFieldToCatalog</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-229"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#MonadTx"><span class="hs-identifier hs-type">MonadTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687988923"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-230"></span><span>  </span><span class="annot"><a href="Hasura.RQL.DDL.ComputedField.html#AddComputedField"><span class="hs-identifier hs-type">AddComputedField</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.RQL.Types.BackendType.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.RQL.Types.BackendType.html#Vanilla"><span class="hs-identifier hs-type">Vanilla</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-231"></span><span>  </span><span class="annot"><a href="#local-6989586621687988923"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-232"></span><span id="addComputedFieldToCatalog"><span class="annot"><span class="annottext">addComputedFieldToCatalog :: forall (m :: * -&gt; *).
MonadTx m =&gt;
AddComputedField ('Postgres 'Vanilla) -&gt; m ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addComputedFieldToCatalog"><span class="hs-identifier hs-var hs-var">addComputedFieldToCatalog</span></a></span></span><span> </span><span id="local-6989586621687990747"><span class="annot"><span class="annottext">AddComputedField ('Postgres 'Vanilla)
</span><a href="#local-6989586621687990747"><span class="hs-identifier hs-var">q</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-233"></span><span>  </span><span class="annot"><span class="annottext">TxE QErr () -&gt; m ()
forall a. TxE QErr a -&gt; m a
forall (m :: * -&gt; *) a. MonadTx m =&gt; TxE QErr a -&gt; m a
</span><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#liftTx"><span class="hs-identifier hs-var">liftTx</span></a></span><span>
</span><span id="line-234"></span><span>    </span><span class="annot"><span class="annottext">(TxE QErr () -&gt; m ()) -&gt; TxE QErr () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(PGTxErr -&gt; QErr)
-&gt; Query
-&gt; (SchemaName, TableName, ComputedFieldName,
    ViaJSON ComputedFieldDefinition, Maybe Text)
-&gt; Bool
-&gt; TxE QErr ()
forall (m :: * -&gt; *) a r e.
(MonadIO m, FromRes a, ToPrepArgs r) =&gt;
(PGTxErr -&gt; e) -&gt; Query -&gt; r -&gt; Bool -&gt; TxET e m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#withQE"><span class="hs-identifier hs-var">PG.withQE</span></a></span><span>
</span><span id="line-235"></span><span>      </span><span class="annot"><span class="annottext">PGTxErr -&gt; QErr
</span><a href="Hasura.Backends.Postgres.Execute.Types.html#defaultTxErrorHandler"><span class="hs-identifier hs-var">defaultTxErrorHandler</span></a></span><span>
</span><span id="line-236"></span><span>      </span><span class="annot"><span class="">[PG.sql|
     INSERT INTO hdb_catalog.hdb_computed_field
       (table_schema, table_name, computed_field_name, definition, commentText)
     VALUES ($1, $2, $3, $4, $5)
    |]</span></span><span>
</span><span id="line-241"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SchemaName
</span><a href="#local-6989586621687990749"><span class="hs-identifier hs-var">schemaName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TableName
</span><a href="#local-6989586621687990750"><span class="hs-identifier hs-var">tableName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ComputedFieldName
</span><a href="#local-6989586621687990751"><span class="hs-identifier hs-var">computedField</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ComputedFieldDefinition -&gt; ViaJSON ComputedFieldDefinition
forall a. a -&gt; ViaJSON a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#ViaJSON"><span class="hs-identifier hs-var">PG.ViaJSON</span></a></span><span> </span><span class="annot"><span class="annottext">ComputedFieldDefinition ('Postgres 'Vanilla)
ComputedFieldDefinition
</span><a href="#local-6989586621687990752"><span class="hs-identifier hs-var">definition</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621687990753"><span class="hs-identifier hs-var">commentText</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-242"></span><span>      </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-243"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-244"></span><span>    </span><span id="local-6989586621687990753"><span class="annot"><span class="annottext">commentText :: Maybe Text
</span><a href="#local-6989586621687990753"><span class="hs-identifier hs-var hs-var">commentText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Comment -&gt; Maybe Text
</span><a href="Hasura.RQL.Types.Common.html#commentToMaybeText"><span class="hs-identifier hs-var">commentToMaybeText</span></a></span><span> </span><span class="annot"><span class="annottext">Comment
</span><a href="#local-6989586621687990755"><span class="hs-identifier hs-var">comment</span></a></span><span>
</span><span id="line-245"></span><span>    </span><span class="annot"><a href="Hasura.Backends.Postgres.SQL.Types.html#QualifiedObject"><span class="hs-identifier hs-type">QualifiedObject</span></a></span><span> </span><span id="local-6989586621687990749"><span class="annot"><span class="annottext">SchemaName
</span><a href="#local-6989586621687990749"><span class="hs-identifier hs-var">schemaName</span></a></span></span><span> </span><span id="local-6989586621687990750"><span class="annot"><span class="annottext">TableName
</span><a href="#local-6989586621687990750"><span class="hs-identifier hs-var">tableName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TableName ('Postgres 'Vanilla)
</span><a href="#local-6989586621687990756"><span class="hs-identifier hs-var">table</span></a></span><span>
</span><span id="line-246"></span><span>    </span><span class="annot"><a href="Hasura.RQL.DDL.ComputedField.html#AddComputedField"><span class="hs-identifier hs-type">AddComputedField</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621687990756"><span class="annot"><span class="annottext">TableName ('Postgres 'Vanilla)
</span><a href="#local-6989586621687990756"><span class="hs-identifier hs-var">table</span></a></span></span><span> </span><span id="local-6989586621687990751"><span class="annot"><span class="annottext">ComputedFieldName
</span><a href="#local-6989586621687990751"><span class="hs-identifier hs-var">computedField</span></a></span></span><span> </span><span id="local-6989586621687990752"><span class="annot"><span class="annottext">ComputedFieldDefinition ('Postgres 'Vanilla)
</span><a href="#local-6989586621687990752"><span class="hs-identifier hs-var">definition</span></a></span></span><span> </span><span id="local-6989586621687990755"><span class="annot"><span class="annottext">Comment
</span><a href="#local-6989586621687990755"><span class="hs-identifier hs-var">comment</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">AddComputedField ('Postgres 'Vanilla)
</span><a href="#local-6989586621687990747"><span class="hs-identifier hs-var">q</span></a></span><span>
</span><span id="line-247"></span><span>
</span><span id="line-248"></span><span id="local-6989586621687988932"><span class="annot"><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addRemoteRelationshipToCatalog"><span class="hs-identifier hs-type">addRemoteRelationshipToCatalog</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#MonadTx"><span class="hs-identifier hs-type">MonadTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687988932"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.RemoteRelationship.html#CreateFromSourceRelationship"><span class="hs-identifier hs-type">CreateFromSourceRelationship</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.RQL.Types.BackendType.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.RQL.Types.BackendType.html#Vanilla"><span class="hs-identifier hs-type">Vanilla</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621687988932"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-249"></span><span id="addRemoteRelationshipToCatalog"><span class="annot"><span class="annottext">addRemoteRelationshipToCatalog :: forall (m :: * -&gt; *).
MonadTx m =&gt;
CreateFromSourceRelationship ('Postgres 'Vanilla) -&gt; m ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addRemoteRelationshipToCatalog"><span class="hs-identifier hs-var hs-var">addRemoteRelationshipToCatalog</span></a></span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.RemoteRelationship.html#CreateFromSourceRelationship"><span class="hs-identifier hs-type">CreateFromSourceRelationship</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687990768"><span id="local-6989586621687990769"><span id="local-6989586621687990770"><span id="local-6989586621687990771"><span class="annot"><span class="annottext">SourceName
RelName
TableName ('Postgres 'Vanilla)
RemoteRelationshipDefinition
_crrSource :: SourceName
_crrTable :: TableName ('Postgres 'Vanilla)
_crrName :: RelName
_crrDefinition :: RemoteRelationshipDefinition
_crrDefinition :: forall (b :: BackendType).
CreateFromSourceRelationship b -&gt; RemoteRelationshipDefinition
_crrName :: forall (b :: BackendType).
CreateFromSourceRelationship b -&gt; RelName
_crrTable :: forall (b :: BackendType).
CreateFromSourceRelationship b -&gt; TableName b
_crrSource :: forall (b :: BackendType).
CreateFromSourceRelationship b -&gt; SourceName
</span><a href="#local-6989586621687990768"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-250"></span><span>  </span><span class="annot"><span class="annottext">TxE QErr () -&gt; m ()
forall a. TxE QErr a -&gt; m a
forall (m :: * -&gt; *) a. MonadTx m =&gt; TxE QErr a -&gt; m a
</span><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#liftTx"><span class="hs-identifier hs-var">liftTx</span></a></span><span>
</span><span id="line-251"></span><span>    </span><span class="annot"><span class="annottext">(TxE QErr () -&gt; m ()) -&gt; TxE QErr () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(PGTxErr -&gt; QErr)
-&gt; Query
-&gt; (RelName, SchemaName, TableName,
    ViaJSON RemoteRelationshipDefinition)
-&gt; Bool
-&gt; TxE QErr ()
forall (m :: * -&gt; *) r e.
(MonadIO m, ToPrepArgs r) =&gt;
(PGTxErr -&gt; e) -&gt; Query -&gt; r -&gt; Bool -&gt; TxET e m ()
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#unitQE"><span class="hs-identifier hs-var">PG.unitQE</span></a></span><span>
</span><span id="line-252"></span><span>      </span><span class="annot"><span class="annottext">PGTxErr -&gt; QErr
</span><a href="Hasura.Backends.Postgres.Execute.Types.html#defaultTxErrorHandler"><span class="hs-identifier hs-var">defaultTxErrorHandler</span></a></span><span>
</span><span id="line-253"></span><span>      </span><span class="annot"><span class="">[PG.sql|
       INSERT INTO hdb_catalog.hdb_remote_relationship
       (remote_relationship_name, table_schema, table_name, definition)
       VALUES ($1, $2, $3, $4::jsonb)
  |]</span></span><span>
</span><span id="line-258"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RelName
</span><a href="#local-6989586621687990770"><span class="hs-identifier hs-var">_crrName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><a href="#local-6989586621687990776"><span class="hs-identifier hs-var">schemaName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TableName
</span><a href="#local-6989586621687990777"><span class="hs-identifier hs-var">tableName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RemoteRelationshipDefinition
-&gt; ViaJSON RemoteRelationshipDefinition
forall a. a -&gt; ViaJSON a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#ViaJSON"><span class="hs-identifier hs-var">PG.ViaJSON</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteRelationshipDefinition
</span><a href="#local-6989586621687990771"><span class="hs-identifier hs-var">_crrDefinition</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-259"></span><span>      </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-260"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-261"></span><span>    </span><span class="annot"><a href="Hasura.Backends.Postgres.SQL.Types.html#QualifiedObject"><span class="hs-identifier hs-type">QualifiedObject</span></a></span><span> </span><span id="local-6989586621687990776"><span class="annot"><span class="annottext">SchemaName
</span><a href="#local-6989586621687990776"><span class="hs-identifier hs-var">schemaName</span></a></span></span><span> </span><span id="local-6989586621687990777"><span class="annot"><span class="annottext">TableName
</span><a href="#local-6989586621687990777"><span class="hs-identifier hs-var">tableName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TableName ('Postgres 'Vanilla)
</span><a href="#local-6989586621687990769"><span class="hs-identifier hs-var">_crrTable</span></a></span><span>
</span><span id="line-262"></span><span>
</span><span id="line-263"></span><span id="local-6989586621687988946"><span class="annot"><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addFunctionToCatalog"><span class="hs-identifier hs-type">addFunctionToCatalog</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-264"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#MonadTx"><span class="hs-identifier hs-type">MonadTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687988946"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadReader</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#SystemDefined"><span class="hs-identifier hs-type">SystemDefined</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687988946"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-265"></span><span>  </span><span class="annot"><a href="Hasura.Backends.Postgres.SQL.Types.html#QualifiedFunction"><span class="hs-identifier hs-type">QualifiedFunction</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-266"></span><span>  </span><span class="annot"><a href="Hasura.Function.Cache.html#FunctionConfig"><span class="hs-identifier hs-type">FunctionConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.RQL.Types.BackendType.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.RQL.Types.BackendType.html#Vanilla"><span class="hs-identifier hs-type">Vanilla</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-267"></span><span>  </span><span class="annot"><a href="#local-6989586621687988946"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-268"></span><span id="addFunctionToCatalog"><span class="annot"><span class="annottext">addFunctionToCatalog :: forall (m :: * -&gt; *).
(MonadTx m, MonadReader SystemDefined m) =&gt;
QualifiedFunction -&gt; FunctionConfig ('Postgres 'Vanilla) -&gt; m ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addFunctionToCatalog"><span class="hs-identifier hs-var hs-var">addFunctionToCatalog</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.SQL.Types.html#QualifiedObject"><span class="hs-identifier hs-type">QualifiedObject</span></a></span><span> </span><span id="local-6989586621687990802"><span class="annot"><span class="annottext">SchemaName
</span><a href="#local-6989586621687990802"><span class="hs-identifier hs-var">sn</span></a></span></span><span> </span><span id="local-6989586621687990803"><span class="annot"><span class="annottext">FunctionName
</span><a href="#local-6989586621687990803"><span class="hs-identifier hs-var">fn</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621687990804"><span class="annot"><span class="annottext">FunctionConfig ('Postgres 'Vanilla)
</span><a href="#local-6989586621687990804"><span class="hs-identifier hs-var">config</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-269"></span><span>  </span><span id="local-6989586621687990805"><span class="annot"><a href="#local-6989586621687990805"><span class="hs-identifier hs-var">systemDefined</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m SystemDefined
forall r (m :: * -&gt; *). MonadReader r m =&gt; m r
</span><span class="hs-identifier hs-var">ask</span></span><span>
</span><span id="line-270"></span><span>  </span><span class="annot"><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#liftTx"><span class="hs-identifier hs-type">liftTx</span></a></span><span>
</span><span id="line-271"></span><span>    </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#unitQE"><span class="hs-identifier hs-type">PG.unitQE</span></a></span><span>
</span><span id="line-272"></span><span>      </span><span class="annot"><a href="Hasura.Backends.Postgres.Execute.Types.html#defaultTxErrorHandler"><span class="hs-identifier hs-type">defaultTxErrorHandler</span></a></span><span>
</span><span id="line-273"></span><span>      </span><span class="annot"><span class="">[PG.sql|
         INSERT INTO &quot;hdb_catalog&quot;.&quot;hdb_function&quot;
           (function_schema, function_name, configuration, is_system_defined)
         VALUES ($1, $2, $3, $4)
                 |]</span></span><span>
</span><span id="line-278"></span><span>      </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621687990802"><span class="hs-identifier hs-type">sn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621687990803"><span class="hs-identifier hs-type">fn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#ViaJSON"><span class="hs-identifier hs-type">PG.ViaJSON</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687990804"><span class="hs-identifier hs-type">config</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621687990805"><span class="hs-identifier hs-type">systemDefined</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-279"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">False</span></span><span>
</span><span id="line-280"></span><span>
</span><span id="line-281"></span><span class="annot"><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addRemoteSchemaToCatalog"><span class="hs-identifier hs-type">addRemoteSchemaToCatalog</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-282"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Metadata.Common.html#RemoteSchemaMetadata"><span class="hs-identifier hs-type">RemoteSchemaMetadata</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-283"></span><span>  </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#TxE"><span class="hs-identifier hs-type">PG.TxE</span></a></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#QErr"><span class="hs-identifier hs-type">QErr</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-284"></span><span id="addRemoteSchemaToCatalog"><span class="annot"><span class="annottext">addRemoteSchemaToCatalog :: RemoteSchemaMetadata -&gt; TxE QErr ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addRemoteSchemaToCatalog"><span class="hs-identifier hs-var hs-var">addRemoteSchemaToCatalog</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RemoteSchema.Metadata.Core.html#RemoteSchemaMetadata"><span class="hs-identifier hs-type">RemoteSchemaMetadata</span></a></span><span> </span><span id="local-6989586621687990807"><span class="annot"><span class="annottext">RemoteSchemaName
</span><a href="#local-6989586621687990807"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621687990808"><span class="annot"><span class="annottext">RemoteSchemaDef
</span><a href="#local-6989586621687990808"><span class="hs-identifier hs-var">def</span></a></span></span><span> </span><span id="local-6989586621687990809"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621687990809"><span class="hs-identifier hs-var">comment</span></a></span></span><span> </span><span class="annot"><span class="annottext">[RemoteSchemaPermissionMetadata]
</span><span class="hs-identifier">_</span></span><span> </span><span class="annot"><span class="annottext">SchemaRemoteRelationships RemoteRelationshipDefinition
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-285"></span><span>  </span><span class="annot"><span class="annottext">(PGTxErr -&gt; QErr)
-&gt; Query
-&gt; (RemoteSchemaName, ViaJSON Value, Maybe Text)
-&gt; Bool
-&gt; TxE QErr ()
forall (m :: * -&gt; *) r e.
(MonadIO m, ToPrepArgs r) =&gt;
(PGTxErr -&gt; e) -&gt; Query -&gt; r -&gt; Bool -&gt; TxET e m ()
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#unitQE"><span class="hs-identifier hs-var">PG.unitQE</span></a></span><span>
</span><span id="line-286"></span><span>    </span><span class="annot"><span class="annottext">PGTxErr -&gt; QErr
</span><a href="Hasura.Backends.Postgres.Execute.Types.html#defaultTxErrorHandler"><span class="hs-identifier hs-var">defaultTxErrorHandler</span></a></span><span>
</span><span id="line-287"></span><span>    </span><span class="annot"><span class="">[PG.sql|
    INSERT into hdb_catalog.remote_schemas
      (name, definition, comment)
      VALUES ($1, $2, $3)
  |]</span></span><span>
</span><span id="line-292"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RemoteSchemaName
</span><a href="#local-6989586621687990807"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Value -&gt; ViaJSON Value
forall a. a -&gt; ViaJSON a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#ViaJSON"><span class="hs-identifier hs-var">PG.ViaJSON</span></a></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; ViaJSON Value) -&gt; Value -&gt; ViaJSON Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaDef -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toJSON"><span class="hs-identifier hs-var">toJSON</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaDef
</span><a href="#local-6989586621687990808"><span class="hs-identifier hs-var">def</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621687990809"><span class="hs-identifier hs-var">comment</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-293"></span><span>    </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-294"></span><span>
</span><span id="line-295"></span><span id="local-6989586621687988950"><span class="annot"><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addCollectionToCatalog"><span class="hs-identifier hs-type">addCollectionToCatalog</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-296"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#MonadTx"><span class="hs-identifier hs-type">MonadTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687988950"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.QueryCollection.html#CreateCollection"><span class="hs-identifier hs-type">CreateCollection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#SystemDefined"><span class="hs-identifier hs-type">SystemDefined</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621687988950"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-297"></span><span id="addCollectionToCatalog"><span class="annot"><span class="annottext">addCollectionToCatalog :: forall (m :: * -&gt; *).
MonadTx m =&gt;
CreateCollection -&gt; SystemDefined -&gt; m ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addCollectionToCatalog"><span class="hs-identifier hs-var hs-var">addCollectionToCatalog</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.QueryCollection.html#CreateCollection"><span class="hs-identifier hs-type">CreateCollection</span></a></span><span> </span><span id="local-6989586621687990822"><span class="annot"><span class="annottext">CollectionName
</span><a href="#local-6989586621687990822"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621687990823"><span class="annot"><span class="annottext">CollectionDef
</span><a href="#local-6989586621687990823"><span class="hs-identifier hs-var">defn</span></a></span></span><span> </span><span id="local-6989586621687990824"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621687990824"><span class="hs-identifier hs-var">mComment</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621687990825"><span class="annot"><span class="annottext">SystemDefined
</span><a href="#local-6989586621687990825"><span class="hs-identifier hs-var">systemDefined</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-298"></span><span>  </span><span class="annot"><span class="annottext">TxE QErr () -&gt; m ()
forall a. TxE QErr a -&gt; m a
forall (m :: * -&gt; *) a. MonadTx m =&gt; TxE QErr a -&gt; m a
</span><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#liftTx"><span class="hs-identifier hs-var">liftTx</span></a></span><span>
</span><span id="line-299"></span><span>    </span><span class="annot"><span class="annottext">(TxE QErr () -&gt; m ()) -&gt; TxE QErr () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(PGTxErr -&gt; QErr)
-&gt; Query
-&gt; (CollectionName, ViaJSON CollectionDef, Maybe Text,
    SystemDefined)
-&gt; Bool
-&gt; TxE QErr ()
forall (m :: * -&gt; *) r e.
(MonadIO m, ToPrepArgs r) =&gt;
(PGTxErr -&gt; e) -&gt; Query -&gt; r -&gt; Bool -&gt; TxET e m ()
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#unitQE"><span class="hs-identifier hs-var">PG.unitQE</span></a></span><span>
</span><span id="line-300"></span><span>      </span><span class="annot"><span class="annottext">PGTxErr -&gt; QErr
</span><a href="Hasura.Backends.Postgres.Execute.Types.html#defaultTxErrorHandler"><span class="hs-identifier hs-var">defaultTxErrorHandler</span></a></span><span>
</span><span id="line-301"></span><span>      </span><span class="annot"><span class="">[PG.sql|
    INSERT INTO hdb_catalog.hdb_query_collection
      (collection_name, collection_defn, comment, is_system_defined)
    VALUES ($1, $2, $3, $4)
  |]</span></span><span>
</span><span id="line-306"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CollectionName
</span><a href="#local-6989586621687990822"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CollectionDef -&gt; ViaJSON CollectionDef
forall a. a -&gt; ViaJSON a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#ViaJSON"><span class="hs-identifier hs-var">PG.ViaJSON</span></a></span><span> </span><span class="annot"><span class="annottext">CollectionDef
</span><a href="#local-6989586621687990823"><span class="hs-identifier hs-var">defn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621687990824"><span class="hs-identifier hs-var">mComment</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SystemDefined
</span><a href="#local-6989586621687990825"><span class="hs-identifier hs-var">systemDefined</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-307"></span><span>      </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-308"></span><span>
</span><span id="line-309"></span><span id="local-6989586621687988959"><span class="annot"><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addCollectionToAllowlistCatalog"><span class="hs-identifier hs-type">addCollectionToAllowlistCatalog</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#MonadTx"><span class="hs-identifier hs-type">MonadTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687988959"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.QueryCollection.html#CollectionName"><span class="hs-identifier hs-type">CollectionName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621687988959"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-310"></span><span id="addCollectionToAllowlistCatalog"><span class="annot"><span class="annottext">addCollectionToAllowlistCatalog :: forall (m :: * -&gt; *). MonadTx m =&gt; CollectionName -&gt; m ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addCollectionToAllowlistCatalog"><span class="hs-identifier hs-var hs-var">addCollectionToAllowlistCatalog</span></a></span></span><span> </span><span id="local-6989586621687990833"><span class="annot"><span class="annottext">CollectionName
</span><a href="#local-6989586621687990833"><span class="hs-identifier hs-var">collName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-311"></span><span>  </span><span class="annot"><span class="annottext">TxE QErr () -&gt; m ()
forall a. TxE QErr a -&gt; m a
forall (m :: * -&gt; *) a. MonadTx m =&gt; TxE QErr a -&gt; m a
</span><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#liftTx"><span class="hs-identifier hs-var">liftTx</span></a></span><span>
</span><span id="line-312"></span><span>    </span><span class="annot"><span class="annottext">(TxE QErr () -&gt; m ()) -&gt; TxE QErr () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(PGTxErr -&gt; QErr)
-&gt; Query -&gt; Identity CollectionName -&gt; Bool -&gt; TxE QErr ()
forall (m :: * -&gt; *) r e.
(MonadIO m, ToPrepArgs r) =&gt;
(PGTxErr -&gt; e) -&gt; Query -&gt; r -&gt; Bool -&gt; TxET e m ()
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#unitQE"><span class="hs-identifier hs-var">PG.unitQE</span></a></span><span>
</span><span id="line-313"></span><span>      </span><span class="annot"><span class="annottext">PGTxErr -&gt; QErr
</span><a href="Hasura.Backends.Postgres.Execute.Types.html#defaultTxErrorHandler"><span class="hs-identifier hs-var">defaultTxErrorHandler</span></a></span><span>
</span><span id="line-314"></span><span>      </span><span class="annot"><span class="">[PG.sql|
      INSERT INTO hdb_catalog.hdb_allowlist
                   (collection_name)
            VALUES ($1)
      |]</span></span><span>
</span><span id="line-319"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CollectionName -&gt; Identity CollectionName
forall a. a -&gt; Identity a
</span><span class="hs-identifier hs-var">Identity</span></span><span> </span><span class="annot"><span class="annottext">CollectionName
</span><a href="#local-6989586621687990833"><span class="hs-identifier hs-var">collName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-320"></span><span>      </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-321"></span><span>
</span><span id="line-322"></span><span id="local-6989586621687988968"><span class="annot"><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#setCustomTypesInCatalog"><span class="hs-identifier hs-type">setCustomTypesInCatalog</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#MonadTx"><span class="hs-identifier hs-type">MonadTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687988968"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#CustomTypes"><span class="hs-identifier hs-type">CustomTypes</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621687988968"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-323"></span><span id="setCustomTypesInCatalog"><span class="annot"><span class="annottext">setCustomTypesInCatalog :: forall (m :: * -&gt; *). MonadTx m =&gt; CustomTypes -&gt; m ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#setCustomTypesInCatalog"><span class="hs-identifier hs-var hs-var">setCustomTypesInCatalog</span></a></span></span><span> </span><span id="local-6989586621687990847"><span class="annot"><span class="annottext">CustomTypes
</span><a href="#local-6989586621687990847"><span class="hs-identifier hs-var">customTypes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxE QErr () -&gt; m ()
forall a. TxE QErr a -&gt; m a
forall (m :: * -&gt; *) a. MonadTx m =&gt; TxE QErr a -&gt; m a
</span><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#liftTx"><span class="hs-identifier hs-var">liftTx</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-324"></span><span>  </span><span class="annot"><span class="annottext">TxE QErr ()
</span><a href="#local-6989586621687990848"><span class="hs-identifier hs-var">clearCustomTypes</span></a></span><span>
</span><span id="line-325"></span><span>  </span><span class="annot"><span class="annottext">(PGTxErr -&gt; QErr)
-&gt; Query -&gt; Identity (ViaJSON CustomTypes) -&gt; Bool -&gt; TxE QErr ()
forall (m :: * -&gt; *) r e.
(MonadIO m, ToPrepArgs r) =&gt;
(PGTxErr -&gt; e) -&gt; Query -&gt; r -&gt; Bool -&gt; TxET e m ()
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#unitQE"><span class="hs-identifier hs-var">PG.unitQE</span></a></span><span>
</span><span id="line-326"></span><span>    </span><span class="annot"><span class="annottext">PGTxErr -&gt; QErr
</span><a href="Hasura.Backends.Postgres.Execute.Types.html#defaultTxErrorHandler"><span class="hs-identifier hs-var">defaultTxErrorHandler</span></a></span><span>
</span><span id="line-327"></span><span>    </span><span class="annot"><span class="">[PG.sql|
    INSERT into hdb_catalog.hdb_custom_types
      (custom_types)
      VALUES ($1)
  |]</span></span><span>
</span><span id="line-332"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ViaJSON CustomTypes -&gt; Identity (ViaJSON CustomTypes)
forall a. a -&gt; Identity a
</span><span class="hs-identifier hs-var">Identity</span></span><span> </span><span class="annot"><span class="annottext">(ViaJSON CustomTypes -&gt; Identity (ViaJSON CustomTypes))
-&gt; ViaJSON CustomTypes -&gt; Identity (ViaJSON CustomTypes)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CustomTypes -&gt; ViaJSON CustomTypes
forall a. a -&gt; ViaJSON a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#ViaJSON"><span class="hs-identifier hs-var">PG.ViaJSON</span></a></span><span> </span><span class="annot"><span class="annottext">CustomTypes
</span><a href="#local-6989586621687990847"><span class="hs-identifier hs-var">customTypes</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-333"></span><span>    </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-334"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-335"></span><span>    </span><span id="local-6989586621687990848"><span class="annot"><span class="annottext">clearCustomTypes :: TxE QErr ()
</span><a href="#local-6989586621687990848"><span class="hs-identifier hs-var hs-var">clearCustomTypes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-336"></span><span>      </span><span class="annot"><span class="annottext">(PGTxErr -&gt; QErr) -&gt; Query -&gt; () -&gt; Bool -&gt; TxE QErr ()
forall (m :: * -&gt; *) r e.
(MonadIO m, ToPrepArgs r) =&gt;
(PGTxErr -&gt; e) -&gt; Query -&gt; r -&gt; Bool -&gt; TxET e m ()
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#unitQE"><span class="hs-identifier hs-var">PG.unitQE</span></a></span><span>
</span><span id="line-337"></span><span>        </span><span class="annot"><span class="annottext">PGTxErr -&gt; QErr
</span><a href="Hasura.Backends.Postgres.Execute.Types.html#defaultTxErrorHandler"><span class="hs-identifier hs-var">defaultTxErrorHandler</span></a></span><span>
</span><span id="line-338"></span><span>        </span><span class="annot"><span class="">[PG.sql|
        DELETE FROM hdb_catalog.hdb_custom_types
      |]</span></span><span>
</span><span id="line-341"></span><span>        </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-342"></span><span>        </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-343"></span><span>
</span><span id="line-344"></span><span id="local-6989586621687988974"><span class="annot"><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addActionToCatalog"><span class="hs-identifier hs-type">addActionToCatalog</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#MonadTx"><span class="hs-identifier hs-type">MonadTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687988974"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#CreateAction"><span class="hs-identifier hs-type">CreateAction</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621687988974"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-345"></span><span id="addActionToCatalog"><span class="annot"><span class="annottext">addActionToCatalog :: forall (m :: * -&gt; *). MonadTx m =&gt; CreateAction -&gt; m ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addActionToCatalog"><span class="hs-identifier hs-var hs-var">addActionToCatalog</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#CreateAction"><span class="hs-identifier hs-type">CreateAction</span></a></span><span> </span><span id="local-6989586621687990872"><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621687990872"><span class="hs-identifier hs-var">actionName</span></a></span></span><span> </span><span id="local-6989586621687990873"><span class="annot"><span class="annottext">ActionDefinitionInput
</span><a href="#local-6989586621687990873"><span class="hs-identifier hs-var">actionDefinition</span></a></span></span><span> </span><span id="local-6989586621687990874"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621687990874"><span class="hs-identifier hs-var">comment</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-346"></span><span>  </span><span class="annot"><span class="annottext">TxE QErr () -&gt; m ()
forall a. TxE QErr a -&gt; m a
forall (m :: * -&gt; *) a. MonadTx m =&gt; TxE QErr a -&gt; m a
</span><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#liftTx"><span class="hs-identifier hs-var">liftTx</span></a></span><span>
</span><span id="line-347"></span><span>    </span><span class="annot"><span class="annottext">(TxE QErr () -&gt; m ()) -&gt; TxE QErr () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(PGTxErr -&gt; QErr)
-&gt; Query
-&gt; (ActionName, ViaJSON ActionDefinitionInput, Maybe Text)
-&gt; Bool
-&gt; TxE QErr ()
forall (m :: * -&gt; *) r e.
(MonadIO m, ToPrepArgs r) =&gt;
(PGTxErr -&gt; e) -&gt; Query -&gt; r -&gt; Bool -&gt; TxET e m ()
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#unitQE"><span class="hs-identifier hs-var">PG.unitQE</span></a></span><span>
</span><span id="line-348"></span><span>      </span><span class="annot"><span class="annottext">PGTxErr -&gt; QErr
</span><a href="Hasura.Backends.Postgres.Execute.Types.html#defaultTxErrorHandler"><span class="hs-identifier hs-var">defaultTxErrorHandler</span></a></span><span>
</span><span id="line-349"></span><span>      </span><span class="annot"><span class="">[PG.sql|
    INSERT into hdb_catalog.hdb_action
      (action_name, action_defn, comment)
      VALUES ($1, $2, $3)
  |]</span></span><span>
</span><span id="line-354"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621687990872"><span class="hs-identifier hs-var">actionName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ActionDefinitionInput -&gt; ViaJSON ActionDefinitionInput
forall a. a -&gt; ViaJSON a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#ViaJSON"><span class="hs-identifier hs-var">PG.ViaJSON</span></a></span><span> </span><span class="annot"><span class="annottext">ActionDefinitionInput
</span><a href="#local-6989586621687990873"><span class="hs-identifier hs-var">actionDefinition</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621687990874"><span class="hs-identifier hs-var">comment</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-355"></span><span>      </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-356"></span><span>
</span><span id="line-357"></span><span id="local-6989586621687988978"><span class="annot"><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addActionPermissionToCatalog"><span class="hs-identifier hs-type">addActionPermissionToCatalog</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#MonadTx"><span class="hs-identifier hs-type">MonadTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687988978"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#CreateActionPermission"><span class="hs-identifier hs-type">CreateActionPermission</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621687988978"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-358"></span><span id="addActionPermissionToCatalog"><span class="annot"><span class="annottext">addActionPermissionToCatalog :: forall (m :: * -&gt; *). MonadTx m =&gt; CreateActionPermission -&gt; m ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addActionPermissionToCatalog"><span class="hs-identifier hs-var hs-var">addActionPermissionToCatalog</span></a></span></span><span> </span><span class="annot"><a href="Hasura.RQL.DDL.Action.html#CreateActionPermission"><span class="hs-identifier hs-type">CreateActionPermission</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687990883"><span id="local-6989586621687990884"><span id="local-6989586621687990885"><span id="local-6989586621687990886"><span class="annot"><span class="annottext">Maybe Text
Maybe Value
RoleName
ActionName
_capAction :: ActionName
_capRole :: RoleName
_capDefinition :: Maybe Value
_capComment :: Maybe Text
_capComment :: CreateActionPermission -&gt; Maybe Text
_capDefinition :: CreateActionPermission -&gt; Maybe Value
_capRole :: CreateActionPermission -&gt; RoleName
_capAction :: CreateActionPermission -&gt; ActionName
</span><a href="#local-6989586621687990883"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-359"></span><span>  </span><span class="annot"><span class="annottext">TxE QErr () -&gt; m ()
forall a. TxE QErr a -&gt; m a
forall (m :: * -&gt; *) a. MonadTx m =&gt; TxE QErr a -&gt; m a
</span><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#liftTx"><span class="hs-identifier hs-var">liftTx</span></a></span><span>
</span><span id="line-360"></span><span>    </span><span class="annot"><span class="annottext">(TxE QErr () -&gt; m ()) -&gt; TxE QErr () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(PGTxErr -&gt; QErr)
-&gt; Query
-&gt; (ActionName, RoleName, Maybe Text)
-&gt; Bool
-&gt; TxE QErr ()
forall (m :: * -&gt; *) r e.
(MonadIO m, ToPrepArgs r) =&gt;
(PGTxErr -&gt; e) -&gt; Query -&gt; r -&gt; Bool -&gt; TxET e m ()
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#unitQE"><span class="hs-identifier hs-var">PG.unitQE</span></a></span><span>
</span><span id="line-361"></span><span>      </span><span class="annot"><span class="annottext">PGTxErr -&gt; QErr
</span><a href="Hasura.Backends.Postgres.Execute.Types.html#defaultTxErrorHandler"><span class="hs-identifier hs-var">defaultTxErrorHandler</span></a></span><span>
</span><span id="line-362"></span><span>      </span><span class="annot"><span class="">[PG.sql|
    INSERT into hdb_catalog.hdb_action_permission
      (action_name, role_name, comment)
      VALUES ($1, $2, $3)
  |]</span></span><span>
</span><span id="line-367"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ActionName
</span><a href="#local-6989586621687990883"><span class="hs-identifier hs-var">_capAction</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RoleName
</span><a href="#local-6989586621687990884"><span class="hs-identifier hs-var">_capRole</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621687990886"><span class="hs-identifier hs-var">_capComment</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-368"></span><span>      </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-369"></span><span>
</span><span id="line-370"></span><span id="local-6989586621687989054"><span id="local-6989586621687989055"><span id="local-6989586621687989056"><span class="annot"><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addPermissionToCatalog"><span class="hs-identifier hs-type">addPermissionToCatalog</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-371"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#MonadTx"><span class="hs-identifier hs-type">MonadTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687989054"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#Backend"><span class="hs-identifier hs-type">Backend</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687989055"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-372"></span><span>  </span><span class="annot"><a href="Hasura.Backends.Postgres.SQL.Types.html#QualifiedTable"><span class="hs-identifier hs-type">QualifiedTable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-373"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Permission.html#PermDef"><span class="hs-identifier hs-type">PermDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687989055"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687989056"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-374"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#SystemDefined"><span class="hs-identifier hs-type">SystemDefined</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-375"></span><span>  </span><span class="annot"><a href="#local-6989586621687989054"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-376"></span><span id="addPermissionToCatalog"><span class="annot"><span class="annottext">addPermissionToCatalog :: forall (m :: * -&gt; *) (b :: BackendType) (a :: BackendType -&gt; *).
(MonadTx m, Backend b) =&gt;
QualifiedTable -&gt; PermDef b a -&gt; SystemDefined -&gt; m ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addPermissionToCatalog"><span class="hs-identifier hs-var hs-var">addPermissionToCatalog</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.SQL.Types.html#QualifiedObject"><span class="hs-identifier hs-type">QualifiedObject</span></a></span><span> </span><span id="local-6989586621687990904"><span class="annot"><span class="annottext">SchemaName
</span><a href="#local-6989586621687990904"><span class="hs-identifier hs-var">sn</span></a></span></span><span> </span><span id="local-6989586621687990905"><span class="annot"><span class="annottext">TableName
</span><a href="#local-6989586621687990905"><span class="hs-identifier hs-var">tn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Permission.html#PermDef"><span class="hs-identifier hs-type">PermDef</span></a></span><span> </span><span id="local-6989586621687990907"><span class="annot"><span class="annottext">RoleName
</span><a href="#local-6989586621687990907"><span class="hs-identifier hs-var">rn</span></a></span></span><span> </span><span id="local-6989586621687990908"><span class="annot"><span class="annottext">PermDefPermission b a
</span><a href="#local-6989586621687990908"><span class="hs-identifier hs-var">qdef</span></a></span></span><span> </span><span id="local-6989586621687990909"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621687990909"><span class="hs-identifier hs-var">mComment</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621687990910"><span class="annot"><span class="annottext">SystemDefined
</span><a href="#local-6989586621687990910"><span class="hs-identifier hs-var">systemDefined</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-377"></span><span>  </span><span class="annot"><span class="annottext">TxE QErr () -&gt; m ()
forall a. TxE QErr a -&gt; m a
forall (m :: * -&gt; *) a. MonadTx m =&gt; TxE QErr a -&gt; m a
</span><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#liftTx"><span class="hs-identifier hs-var">liftTx</span></a></span><span>
</span><span id="line-378"></span><span>    </span><span class="annot"><span class="annottext">(TxE QErr () -&gt; m ()) -&gt; TxE QErr () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(PGTxErr -&gt; QErr)
-&gt; Query
-&gt; (SchemaName, TableName, RoleName, Text,
    ViaJSON (PermDefPermission b a), Maybe Text, SystemDefined)
-&gt; Bool
-&gt; TxE QErr ()
forall (m :: * -&gt; *) r e.
(MonadIO m, ToPrepArgs r) =&gt;
(PGTxErr -&gt; e) -&gt; Query -&gt; r -&gt; Bool -&gt; TxET e m ()
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#unitQE"><span class="hs-identifier hs-var">PG.unitQE</span></a></span><span>
</span><span id="line-379"></span><span>      </span><span class="annot"><span class="annottext">PGTxErr -&gt; QErr
</span><a href="Hasura.Backends.Postgres.Execute.Types.html#defaultTxErrorHandler"><span class="hs-identifier hs-var">defaultTxErrorHandler</span></a></span><span>
</span><span id="line-380"></span><span>      </span><span class="annot"><span class="">[PG.sql|
           INSERT INTO
               hdb_catalog.hdb_permission
               (table_schema, table_name, role_name, perm_type, perm_def, comment, is_system_defined)
           VALUES ($1, $2, $3, $4, $5 :: jsonb, $6, $7)
                |]</span></span><span>
</span><span id="line-386"></span><span>      </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SchemaName
</span><a href="#local-6989586621687990904"><span class="hs-identifier hs-var">sn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TableName
</span><a href="#local-6989586621687990905"><span class="hs-identifier hs-var">tn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RoleName
</span><a href="#local-6989586621687990907"><span class="hs-identifier hs-var">rn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PermType -&gt; Text
</span><a href="Hasura.RQL.Types.Permission.html#permTypeToCode"><span class="hs-identifier hs-var">permTypeToCode</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PermDefPermission b a -&gt; PermType
forall (b :: BackendType) (a :: BackendType -&gt; *).
PermDefPermission b a -&gt; PermType
</span><a href="Hasura.RQL.Types.Permission.html#reflectPermDefPermission"><span class="hs-identifier hs-var">reflectPermDefPermission</span></a></span><span> </span><span class="annot"><span class="annottext">PermDefPermission b a
</span><a href="#local-6989586621687990908"><span class="hs-identifier hs-var">qdef</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PermDefPermission b a -&gt; ViaJSON (PermDefPermission b a)
forall a. a -&gt; ViaJSON a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#ViaJSON"><span class="hs-identifier hs-var">PG.ViaJSON</span></a></span><span> </span><span class="annot"><span class="annottext">PermDefPermission b a
</span><a href="#local-6989586621687990908"><span class="hs-identifier hs-var">qdef</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621687990909"><span class="hs-identifier hs-var">mComment</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SystemDefined
</span><a href="#local-6989586621687990910"><span class="hs-identifier hs-var">systemDefined</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-387"></span><span>      </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-388"></span><span>
</span><span id="line-389"></span><span id="local-6989586621687988970"><span class="annot"><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addCronTriggerToCatalog"><span class="hs-identifier hs-type">addCronTriggerToCatalog</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#MonadTx"><span class="hs-identifier hs-type">MonadTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687988970"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.ScheduledTrigger.html#CronTriggerMetadata"><span class="hs-identifier hs-type">CronTriggerMetadata</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621687988970"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-390"></span><span id="addCronTriggerToCatalog"><span class="annot"><span class="annottext">addCronTriggerToCatalog :: forall (m :: * -&gt; *). MonadTx m =&gt; CronTriggerMetadata -&gt; m ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addCronTriggerToCatalog"><span class="hs-identifier hs-var hs-var">addCronTriggerToCatalog</span></a></span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.ScheduledTrigger.html#CronTriggerMetadata"><span class="hs-identifier hs-type">CronTriggerMetadata</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687990942"><span id="local-6989586621687990943"><span id="local-6989586621687990944"><span id="local-6989586621687990945"><span id="local-6989586621687990946"><span id="local-6989586621687990947"><span id="local-6989586621687990948"><span id="local-6989586621687990949"><span id="local-6989586621687990950"><span id="local-6989586621687990951"><span class="annot"><span class="annottext">Bool
[HeaderConf]
Maybe Text
Maybe Value
Maybe RequestTransform
Maybe MetadataResponseTransform
CronSchedule
InputWebhook
TriggerName
STRetryConf
ctName :: TriggerName
ctWebhook :: InputWebhook
ctSchedule :: CronSchedule
ctPayload :: Maybe Value
ctRetryConf :: STRetryConf
ctHeaders :: [HeaderConf]
ctIncludeInMetadata :: Bool
ctComment :: Maybe Text
ctRequestTransform :: Maybe RequestTransform
ctResponseTransform :: Maybe MetadataResponseTransform
ctResponseTransform :: CronTriggerMetadata -&gt; Maybe MetadataResponseTransform
ctRequestTransform :: CronTriggerMetadata -&gt; Maybe RequestTransform
ctComment :: CronTriggerMetadata -&gt; Maybe Text
ctIncludeInMetadata :: CronTriggerMetadata -&gt; Bool
ctHeaders :: CronTriggerMetadata -&gt; [HeaderConf]
ctRetryConf :: CronTriggerMetadata -&gt; STRetryConf
ctPayload :: CronTriggerMetadata -&gt; Maybe Value
ctSchedule :: CronTriggerMetadata -&gt; CronSchedule
ctWebhook :: CronTriggerMetadata -&gt; InputWebhook
ctName :: CronTriggerMetadata -&gt; TriggerName
</span><a href="#local-6989586621687990942"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxE QErr () -&gt; m ()
forall a. TxE QErr a -&gt; m a
forall (m :: * -&gt; *) a. MonadTx m =&gt; TxE QErr a -&gt; m a
</span><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#liftTx"><span class="hs-identifier hs-var">liftTx</span></a></span><span> </span><span class="annot"><span class="annottext">(TxE QErr () -&gt; m ()) -&gt; TxE QErr () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-391"></span><span>  </span><span class="annot"><span class="annottext">(PGTxErr -&gt; QErr)
-&gt; Query
-&gt; (TriggerName, ViaJSON InputWebhook, CronSchedule,
    Maybe (ViaJSON Value), ViaJSON STRetryConf, ViaJSON [HeaderConf],
    Bool, Maybe Text)
-&gt; Bool
-&gt; TxE QErr ()
forall (m :: * -&gt; *) r e.
(MonadIO m, ToPrepArgs r) =&gt;
(PGTxErr -&gt; e) -&gt; Query -&gt; r -&gt; Bool -&gt; TxET e m ()
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#unitQE"><span class="hs-identifier hs-var">PG.unitQE</span></a></span><span>
</span><span id="line-392"></span><span>    </span><span class="annot"><span class="annottext">PGTxErr -&gt; QErr
</span><a href="Hasura.Backends.Postgres.Execute.Types.html#defaultTxErrorHandler"><span class="hs-identifier hs-var">defaultTxErrorHandler</span></a></span><span>
</span><span id="line-393"></span><span>    </span><span class="annot"><span class="">[PG.sql|
      INSERT into hdb_catalog.hdb_cron_triggers
        (name, webhook_conf, cron_schedule, payload, retry_conf, header_conf, include_in_metadata, comment)
      VALUES ($1, $2, $3, $4, $5, $6, $7, $8)
    |]</span></span><span>
</span><span id="line-398"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">TriggerName
</span><a href="#local-6989586621687990942"><span class="hs-identifier hs-var">ctName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-399"></span><span>      </span><span class="annot"><span class="annottext">InputWebhook -&gt; ViaJSON InputWebhook
forall a. a -&gt; ViaJSON a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#ViaJSON"><span class="hs-identifier hs-var">PG.ViaJSON</span></a></span><span> </span><span class="annot"><span class="annottext">InputWebhook
</span><a href="#local-6989586621687990943"><span class="hs-identifier hs-var">ctWebhook</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-400"></span><span>      </span><span class="annot"><span class="annottext">CronSchedule
</span><a href="#local-6989586621687990944"><span class="hs-identifier hs-var">ctSchedule</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-401"></span><span>      </span><span class="annot"><span class="annottext">Value -&gt; ViaJSON Value
forall a. a -&gt; ViaJSON a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#ViaJSON"><span class="hs-identifier hs-var">PG.ViaJSON</span></a></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; ViaJSON Value) -&gt; Maybe Value -&gt; Maybe (ViaJSON Value)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621687990945"><span class="hs-identifier hs-var">ctPayload</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-402"></span><span>      </span><span class="annot"><span class="annottext">STRetryConf -&gt; ViaJSON STRetryConf
forall a. a -&gt; ViaJSON a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#ViaJSON"><span class="hs-identifier hs-var">PG.ViaJSON</span></a></span><span> </span><span class="annot"><span class="annottext">STRetryConf
</span><a href="#local-6989586621687990946"><span class="hs-identifier hs-var">ctRetryConf</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-403"></span><span>      </span><span class="annot"><span class="annottext">[HeaderConf] -&gt; ViaJSON [HeaderConf]
forall a. a -&gt; ViaJSON a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#ViaJSON"><span class="hs-identifier hs-var">PG.ViaJSON</span></a></span><span> </span><span class="annot"><span class="annottext">[HeaderConf]
</span><a href="#local-6989586621687990947"><span class="hs-identifier hs-var">ctHeaders</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-404"></span><span>      </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621687990948"><span class="hs-identifier hs-var">ctIncludeInMetadata</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-405"></span><span>      </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621687990949"><span class="hs-identifier hs-var">ctComment</span></a></span><span>
</span><span id="line-406"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-407"></span><span>    </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-408"></span><span>  </span><span id="local-6989586621687990963"><span class="annot"><a href="#local-6989586621687990963"><span class="hs-identifier hs-var">currentTime</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO UTCTime -&gt; TxET QErr IO UTCTime
forall a. IO a -&gt; TxET QErr IO a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">IO UTCTime
</span><span class="hs-identifier hs-var">C.getCurrentTime</span></span><span>
</span><span id="line-409"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687990966"><span class="annot"><a href="#local-6989586621687990966"><span class="hs-identifier hs-var hs-var">scheduleTimes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UTCTime -&gt; Int -&gt; CronSchedule -&gt; [UTCTime]
</span><a href="Hasura.Eventing.Common.html#generateScheduleTimes"><span class="hs-identifier hs-var">generateScheduleTimes</span></a></span><span> </span><span class="annot"><span class="annottext">UTCTime
</span><a href="#local-6989586621687990963"><span class="hs-identifier hs-var">currentTime</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><span class="hs-number">100</span></span><span> </span><span class="annot"><span class="annottext">CronSchedule
</span><a href="#local-6989586621687990944"><span class="hs-identifier hs-var">ctSchedule</span></a></span><span> </span><span class="hs-comment">-- generate next 100 events</span><span>
</span><span id="line-410"></span><span>  </span><span class="annot"><a href="Hasura.Eventing.ScheduledTrigger.html#insertCronEventsTx"><span class="hs-identifier hs-type">insertCronEventsTx</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.ScheduledTrigger.html#CronEventSeed"><span class="hs-identifier hs-type">CronEventSeed</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687990942"><span class="hs-identifier hs-type">ctName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621687990966"><span class="hs-identifier hs-type">scheduleTimes</span></a></span><span>
</span><span id="line-411"></span><span>
</span><span id="line-412"></span><span id="local-6989586621687989160"><span class="annot"><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#parseLegacyRemoteRelationshipDefinition"><span class="hs-identifier hs-type">parseLegacyRemoteRelationshipDefinition</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-413"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#QErr"><span class="hs-identifier hs-type">QErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687989160"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-414"></span><span>  </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#Value"><span class="hs-identifier hs-type">Value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-415"></span><span>  </span><span class="annot"><a href="#local-6989586621687989160"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Relationships.Remote.html#RemoteRelationshipDefinition"><span class="hs-identifier hs-type">RemoteRelationshipDefinition</span></a></span></span><span>
</span><span id="line-416"></span><span id="parseLegacyRemoteRelationshipDefinition"><span class="annot"><span class="annottext">parseLegacyRemoteRelationshipDefinition :: forall (m :: * -&gt; *).
MonadError QErr m =&gt;
Value -&gt; m RemoteRelationshipDefinition
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#parseLegacyRemoteRelationshipDefinition"><span class="hs-identifier hs-var hs-var">parseLegacyRemoteRelationshipDefinition</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-417"></span><span>  </span><span class="annot"><span class="annottext">(Value -&gt; Parser RemoteRelationshipDefinition)
-&gt; Value -&gt; m RemoteRelationshipDefinition
forall (m :: * -&gt; *) v a. QErrM m =&gt; (v -&gt; Parser a) -&gt; v -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#runAesonParser"><span class="hs-identifier hs-var">runAesonParser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RRParseMode -&gt; Value -&gt; Parser RemoteRelationshipDefinition
</span><a href="Hasura.RQL.Types.Relationships.Remote.html#parseRemoteRelationshipDefinition"><span class="hs-identifier hs-var">parseRemoteRelationshipDefinition</span></a></span><span> </span><span class="annot"><span class="annottext">RRParseMode
</span><a href="Hasura.RQL.Types.Relationships.Remote.html#RRPLegacy"><span class="hs-identifier hs-var">RRPLegacy</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-418"></span><span>
</span><span id="line-419"></span><span id="local-6989586621687989167"><span class="annot"><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#fetchMetadataFromHdbTables"><span class="hs-identifier hs-type">fetchMetadataFromHdbTables</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#MonadTx"><span class="hs-identifier hs-type">MonadTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687989167"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621687989167"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Metadata.html#MetadataNoSources"><span class="hs-identifier hs-type">MetadataNoSources</span></a></span></span><span>
</span><span id="line-420"></span><span id="fetchMetadataFromHdbTables"><span class="annot"><span class="annottext">fetchMetadataFromHdbTables :: forall (m :: * -&gt; *). MonadTx m =&gt; m MetadataNoSources
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#fetchMetadataFromHdbTables"><span class="hs-identifier hs-var hs-var">fetchMetadataFromHdbTables</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TxE QErr MetadataNoSources -&gt; m MetadataNoSources
forall a. TxE QErr a -&gt; m a
forall (m :: * -&gt; *) a. MonadTx m =&gt; TxE QErr a -&gt; m a
</span><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#liftTx"><span class="hs-identifier hs-var">liftTx</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-421"></span><span>  </span><span id="local-6989586621687991147"><span class="annot"><a href="#local-6989586621687991147"><span class="hs-identifier hs-var">tables</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TxET
  QErr
  IO
  [(SchemaName, TableName, Bool,
    Maybe (ViaJSON (TableConfig ('Postgres 'Vanilla))))]
</span><a href="#local-6989586621687991148"><span class="hs-identifier hs-var">fetchTables</span></a></span><span>
</span><span id="line-422"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687991149"><span class="annot"><a href="#local-6989586621687991149"><span class="hs-identifier hs-var hs-var">tableMetaMap</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[(QualifiedTable, TableMetadata ('Postgres 'Vanilla))]
-&gt; InsOrdHashMap
     QualifiedTable (TableMetadata ('Postgres 'Vanilla))
forall k v. (Eq k, Hashable k) =&gt; [(k, v)] -&gt; InsOrdHashMap k v
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/insert-ordered-containers-0.2.5.3-dcb71999c8104475fd299533bb40a6c15ee8a9411f3a03b68aa99a14a4143c19/share/doc/html/src/Data.HashMap.Strict.InsOrd.html/Data.HashMap.Strict.InsOrd.html#fromList"><span class="hs-identifier hs-var">InsOrdHashMap.fromList</span></a></span><span>
</span><span id="line-423"></span><span>        </span><span class="annot"><span class="annottext">([(QualifiedTable, TableMetadata ('Postgres 'Vanilla))]
 -&gt; InsOrdHashMap
      QualifiedTable (TableMetadata ('Postgres 'Vanilla)))
-&gt; (((SchemaName, TableName, Bool,
      Maybe (ViaJSON (TableConfig ('Postgres 'Vanilla))))
     -&gt; (QualifiedTable, TableMetadata ('Postgres 'Vanilla)))
    -&gt; [(QualifiedTable, TableMetadata ('Postgres 'Vanilla))])
-&gt; ((SchemaName, TableName, Bool,
     Maybe (ViaJSON (TableConfig ('Postgres 'Vanilla))))
    -&gt; (QualifiedTable, TableMetadata ('Postgres 'Vanilla)))
-&gt; InsOrdHashMap
     QualifiedTable (TableMetadata ('Postgres 'Vanilla))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(((SchemaName, TableName, Bool,
   Maybe (ViaJSON (TableConfig ('Postgres 'Vanilla))))
  -&gt; (QualifiedTable, TableMetadata ('Postgres 'Vanilla)))
 -&gt; [(SchemaName, TableName, Bool,
      Maybe (ViaJSON (TableConfig ('Postgres 'Vanilla))))]
 -&gt; [(QualifiedTable, TableMetadata ('Postgres 'Vanilla))])
-&gt; [(SchemaName, TableName, Bool,
     Maybe (ViaJSON (TableConfig ('Postgres 'Vanilla))))]
-&gt; ((SchemaName, TableName, Bool,
     Maybe (ViaJSON (TableConfig ('Postgres 'Vanilla))))
    -&gt; (QualifiedTable, TableMetadata ('Postgres 'Vanilla)))
-&gt; [(QualifiedTable, TableMetadata ('Postgres 'Vanilla))]
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">((SchemaName, TableName, Bool,
  Maybe (ViaJSON (TableConfig ('Postgres 'Vanilla))))
 -&gt; (QualifiedTable, TableMetadata ('Postgres 'Vanilla)))
-&gt; [(SchemaName, TableName, Bool,
     Maybe (ViaJSON (TableConfig ('Postgres 'Vanilla))))]
-&gt; [(QualifiedTable, TableMetadata ('Postgres 'Vanilla))]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">[(SchemaName, TableName, Bool,
  Maybe (ViaJSON (TableConfig ('Postgres 'Vanilla))))]
</span><a href="#local-6989586621687991147"><span class="hs-identifier hs-var">tables</span></a></span><span>
</span><span id="line-424"></span><span>        </span><span class="annot"><span class="annottext">(((SchemaName, TableName, Bool,
   Maybe (ViaJSON (TableConfig ('Postgres 'Vanilla))))
  -&gt; (QualifiedTable, TableMetadata ('Postgres 'Vanilla)))
 -&gt; InsOrdHashMap
      QualifiedTable (TableMetadata ('Postgres 'Vanilla)))
-&gt; ((SchemaName, TableName, Bool,
     Maybe (ViaJSON (TableConfig ('Postgres 'Vanilla))))
    -&gt; (QualifiedTable, TableMetadata ('Postgres 'Vanilla)))
-&gt; InsOrdHashMap
     QualifiedTable (TableMetadata ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621687991152"><span class="annot"><span class="annottext">SchemaName
</span><a href="#local-6989586621687991152"><span class="hs-identifier hs-var">schema</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687991153"><span class="annot"><span class="annottext">TableName
</span><a href="#local-6989586621687991153"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687991154"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621687991154"><span class="hs-identifier hs-var">isEnum</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687991155"><span class="annot"><span class="annottext">Maybe (ViaJSON (TableConfig ('Postgres 'Vanilla)))
</span><a href="#local-6989586621687991155"><span class="hs-identifier hs-var">maybeConfig</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-425"></span><span>          </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687991156"><span class="annot"><span class="annottext">qualifiedName :: QualifiedTable
</span><a href="#local-6989586621687991156"><span class="hs-identifier hs-var hs-var">qualifiedName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SchemaName -&gt; TableName -&gt; QualifiedTable
forall a. SchemaName -&gt; a -&gt; QualifiedObject a
</span><a href="Hasura.Backends.Postgres.SQL.Types.html#QualifiedObject"><span class="hs-identifier hs-var">QualifiedObject</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><a href="#local-6989586621687991152"><span class="hs-identifier hs-var">schema</span></a></span><span> </span><span class="annot"><span class="annottext">TableName
</span><a href="#local-6989586621687991153"><span class="hs-identifier hs-var">name</span></a></span><span>
</span><span id="line-426"></span><span>              </span><span id="local-6989586621687991157"><span class="annot"><span class="annottext">configuration :: TableConfig ('Postgres 'Vanilla)
</span><a href="#local-6989586621687991157"><span class="hs-identifier hs-var hs-var">configuration</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TableConfig ('Postgres 'Vanilla)
-&gt; (ViaJSON (TableConfig ('Postgres 'Vanilla))
    -&gt; TableConfig ('Postgres 'Vanilla))
-&gt; Maybe (ViaJSON (TableConfig ('Postgres 'Vanilla)))
-&gt; TableConfig ('Postgres 'Vanilla)
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="annot"><span class="annottext">TableConfig ('Postgres 'Vanilla)
forall (b :: BackendType). TableConfig b
</span><a href="Hasura.Table.Cache.html#emptyTableConfig"><span class="hs-identifier hs-var">emptyTableConfig</span></a></span><span> </span><span class="annot"><span class="annottext">ViaJSON (TableConfig ('Postgres 'Vanilla))
-&gt; TableConfig ('Postgres 'Vanilla)
forall a. ViaJSON a -&gt; a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#getViaJSON"><span class="hs-identifier hs-var">PG.getViaJSON</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (ViaJSON (TableConfig ('Postgres 'Vanilla)))
</span><a href="#local-6989586621687991155"><span class="hs-identifier hs-var">maybeConfig</span></a></span><span>
</span><span id="line-427"></span><span>           </span><span class="hs-keyword">in</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">QualifiedTable
</span><a href="#local-6989586621687991156"><span class="hs-identifier hs-var">qualifiedName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">TableName ('Postgres 'Vanilla)
-&gt; Bool
-&gt; TableConfig ('Postgres 'Vanilla)
-&gt; TableMetadata ('Postgres 'Vanilla)
forall (b :: BackendType).
TableName b -&gt; Bool -&gt; TableConfig b -&gt; TableMetadata b
</span><a href="Hasura.Table.Metadata.html#mkTableMeta"><span class="hs-identifier hs-var">mkTableMeta</span></a></span><span> </span><span class="annot"><span class="annottext">TableName ('Postgres 'Vanilla)
QualifiedTable
</span><a href="#local-6989586621687991156"><span class="hs-identifier hs-var">qualifiedName</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621687991154"><span class="hs-identifier hs-var">isEnum</span></a></span><span> </span><span class="annot"><span class="annottext">TableConfig ('Postgres 'Vanilla)
</span><a href="#local-6989586621687991157"><span class="hs-identifier hs-var">configuration</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-428"></span><span>
</span><span id="line-429"></span><span>  </span><span class="hs-comment">-- Fetch all the relationships</span><span>
</span><span id="line-430"></span><span>  </span><span id="local-6989586621687991161"><span class="annot"><a href="#local-6989586621687991161"><span class="hs-identifier hs-var">relationships</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621687991162"><span class="hs-identifier hs-type">fetchRelationships</span></a></span><span>
</span><span id="line-431"></span><span>
</span><span id="line-432"></span><span>  </span><span id="local-6989586621687991163"><span class="annot"><a href="#local-6989586621687991163"><span class="hs-identifier hs-var">objRelDefs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621687991164"><span class="hs-identifier hs-type">mkRelDefs</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#ObjRel"><span class="hs-identifier hs-type">ObjRel</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687991161"><span class="hs-identifier hs-type">relationships</span></a></span><span>
</span><span id="line-433"></span><span>  </span><span id="local-6989586621687991165"><span class="annot"><a href="#local-6989586621687991165"><span class="hs-identifier hs-var">arrRelDefs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621687991164"><span class="hs-identifier hs-type">mkRelDefs</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#ArrRel"><span class="hs-identifier hs-type">ArrRel</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687991161"><span class="hs-identifier hs-type">relationships</span></a></span><span>
</span><span id="line-434"></span><span>
</span><span id="line-435"></span><span>  </span><span class="hs-comment">-- Fetch all the permissions</span><span>
</span><span id="line-436"></span><span>  </span><span id="local-6989586621687991166"><span class="annot"><a href="#local-6989586621687991166"><span class="hs-identifier hs-var">permissions</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621687991167"><span class="hs-identifier hs-type">fetchPermissions</span></a></span><span>
</span><span id="line-437"></span><span>
</span><span id="line-438"></span><span>  </span><span class="hs-comment">-- Parse all the permissions</span><span>
</span><span id="line-439"></span><span>  </span><span id="local-6989586621687991168"><span class="annot"><a href="#local-6989586621687991168"><span class="hs-identifier hs-var">insPermDefs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621687991169"><span class="hs-identifier hs-type">mkPermDefs</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Permission.html#PTInsert"><span class="hs-identifier hs-type">PTInsert</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687991166"><span class="hs-identifier hs-type">permissions</span></a></span><span>
</span><span id="line-440"></span><span>  </span><span id="local-6989586621687991171"><span class="annot"><a href="#local-6989586621687991171"><span class="hs-identifier hs-var">selPermDefs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621687991169"><span class="hs-identifier hs-type">mkPermDefs</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Permission.html#PTSelect"><span class="hs-identifier hs-type">PTSelect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687991166"><span class="hs-identifier hs-type">permissions</span></a></span><span>
</span><span id="line-441"></span><span>  </span><span id="local-6989586621687991173"><span class="annot"><a href="#local-6989586621687991173"><span class="hs-identifier hs-var">updPermDefs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621687991169"><span class="hs-identifier hs-type">mkPermDefs</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Permission.html#PTUpdate"><span class="hs-identifier hs-type">PTUpdate</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687991166"><span class="hs-identifier hs-type">permissions</span></a></span><span>
</span><span id="line-442"></span><span>  </span><span id="local-6989586621687991175"><span class="annot"><a href="#local-6989586621687991175"><span class="hs-identifier hs-var">delPermDefs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621687991169"><span class="hs-identifier hs-type">mkPermDefs</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Permission.html#PTDelete"><span class="hs-identifier hs-type">PTDelete</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687991166"><span class="hs-identifier hs-type">permissions</span></a></span><span>
</span><span id="line-443"></span><span>
</span><span id="line-444"></span><span>  </span><span class="hs-comment">-- Fetch all event triggers</span><span>
</span><span id="line-445"></span><span>  </span><span id="local-6989586621687991177"><span class="annot"><a href="#local-6989586621687991177"><span class="hs-identifier hs-var">eventTriggers</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">SchemaName</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Postgres.TableName</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">PG.ViaJSON</span></span><span> </span><span class="annot"><span class="hs-identifier">Value</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621687991178"><span class="hs-identifier hs-type">fetchEventTriggers</span></a></span><span>
</span><span id="line-446"></span><span>  </span><span id="local-6989586621687991179"><span class="annot"><a href="#local-6989586621687991179"><span class="hs-identifier hs-var">triggerMetaDefs</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621687991180"><span class="hs-identifier hs-type">mkTriggerMetaDefs</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687991177"><span class="hs-identifier hs-type">eventTriggers</span></a></span><span>
</span><span id="line-447"></span><span>
</span><span id="line-448"></span><span>  </span><span class="hs-comment">-- Fetch all computed fields</span><span>
</span><span id="line-449"></span><span>  </span><span id="local-6989586621687991181"><span class="annot"><a href="#local-6989586621687991181"><span class="hs-identifier hs-var">computedFields</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621687991182"><span class="hs-identifier hs-type">fetchComputedFields</span></a></span><span>
</span><span id="line-450"></span><span>
</span><span id="line-451"></span><span>  </span><span class="hs-comment">-- Fetch all remote relationships</span><span>
</span><span id="line-452"></span><span>  </span><span id="local-6989586621687991183"><span class="annot"><a href="#local-6989586621687991183"><span class="hs-identifier hs-var">remoteRelationshipsRaw</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621687991184"><span class="hs-identifier hs-type">fetchRemoteRelationships</span></a></span><span>
</span><span id="line-453"></span><span>  </span><span id="local-6989586621687991185"><span class="annot"><a href="#local-6989586621687991185"><span class="hs-identifier hs-var">remoteRelationships</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">for</span></span><span> </span><span class="annot"><a href="#local-6989586621687991183"><span class="hs-identifier hs-type">remoteRelationshipsRaw</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621687991187"><span class="annot"><span class="annottext">QualifiedTable
</span><a href="#local-6989586621687991187"><span class="hs-identifier hs-var">table</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687991188"><span class="annot"><span class="annottext">RelName
</span><a href="#local-6989586621687991188"><span class="hs-identifier hs-var">relationshipName</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687991189"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621687991189"><span class="hs-identifier hs-var">definitionValue</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-454"></span><span>    </span><span id="local-6989586621687991190"><span class="annot"><a href="#local-6989586621687991190"><span class="hs-identifier hs-var">definition</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Value -&gt; TxET QErr IO RemoteRelationshipDefinition
forall (m :: * -&gt; *).
MonadError QErr m =&gt;
Value -&gt; m RemoteRelationshipDefinition
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#parseLegacyRemoteRelationshipDefinition"><span class="hs-identifier hs-var">parseLegacyRemoteRelationshipDefinition</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621687991189"><span class="hs-identifier hs-var">definitionValue</span></a></span><span>
</span><span id="line-455"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621687991187"><span class="hs-identifier hs-type">table</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#RemoteRelationship"><span class="hs-identifier hs-type">RemoteRelationship</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687991188"><span class="hs-identifier hs-type">relationshipName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687991190"><span class="hs-identifier hs-type">definition</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-456"></span><span>
</span><span id="line-457"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687991191"><span class="annot"><a href="#local-6989586621687991191"><span class="hs-identifier hs-var">fullTableMetaMap</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">flip</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">runState</span></span><span> </span><span class="annot"><a href="#local-6989586621687991149"><span class="hs-identifier hs-type">tableMetaMap</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-458"></span><span>        </span><span class="annot"><a href="#local-6989586621687991193"><span class="hs-identifier hs-type">modMetaMap</span></a></span><span> </span><span class="annot"><a href="Hasura.Table.Metadata.html#tmObjectRelationships"><span class="hs-identifier hs-type">tmObjectRelationships</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Relationships.Local.html#_rdName"><span class="hs-identifier hs-var">_rdName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687991163"><span class="hs-identifier hs-type">objRelDefs</span></a></span><span>
</span><span id="line-459"></span><span>        </span><span class="annot"><a href="#local-6989586621687991193"><span class="hs-identifier hs-type">modMetaMap</span></a></span><span> </span><span class="annot"><a href="Hasura.Table.Metadata.html#tmArrayRelationships"><span class="hs-identifier hs-type">tmArrayRelationships</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Relationships.Local.html#_rdName"><span class="hs-identifier hs-var">_rdName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687991165"><span class="hs-identifier hs-type">arrRelDefs</span></a></span><span>
</span><span id="line-460"></span><span>        </span><span class="annot"><a href="#local-6989586621687991193"><span class="hs-identifier hs-type">modMetaMap</span></a></span><span> </span><span class="annot"><a href="Hasura.Table.Metadata.html#tmInsertPermissions"><span class="hs-identifier hs-type">tmInsertPermissions</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Permission.html#_pdRole"><span class="hs-identifier hs-var">_pdRole</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687991168"><span class="hs-identifier hs-type">insPermDefs</span></a></span><span>
</span><span id="line-461"></span><span>        </span><span class="annot"><a href="#local-6989586621687991193"><span class="hs-identifier hs-type">modMetaMap</span></a></span><span> </span><span class="annot"><a href="Hasura.Table.Metadata.html#tmSelectPermissions"><span class="hs-identifier hs-type">tmSelectPermissions</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Permission.html#_pdRole"><span class="hs-identifier hs-var">_pdRole</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687991171"><span class="hs-identifier hs-type">selPermDefs</span></a></span><span>
</span><span id="line-462"></span><span>        </span><span class="annot"><a href="#local-6989586621687991193"><span class="hs-identifier hs-type">modMetaMap</span></a></span><span> </span><span class="annot"><a href="Hasura.Table.Metadata.html#tmUpdatePermissions"><span class="hs-identifier hs-type">tmUpdatePermissions</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Permission.html#_pdRole"><span class="hs-identifier hs-var">_pdRole</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687991173"><span class="hs-identifier hs-type">updPermDefs</span></a></span><span>
</span><span id="line-463"></span><span>        </span><span class="annot"><a href="#local-6989586621687991193"><span class="hs-identifier hs-type">modMetaMap</span></a></span><span> </span><span class="annot"><a href="Hasura.Table.Metadata.html#tmDeletePermissions"><span class="hs-identifier hs-type">tmDeletePermissions</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Permission.html#_pdRole"><span class="hs-identifier hs-var">_pdRole</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687991175"><span class="hs-identifier hs-type">delPermDefs</span></a></span><span>
</span><span id="line-464"></span><span>        </span><span class="annot"><a href="#local-6989586621687991193"><span class="hs-identifier hs-type">modMetaMap</span></a></span><span> </span><span class="annot"><a href="Hasura.Table.Metadata.html#tmEventTriggers"><span class="hs-identifier hs-type">tmEventTriggers</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.EventTrigger.html#etcName"><span class="hs-identifier hs-var">etcName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687991179"><span class="hs-identifier hs-type">triggerMetaDefs</span></a></span><span>
</span><span id="line-465"></span><span>        </span><span class="annot"><a href="#local-6989586621687991193"><span class="hs-identifier hs-type">modMetaMap</span></a></span><span> </span><span class="annot"><a href="Hasura.Table.Metadata.html#tmComputedFields"><span class="hs-identifier hs-type">tmComputedFields</span></a></span><span> </span><span class="annot"><a href="Hasura.Table.Metadata.html#_cfmName"><span class="hs-identifier hs-var">_cfmName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687991181"><span class="hs-identifier hs-type">computedFields</span></a></span><span>
</span><span id="line-466"></span><span>        </span><span class="annot"><a href="#local-6989586621687991193"><span class="hs-identifier hs-type">modMetaMap</span></a></span><span> </span><span class="annot"><a href="Hasura.Table.Metadata.html#tmRemoteRelationships"><span class="hs-identifier hs-type">tmRemoteRelationships</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#_rrName"><span class="hs-identifier hs-var">_rrName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687991185"><span class="hs-identifier hs-type">remoteRelationships</span></a></span><span>
</span><span id="line-467"></span><span>
</span><span id="line-468"></span><span>  </span><span id="local-6989586621687991198"><span class="annot"><a href="#local-6989586621687991198"><span class="hs-identifier hs-var">functions</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621687991199"><span class="hs-identifier hs-type">fetchFunctions</span></a></span><span>
</span><span id="line-469"></span><span>  </span><span id="local-6989586621687991200"><span class="annot"><a href="#local-6989586621687991200"><span class="hs-identifier hs-var">remoteSchemas</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#oMapFromL"><span class="hs-identifier hs-type">oMapFromL</span></a></span><span> </span><span class="annot"><a href="Hasura.RemoteSchema.Metadata.Core.html#_rsmName"><span class="hs-identifier hs-var">_rsmName</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621687991203"><span class="hs-identifier hs-type">fetchRemoteSchemas</span></a></span><span>
</span><span id="line-470"></span><span>  </span><span id="local-6989586621687991204"><span class="annot"><a href="#local-6989586621687991204"><span class="hs-identifier hs-var">collections</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#oMapFromL"><span class="hs-identifier hs-type">oMapFromL</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.QueryCollection.html#_ccName"><span class="hs-identifier hs-var">_ccName</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621687991206"><span class="hs-identifier hs-type">fetchCollections</span></a></span><span>
</span><span id="line-471"></span><span>  </span><span id="local-6989586621687991207"><span class="annot"><a href="#local-6989586621687991207"><span class="hs-identifier hs-var">allowlist</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#oMapFromL"><span class="hs-identifier hs-type">oMapFromL</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Allowlist.html#aeCollection"><span class="hs-identifier hs-var">aeCollection</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621687991209"><span class="hs-identifier hs-type">fetchAllowlist</span></a></span><span>
</span><span id="line-472"></span><span>  </span><span id="local-6989586621687991210"><span class="annot"><a href="#local-6989586621687991210"><span class="hs-identifier hs-var">customTypes</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621687991211"><span class="hs-identifier hs-type">fetchCustomTypes</span></a></span><span>
</span><span id="line-473"></span><span>  </span><span id="local-6989586621687991212"><span class="annot"><a href="#local-6989586621687991212"><span class="hs-identifier hs-var">actions</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#oMapFromL"><span class="hs-identifier hs-type">oMapFromL</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Action.html#_amName"><span class="hs-identifier hs-var">_amName</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621687991213"><span class="hs-identifier hs-type">fetchActions</span></a></span><span>
</span><span id="line-474"></span><span>  </span><span id="local-6989586621687991214"><span class="annot"><a href="#local-6989586621687991214"><span class="hs-identifier hs-var">cronTriggers</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="#local-6989586621687991215"><span class="hs-identifier hs-type">fetchCronTriggers</span></a></span><span>
</span><span id="line-475"></span><span>
</span><span id="line-476"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span>
</span><span id="line-477"></span><span>    </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Metadata.html#MetadataNoSources"><span class="hs-identifier hs-type">MetadataNoSources</span></a></span><span>
</span><span id="line-478"></span><span>      </span><span class="annot"><a href="#local-6989586621687991191"><span class="hs-identifier hs-type">fullTableMetaMap</span></a></span><span>
</span><span id="line-479"></span><span>      </span><span class="annot"><a href="#local-6989586621687991198"><span class="hs-identifier hs-type">functions</span></a></span><span>
</span><span id="line-480"></span><span>      </span><span class="annot"><a href="#local-6989586621687991200"><span class="hs-identifier hs-type">remoteSchemas</span></a></span><span>
</span><span id="line-481"></span><span>      </span><span class="annot"><a href="#local-6989586621687991204"><span class="hs-identifier hs-type">collections</span></a></span><span>
</span><span id="line-482"></span><span>      </span><span class="annot"><a href="#local-6989586621687991207"><span class="hs-identifier hs-type">allowlist</span></a></span><span>
</span><span id="line-483"></span><span>      </span><span class="annot"><a href="#local-6989586621687991210"><span class="hs-identifier hs-type">customTypes</span></a></span><span>
</span><span id="line-484"></span><span>      </span><span class="annot"><a href="#local-6989586621687991212"><span class="hs-identifier hs-type">actions</span></a></span><span>
</span><span id="line-485"></span><span>      </span><span class="annot"><a href="#local-6989586621687991214"><span class="hs-identifier hs-type">cronTriggers</span></a></span><span>
</span><span id="line-486"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-487"></span><span>    </span><span id="local-6989586621687991193"><span class="annot"><span class="annottext">modMetaMap :: ((InsOrdHashMap k v -&gt; Identity (InsOrdHashMap k v))
 -&gt; IxValue a -&gt; Identity (IxValue a))
-&gt; (v -&gt; k) -&gt; t (Index a, v) -&gt; m ()
</span><a href="#local-6989586621687991193"><span class="hs-identifier hs-var hs-var">modMetaMap</span></a></span></span><span> </span><span id="local-6989586621687991247"><span class="annot"><span class="annottext">(InsOrdHashMap k v -&gt; Identity (InsOrdHashMap k v))
-&gt; IxValue a -&gt; Identity (IxValue a)
</span><a href="#local-6989586621687991247"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621687991248"><span class="annot"><span class="annottext">v -&gt; k
</span><a href="#local-6989586621687991248"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621687991249"><span class="annot"><span class="annottext">t (Index a, v)
</span><a href="#local-6989586621687991249"><span class="hs-identifier hs-var">xs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-488"></span><span>      </span><span id="local-6989586621687991250"><span class="annot"><a href="#local-6989586621687991250"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">m a
forall s (m :: * -&gt; *). MonadState s m =&gt; m s
</span><span class="hs-identifier hs-var">get</span></span><span>
</span><span id="line-489"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">put</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">foldl'</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621687991254"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621687991254"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621687991255"><span class="annot"><span class="annottext">Index a
</span><a href="#local-6989586621687991255"><span class="hs-identifier hs-var">qt</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687991256"><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621687991256"><span class="hs-identifier hs-var">dfn</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621687991254"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; (a -&gt; a) -&gt; a
forall a b. a -&gt; (a -&gt; b) -&gt; b
</span><span class="hs-operator hs-var">&amp;</span></span><span> </span><span class="annot"><span class="annottext">Index a -&gt; Lens' a (Maybe (IxValue a))
forall m. At m =&gt; Index m -&gt; Lens' m (Maybe (IxValue m))
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/lens-5.3.2-7ec14d641784087c1f1350eada3cde7884c62d1ab2707daec993ceeca3096d32/share/doc/html/src/Control.Lens.At.html/Control.Lens.At.html#at"><span class="hs-identifier hs-var">at</span></a></span><span> </span><span class="annot"><span class="annottext">Index a
</span><a href="#local-6989586621687991255"><span class="hs-identifier hs-var">qt</span></a></span><span> </span><span class="annot"><span class="annottext">((Maybe (IxValue a) -&gt; Identity (Maybe (IxValue a)))
 -&gt; a -&gt; Identity a)
-&gt; ((InsOrdHashMap k v -&gt; Identity (InsOrdHashMap k v))
    -&gt; Maybe (IxValue a) -&gt; Identity (Maybe (IxValue a)))
-&gt; (InsOrdHashMap k v -&gt; Identity (InsOrdHashMap k v))
-&gt; a
-&gt; Identity a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(IxValue a -&gt; Identity (IxValue a))
-&gt; Maybe (IxValue a) -&gt; Identity (Maybe (IxValue a))
forall a b (p :: * -&gt; * -&gt; *) (f :: * -&gt; *).
(Choice p, Applicative f) =&gt;
p a (f b) -&gt; p (Maybe a) (f (Maybe b))
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/lens-5.3.2-7ec14d641784087c1f1350eada3cde7884c62d1ab2707daec993ceeca3096d32/share/doc/html/src/Control.Lens.Prism.html/Control.Lens.Prism.html#_Just"><span class="hs-identifier hs-var">_Just</span></a></span><span> </span><span class="annot"><span class="annottext">((IxValue a -&gt; Identity (IxValue a))
 -&gt; Maybe (IxValue a) -&gt; Identity (Maybe (IxValue a)))
-&gt; ((InsOrdHashMap k v -&gt; Identity (InsOrdHashMap k v))
    -&gt; IxValue a -&gt; Identity (IxValue a))
-&gt; (InsOrdHashMap k v -&gt; Identity (InsOrdHashMap k v))
-&gt; Maybe (IxValue a)
-&gt; Identity (Maybe (IxValue a))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(InsOrdHashMap k v -&gt; Identity (InsOrdHashMap k v))
-&gt; IxValue a -&gt; Identity (IxValue a)
</span><a href="#local-6989586621687991247"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">((InsOrdHashMap k v -&gt; Identity (InsOrdHashMap k v))
 -&gt; a -&gt; Identity a)
-&gt; (InsOrdHashMap k v -&gt; InsOrdHashMap k v) -&gt; a -&gt; a
forall s t a b. ASetter s t a b -&gt; (a -&gt; b) -&gt; s -&gt; t
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/lens-5.3.2-7ec14d641784087c1f1350eada3cde7884c62d1ab2707daec993ceeca3096d32/share/doc/html/src/Control.Lens.Setter.html/Control.Lens.Setter.html#%25~"><span class="hs-operator hs-var">%~</span></a></span><span> </span><span class="annot"><span class="annottext">k -&gt; v -&gt; InsOrdHashMap k v -&gt; InsOrdHashMap k v
forall k v.
(Eq k, Hashable k) =&gt;
k -&gt; v -&gt; InsOrdHashMap k v -&gt; InsOrdHashMap k v
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/insert-ordered-containers-0.2.5.3-dcb71999c8104475fd299533bb40a6c15ee8a9411f3a03b68aa99a14a4143c19/share/doc/html/src/Data.HashMap.Strict.InsOrd.html/Data.HashMap.Strict.InsOrd.html#insert"><span class="hs-identifier hs-var">InsOrdHashMap.insert</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">v -&gt; k
</span><a href="#local-6989586621687991248"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621687991256"><span class="hs-identifier hs-var">dfn</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">v
</span><a href="#local-6989586621687991256"><span class="hs-identifier hs-var">dfn</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621687991250"><span class="hs-identifier hs-type">st</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687991249"><span class="hs-identifier hs-type">xs</span></a></span><span>
</span><span id="line-490"></span><span>
</span><span id="line-491"></span><span>    </span><span id="local-6989586621687991169"><span class="annot"><span class="annottext">mkPermDefs :: a
-&gt; [(SchemaName, a, RoleName, a, ViaJSON Value, Maybe Text)]
-&gt; m [(QualifiedObject a, PermDef b perm)]
</span><a href="#local-6989586621687991169"><span class="hs-identifier hs-var hs-var">mkPermDefs</span></a></span></span><span> </span><span id="local-6989586621687991283"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621687991283"><span class="hs-identifier hs-var">pt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((SchemaName, a, RoleName, a, ViaJSON Value, Maybe Text)
 -&gt; m (QualifiedObject a, PermDef b perm))
-&gt; [(SchemaName, a, RoleName, a, ViaJSON Value, Maybe Text)]
-&gt; m [(QualifiedObject a, PermDef b perm)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">(SchemaName, a, RoleName, a, ViaJSON Value, Maybe Text)
-&gt; m (QualifiedObject a, PermDef b perm)
forall {m :: * -&gt; *} {b :: BackendType} {perm :: BackendType -&gt; *}
       {a} {d}.
(FromJSON (PermDefPermission b perm), QErrM m) =&gt;
(SchemaName, a, RoleName, d, ViaJSON Value, Maybe Text)
-&gt; m (QualifiedObject a, PermDef b perm)
</span><a href="#local-6989586621687991285"><span class="hs-identifier hs-var">permRowToDef</span></a></span><span> </span><span class="annot"><span class="annottext">([(SchemaName, a, RoleName, a, ViaJSON Value, Maybe Text)]
 -&gt; m [(QualifiedObject a, PermDef b perm)])
-&gt; ([(SchemaName, a, RoleName, a, ViaJSON Value, Maybe Text)]
    -&gt; [(SchemaName, a, RoleName, a, ViaJSON Value, Maybe Text)])
-&gt; [(SchemaName, a, RoleName, a, ViaJSON Value, Maybe Text)]
-&gt; m [(QualifiedObject a, PermDef b perm)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">((SchemaName, a, RoleName, a, ViaJSON Value, Maybe Text) -&gt; Bool)
-&gt; [(SchemaName, a, RoleName, a, ViaJSON Value, Maybe Text)]
-&gt; [(SchemaName, a, RoleName, a, ViaJSON Value, Maybe Text)]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621687991286"><span class="annot"><span class="annottext">(SchemaName, a, RoleName, a, ViaJSON Value, Maybe Text)
</span><a href="#local-6989586621687991286"><span class="hs-identifier hs-var">pr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(SchemaName, a, RoleName, a, ViaJSON Value, Maybe Text)
</span><a href="#local-6989586621687991286"><span class="hs-identifier hs-var">pr</span></a></span><span> </span><span class="annot"><span class="annottext">(SchemaName, a, RoleName, a, ViaJSON Value, Maybe Text)
-&gt; Getting
     a (SchemaName, a, RoleName, a, ViaJSON Value, Maybe Text) a
-&gt; a
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/lens-5.3.2-7ec14d641784087c1f1350eada3cde7884c62d1ab2707daec993ceeca3096d32/share/doc/html/src/Control.Lens.Getter.html/Control.Lens.Getter.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting a (SchemaName, a, RoleName, a, ViaJSON Value, Maybe Text) a
forall s t a b. Field4 s t a b =&gt; Lens s t a b
Lens
  (SchemaName, a, RoleName, a, ViaJSON Value, Maybe Text)
  (SchemaName, a, RoleName, a, ViaJSON Value, Maybe Text)
  a
  a
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/lens-5.3.2-7ec14d641784087c1f1350eada3cde7884c62d1ab2707daec993ceeca3096d32/share/doc/html/src/Control.Lens.Tuple.html/Control.Lens.Tuple.html#_4"><span class="hs-identifier hs-var">_4</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621687991283"><span class="hs-identifier hs-var">pt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-492"></span><span>
</span><span id="line-493"></span><span>    </span><span id="local-6989586621687991285"><span class="annot"><span class="annottext">permRowToDef :: (SchemaName, a, RoleName, d, ViaJSON Value, Maybe Text)
-&gt; m (QualifiedObject a, PermDef b perm)
</span><a href="#local-6989586621687991285"><span class="hs-identifier hs-var hs-var">permRowToDef</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621687991303"><span class="annot"><span class="annottext">SchemaName
</span><a href="#local-6989586621687991303"><span class="hs-identifier hs-var">sn</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687991304"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621687991304"><span class="hs-identifier hs-var">tn</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687991305"><span class="annot"><span class="annottext">RoleName
</span><a href="#local-6989586621687991305"><span class="hs-identifier hs-var">rn</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">d
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#ViaJSON"><span class="hs-identifier hs-type">PG.ViaJSON</span></a></span><span> </span><span id="local-6989586621687991306"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621687991306"><span class="hs-identifier hs-var">pDef</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687991307"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621687991307"><span class="hs-identifier hs-var">mComment</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-494"></span><span>      </span><span id="local-6989586621687991308"><span class="annot"><a href="#local-6989586621687991308"><span class="hs-identifier hs-var">perm</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Value -&gt; m (PermDefPermission b perm)
forall a (m :: * -&gt; *). (FromJSON a, QErrM m) =&gt; Value -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#decodeValue"><span class="hs-identifier hs-var">decodeValue</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621687991306"><span class="hs-identifier hs-var">pDef</span></a></span><span>
</span><span id="line-495"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.SQL.Types.html#QualifiedObject"><span class="hs-identifier hs-type">QualifiedObject</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687991303"><span class="hs-identifier hs-type">sn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687991304"><span class="hs-identifier hs-type">tn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Permission.html#PermDef"><span class="hs-identifier hs-type">PermDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687991305"><span class="hs-identifier hs-type">rn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687991308"><span class="hs-identifier hs-type">perm</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687991307"><span class="hs-identifier hs-type">mComment</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-496"></span><span>
</span><span id="line-497"></span><span>    </span><span id="local-6989586621687991164"><span class="annot"><span class="annottext">mkRelDefs :: a
-&gt; [(SchemaName, a, RelName, a, ViaJSON Value, Maybe Text)]
-&gt; m [(QualifiedObject a, RelDef a)]
</span><a href="#local-6989586621687991164"><span class="hs-identifier hs-var hs-var">mkRelDefs</span></a></span></span><span> </span><span id="local-6989586621687991328"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621687991328"><span class="hs-identifier hs-var">rt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((SchemaName, a, RelName, a, ViaJSON Value, Maybe Text)
 -&gt; m (QualifiedObject a, RelDef a))
-&gt; [(SchemaName, a, RelName, a, ViaJSON Value, Maybe Text)]
-&gt; m [(QualifiedObject a, RelDef a)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">(SchemaName, a, RelName, a, ViaJSON Value, Maybe Text)
-&gt; m (QualifiedObject a, RelDef a)
forall {m :: * -&gt; *} {a} {a} {d}.
(FromJSON a, QErrM m) =&gt;
(SchemaName, a, RelName, d, ViaJSON Value, Maybe Text)
-&gt; m (QualifiedObject a, RelDef a)
</span><a href="#local-6989586621687991329"><span class="hs-identifier hs-var">relRowToDef</span></a></span><span> </span><span class="annot"><span class="annottext">([(SchemaName, a, RelName, a, ViaJSON Value, Maybe Text)]
 -&gt; m [(QualifiedObject a, RelDef a)])
-&gt; ([(SchemaName, a, RelName, a, ViaJSON Value, Maybe Text)]
    -&gt; [(SchemaName, a, RelName, a, ViaJSON Value, Maybe Text)])
-&gt; [(SchemaName, a, RelName, a, ViaJSON Value, Maybe Text)]
-&gt; m [(QualifiedObject a, RelDef a)]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">((SchemaName, a, RelName, a, ViaJSON Value, Maybe Text) -&gt; Bool)
-&gt; [(SchemaName, a, RelName, a, ViaJSON Value, Maybe Text)]
-&gt; [(SchemaName, a, RelName, a, ViaJSON Value, Maybe Text)]
forall a. (a -&gt; Bool) -&gt; [a] -&gt; [a]
</span><span class="hs-identifier hs-var">filter</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621687991330"><span class="annot"><span class="annottext">(SchemaName, a, RelName, a, ViaJSON Value, Maybe Text)
</span><a href="#local-6989586621687991330"><span class="hs-identifier hs-var">rr</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">(SchemaName, a, RelName, a, ViaJSON Value, Maybe Text)
</span><a href="#local-6989586621687991330"><span class="hs-identifier hs-var">rr</span></a></span><span> </span><span class="annot"><span class="annottext">(SchemaName, a, RelName, a, ViaJSON Value, Maybe Text)
-&gt; Getting
     a (SchemaName, a, RelName, a, ViaJSON Value, Maybe Text) a
-&gt; a
forall s a. s -&gt; Getting a s a -&gt; a
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/lens-5.3.2-7ec14d641784087c1f1350eada3cde7884c62d1ab2707daec993ceeca3096d32/share/doc/html/src/Control.Lens.Getter.html/Control.Lens.Getter.html#%5E."><span class="hs-operator hs-var">^.</span></a></span><span> </span><span class="annot"><span class="annottext">Getting a (SchemaName, a, RelName, a, ViaJSON Value, Maybe Text) a
forall s t a b. Field4 s t a b =&gt; Lens s t a b
Lens
  (SchemaName, a, RelName, a, ViaJSON Value, Maybe Text)
  (SchemaName, a, RelName, a, ViaJSON Value, Maybe Text)
  a
  a
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/lens-5.3.2-7ec14d641784087c1f1350eada3cde7884c62d1ab2707daec993ceeca3096d32/share/doc/html/src/Control.Lens.Tuple.html/Control.Lens.Tuple.html#_4"><span class="hs-identifier hs-var">_4</span></a></span><span> </span><span class="annot"><span class="annottext">a -&gt; a -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621687991328"><span class="hs-identifier hs-var">rt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-498"></span><span>
</span><span id="line-499"></span><span>    </span><span id="local-6989586621687991329"><span class="annot"><span class="annottext">relRowToDef :: (SchemaName, a, RelName, d, ViaJSON Value, Maybe Text)
-&gt; m (QualifiedObject a, RelDef a)
</span><a href="#local-6989586621687991329"><span class="hs-identifier hs-var hs-var">relRowToDef</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621687991345"><span class="annot"><span class="annottext">SchemaName
</span><a href="#local-6989586621687991345"><span class="hs-identifier hs-var">sn</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687991346"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621687991346"><span class="hs-identifier hs-var">tn</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687991347"><span class="annot"><span class="annottext">RelName
</span><a href="#local-6989586621687991347"><span class="hs-identifier hs-var">rn</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">d
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#ViaJSON"><span class="hs-identifier hs-type">PG.ViaJSON</span></a></span><span> </span><span id="local-6989586621687991348"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621687991348"><span class="hs-identifier hs-var">rDef</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687991349"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621687991349"><span class="hs-identifier hs-var">mComment</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-500"></span><span>      </span><span id="local-6989586621687991350"><span class="annot"><a href="#local-6989586621687991350"><span class="hs-identifier hs-var">using</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Value -&gt; m a
forall a (m :: * -&gt; *). (FromJSON a, QErrM m) =&gt; Value -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#decodeValue"><span class="hs-identifier hs-var">decodeValue</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621687991348"><span class="hs-identifier hs-var">rDef</span></a></span><span>
</span><span id="line-501"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.SQL.Types.html#QualifiedObject"><span class="hs-identifier hs-type">QualifiedObject</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687991345"><span class="hs-identifier hs-type">sn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687991346"><span class="hs-identifier hs-type">tn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Relationships.Local.html#RelDef"><span class="hs-identifier hs-type">RelDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687991347"><span class="hs-identifier hs-type">rn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687991350"><span class="hs-identifier hs-type">using</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687991349"><span class="hs-identifier hs-type">mComment</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-502"></span><span>
</span><span id="line-503"></span><span>    </span><span id="local-6989586621687991180"><span class="annot"><span class="annottext">mkTriggerMetaDefs :: [(SchemaName, a, ViaJSON Value)]
-&gt; TxET
     QErr
     IO
     [(QualifiedObject a, EventTriggerConf ('Postgres 'Vanilla))]
</span><a href="#local-6989586621687991180"><span class="hs-identifier hs-var hs-var">mkTriggerMetaDefs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((SchemaName, a, ViaJSON Value)
 -&gt; TxET
      QErr IO (QualifiedObject a, EventTriggerConf ('Postgres 'Vanilla)))
-&gt; [(SchemaName, a, ViaJSON Value)]
-&gt; TxET
     QErr
     IO
     [(QualifiedObject a, EventTriggerConf ('Postgres 'Vanilla))]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="annot"><span class="annottext">(SchemaName, a, ViaJSON Value)
-&gt; TxET
     QErr IO (QualifiedObject a, EventTriggerConf ('Postgres 'Vanilla))
forall {m :: * -&gt; *} {pgKind :: PostgresKind} {a}.
(HasTag ('Postgres pgKind), Typeable pgKind,
 PostgresBackend pgKind,
 HasCodec (BackendSourceKind ('Postgres pgKind)), QErrM m,
 FromJSON (BackendSourceKind ('Postgres pgKind))) =&gt;
(SchemaName, a, ViaJSON Value)
-&gt; m (QualifiedObject a, EventTriggerConf ('Postgres pgKind))
</span><a href="#local-6989586621687991391"><span class="hs-identifier hs-var">trigRowToDef</span></a></span><span>
</span><span id="line-504"></span><span>
</span><span id="line-505"></span><span>    </span><span id="local-6989586621687991391"><span class="annot"><span class="annottext">trigRowToDef :: (SchemaName, a, ViaJSON Value)
-&gt; m (QualifiedObject a, EventTriggerConf ('Postgres pgKind))
</span><a href="#local-6989586621687991391"><span class="hs-identifier hs-var hs-var">trigRowToDef</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621687991441"><span class="annot"><span class="annottext">SchemaName
</span><a href="#local-6989586621687991441"><span class="hs-identifier hs-var">sn</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687991442"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621687991442"><span class="hs-identifier hs-var">tn</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#ViaJSON"><span class="hs-identifier hs-type">PG.ViaJSON</span></a></span><span> </span><span id="local-6989586621687991443"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621687991443"><span class="hs-identifier hs-var">configuration</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-506"></span><span>      </span><span id="local-6989586621687991445"><span class="annot"><a href="#local-6989586621687991445"><span class="hs-identifier hs-var">conf</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier">EventTriggerConf</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><span class="hs-identifier">Postgres</span></span><span> </span><span class="annot"><span class="hs-identifier">pgKind</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Value -&gt; m (EventTriggerConf ('Postgres pgKind))
forall a (m :: * -&gt; *). (FromJSON a, QErrM m) =&gt; Value -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#decodeValue"><span class="hs-identifier hs-var">decodeValue</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621687991443"><span class="hs-identifier hs-var">configuration</span></a></span><span>
</span><span id="line-507"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.SQL.Types.html#QualifiedObject"><span class="hs-identifier hs-type">QualifiedObject</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687991441"><span class="hs-identifier hs-type">sn</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687991442"><span class="hs-identifier hs-type">tn</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621687991445"><span class="hs-identifier hs-type">conf</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-508"></span><span>
</span><span id="line-509"></span><span>    </span><span id="local-6989586621687991148"><span class="annot"><span class="annottext">fetchTables :: TxET
  QErr
  IO
  [(SchemaName, TableName, Bool,
    Maybe (ViaJSON (TableConfig ('Postgres 'Vanilla))))]
</span><a href="#local-6989586621687991148"><span class="hs-identifier hs-var hs-var">fetchTables</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-510"></span><span>      </span><span class="annot"><span class="annottext">(PGTxErr -&gt; QErr)
-&gt; Query
-&gt; ()
-&gt; Bool
-&gt; TxET
     QErr
     IO
     [(SchemaName, TableName, Bool,
       Maybe (ViaJSON (TableConfig ('Postgres 'Vanilla))))]
forall (m :: * -&gt; *) a r e.
(MonadIO m, FromRes a, ToPrepArgs r) =&gt;
(PGTxErr -&gt; e) -&gt; Query -&gt; r -&gt; Bool -&gt; TxET e m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#withQE"><span class="hs-identifier hs-var">PG.withQE</span></a></span><span>
</span><span id="line-511"></span><span>        </span><span class="annot"><span class="annottext">PGTxErr -&gt; QErr
</span><a href="Hasura.Backends.Postgres.Execute.Types.html#defaultTxErrorHandler"><span class="hs-identifier hs-var">defaultTxErrorHandler</span></a></span><span>
</span><span id="line-512"></span><span>        </span><span class="annot"><span class="">[PG.sql|
                SELECT table_schema, table_name, is_enum, configuration::json
                FROM hdb_catalog.hdb_table
                 WHERE is_system_defined = 'false'
                ORDER BY table_schema ASC, table_name ASC
                    |]</span></span><span>
</span><span id="line-518"></span><span>        </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-519"></span><span>        </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-520"></span><span>
</span><span id="line-521"></span><span>    </span><span id="local-6989586621687991162"><span class="annot"><span class="annottext">fetchRelationships :: TxET
  QErr
  IO
  [(SchemaName, TableName, RelName, RelType, ViaJSON Value,
    Maybe Text)]
</span><a href="#local-6989586621687991162"><span class="hs-identifier hs-var hs-var">fetchRelationships</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-522"></span><span>      </span><span class="annot"><span class="annottext">(PGTxErr -&gt; QErr)
-&gt; Query
-&gt; ()
-&gt; Bool
-&gt; TxET
     QErr
     IO
     [(SchemaName, TableName, RelName, RelType, ViaJSON Value,
       Maybe Text)]
forall (m :: * -&gt; *) a r e.
(MonadIO m, FromRes a, ToPrepArgs r) =&gt;
(PGTxErr -&gt; e) -&gt; Query -&gt; r -&gt; Bool -&gt; TxET e m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#withQE"><span class="hs-identifier hs-var">PG.withQE</span></a></span><span>
</span><span id="line-523"></span><span>        </span><span class="annot"><span class="annottext">PGTxErr -&gt; QErr
</span><a href="Hasura.Backends.Postgres.Execute.Types.html#defaultTxErrorHandler"><span class="hs-identifier hs-var">defaultTxErrorHandler</span></a></span><span>
</span><span id="line-524"></span><span>        </span><span class="annot"><span class="">[PG.sql|
                SELECT table_schema, table_name, rel_name, rel_type, rel_def::json, comment
                  FROM hdb_catalog.hdb_relationship
                 WHERE is_system_defined = 'false'
                ORDER BY table_schema ASC, table_name ASC, rel_name ASC
                    |]</span></span><span>
</span><span id="line-530"></span><span>        </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-531"></span><span>        </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-532"></span><span>
</span><span id="line-533"></span><span>    </span><span id="local-6989586621687991167"><span class="annot"><span class="annottext">fetchPermissions :: TxET
  QErr
  IO
  [(SchemaName, TableName, RoleName, PermType, ViaJSON Value,
    Maybe Text)]
</span><a href="#local-6989586621687991167"><span class="hs-identifier hs-var hs-var">fetchPermissions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-534"></span><span>      </span><span class="annot"><span class="annottext">(PGTxErr -&gt; QErr)
-&gt; Query
-&gt; ()
-&gt; Bool
-&gt; TxET
     QErr
     IO
     [(SchemaName, TableName, RoleName, PermType, ViaJSON Value,
       Maybe Text)]
forall (m :: * -&gt; *) a r e.
(MonadIO m, FromRes a, ToPrepArgs r) =&gt;
(PGTxErr -&gt; e) -&gt; Query -&gt; r -&gt; Bool -&gt; TxET e m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#withQE"><span class="hs-identifier hs-var">PG.withQE</span></a></span><span>
</span><span id="line-535"></span><span>        </span><span class="annot"><span class="annottext">PGTxErr -&gt; QErr
</span><a href="Hasura.Backends.Postgres.Execute.Types.html#defaultTxErrorHandler"><span class="hs-identifier hs-var">defaultTxErrorHandler</span></a></span><span>
</span><span id="line-536"></span><span>        </span><span class="annot"><span class="">[PG.sql|
                SELECT table_schema, table_name, role_name, perm_type, perm_def::json, comment
                  FROM hdb_catalog.hdb_permission
                 WHERE is_system_defined = 'false'
                ORDER BY table_schema ASC, table_name ASC, role_name ASC, perm_type ASC
                    |]</span></span><span>
</span><span id="line-542"></span><span>        </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-543"></span><span>        </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-544"></span><span>
</span><span id="line-545"></span><span>    </span><span id="local-6989586621687991178"><span class="annot"><span class="annottext">fetchEventTriggers :: TxET QErr IO [(SchemaName, TableName, ViaJSON Value)]
</span><a href="#local-6989586621687991178"><span class="hs-identifier hs-var hs-var">fetchEventTriggers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-546"></span><span>      </span><span class="annot"><span class="annottext">(PGTxErr -&gt; QErr)
-&gt; Query
-&gt; ()
-&gt; Bool
-&gt; TxET QErr IO [(SchemaName, TableName, ViaJSON Value)]
forall (m :: * -&gt; *) a r e.
(MonadIO m, FromRes a, ToPrepArgs r) =&gt;
(PGTxErr -&gt; e) -&gt; Query -&gt; r -&gt; Bool -&gt; TxET e m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#withQE"><span class="hs-identifier hs-var">PG.withQE</span></a></span><span>
</span><span id="line-547"></span><span>        </span><span class="annot"><span class="annottext">PGTxErr -&gt; QErr
</span><a href="Hasura.Backends.Postgres.Execute.Types.html#defaultTxErrorHandler"><span class="hs-identifier hs-var">defaultTxErrorHandler</span></a></span><span>
</span><span id="line-548"></span><span>        </span><span class="annot"><span class="">[PG.sql|
              SELECT e.schema_name, e.table_name, e.configuration::json
               FROM hdb_catalog.event_triggers e
              ORDER BY e.schema_name ASC, e.table_name ASC, e.name ASC
              |]</span></span><span>
</span><span id="line-553"></span><span>        </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-554"></span><span>        </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-555"></span><span>
</span><span id="line-556"></span><span>    </span><span id="local-6989586621687991199"><span class="annot"><span class="annottext">fetchFunctions :: TxET QErr IO (Functions ('Postgres 'Vanilla))
</span><a href="#local-6989586621687991199"><span class="hs-identifier hs-var hs-var">fetchFunctions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-557"></span><span>      </span><span id="local-6989586621687992308"><span class="annot"><a href="#local-6989586621687992308"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-558"></span><span>        </span><span class="annot"><span class="annottext">(PGTxErr -&gt; QErr)
-&gt; Query
-&gt; ()
-&gt; Bool
-&gt; TxET
     QErr
     IO
     [(SchemaName, FunctionName,
       ViaJSON (FunctionConfig ('Postgres 'Vanilla)))]
forall (m :: * -&gt; *) a r e.
(MonadIO m, FromRes a, ToPrepArgs r) =&gt;
(PGTxErr -&gt; e) -&gt; Query -&gt; r -&gt; Bool -&gt; TxET e m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#withQE"><span class="hs-identifier hs-var">PG.withQE</span></a></span><span>
</span><span id="line-559"></span><span>          </span><span class="annot"><span class="annottext">PGTxErr -&gt; QErr
</span><a href="Hasura.Backends.Postgres.Execute.Types.html#defaultTxErrorHandler"><span class="hs-identifier hs-var">defaultTxErrorHandler</span></a></span><span>
</span><span id="line-560"></span><span>          </span><span class="annot"><span class="">[PG.sql|
                SELECT function_schema, function_name, configuration::json
                FROM hdb_catalog.hdb_function
                WHERE is_system_defined = 'false'
                ORDER BY function_schema ASC, function_name ASC
                    |]</span></span><span>
</span><span id="line-566"></span><span>          </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-567"></span><span>          </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-568"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span>
</span><span id="line-569"></span><span>        </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#oMapFromL"><span class="hs-identifier hs-type">oMapFromL</span></a></span><span> </span><span class="annot"><a href="Hasura.Function.Metadata.html#_fmFunction"><span class="hs-identifier hs-var">_fmFunction</span></a></span><span>
</span><span id="line-570"></span><span>        </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">flip</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="annot"><a href="#local-6989586621687992308"><span class="hs-identifier hs-type">l</span></a></span><span>
</span><span id="line-571"></span><span>        </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621687992310"><span class="annot"><span class="annottext">SchemaName
</span><a href="#local-6989586621687992310"><span class="hs-identifier hs-var">sn</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687992311"><span class="annot"><span class="annottext">FunctionName
</span><a href="#local-6989586621687992311"><span class="hs-identifier hs-var">fn</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#ViaJSON"><span class="hs-identifier hs-type">PG.ViaJSON</span></a></span><span> </span><span id="local-6989586621687992312"><span class="annot"><span class="annottext">FunctionConfig ('Postgres 'Vanilla)
</span><a href="#local-6989586621687992312"><span class="hs-identifier hs-var">config</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-572"></span><span>          </span><span class="hs-comment">-- function permissions were only introduced post 43rd</span><span>
</span><span id="line-573"></span><span>          </span><span class="hs-comment">-- migration, so it's impossible we get any permissions</span><span>
</span><span id="line-574"></span><span>          </span><span class="hs-comment">-- here</span><span>
</span><span id="line-575"></span><span>          </span><span class="annot"><span class="annottext">FunctionName ('Postgres 'Vanilla)
-&gt; FunctionConfig ('Postgres 'Vanilla)
-&gt; [FunctionPermissionInfo]
-&gt; Maybe Text
-&gt; FunctionMetadata ('Postgres 'Vanilla)
forall (b :: BackendType).
FunctionName b
-&gt; FunctionConfig b
-&gt; [FunctionPermissionInfo]
-&gt; Maybe Text
-&gt; FunctionMetadata b
</span><a href="Hasura.Function.Metadata.html#FunctionMetadata"><span class="hs-identifier hs-var">FunctionMetadata</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SchemaName -&gt; FunctionName -&gt; QualifiedFunction
forall a. SchemaName -&gt; a -&gt; QualifiedObject a
</span><a href="Hasura.Backends.Postgres.SQL.Types.html#QualifiedObject"><span class="hs-identifier hs-var">QualifiedObject</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><a href="#local-6989586621687992310"><span class="hs-identifier hs-var">sn</span></a></span><span> </span><span class="annot"><span class="annottext">FunctionName
</span><a href="#local-6989586621687992311"><span class="hs-identifier hs-var">fn</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">FunctionConfig ('Postgres 'Vanilla)
</span><a href="#local-6989586621687992312"><span class="hs-identifier hs-var">config</span></a></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-576"></span><span>
</span><span id="line-577"></span><span>    </span><span id="local-6989586621687991203"><span class="annot"><span class="annottext">fetchRemoteSchemas :: TxET QErr IO [RemoteSchemaMetadataG r]
</span><a href="#local-6989586621687991203"><span class="hs-identifier hs-var hs-var">fetchRemoteSchemas</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-578"></span><span>      </span><span class="annot"><span class="annottext">((RemoteSchemaName, ViaJSON RemoteSchemaDef, Maybe Text)
 -&gt; RemoteSchemaMetadataG r)
-&gt; [(RemoteSchemaName, ViaJSON RemoteSchemaDef, Maybe Text)]
-&gt; [RemoteSchemaMetadataG r]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(RemoteSchemaName, ViaJSON RemoteSchemaDef, Maybe Text)
-&gt; RemoteSchemaMetadataG r
forall {r}.
(RemoteSchemaName, ViaJSON RemoteSchemaDef, Maybe Text)
-&gt; RemoteSchemaMetadataG r
</span><a href="#local-6989586621687992330"><span class="hs-identifier hs-var">fromRow</span></a></span><span>
</span><span id="line-579"></span><span>        </span><span class="annot"><span class="annottext">([(RemoteSchemaName, ViaJSON RemoteSchemaDef, Maybe Text)]
 -&gt; [RemoteSchemaMetadataG r])
-&gt; TxET
     QErr IO [(RemoteSchemaName, ViaJSON RemoteSchemaDef, Maybe Text)]
-&gt; TxET QErr IO [RemoteSchemaMetadataG r]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(PGTxErr -&gt; QErr)
-&gt; Query
-&gt; ()
-&gt; Bool
-&gt; TxET
     QErr IO [(RemoteSchemaName, ViaJSON RemoteSchemaDef, Maybe Text)]
forall (m :: * -&gt; *) a r e.
(MonadIO m, FromRes a, ToPrepArgs r) =&gt;
(PGTxErr -&gt; e) -&gt; Query -&gt; r -&gt; Bool -&gt; TxET e m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#withQE"><span class="hs-identifier hs-var">PG.withQE</span></a></span><span>
</span><span id="line-580"></span><span>          </span><span class="annot"><span class="annottext">PGTxErr -&gt; QErr
</span><a href="Hasura.Backends.Postgres.Execute.Types.html#defaultTxErrorHandler"><span class="hs-identifier hs-var">defaultTxErrorHandler</span></a></span><span>
</span><span id="line-581"></span><span>          </span><span class="annot"><span class="">[PG.sql|
         SELECT name, definition, comment
           FROM hdb_catalog.remote_schemas
         ORDER BY name ASC
         |]</span></span><span>
</span><span id="line-586"></span><span>          </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-587"></span><span>          </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-588"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-589"></span><span>        </span><span id="local-6989586621687992330"><span class="annot"><span class="annottext">fromRow :: (RemoteSchemaName, ViaJSON RemoteSchemaDef, Maybe Text)
-&gt; RemoteSchemaMetadataG r
</span><a href="#local-6989586621687992330"><span class="hs-identifier hs-var hs-var">fromRow</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621687992339"><span class="annot"><span class="annottext">RemoteSchemaName
</span><a href="#local-6989586621687992339"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#ViaJSON"><span class="hs-identifier hs-type">PG.ViaJSON</span></a></span><span> </span><span id="local-6989586621687992340"><span class="annot"><span class="annottext">RemoteSchemaDef
</span><a href="#local-6989586621687992340"><span class="hs-identifier hs-var">def</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687992341"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621687992341"><span class="hs-identifier hs-var">comment</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-590"></span><span>          </span><span class="annot"><span class="annottext">RemoteSchemaName
-&gt; RemoteSchemaDef
-&gt; Maybe Text
-&gt; [RemoteSchemaPermissionMetadata]
-&gt; SchemaRemoteRelationships r
-&gt; RemoteSchemaMetadataG r
forall r.
RemoteSchemaName
-&gt; RemoteSchemaDef
-&gt; Maybe Text
-&gt; [RemoteSchemaPermissionMetadata]
-&gt; SchemaRemoteRelationships r
-&gt; RemoteSchemaMetadataG r
</span><a href="Hasura.RemoteSchema.Metadata.Core.html#RemoteSchemaMetadata"><span class="hs-identifier hs-var">RemoteSchemaMetadata</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaName
</span><a href="#local-6989586621687992339"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaDef
</span><a href="#local-6989586621687992340"><span class="hs-identifier hs-var">def</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621687992341"><span class="hs-identifier hs-var">comment</span></a></span><span> </span><span class="annot"><span class="annottext">[RemoteSchemaPermissionMetadata]
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span> </span><span class="annot"><span class="annottext">SchemaRemoteRelationships r
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-591"></span><span>
</span><span id="line-592"></span><span>    </span><span id="local-6989586621687991206"><span class="annot"><span class="annottext">fetchCollections :: TxET QErr IO [CreateCollection]
</span><a href="#local-6989586621687991206"><span class="hs-identifier hs-var hs-var">fetchCollections</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-593"></span><span>      </span><span class="annot"><span class="annottext">((CollectionName, ViaJSON CollectionDef, Maybe Text)
 -&gt; CreateCollection)
-&gt; [(CollectionName, ViaJSON CollectionDef, Maybe Text)]
-&gt; [CreateCollection]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(CollectionName, ViaJSON CollectionDef, Maybe Text)
-&gt; CreateCollection
</span><a href="#local-6989586621687992359"><span class="hs-identifier hs-var">fromRow</span></a></span><span>
</span><span id="line-594"></span><span>        </span><span class="annot"><span class="annottext">([(CollectionName, ViaJSON CollectionDef, Maybe Text)]
 -&gt; [CreateCollection])
-&gt; TxET
     QErr IO [(CollectionName, ViaJSON CollectionDef, Maybe Text)]
-&gt; TxET QErr IO [CreateCollection]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(PGTxErr -&gt; QErr)
-&gt; Query
-&gt; ()
-&gt; Bool
-&gt; TxET
     QErr IO [(CollectionName, ViaJSON CollectionDef, Maybe Text)]
forall (m :: * -&gt; *) a r e.
(MonadIO m, FromRes a, ToPrepArgs r) =&gt;
(PGTxErr -&gt; e) -&gt; Query -&gt; r -&gt; Bool -&gt; TxET e m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#withQE"><span class="hs-identifier hs-var">PG.withQE</span></a></span><span>
</span><span id="line-595"></span><span>          </span><span class="annot"><span class="annottext">PGTxErr -&gt; QErr
</span><a href="Hasura.Backends.Postgres.Execute.Types.html#defaultTxErrorHandler"><span class="hs-identifier hs-var">defaultTxErrorHandler</span></a></span><span>
</span><span id="line-596"></span><span>          </span><span class="annot"><span class="">[PG.sql|
               SELECT collection_name, collection_defn::json, comment
                 FROM hdb_catalog.hdb_query_collection
                 WHERE is_system_defined = 'false'
               ORDER BY collection_name ASC
              |]</span></span><span>
</span><span id="line-602"></span><span>          </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-603"></span><span>          </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-604"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-605"></span><span>        </span><span id="local-6989586621687992359"><span class="annot"><span class="annottext">fromRow :: (CollectionName, ViaJSON CollectionDef, Maybe Text)
-&gt; CreateCollection
</span><a href="#local-6989586621687992359"><span class="hs-identifier hs-var hs-var">fromRow</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621687992360"><span class="annot"><span class="annottext">CollectionName
</span><a href="#local-6989586621687992360"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#ViaJSON"><span class="hs-identifier hs-type">PG.ViaJSON</span></a></span><span> </span><span id="local-6989586621687992361"><span class="annot"><span class="annottext">CollectionDef
</span><a href="#local-6989586621687992361"><span class="hs-identifier hs-var">defn</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687992362"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621687992362"><span class="hs-identifier hs-var">mComment</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-606"></span><span>          </span><span class="annot"><span class="annottext">CollectionName -&gt; CollectionDef -&gt; Maybe Text -&gt; CreateCollection
</span><a href="Hasura.RQL.Types.QueryCollection.html#CreateCollection"><span class="hs-identifier hs-var">CreateCollection</span></a></span><span> </span><span class="annot"><span class="annottext">CollectionName
</span><a href="#local-6989586621687992360"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">CollectionDef
</span><a href="#local-6989586621687992361"><span class="hs-identifier hs-var">defn</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621687992362"><span class="hs-identifier hs-var">mComment</span></a></span><span>
</span><span id="line-607"></span><span>
</span><span id="line-608"></span><span>    </span><span id="local-6989586621687991209"><span class="annot"><span class="annottext">fetchAllowlist :: TxET QErr IO [AllowlistEntry]
</span><a href="#local-6989586621687991209"><span class="hs-identifier hs-var hs-var">fetchAllowlist</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-609"></span><span>      </span><span class="annot"><span class="annottext">(Identity CollectionName -&gt; AllowlistEntry)
-&gt; [Identity CollectionName] -&gt; [AllowlistEntry]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">Identity CollectionName -&gt; AllowlistEntry
</span><a href="#local-6989586621687992374"><span class="hs-identifier hs-var">fromRow</span></a></span><span>
</span><span id="line-610"></span><span>        </span><span class="annot"><span class="annottext">([Identity CollectionName] -&gt; [AllowlistEntry])
-&gt; TxET QErr IO [Identity CollectionName]
-&gt; TxET QErr IO [AllowlistEntry]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(PGTxErr -&gt; QErr)
-&gt; Query -&gt; () -&gt; Bool -&gt; TxET QErr IO [Identity CollectionName]
forall (m :: * -&gt; *) a r e.
(MonadIO m, FromRes a, ToPrepArgs r) =&gt;
(PGTxErr -&gt; e) -&gt; Query -&gt; r -&gt; Bool -&gt; TxET e m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#withQE"><span class="hs-identifier hs-var">PG.withQE</span></a></span><span>
</span><span id="line-611"></span><span>          </span><span class="annot"><span class="annottext">PGTxErr -&gt; QErr
</span><a href="Hasura.Backends.Postgres.Execute.Types.html#defaultTxErrorHandler"><span class="hs-identifier hs-var">defaultTxErrorHandler</span></a></span><span>
</span><span id="line-612"></span><span>          </span><span class="annot"><span class="">[PG.sql|
          SELECT collection_name
            FROM hdb_catalog.hdb_allowlist
          ORDER BY collection_name ASC
         |]</span></span><span>
</span><span id="line-617"></span><span>          </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-618"></span><span>          </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-619"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-620"></span><span>        </span><span id="local-6989586621687992374"><span class="annot"><span class="annottext">fromRow :: Identity CollectionName -&gt; AllowlistEntry
</span><a href="#local-6989586621687992374"><span class="hs-identifier hs-var hs-var">fromRow</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Identity</span></span><span> </span><span id="local-6989586621687992375"><span class="annot"><span class="annottext">CollectionName
</span><a href="#local-6989586621687992375"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CollectionName -&gt; AllowlistScope -&gt; AllowlistEntry
</span><a href="Hasura.RQL.Types.Allowlist.html#AllowlistEntry"><span class="hs-identifier hs-var">AllowlistEntry</span></a></span><span> </span><span class="annot"><span class="annottext">CollectionName
</span><a href="#local-6989586621687992375"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">AllowlistScope
</span><a href="Hasura.RQL.Types.Allowlist.html#AllowlistScopeGlobal"><span class="hs-identifier hs-var">AllowlistScopeGlobal</span></a></span><span>
</span><span id="line-621"></span><span>
</span><span id="line-622"></span><span>    </span><span id="local-6989586621687991182"><span class="annot"><span class="annottext">fetchComputedFields :: TxET
  QErr
  IO
  [(QualifiedTable, ComputedFieldMetadata ('Postgres 'Vanilla))]
</span><a href="#local-6989586621687991182"><span class="hs-identifier hs-var hs-var">fetchComputedFields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-623"></span><span>      </span><span id="local-6989586621687992399"><span class="annot"><a href="#local-6989586621687992399"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-624"></span><span>        </span><span class="annot"><span class="annottext">(PGTxErr -&gt; QErr)
-&gt; Query
-&gt; ()
-&gt; Bool
-&gt; TxET
     QErr
     IO
     [(SchemaName, TableName, ComputedFieldName,
       ViaJSON (ComputedFieldDefinition ('Postgres 'Vanilla)),
       Maybe Text)]
forall (m :: * -&gt; *) a r e.
(MonadIO m, FromRes a, ToPrepArgs r) =&gt;
(PGTxErr -&gt; e) -&gt; Query -&gt; r -&gt; Bool -&gt; TxET e m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#withQE"><span class="hs-identifier hs-var">PG.withQE</span></a></span><span>
</span><span id="line-625"></span><span>          </span><span class="annot"><span class="annottext">PGTxErr -&gt; QErr
</span><a href="Hasura.Backends.Postgres.Execute.Types.html#defaultTxErrorHandler"><span class="hs-identifier hs-var">defaultTxErrorHandler</span></a></span><span>
</span><span id="line-626"></span><span>          </span><span class="annot"><span class="">[PG.sql|
              SELECT table_schema, table_name, computed_field_name,
                     definition::json, comment
                FROM hdb_catalog.hdb_computed_field
             |]</span></span><span>
</span><span id="line-631"></span><span>          </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-632"></span><span>          </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-633"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span>
</span><span id="line-634"></span><span>        </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">flip</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="annot"><a href="#local-6989586621687992399"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-635"></span><span>        </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621687992400"><span class="annot"><span class="annottext">SchemaName
</span><a href="#local-6989586621687992400"><span class="hs-identifier hs-var">schema</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687992401"><span class="annot"><span class="annottext">TableName
</span><a href="#local-6989586621687992401"><span class="hs-identifier hs-var">table</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687992402"><span class="annot"><span class="annottext">ComputedFieldName
</span><a href="#local-6989586621687992402"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#ViaJSON"><span class="hs-identifier hs-type">PG.ViaJSON</span></a></span><span> </span><span id="local-6989586621687992403"><span class="annot"><span class="annottext">ComputedFieldDefinition ('Postgres 'Vanilla)
</span><a href="#local-6989586621687992403"><span class="hs-identifier hs-var">definition</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687992404"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621687992404"><span class="hs-identifier hs-var">comment</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-636"></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">SchemaName -&gt; TableName -&gt; QualifiedTable
forall a. SchemaName -&gt; a -&gt; QualifiedObject a
</span><a href="Hasura.Backends.Postgres.SQL.Types.html#QualifiedObject"><span class="hs-identifier hs-var">QualifiedObject</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><a href="#local-6989586621687992400"><span class="hs-identifier hs-var">schema</span></a></span><span> </span><span class="annot"><span class="annottext">TableName
</span><a href="#local-6989586621687992401"><span class="hs-identifier hs-var">table</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-637"></span><span>            </span><span class="annot"><span class="annottext">ComputedFieldName
-&gt; ComputedFieldDefinition ('Postgres 'Vanilla)
-&gt; Comment
-&gt; ComputedFieldMetadata ('Postgres 'Vanilla)
forall (b :: BackendType).
ComputedFieldName
-&gt; ComputedFieldDefinition b -&gt; Comment -&gt; ComputedFieldMetadata b
</span><a href="Hasura.Table.Metadata.html#ComputedFieldMetadata"><span class="hs-identifier hs-var">ComputedFieldMetadata</span></a></span><span> </span><span class="annot"><span class="annottext">ComputedFieldName
</span><a href="#local-6989586621687992402"><span class="hs-identifier hs-var">name</span></a></span><span> </span><span class="annot"><span class="annottext">ComputedFieldDefinition ('Postgres 'Vanilla)
</span><a href="#local-6989586621687992403"><span class="hs-identifier hs-var">definition</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Text -&gt; Comment
</span><a href="Hasura.RQL.Types.Common.html#commentFromMaybeText"><span class="hs-identifier hs-var">commentFromMaybeText</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621687992404"><span class="hs-identifier hs-var">comment</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-638"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-639"></span><span>
</span><span id="line-640"></span><span>    </span><span id="local-6989586621687991215"><span class="annot"><span class="annottext">fetchCronTriggers :: TxET QErr IO CronTriggers
</span><a href="#local-6989586621687991215"><span class="hs-identifier hs-var hs-var">fetchCronTriggers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-641"></span><span>      </span><span class="annot"><span class="annottext">(CronTriggerMetadata -&gt; TriggerName)
-&gt; [CronTriggerMetadata] -&gt; CronTriggers
forall k a. Hashable k =&gt; (a -&gt; k) -&gt; [a] -&gt; InsOrdHashMap k a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#oMapFromL"><span class="hs-identifier hs-var">oMapFromL</span></a></span><span> </span><span class="annot"><span class="annottext">CronTriggerMetadata -&gt; TriggerName
</span><a href="Hasura.RQL.Types.ScheduledTrigger.html#ctName"><span class="hs-identifier hs-var">ctName</span></a></span><span>
</span><span id="line-642"></span><span>        </span><span class="annot"><span class="annottext">([CronTriggerMetadata] -&gt; CronTriggers)
-&gt; ([(TriggerName, ViaJSON InputWebhook, CronSchedule,
      Maybe (ViaJSON Value), ViaJSON STRetryConf, ViaJSON [HeaderConf],
      Bool, Maybe Text)]
    -&gt; [CronTriggerMetadata])
-&gt; [(TriggerName, ViaJSON InputWebhook, CronSchedule,
     Maybe (ViaJSON Value), ViaJSON STRetryConf, ViaJSON [HeaderConf],
     Bool, Maybe Text)]
-&gt; CronTriggers
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">((TriggerName, ViaJSON InputWebhook, CronSchedule,
  Maybe (ViaJSON Value), ViaJSON STRetryConf, ViaJSON [HeaderConf],
  Bool, Maybe Text)
 -&gt; CronTriggerMetadata)
-&gt; [(TriggerName, ViaJSON InputWebhook, CronSchedule,
     Maybe (ViaJSON Value), ViaJSON STRetryConf, ViaJSON [HeaderConf],
     Bool, Maybe Text)]
-&gt; [CronTriggerMetadata]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(TriggerName, ViaJSON InputWebhook, CronSchedule,
 Maybe (ViaJSON Value), ViaJSON STRetryConf, ViaJSON [HeaderConf],
 Bool, Maybe Text)
-&gt; CronTriggerMetadata
</span><a href="#local-6989586621687992439"><span class="hs-identifier hs-var">uncurryCronTrigger</span></a></span><span>
</span><span id="line-643"></span><span>        </span><span class="annot"><span class="annottext">([(TriggerName, ViaJSON InputWebhook, CronSchedule,
   Maybe (ViaJSON Value), ViaJSON STRetryConf, ViaJSON [HeaderConf],
   Bool, Maybe Text)]
 -&gt; CronTriggers)
-&gt; TxET
     QErr
     IO
     [(TriggerName, ViaJSON InputWebhook, CronSchedule,
       Maybe (ViaJSON Value), ViaJSON STRetryConf, ViaJSON [HeaderConf],
       Bool, Maybe Text)]
-&gt; TxET QErr IO CronTriggers
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(PGTxErr -&gt; QErr)
-&gt; Query
-&gt; ()
-&gt; Bool
-&gt; TxET
     QErr
     IO
     [(TriggerName, ViaJSON InputWebhook, CronSchedule,
       Maybe (ViaJSON Value), ViaJSON STRetryConf, ViaJSON [HeaderConf],
       Bool, Maybe Text)]
forall (m :: * -&gt; *) a r e.
(MonadIO m, FromRes a, ToPrepArgs r) =&gt;
(PGTxErr -&gt; e) -&gt; Query -&gt; r -&gt; Bool -&gt; TxET e m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#withQE"><span class="hs-identifier hs-var">PG.withQE</span></a></span><span>
</span><span id="line-644"></span><span>          </span><span class="annot"><span class="annottext">PGTxErr -&gt; QErr
</span><a href="Hasura.Backends.Postgres.Execute.Types.html#defaultTxErrorHandler"><span class="hs-identifier hs-var">defaultTxErrorHandler</span></a></span><span>
</span><span id="line-645"></span><span>          </span><span class="annot"><span class="">[PG.sql|
       SELECT ct.name, ct.webhook_conf, ct.cron_schedule, ct.payload,
             ct.retry_conf, ct.header_conf, ct.include_in_metadata, ct.comment
        FROM hdb_catalog.hdb_cron_triggers ct
        WHERE include_in_metadata
      |]</span></span><span>
</span><span id="line-651"></span><span>          </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-652"></span><span>          </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-653"></span><span>      </span><span class="hs-keyword">where</span><span>
</span><span id="line-654"></span><span>        </span><span id="local-6989586621687992439"><span class="annot"><span class="annottext">uncurryCronTrigger :: (TriggerName, ViaJSON InputWebhook, CronSchedule,
 Maybe (ViaJSON Value), ViaJSON STRetryConf, ViaJSON [HeaderConf],
 Bool, Maybe Text)
-&gt; CronTriggerMetadata
</span><a href="#local-6989586621687992439"><span class="hs-identifier hs-var hs-var">uncurryCronTrigger</span></a></span></span><span>
</span><span id="line-655"></span><span>          </span><span class="hs-special">(</span><span id="local-6989586621687992441"><span class="annot"><span class="annottext">TriggerName
</span><a href="#local-6989586621687992441"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687992442"><span class="annot"><span class="annottext">ViaJSON InputWebhook
</span><a href="#local-6989586621687992442"><span class="hs-identifier hs-var">webhook</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687992443"><span class="annot"><span class="annottext">CronSchedule
</span><a href="#local-6989586621687992443"><span class="hs-identifier hs-var">schedule</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687992444"><span class="annot"><span class="annottext">Maybe (ViaJSON Value)
</span><a href="#local-6989586621687992444"><span class="hs-identifier hs-var">payload</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687992445"><span class="annot"><span class="annottext">ViaJSON STRetryConf
</span><a href="#local-6989586621687992445"><span class="hs-identifier hs-var">retryConfig</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687992446"><span class="annot"><span class="annottext">ViaJSON [HeaderConf]
</span><a href="#local-6989586621687992446"><span class="hs-identifier hs-var">headerConfig</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687992447"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621687992447"><span class="hs-identifier hs-var">includeMetadata</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687992448"><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621687992448"><span class="hs-identifier hs-var">comment</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-656"></span><span>            </span><span class="annot"><a href="Hasura.RQL.Types.ScheduledTrigger.html#CronTriggerMetadata"><span class="hs-identifier hs-type">CronTriggerMetadata</span></a></span><span>
</span><span id="line-657"></span><span>              </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">ctName :: TriggerName
</span><a href="Hasura.RQL.Types.ScheduledTrigger.html#ctName"><span class="hs-identifier hs-var">ctName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">TriggerName
</span><a href="#local-6989586621687992441"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-658"></span><span>                </span><span class="annot"><span class="annottext">ctWebhook :: InputWebhook
</span><a href="Hasura.RQL.Types.ScheduledTrigger.html#ctWebhook"><span class="hs-identifier hs-var">ctWebhook</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ViaJSON InputWebhook -&gt; InputWebhook
forall a. ViaJSON a -&gt; a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#getViaJSON"><span class="hs-identifier hs-var">PG.getViaJSON</span></a></span><span> </span><span class="annot"><span class="annottext">ViaJSON InputWebhook
</span><a href="#local-6989586621687992442"><span class="hs-identifier hs-var">webhook</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-659"></span><span>                </span><span class="annot"><span class="annottext">ctSchedule :: CronSchedule
</span><a href="Hasura.RQL.Types.ScheduledTrigger.html#ctSchedule"><span class="hs-identifier hs-var">ctSchedule</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">CronSchedule
</span><a href="#local-6989586621687992443"><span class="hs-identifier hs-var">schedule</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-660"></span><span>                </span><span class="annot"><span class="annottext">ctPayload :: Maybe Value
</span><a href="Hasura.RQL.Types.ScheduledTrigger.html#ctPayload"><span class="hs-identifier hs-var">ctPayload</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ViaJSON Value -&gt; Value
forall a. ViaJSON a -&gt; a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#getViaJSON"><span class="hs-identifier hs-var">PG.getViaJSON</span></a></span><span> </span><span class="annot"><span class="annottext">(ViaJSON Value -&gt; Value) -&gt; Maybe (ViaJSON Value) -&gt; Maybe Value
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (ViaJSON Value)
</span><a href="#local-6989586621687992444"><span class="hs-identifier hs-var">payload</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-661"></span><span>                </span><span class="annot"><span class="annottext">ctRetryConf :: STRetryConf
</span><a href="Hasura.RQL.Types.ScheduledTrigger.html#ctRetryConf"><span class="hs-identifier hs-var">ctRetryConf</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ViaJSON STRetryConf -&gt; STRetryConf
forall a. ViaJSON a -&gt; a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#getViaJSON"><span class="hs-identifier hs-var">PG.getViaJSON</span></a></span><span> </span><span class="annot"><span class="annottext">ViaJSON STRetryConf
</span><a href="#local-6989586621687992445"><span class="hs-identifier hs-var">retryConfig</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-662"></span><span>                </span><span class="annot"><span class="annottext">ctHeaders :: [HeaderConf]
</span><a href="Hasura.RQL.Types.ScheduledTrigger.html#ctHeaders"><span class="hs-identifier hs-var">ctHeaders</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ViaJSON [HeaderConf] -&gt; [HeaderConf]
forall a. ViaJSON a -&gt; a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#getViaJSON"><span class="hs-identifier hs-var">PG.getViaJSON</span></a></span><span> </span><span class="annot"><span class="annottext">ViaJSON [HeaderConf]
</span><a href="#local-6989586621687992446"><span class="hs-identifier hs-var">headerConfig</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-663"></span><span>                </span><span class="annot"><span class="annottext">ctIncludeInMetadata :: Bool
</span><a href="Hasura.RQL.Types.ScheduledTrigger.html#ctIncludeInMetadata"><span class="hs-identifier hs-var">ctIncludeInMetadata</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621687992447"><span class="hs-identifier hs-var">includeMetadata</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-664"></span><span>                </span><span class="annot"><span class="annottext">ctComment :: Maybe Text
</span><a href="Hasura.RQL.Types.ScheduledTrigger.html#ctComment"><span class="hs-identifier hs-var">ctComment</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Text
</span><a href="#local-6989586621687992448"><span class="hs-identifier hs-var">comment</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-665"></span><span>                </span><span class="annot"><span class="annottext">ctRequestTransform :: Maybe RequestTransform
</span><a href="Hasura.RQL.Types.ScheduledTrigger.html#ctRequestTransform"><span class="hs-identifier hs-var">ctRequestTransform</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe RequestTransform
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span>
</span><span id="line-666"></span><span>                </span><span class="annot"><span class="annottext">ctResponseTransform :: Maybe MetadataResponseTransform
</span><a href="Hasura.RQL.Types.ScheduledTrigger.html#ctResponseTransform"><span class="hs-identifier hs-var">ctResponseTransform</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe MetadataResponseTransform
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-667"></span><span>              </span><span class="hs-special">}</span><span>
</span><span id="line-668"></span><span>
</span><span id="line-669"></span><span>    </span><span class="annot"><a href="#local-6989586621687991211"><span class="hs-identifier hs-type">fetchCustomTypes</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#TxE"><span class="hs-identifier hs-type">PG.TxE</span></a></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#QErr"><span class="hs-identifier hs-type">QErr</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.CustomTypes.html#CustomTypes"><span class="hs-identifier hs-type">CustomTypes</span></a></span><span>
</span><span id="line-670"></span><span>    </span><span id="local-6989586621687991211"><span class="annot"><span class="annottext">fetchCustomTypes :: TxE QErr CustomTypes
</span><a href="#local-6989586621687991211"><span class="hs-identifier hs-var hs-var">fetchCustomTypes</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-671"></span><span>      </span><span class="annot"><span class="annottext">ViaJSON CustomTypes -&gt; CustomTypes
forall a. ViaJSON a -&gt; a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#getViaJSON"><span class="hs-identifier hs-var">PG.getViaJSON</span></a></span><span>
</span><span id="line-672"></span><span>        </span><span class="annot"><span class="annottext">(ViaJSON CustomTypes -&gt; CustomTypes)
-&gt; (SingleRow (Identity (ViaJSON CustomTypes))
    -&gt; ViaJSON CustomTypes)
-&gt; SingleRow (Identity (ViaJSON CustomTypes))
-&gt; CustomTypes
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Identity (ViaJSON CustomTypes) -&gt; ViaJSON CustomTypes
forall a. Identity a -&gt; a
</span><span class="hs-identifier hs-var">runIdentity</span></span><span>
</span><span id="line-673"></span><span>        </span><span class="annot"><span class="annottext">(Identity (ViaJSON CustomTypes) -&gt; ViaJSON CustomTypes)
-&gt; (SingleRow (Identity (ViaJSON CustomTypes))
    -&gt; Identity (ViaJSON CustomTypes))
-&gt; SingleRow (Identity (ViaJSON CustomTypes))
-&gt; ViaJSON CustomTypes
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SingleRow (Identity (ViaJSON CustomTypes))
-&gt; Identity (ViaJSON CustomTypes)
forall a. SingleRow a -&gt; a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#getRow"><span class="hs-identifier hs-var">PG.getRow</span></a></span><span>
</span><span id="line-674"></span><span>        </span><span class="annot"><span class="annottext">(SingleRow (Identity (ViaJSON CustomTypes)) -&gt; CustomTypes)
-&gt; TxET QErr IO (SingleRow (Identity (ViaJSON CustomTypes)))
-&gt; TxE QErr CustomTypes
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(PGTxErr -&gt; QErr)
-&gt; Query
-&gt; [PrepArg]
-&gt; Bool
-&gt; TxET QErr IO (SingleRow (Identity (ViaJSON CustomTypes)))
forall (m :: * -&gt; *) a e.
(MonadIO m, FromRes a) =&gt;
(PGTxErr -&gt; e) -&gt; Query -&gt; [PrepArg] -&gt; Bool -&gt; TxET e m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#rawQE"><span class="hs-identifier hs-var">PG.rawQE</span></a></span><span>
</span><span id="line-675"></span><span>          </span><span class="annot"><span class="annottext">PGTxErr -&gt; QErr
</span><a href="Hasura.Backends.Postgres.Execute.Types.html#defaultTxErrorHandler"><span class="hs-identifier hs-var">defaultTxErrorHandler</span></a></span><span>
</span><span id="line-676"></span><span>          </span><span class="annot"><span class="">[PG.sql|
         select coalesce((select custom_types::json from hdb_catalog.hdb_custom_types), '{}'::json)
         |]</span></span><span>
</span><span id="line-679"></span><span>          </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-680"></span><span>          </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-681"></span><span>
</span><span id="line-682"></span><span>    </span><span id="local-6989586621687991213"><span class="annot"><span class="annottext">fetchActions :: TxET QErr IO [ActionMetadata]
</span><a href="#local-6989586621687991213"><span class="hs-identifier hs-var hs-var">fetchActions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-683"></span><span>      </span><span class="annot"><span class="annottext">ViaJSON [ActionMetadata] -&gt; [ActionMetadata]
forall a. ViaJSON a -&gt; a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#getViaJSON"><span class="hs-identifier hs-var">PG.getViaJSON</span></a></span><span>
</span><span id="line-684"></span><span>        </span><span class="annot"><span class="annottext">(ViaJSON [ActionMetadata] -&gt; [ActionMetadata])
-&gt; (SingleRow (Identity (ViaJSON [ActionMetadata]))
    -&gt; ViaJSON [ActionMetadata])
-&gt; SingleRow (Identity (ViaJSON [ActionMetadata]))
-&gt; [ActionMetadata]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Identity (ViaJSON [ActionMetadata]) -&gt; ViaJSON [ActionMetadata]
forall a. Identity a -&gt; a
</span><span class="hs-identifier hs-var">runIdentity</span></span><span>
</span><span id="line-685"></span><span>        </span><span class="annot"><span class="annottext">(Identity (ViaJSON [ActionMetadata]) -&gt; ViaJSON [ActionMetadata])
-&gt; (SingleRow (Identity (ViaJSON [ActionMetadata]))
    -&gt; Identity (ViaJSON [ActionMetadata]))
-&gt; SingleRow (Identity (ViaJSON [ActionMetadata]))
-&gt; ViaJSON [ActionMetadata]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SingleRow (Identity (ViaJSON [ActionMetadata]))
-&gt; Identity (ViaJSON [ActionMetadata])
forall a. SingleRow a -&gt; a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#getRow"><span class="hs-identifier hs-var">PG.getRow</span></a></span><span>
</span><span id="line-686"></span><span>        </span><span class="annot"><span class="annottext">(SingleRow (Identity (ViaJSON [ActionMetadata]))
 -&gt; [ActionMetadata])
-&gt; TxET QErr IO (SingleRow (Identity (ViaJSON [ActionMetadata])))
-&gt; TxET QErr IO [ActionMetadata]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(PGTxErr -&gt; QErr)
-&gt; Query
-&gt; [PrepArg]
-&gt; Bool
-&gt; TxET QErr IO (SingleRow (Identity (ViaJSON [ActionMetadata])))
forall (m :: * -&gt; *) a e.
(MonadIO m, FromRes a) =&gt;
(PGTxErr -&gt; e) -&gt; Query -&gt; [PrepArg] -&gt; Bool -&gt; TxET e m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#rawQE"><span class="hs-identifier hs-var">PG.rawQE</span></a></span><span>
</span><span id="line-687"></span><span>          </span><span class="annot"><span class="annottext">PGTxErr -&gt; QErr
</span><a href="Hasura.Backends.Postgres.Execute.Types.html#defaultTxErrorHandler"><span class="hs-identifier hs-var">defaultTxErrorHandler</span></a></span><span>
</span><span id="line-688"></span><span>          </span><span class="annot"><span class="">[PG.sql|
        select
          coalesce(
            json_agg(
              json_build_object(
                'name', a.action_name,
                'definition', a.action_defn,
                'comment', a.comment,
                'permissions', ap.permissions
              ) order by a.action_name asc
            ),
            '[]'
          )
        from
          hdb_catalog.hdb_action as a
          left outer join lateral (
            select
              coalesce(
                json_agg(
                  json_build_object(
                    'role', ap.role_name,
                    'comment', ap.comment
                  ) order by ap.role_name asc
                ),
                '[]'
              ) as permissions
            from
              hdb_catalog.hdb_action_permission ap
            where
              ap.action_name = a.action_name
          ) ap on true;
                            |]</span></span><span>
</span><span id="line-720"></span><span>          </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-721"></span><span>          </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-722"></span><span>
</span><span id="line-723"></span><span>    </span><span id="local-6989586621687991184"><span class="annot"><span class="annottext">fetchRemoteRelationships :: TxET QErr IO [(QualifiedTable, RelName, Value)]
</span><a href="#local-6989586621687991184"><span class="hs-identifier hs-var hs-var">fetchRemoteRelationships</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-724"></span><span>      </span><span id="local-6989586621687992483"><span class="annot"><a href="#local-6989586621687992483"><span class="hs-identifier hs-var">r</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-725"></span><span>        </span><span class="annot"><span class="annottext">(PGTxErr -&gt; QErr)
-&gt; Query
-&gt; ()
-&gt; Bool
-&gt; TxET QErr IO [(SchemaName, TableName, RelName, ViaJSON Value)]
forall (m :: * -&gt; *) a r e.
(MonadIO m, FromRes a, ToPrepArgs r) =&gt;
(PGTxErr -&gt; e) -&gt; Query -&gt; r -&gt; Bool -&gt; TxET e m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#withQE"><span class="hs-identifier hs-var">PG.withQE</span></a></span><span>
</span><span id="line-726"></span><span>          </span><span class="annot"><span class="annottext">PGTxErr -&gt; QErr
</span><a href="Hasura.Backends.Postgres.Execute.Types.html#defaultTxErrorHandler"><span class="hs-identifier hs-var">defaultTxErrorHandler</span></a></span><span>
</span><span id="line-727"></span><span>          </span><span class="annot"><span class="">[PG.sql|
                SELECT table_schema, table_name,
                       remote_relationship_name, definition::json
                FROM hdb_catalog.hdb_remote_relationship
             |]</span></span><span>
</span><span id="line-732"></span><span>          </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-733"></span><span>          </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-734"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span>
</span><span id="line-735"></span><span>        </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">flip</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">map</span></span><span> </span><span class="annot"><a href="#local-6989586621687992483"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-736"></span><span>        </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621687992484"><span class="annot"><span class="annottext">SchemaName
</span><a href="#local-6989586621687992484"><span class="hs-identifier hs-var">schema</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687992485"><span class="annot"><span class="annottext">TableName
</span><a href="#local-6989586621687992485"><span class="hs-identifier hs-var">table</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687992486"><span class="annot"><span class="annottext">RelName
</span><a href="#local-6989586621687992486"><span class="hs-identifier hs-var">name</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Class.html/Database.PG.Query.Class.html#ViaJSON"><span class="hs-identifier hs-type">PG.ViaJSON</span></a></span><span> </span><span id="local-6989586621687992487"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621687992487"><span class="hs-identifier hs-var">definition</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-737"></span><span>          </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">SchemaName -&gt; TableName -&gt; QualifiedTable
forall a. SchemaName -&gt; a -&gt; QualifiedObject a
</span><a href="Hasura.Backends.Postgres.SQL.Types.html#QualifiedObject"><span class="hs-identifier hs-var">QualifiedObject</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><a href="#local-6989586621687992484"><span class="hs-identifier hs-var">schema</span></a></span><span> </span><span class="annot"><span class="annottext">TableName
</span><a href="#local-6989586621687992485"><span class="hs-identifier hs-var">table</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-738"></span><span>            </span><span class="annot"><span class="annottext">RelName
</span><a href="#local-6989586621687992486"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-739"></span><span>            </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621687992487"><span class="hs-identifier hs-var">definition</span></a></span><span>
</span><span id="line-740"></span><span>          </span><span class="hs-special">)</span><span>
</span><span id="line-741"></span><span>
</span><span id="line-742"></span><span id="local-6989586621687989438"><span class="annot"><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addCronTriggerForeignKeyConstraint"><span class="hs-identifier hs-type">addCronTriggerForeignKeyConstraint</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#MonadTx"><span class="hs-identifier hs-type">MonadTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687989438"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621687989438"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-743"></span><span id="addCronTriggerForeignKeyConstraint"><span class="annot"><span class="annottext">addCronTriggerForeignKeyConstraint :: forall (m :: * -&gt; *). MonadTx m =&gt; m ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#addCronTriggerForeignKeyConstraint"><span class="hs-identifier hs-var hs-var">addCronTriggerForeignKeyConstraint</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-744"></span><span>  </span><span class="annot"><span class="annottext">TxE QErr () -&gt; m ()
forall a. TxE QErr a -&gt; m a
forall (m :: * -&gt; *) a. MonadTx m =&gt; TxE QErr a -&gt; m a
</span><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#liftTx"><span class="hs-identifier hs-var">liftTx</span></a></span><span>
</span><span id="line-745"></span><span>    </span><span class="annot"><span class="annottext">(TxE QErr () -&gt; m ()) -&gt; TxE QErr () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(PGTxErr -&gt; QErr) -&gt; Query -&gt; () -&gt; Bool -&gt; TxE QErr ()
forall (m :: * -&gt; *) r e.
(MonadIO m, ToPrepArgs r) =&gt;
(PGTxErr -&gt; e) -&gt; Query -&gt; r -&gt; Bool -&gt; TxET e m ()
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#unitQE"><span class="hs-identifier hs-var">PG.unitQE</span></a></span><span>
</span><span id="line-746"></span><span>      </span><span class="annot"><span class="annottext">PGTxErr -&gt; QErr
</span><a href="Hasura.Backends.Postgres.Execute.Types.html#defaultTxErrorHandler"><span class="hs-identifier hs-var">defaultTxErrorHandler</span></a></span><span>
</span><span id="line-747"></span><span>      </span><span class="annot"><span class="">[PG.sql|
      ALTER TABLE hdb_catalog.hdb_cron_events ADD CONSTRAINT
     hdb_cron_events_trigger_name_fkey FOREIGN KEY (trigger_name)
     REFERENCES hdb_catalog.hdb_cron_triggers(name)
     ON UPDATE CASCADE ON DELETE CASCADE;
     |]</span></span><span>
</span><span id="line-753"></span><span>      </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-754"></span><span>      </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-755"></span><span>
</span><span id="line-756"></span><span class="hs-comment">-- | Drops and recreates all &#8220;system-defined&#8221; metadata, aka metadata for tables and views in the</span><span>
</span><span id="line-757"></span><span class="hs-comment">-- @information_schema@ and @hdb_catalog@ schemas. These tables and views are tracked to expose them</span><span>
</span><span id="line-758"></span><span class="hs-comment">-- to the console, which allows us to reuse the same functionality we use to implement user-defined</span><span>
</span><span id="line-759"></span><span class="hs-comment">-- APIs to expose the catalog.</span><span>
</span><span id="line-760"></span><span class="hs-comment">--</span><span>
</span><span id="line-761"></span><span class="hs-comment">-- This process has a long and storied history.</span><span>
</span><span id="line-762"></span><span class="hs-comment">--</span><span>
</span><span id="line-763"></span><span class="hs-comment">-- In the past, we reused the same machinery we use for CLI migrations to define our own internal</span><span>
</span><span id="line-764"></span><span class="hs-comment">-- metadata migrations. This caused trouble, however, as we&#8217;d have to run those migrations in</span><span>
</span><span id="line-765"></span><span class="hs-comment">-- lockstep with our SQL migrations to ensure the two didn&#8217;t get out of sync. This in turn caused</span><span>
</span><span id="line-766"></span><span class="hs-comment">-- trouble because those migrations would hit code paths inside @graphql-engine@ to add or remove</span><span>
</span><span id="line-767"></span><span class="hs-comment">-- things from the @pg_catalog@ tables, and /that/ in turn would fail because we hadn&#8217;t finished</span><span>
</span><span id="line-768"></span><span class="hs-comment">-- running the SQL migrations, so we were running a new version of the code against an old version</span><span>
</span><span id="line-769"></span><span class="hs-comment">-- of the schema! That caused #2826.</span><span>
</span><span id="line-770"></span><span class="hs-comment">--</span><span>
</span><span id="line-771"></span><span class="hs-comment">-- To fix that, #2379 switched to the approach of just dropping and recreating all system metadata</span><span>
</span><span id="line-772"></span><span class="hs-comment">-- every time we run any SQL migrations. But /that/ in turn caused trouble due to the way we were</span><span>
</span><span id="line-773"></span><span class="hs-comment">-- constantly rebuilding the schema cache (#3354), causing us to switch to incremental schema cache</span><span>
</span><span id="line-774"></span><span class="hs-comment">-- construction (#3394). However, although that mostly resolved the problem, we still weren&#8217;t</span><span>
</span><span id="line-775"></span><span class="hs-comment">-- totally out of the woods, as the incremental construction was still too slow on slow Postgres</span><span>
</span><span id="line-776"></span><span class="hs-comment">-- instances (#3654).</span><span>
</span><span id="line-777"></span><span class="hs-comment">--</span><span>
</span><span id="line-778"></span><span class="hs-comment">-- To sidestep the whole issue, as of #3686 we now just create all the system metadata in code here,</span><span>
</span><span id="line-779"></span><span class="hs-comment">-- and we only rebuild the schema cache once, at the very end. This is a little unsatisfying, since</span><span>
</span><span id="line-780"></span><span class="hs-comment">-- it means our internal migrations are &#8220;blessed&#8221; compared to user-defined CLI migrations. If we</span><span>
</span><span id="line-781"></span><span class="hs-comment">-- improve CLI migrations further in the future, maybe we can switch back to using that approach,</span><span>
</span><span id="line-782"></span><span class="hs-comment">-- instead.</span><span>
</span><span id="line-783"></span><span id="local-6989586621687992493"><span class="annot"><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#recreateSystemMetadata"><span class="hs-identifier hs-type">recreateSystemMetadata</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#MonadTx"><span class="hs-identifier hs-type">MonadTx</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687992493"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="#local-6989586621687992493"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-784"></span><span id="recreateSystemMetadata"><span class="annot"><span class="annottext">recreateSystemMetadata :: forall (m :: * -&gt; *). MonadTx m =&gt; m ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#recreateSystemMetadata"><span class="hs-identifier hs-var hs-var">recreateSystemMetadata</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-785"></span><span>  </span><span class="hs-special">(</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TxE QErr () -&gt; m ()
forall a. TxE QErr a -&gt; m a
forall (m :: * -&gt; *) a. MonadTx m =&gt; TxE QErr a -&gt; m a
</span><a href="Hasura.Backends.Postgres.Connection.MonadTx.html#liftTx"><span class="hs-identifier hs-var">liftTx</span></a></span><span> </span><span class="annot"><span class="annottext">(TxE QErr () -&gt; m ()) -&gt; TxE QErr () -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(PGTxErr -&gt; QErr) -&gt; Query -&gt; TxE QErr ()
forall (m :: * -&gt; *) a e.
(MonadIO m, FromRes a) =&gt;
(PGTxErr -&gt; e) -&gt; Query -&gt; TxET e m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Transaction.html/Database.PG.Query.Transaction.html#multiQE"><span class="hs-identifier hs-var">PG.multiQE</span></a></span><span> </span><span class="annot"><span class="annottext">PGTxErr -&gt; QErr
</span><a href="Hasura.Backends.Postgres.Execute.Types.html#defaultTxErrorHandler"><span class="hs-identifier hs-var">defaultTxErrorHandler</span></a></span><span> </span><span class="hs-special">$</span><span class="hs-special">(</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/file-embed-0.0.15.0-515808e58f03d959385c4d19dcff901545fbbb17eb4c8312a46b66f913b925ab/share/doc/html/src/Data.FileEmbed.html/Data.FileEmbed.html#makeRelativeToProject"><span class="hs-identifier hs-type">makeRelativeToProject</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;src-rsr/clear_system_metadata.sql&quot;</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">&gt;&gt;=</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/pg-client-0.1.0/opt/doc/html/pg-client/src/Database.PG.Query.Pool.html/Database.PG.Query.Pool.html#sqlFromFile"><span class="hs-identifier hs-type">PG.sqlFromFile</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-786"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">flip</span></span><span> </span><span class="annot"><span class="hs-identifier hs-var">runReaderT</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Common.html#SystemDefined"><span class="hs-identifier hs-type">SystemDefined</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">True</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">for_</span></span><span> </span><span class="annot"><a href="#local-6989586621687992718"><span class="hs-identifier hs-type">systemMetadata</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621687992719"><span class="annot"><span class="annottext">QualifiedTable
</span><a href="#local-6989586621687992719"><span class="hs-identifier hs-var">tableName</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687992720"><span class="annot"><span class="annottext">[Either
   (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
</span><a href="#local-6989586621687992720"><span class="hs-identifier hs-var">tableRels</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-787"></span><span>    </span><span class="annot"><span class="annottext">QualifiedTable
-&gt; Bool
-&gt; TableConfig ('Postgres 'Vanilla)
-&gt; ReaderT SystemDefined m ()
forall (m :: * -&gt; *).
(MonadTx m, MonadReader SystemDefined m) =&gt;
QualifiedTable -&gt; Bool -&gt; TableConfig ('Postgres 'Vanilla) -&gt; m ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#saveTableToCatalog"><span class="hs-identifier hs-var">saveTableToCatalog</span></a></span><span> </span><span class="annot"><span class="annottext">QualifiedTable
</span><a href="#local-6989586621687992719"><span class="hs-identifier hs-var">tableName</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="annot"><span class="annottext">TableConfig ('Postgres 'Vanilla)
forall (b :: BackendType). TableConfig b
</span><a href="Hasura.Table.Cache.html#emptyTableConfig"><span class="hs-identifier hs-var">emptyTableConfig</span></a></span><span>
</span><span id="line-788"></span><span>    </span><span class="annot"><span class="annottext">[Either
   (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
    -&gt; ReaderT SystemDefined m ())
-&gt; ReaderT SystemDefined m ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f ()
</span><span class="hs-identifier hs-var">for_</span></span><span> </span><span class="annot"><span class="annottext">[Either
   (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
</span><a href="#local-6989586621687992720"><span class="hs-identifier hs-var">tableRels</span></a></span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-789"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span id="local-6989586621687992721"><span class="annot"><span class="annottext">ObjRelDef ('Postgres 'Vanilla)
</span><a href="#local-6989586621687992721"><span class="hs-identifier hs-var">relDef</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">QualifiedTable
-&gt; RelType
-&gt; ObjRelDef ('Postgres 'Vanilla)
-&gt; ReaderT SystemDefined m ()
forall (m :: * -&gt; *) a.
(MonadTx m, MonadReader SystemDefined m, ToJSON a) =&gt;
QualifiedTable -&gt; RelType -&gt; RelDef a -&gt; m ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#insertRelationshipToCatalog"><span class="hs-identifier hs-var">insertRelationshipToCatalog</span></a></span><span> </span><span class="annot"><span class="annottext">QualifiedTable
</span><a href="#local-6989586621687992719"><span class="hs-identifier hs-var">tableName</span></a></span><span> </span><span class="annot"><span class="annottext">RelType
</span><a href="Hasura.RQL.Types.Common.html#ObjRel"><span class="hs-identifier hs-var">ObjRel</span></a></span><span> </span><span class="annot"><span class="annottext">ObjRelDef ('Postgres 'Vanilla)
</span><a href="#local-6989586621687992721"><span class="hs-identifier hs-var">relDef</span></a></span><span>
</span><span id="line-790"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621687992722"><span class="annot"><span class="annottext">ArrRelDef ('Postgres 'Vanilla)
</span><a href="#local-6989586621687992722"><span class="hs-identifier hs-var">relDef</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">QualifiedTable
-&gt; RelType
-&gt; ArrRelDef ('Postgres 'Vanilla)
-&gt; ReaderT SystemDefined m ()
forall (m :: * -&gt; *) a.
(MonadTx m, MonadReader SystemDefined m, ToJSON a) =&gt;
QualifiedTable -&gt; RelType -&gt; RelDef a -&gt; m ()
</span><a href="Hasura.RQL.DDL.Schema.LegacyCatalog.html#insertRelationshipToCatalog"><span class="hs-identifier hs-var">insertRelationshipToCatalog</span></a></span><span> </span><span class="annot"><span class="annottext">QualifiedTable
</span><a href="#local-6989586621687992719"><span class="hs-identifier hs-var">tableName</span></a></span><span> </span><span class="annot"><span class="annottext">RelType
</span><a href="Hasura.RQL.Types.Common.html#ArrRel"><span class="hs-identifier hs-var">ArrRel</span></a></span><span> </span><span class="annot"><span class="annottext">ArrRelDef ('Postgres 'Vanilla)
</span><a href="#local-6989586621687992722"><span class="hs-identifier hs-var">relDef</span></a></span><span>
</span><span id="line-791"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-792"></span><span>    </span><span class="annot"><a href="#local-6989586621687992718"><span class="hs-identifier hs-type">systemMetadata</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.SQL.Types.html#QualifiedTable"><span class="hs-identifier hs-type">QualifiedTable</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Relationships.Local.html#ObjRelDef"><span class="hs-identifier hs-type">ObjRelDef</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.RQL.Types.BackendType.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.RQL.Types.BackendType.html#Vanilla"><span class="hs-identifier hs-type">Vanilla</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Relationships.Local.html#ArrRelDef"><span class="hs-identifier hs-type">ArrRelDef</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">'</span><span class="annot"><a href="Hasura.RQL.Types.BackendType.html#Postgres"><span class="hs-identifier hs-type">Postgres</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="Hasura.RQL.Types.BackendType.html#Vanilla"><span class="hs-identifier hs-type">Vanilla</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-793"></span><span>    </span><span id="local-6989586621687992718"><span class="annot"><span class="annottext">systemMetadata :: [(QualifiedTable,
  [Either
     (ObjRelDef ('Postgres 'Vanilla))
     (ArrRelDef ('Postgres 'Vanilla))])]
</span><a href="#local-6989586621687992718"><span class="hs-identifier hs-var hs-var">systemMetadata</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-794"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;information_schema&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;tables&quot;</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-795"></span><span>        </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;information_schema&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;schemata&quot;</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-796"></span><span>        </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;information_schema&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;views&quot;</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-797"></span><span>        </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;information_schema&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;columns&quot;</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-798"></span><span>        </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span>
</span><span id="line-799"></span><span>          </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span>
</span><span id="line-800"></span><span>          </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_table&quot;</span></span><span>
</span><span id="line-801"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">NonEmptyText
-&gt; ObjRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall {a} {b}. NonEmptyText -&gt; a -&gt; Either (RelDef a) b
</span><a href="#local-6989586621687992724"><span class="hs-identifier hs-var">objectRel</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.NonEmpty.html/Data.Text.NonEmpty.html#nonEmptyText"><span class="hs-identifier hs-type">nonEmptyText</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;detail&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-802"></span><span>              </span><span class="annot"><span class="annottext">(ObjRelUsing ('Postgres 'Vanilla)
 -&gt; Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla)))
-&gt; ObjRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [(ColumnPath ('Postgres 'Vanilla),
     ColumnPath ('Postgres 'Vanilla))]
-&gt; ObjRelUsing ('Postgres 'Vanilla)
forall {b :: BackendType} {a} {a}.
(TableName b ~ QualifiedObject a, Hashable (ColumnPath b)) =&gt;
SchemaName -&gt; a -&gt; [(ColumnPath b, ColumnPath b)] -&gt; RelUsing b a
</span><a href="#local-6989586621687992728"><span class="hs-identifier hs-var">manualConfig</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;information_schema&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;tables&quot;</span></span><span> </span><span class="annot"><span class="annottext">[(ColumnPath ('Postgres 'Vanilla),
  ColumnPath ('Postgres 'Vanilla))]
[(PGCol, PGCol)]
</span><a href="#local-6989586621687992729"><span class="hs-identifier hs-var">tableNameMapping</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-803"></span><span>            </span><span class="annot"><span class="annottext">NonEmptyText
-&gt; ObjRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall {a} {b}. NonEmptyText -&gt; a -&gt; Either (RelDef a) b
</span><a href="#local-6989586621687992724"><span class="hs-identifier hs-var">objectRel</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.NonEmpty.html/Data.Text.NonEmpty.html#nonEmptyText"><span class="hs-identifier hs-type">nonEmptyText</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;primary_key&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-804"></span><span>              </span><span class="annot"><span class="annottext">(ObjRelUsing ('Postgres 'Vanilla)
 -&gt; Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla)))
-&gt; ObjRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [(ColumnPath ('Postgres 'Vanilla),
     ColumnPath ('Postgres 'Vanilla))]
-&gt; ObjRelUsing ('Postgres 'Vanilla)
forall {b :: BackendType} {a} {a}.
(TableName b ~ QualifiedObject a, Hashable (ColumnPath b)) =&gt;
SchemaName -&gt; a -&gt; [(ColumnPath b, ColumnPath b)] -&gt; RelUsing b a
</span><a href="#local-6989586621687992728"><span class="hs-identifier hs-var">manualConfig</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_primary_key&quot;</span></span><span> </span><span class="annot"><span class="annottext">[(ColumnPath ('Postgres 'Vanilla),
  ColumnPath ('Postgres 'Vanilla))]
[(PGCol, PGCol)]
</span><a href="#local-6989586621687992729"><span class="hs-identifier hs-var">tableNameMapping</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-805"></span><span>            </span><span class="annot"><span class="annottext">NonEmptyText
-&gt; ArrRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall {a} {a}. NonEmptyText -&gt; a -&gt; Either a (RelDef a)
</span><a href="#local-6989586621687992730"><span class="hs-identifier hs-var">arrayRel</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.NonEmpty.html/Data.Text.NonEmpty.html#nonEmptyText"><span class="hs-identifier hs-type">nonEmptyText</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;columns&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-806"></span><span>              </span><span class="annot"><span class="annottext">(ArrRelUsing ('Postgres 'Vanilla)
 -&gt; Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla)))
-&gt; ArrRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [(ColumnPath ('Postgres 'Vanilla),
     ColumnPath ('Postgres 'Vanilla))]
-&gt; ArrRelUsing ('Postgres 'Vanilla)
forall {b :: BackendType} {a} {a}.
(TableName b ~ QualifiedObject a, Hashable (ColumnPath b)) =&gt;
SchemaName -&gt; a -&gt; [(ColumnPath b, ColumnPath b)] -&gt; RelUsing b a
</span><a href="#local-6989586621687992728"><span class="hs-identifier hs-var">manualConfig</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;information_schema&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;columns&quot;</span></span><span> </span><span class="annot"><span class="annottext">[(ColumnPath ('Postgres 'Vanilla),
  ColumnPath ('Postgres 'Vanilla))]
[(PGCol, PGCol)]
</span><a href="#local-6989586621687992729"><span class="hs-identifier hs-var">tableNameMapping</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-807"></span><span>            </span><span class="annot"><span class="annottext">NonEmptyText
-&gt; ArrRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall {a} {a}. NonEmptyText -&gt; a -&gt; Either a (RelDef a)
</span><a href="#local-6989586621687992730"><span class="hs-identifier hs-var">arrayRel</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.NonEmpty.html/Data.Text.NonEmpty.html#nonEmptyText"><span class="hs-identifier hs-type">nonEmptyText</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;foreign_key_constraints&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-808"></span><span>              </span><span class="annot"><span class="annottext">(ArrRelUsing ('Postgres 'Vanilla)
 -&gt; Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla)))
-&gt; ArrRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [(ColumnPath ('Postgres 'Vanilla),
     ColumnPath ('Postgres 'Vanilla))]
-&gt; ArrRelUsing ('Postgres 'Vanilla)
forall {b :: BackendType} {a} {a}.
(TableName b ~ QualifiedObject a, Hashable (ColumnPath b)) =&gt;
SchemaName -&gt; a -&gt; [(ColumnPath b, ColumnPath b)] -&gt; RelUsing b a
</span><a href="#local-6989586621687992728"><span class="hs-identifier hs-var">manualConfig</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_foreign_key_constraint&quot;</span></span><span> </span><span class="annot"><span class="annottext">[(ColumnPath ('Postgres 'Vanilla),
  ColumnPath ('Postgres 'Vanilla))]
[(PGCol, PGCol)]
</span><a href="#local-6989586621687992729"><span class="hs-identifier hs-var">tableNameMapping</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-809"></span><span>            </span><span class="annot"><span class="annottext">NonEmptyText
-&gt; ArrRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall {a} {a}. NonEmptyText -&gt; a -&gt; Either a (RelDef a)
</span><a href="#local-6989586621687992730"><span class="hs-identifier hs-var">arrayRel</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.NonEmpty.html/Data.Text.NonEmpty.html#nonEmptyText"><span class="hs-identifier hs-type">nonEmptyText</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;relationships&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-810"></span><span>              </span><span class="annot"><span class="annottext">(ArrRelUsing ('Postgres 'Vanilla)
 -&gt; Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla)))
-&gt; ArrRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [(ColumnPath ('Postgres 'Vanilla),
     ColumnPath ('Postgres 'Vanilla))]
-&gt; ArrRelUsing ('Postgres 'Vanilla)
forall {b :: BackendType} {a} {a}.
(TableName b ~ QualifiedObject a, Hashable (ColumnPath b)) =&gt;
SchemaName -&gt; a -&gt; [(ColumnPath b, ColumnPath b)] -&gt; RelUsing b a
</span><a href="#local-6989586621687992728"><span class="hs-identifier hs-var">manualConfig</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_relationship&quot;</span></span><span> </span><span class="annot"><span class="annottext">[(ColumnPath ('Postgres 'Vanilla),
  ColumnPath ('Postgres 'Vanilla))]
[(PGCol, PGCol)]
</span><a href="#local-6989586621687992729"><span class="hs-identifier hs-var">tableNameMapping</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-811"></span><span>            </span><span class="annot"><span class="annottext">NonEmptyText
-&gt; ArrRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall {a} {a}. NonEmptyText -&gt; a -&gt; Either a (RelDef a)
</span><a href="#local-6989586621687992730"><span class="hs-identifier hs-var">arrayRel</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.NonEmpty.html/Data.Text.NonEmpty.html#nonEmptyText"><span class="hs-identifier hs-type">nonEmptyText</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;permissions&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-812"></span><span>              </span><span class="annot"><span class="annottext">(ArrRelUsing ('Postgres 'Vanilla)
 -&gt; Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla)))
-&gt; ArrRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [(ColumnPath ('Postgres 'Vanilla),
     ColumnPath ('Postgres 'Vanilla))]
-&gt; ArrRelUsing ('Postgres 'Vanilla)
forall {b :: BackendType} {a} {a}.
(TableName b ~ QualifiedObject a, Hashable (ColumnPath b)) =&gt;
SchemaName -&gt; a -&gt; [(ColumnPath b, ColumnPath b)] -&gt; RelUsing b a
</span><a href="#local-6989586621687992728"><span class="hs-identifier hs-var">manualConfig</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_permission_agg&quot;</span></span><span> </span><span class="annot"><span class="annottext">[(ColumnPath ('Postgres 'Vanilla),
  ColumnPath ('Postgres 'Vanilla))]
[(PGCol, PGCol)]
</span><a href="#local-6989586621687992729"><span class="hs-identifier hs-var">tableNameMapping</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-813"></span><span>            </span><span class="annot"><span class="annottext">NonEmptyText
-&gt; ArrRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall {a} {a}. NonEmptyText -&gt; a -&gt; Either a (RelDef a)
</span><a href="#local-6989586621687992730"><span class="hs-identifier hs-var">arrayRel</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.NonEmpty.html/Data.Text.NonEmpty.html#nonEmptyText"><span class="hs-identifier hs-type">nonEmptyText</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;computed_fields&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-814"></span><span>              </span><span class="annot"><span class="annottext">(ArrRelUsing ('Postgres 'Vanilla)
 -&gt; Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla)))
-&gt; ArrRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [(ColumnPath ('Postgres 'Vanilla),
     ColumnPath ('Postgres 'Vanilla))]
-&gt; ArrRelUsing ('Postgres 'Vanilla)
forall {b :: BackendType} {a} {a}.
(TableName b ~ QualifiedObject a, Hashable (ColumnPath b)) =&gt;
SchemaName -&gt; a -&gt; [(ColumnPath b, ColumnPath b)] -&gt; RelUsing b a
</span><a href="#local-6989586621687992728"><span class="hs-identifier hs-var">manualConfig</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_computed_field&quot;</span></span><span> </span><span class="annot"><span class="annottext">[(ColumnPath ('Postgres 'Vanilla),
  ColumnPath ('Postgres 'Vanilla))]
[(PGCol, PGCol)]
</span><a href="#local-6989586621687992729"><span class="hs-identifier hs-var">tableNameMapping</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-815"></span><span>            </span><span class="annot"><span class="annottext">NonEmptyText
-&gt; ArrRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall {a} {a}. NonEmptyText -&gt; a -&gt; Either a (RelDef a)
</span><a href="#local-6989586621687992730"><span class="hs-identifier hs-var">arrayRel</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.NonEmpty.html/Data.Text.NonEmpty.html#nonEmptyText"><span class="hs-identifier hs-type">nonEmptyText</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;check_constraints&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-816"></span><span>              </span><span class="annot"><span class="annottext">(ArrRelUsing ('Postgres 'Vanilla)
 -&gt; Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla)))
-&gt; ArrRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [(ColumnPath ('Postgres 'Vanilla),
     ColumnPath ('Postgres 'Vanilla))]
-&gt; ArrRelUsing ('Postgres 'Vanilla)
forall {b :: BackendType} {a} {a}.
(TableName b ~ QualifiedObject a, Hashable (ColumnPath b)) =&gt;
SchemaName -&gt; a -&gt; [(ColumnPath b, ColumnPath b)] -&gt; RelUsing b a
</span><a href="#local-6989586621687992728"><span class="hs-identifier hs-var">manualConfig</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_check_constraint&quot;</span></span><span> </span><span class="annot"><span class="annottext">[(ColumnPath ('Postgres 'Vanilla),
  ColumnPath ('Postgres 'Vanilla))]
[(PGCol, PGCol)]
</span><a href="#local-6989586621687992729"><span class="hs-identifier hs-var">tableNameMapping</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-817"></span><span>            </span><span class="annot"><span class="annottext">NonEmptyText
-&gt; ArrRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall {a} {a}. NonEmptyText -&gt; a -&gt; Either a (RelDef a)
</span><a href="#local-6989586621687992730"><span class="hs-identifier hs-var">arrayRel</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.NonEmpty.html/Data.Text.NonEmpty.html#nonEmptyText"><span class="hs-identifier hs-type">nonEmptyText</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;unique_constraints&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-818"></span><span>              </span><span class="annot"><span class="annottext">(ArrRelUsing ('Postgres 'Vanilla)
 -&gt; Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla)))
-&gt; ArrRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [(ColumnPath ('Postgres 'Vanilla),
     ColumnPath ('Postgres 'Vanilla))]
-&gt; ArrRelUsing ('Postgres 'Vanilla)
forall {b :: BackendType} {a} {a}.
(TableName b ~ QualifiedObject a, Hashable (ColumnPath b)) =&gt;
SchemaName -&gt; a -&gt; [(ColumnPath b, ColumnPath b)] -&gt; RelUsing b a
</span><a href="#local-6989586621687992728"><span class="hs-identifier hs-var">manualConfig</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_unique_constraint&quot;</span></span><span> </span><span class="annot"><span class="annottext">[(ColumnPath ('Postgres 'Vanilla),
  ColumnPath ('Postgres 'Vanilla))]
[(PGCol, PGCol)]
</span><a href="#local-6989586621687992729"><span class="hs-identifier hs-var">tableNameMapping</span></a></span><span>
</span><span id="line-819"></span><span>          </span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-820"></span><span>        </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_primary_key&quot;</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-821"></span><span>        </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_foreign_key_constraint&quot;</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-822"></span><span>        </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_relationship&quot;</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-823"></span><span>        </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_permission_agg&quot;</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-824"></span><span>        </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_computed_field&quot;</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-825"></span><span>        </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_check_constraint&quot;</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-826"></span><span>        </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_unique_constraint&quot;</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-827"></span><span>        </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_remote_relationship&quot;</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-828"></span><span>        </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span>
</span><span id="line-829"></span><span>          </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span>
</span><span id="line-830"></span><span>          </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;event_triggers&quot;</span></span><span>
</span><span id="line-831"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">NonEmptyText
-&gt; ArrRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall {a} {a}. NonEmptyText -&gt; a -&gt; Either a (RelDef a)
</span><a href="#local-6989586621687992730"><span class="hs-identifier hs-var">arrayRel</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.NonEmpty.html/Data.Text.NonEmpty.html#nonEmptyText"><span class="hs-identifier hs-type">nonEmptyText</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;events&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-832"></span><span>              </span><span class="annot"><span class="annottext">(ArrRelUsing ('Postgres 'Vanilla)
 -&gt; Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla)))
-&gt; ArrRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [(ColumnPath ('Postgres 'Vanilla),
     ColumnPath ('Postgres 'Vanilla))]
-&gt; ArrRelUsing ('Postgres 'Vanilla)
forall {b :: BackendType} {a} {a}.
(TableName b ~ QualifiedObject a, Hashable (ColumnPath b)) =&gt;
SchemaName -&gt; a -&gt; [(ColumnPath b, ColumnPath b)] -&gt; RelUsing b a
</span><a href="#local-6989586621687992728"><span class="hs-identifier hs-var">manualConfig</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;event_log&quot;</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnPath ('Postgres 'Vanilla)
PGCol
</span><span class="hs-string">&quot;name&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ColumnPath ('Postgres 'Vanilla)
PGCol
</span><span class="hs-string">&quot;trigger_name&quot;</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-833"></span><span>          </span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-834"></span><span>        </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span>
</span><span id="line-835"></span><span>          </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span>
</span><span id="line-836"></span><span>          </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;event_log&quot;</span></span><span>
</span><span id="line-837"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">NonEmptyText
-&gt; ObjRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall {a} {b}. NonEmptyText -&gt; a -&gt; Either (RelDef a) b
</span><a href="#local-6989586621687992724"><span class="hs-identifier hs-var">objectRel</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.NonEmpty.html/Data.Text.NonEmpty.html#nonEmptyText"><span class="hs-identifier hs-type">nonEmptyText</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;trigger&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-838"></span><span>              </span><span class="annot"><span class="annottext">(ObjRelUsing ('Postgres 'Vanilla)
 -&gt; Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla)))
-&gt; ObjRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [(ColumnPath ('Postgres 'Vanilla),
     ColumnPath ('Postgres 'Vanilla))]
-&gt; ObjRelUsing ('Postgres 'Vanilla)
forall {b :: BackendType} {a} {a}.
(TableName b ~ QualifiedObject a, Hashable (ColumnPath b)) =&gt;
SchemaName -&gt; a -&gt; [(ColumnPath b, ColumnPath b)] -&gt; RelUsing b a
</span><a href="#local-6989586621687992728"><span class="hs-identifier hs-var">manualConfig</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;event_triggers&quot;</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnPath ('Postgres 'Vanilla)
PGCol
</span><span class="hs-string">&quot;trigger_name&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ColumnPath ('Postgres 'Vanilla)
PGCol
</span><span class="hs-string">&quot;name&quot;</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-839"></span><span>            </span><span class="annot"><span class="annottext">NonEmptyText
-&gt; ArrRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall {a} {a}. NonEmptyText -&gt; a -&gt; Either a (RelDef a)
</span><a href="#local-6989586621687992730"><span class="hs-identifier hs-var">arrayRel</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.NonEmpty.html/Data.Text.NonEmpty.html#nonEmptyText"><span class="hs-identifier hs-type">nonEmptyText</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;logs&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-840"></span><span>              </span><span class="annot"><span class="annottext">(ArrRelUsing ('Postgres 'Vanilla)
 -&gt; Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla)))
-&gt; ArrRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ArrRelUsingFKeyOn ('Postgres 'Vanilla)
-&gt; ArrRelUsing ('Postgres 'Vanilla)
forall (b :: BackendType) a. a -&gt; RelUsing b a
</span><a href="Hasura.RQL.Types.Relationships.Local.html#RUFKeyOn"><span class="hs-identifier hs-var">RUFKeyOn</span></a></span><span>
</span><span id="line-841"></span><span>              </span><span class="annot"><span class="annottext">(ArrRelUsingFKeyOn ('Postgres 'Vanilla)
 -&gt; ArrRelUsing ('Postgres 'Vanilla))
-&gt; ArrRelUsingFKeyOn ('Postgres 'Vanilla)
-&gt; ArrRelUsing ('Postgres 'Vanilla)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableName ('Postgres 'Vanilla)
-&gt; NonEmpty (ColumnPath ('Postgres 'Vanilla))
-&gt; ArrRelUsingFKeyOn ('Postgres 'Vanilla)
forall (b :: BackendType).
TableName b -&gt; NonEmpty (ColumnPath b) -&gt; ArrRelUsingFKeyOn b
</span><a href="Hasura.RQL.Types.Relationships.Local.html#ArrRelUsingFKeyOn"><span class="hs-identifier hs-var">ArrRelUsingFKeyOn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SchemaName -&gt; TableName -&gt; QualifiedTable
forall a. SchemaName -&gt; a -&gt; QualifiedObject a
</span><a href="Hasura.Backends.Postgres.SQL.Types.html#QualifiedObject"><span class="hs-identifier hs-var">QualifiedObject</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;event_invocation_logs&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PGCol -&gt; NonEmpty PGCol
forall a. a -&gt; NonEmpty a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">PGCol
</span><span class="hs-string">&quot;event_id&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-842"></span><span>          </span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-843"></span><span>        </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span>
</span><span id="line-844"></span><span>          </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span>
</span><span id="line-845"></span><span>          </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;event_invocation_logs&quot;</span></span><span>
</span><span id="line-846"></span><span>          </span><span class="hs-special">[</span><span class="annot"><span class="annottext">NonEmptyText
-&gt; ObjRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall {a} {b}. NonEmptyText -&gt; a -&gt; Either (RelDef a) b
</span><a href="#local-6989586621687992724"><span class="hs-identifier hs-var">objectRel</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.NonEmpty.html/Data.Text.NonEmpty.html#nonEmptyText"><span class="hs-identifier hs-type">nonEmptyText</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;event&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ObjRelUsing ('Postgres 'Vanilla)
 -&gt; Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla)))
-&gt; ObjRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ObjRelUsingChoice ('Postgres 'Vanilla)
-&gt; ObjRelUsing ('Postgres 'Vanilla)
forall (b :: BackendType) a. a -&gt; RelUsing b a
</span><a href="Hasura.RQL.Types.Relationships.Local.html#RUFKeyOn"><span class="hs-identifier hs-var">RUFKeyOn</span></a></span><span> </span><span class="annot"><span class="annottext">(ObjRelUsingChoice ('Postgres 'Vanilla)
 -&gt; ObjRelUsing ('Postgres 'Vanilla))
-&gt; ObjRelUsingChoice ('Postgres 'Vanilla)
-&gt; ObjRelUsing ('Postgres 'Vanilla)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (ColumnPath ('Postgres 'Vanilla))
-&gt; ObjRelUsingChoice ('Postgres 'Vanilla)
forall (b :: BackendType).
NonEmpty (ColumnPath b) -&gt; ObjRelUsingChoice b
</span><a href="Hasura.RQL.Types.Relationships.Local.html#SameTable"><span class="hs-identifier hs-var">SameTable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PGCol -&gt; NonEmpty PGCol
forall a. a -&gt; NonEmpty a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">PGCol
</span><span class="hs-string">&quot;event_id&quot;</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-847"></span><span>        </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_function&quot;</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-848"></span><span>        </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span>
</span><span id="line-849"></span><span>          </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span>
</span><span id="line-850"></span><span>          </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_function_agg&quot;</span></span><span>
</span><span id="line-851"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">NonEmptyText
-&gt; ObjRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall {a} {b}. NonEmptyText -&gt; a -&gt; Either (RelDef a) b
</span><a href="#local-6989586621687992724"><span class="hs-identifier hs-var">objectRel</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.NonEmpty.html/Data.Text.NonEmpty.html#nonEmptyText"><span class="hs-identifier hs-type">nonEmptyText</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;return_table_info&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-852"></span><span>              </span><span class="annot"><span class="annottext">(ObjRelUsing ('Postgres 'Vanilla)
 -&gt; Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla)))
-&gt; ObjRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [(ColumnPath ('Postgres 'Vanilla),
     ColumnPath ('Postgres 'Vanilla))]
-&gt; ObjRelUsing ('Postgres 'Vanilla)
forall {b :: BackendType} {a} {a}.
(TableName b ~ QualifiedObject a, Hashable (ColumnPath b)) =&gt;
SchemaName -&gt; a -&gt; [(ColumnPath b, ColumnPath b)] -&gt; RelUsing b a
</span><a href="#local-6989586621687992728"><span class="hs-identifier hs-var">manualConfig</span></a></span><span>
</span><span id="line-853"></span><span>                </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span>
</span><span id="line-854"></span><span>                </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_table&quot;</span></span><span>
</span><span id="line-855"></span><span>                </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnPath ('Postgres 'Vanilla)
PGCol
</span><span class="hs-string">&quot;return_type_schema&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ColumnPath ('Postgres 'Vanilla)
PGCol
</span><span class="hs-string">&quot;table_schema&quot;</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-856"></span><span>                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnPath ('Postgres 'Vanilla)
PGCol
</span><span class="hs-string">&quot;return_type_name&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ColumnPath ('Postgres 'Vanilla)
PGCol
</span><span class="hs-string">&quot;table_name&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-857"></span><span>                </span><span class="hs-special">]</span><span>
</span><span id="line-858"></span><span>          </span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-859"></span><span>        </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;remote_schemas&quot;</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-860"></span><span>        </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_version&quot;</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-861"></span><span>        </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_query_collection&quot;</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-862"></span><span>        </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_allowlist&quot;</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-863"></span><span>        </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_custom_types&quot;</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-864"></span><span>        </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_action_permission&quot;</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-865"></span><span>        </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span>
</span><span id="line-866"></span><span>          </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span>
</span><span id="line-867"></span><span>          </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_action&quot;</span></span><span>
</span><span id="line-868"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">NonEmptyText
-&gt; ArrRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall {a} {a}. NonEmptyText -&gt; a -&gt; Either a (RelDef a)
</span><a href="#local-6989586621687992730"><span class="hs-identifier hs-var">arrayRel</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.NonEmpty.html/Data.Text.NonEmpty.html#nonEmptyText"><span class="hs-identifier hs-type">nonEmptyText</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;permissions&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-869"></span><span>              </span><span class="annot"><span class="annottext">(ArrRelUsing ('Postgres 'Vanilla)
 -&gt; Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla)))
-&gt; ArrRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [(ColumnPath ('Postgres 'Vanilla),
     ColumnPath ('Postgres 'Vanilla))]
-&gt; ArrRelUsing ('Postgres 'Vanilla)
forall {b :: BackendType} {a} {a}.
(TableName b ~ QualifiedObject a, Hashable (ColumnPath b)) =&gt;
SchemaName -&gt; a -&gt; [(ColumnPath b, ColumnPath b)] -&gt; RelUsing b a
</span><a href="#local-6989586621687992728"><span class="hs-identifier hs-var">manualConfig</span></a></span><span>
</span><span id="line-870"></span><span>                </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span>
</span><span id="line-871"></span><span>                </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_action_permission&quot;</span></span><span>
</span><span id="line-872"></span><span>                </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnPath ('Postgres 'Vanilla)
PGCol
</span><span class="hs-string">&quot;action_name&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ColumnPath ('Postgres 'Vanilla)
PGCol
</span><span class="hs-string">&quot;action_name&quot;</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-873"></span><span>          </span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-874"></span><span>        </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_action_log&quot;</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-875"></span><span>        </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span>
</span><span id="line-876"></span><span>          </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span>
</span><span id="line-877"></span><span>          </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_role&quot;</span></span><span>
</span><span id="line-878"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">NonEmptyText
-&gt; ArrRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall {a} {a}. NonEmptyText -&gt; a -&gt; Either a (RelDef a)
</span><a href="#local-6989586621687992730"><span class="hs-identifier hs-var">arrayRel</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.NonEmpty.html/Data.Text.NonEmpty.html#nonEmptyText"><span class="hs-identifier hs-type">nonEmptyText</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;action_permissions&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-879"></span><span>              </span><span class="annot"><span class="annottext">(ArrRelUsing ('Postgres 'Vanilla)
 -&gt; Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla)))
-&gt; ArrRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [(ColumnPath ('Postgres 'Vanilla),
     ColumnPath ('Postgres 'Vanilla))]
-&gt; ArrRelUsing ('Postgres 'Vanilla)
forall {b :: BackendType} {a} {a}.
(TableName b ~ QualifiedObject a, Hashable (ColumnPath b)) =&gt;
SchemaName -&gt; a -&gt; [(ColumnPath b, ColumnPath b)] -&gt; RelUsing b a
</span><a href="#local-6989586621687992728"><span class="hs-identifier hs-var">manualConfig</span></a></span><span>
</span><span id="line-880"></span><span>                </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span>
</span><span id="line-881"></span><span>                </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_action_permission&quot;</span></span><span>
</span><span id="line-882"></span><span>                </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnPath ('Postgres 'Vanilla)
PGCol
</span><span class="hs-string">&quot;role_name&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ColumnPath ('Postgres 'Vanilla)
PGCol
</span><span class="hs-string">&quot;role_name&quot;</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-883"></span><span>            </span><span class="annot"><span class="annottext">NonEmptyText
-&gt; ArrRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall {a} {a}. NonEmptyText -&gt; a -&gt; Either a (RelDef a)
</span><a href="#local-6989586621687992730"><span class="hs-identifier hs-var">arrayRel</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.NonEmpty.html/Data.Text.NonEmpty.html#nonEmptyText"><span class="hs-identifier hs-type">nonEmptyText</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;permissions&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-884"></span><span>              </span><span class="annot"><span class="annottext">(ArrRelUsing ('Postgres 'Vanilla)
 -&gt; Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla)))
-&gt; ArrRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [(ColumnPath ('Postgres 'Vanilla),
     ColumnPath ('Postgres 'Vanilla))]
-&gt; ArrRelUsing ('Postgres 'Vanilla)
forall {b :: BackendType} {a} {a}.
(TableName b ~ QualifiedObject a, Hashable (ColumnPath b)) =&gt;
SchemaName -&gt; a -&gt; [(ColumnPath b, ColumnPath b)] -&gt; RelUsing b a
</span><a href="#local-6989586621687992728"><span class="hs-identifier hs-var">manualConfig</span></a></span><span>
</span><span id="line-885"></span><span>                </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span>
</span><span id="line-886"></span><span>                </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_permission_agg&quot;</span></span><span>
</span><span id="line-887"></span><span>                </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="annottext">ColumnPath ('Postgres 'Vanilla)
PGCol
</span><span class="hs-string">&quot;role_name&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ColumnPath ('Postgres 'Vanilla)
PGCol
</span><span class="hs-string">&quot;role_name&quot;</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-888"></span><span>          </span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-889"></span><span>        </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span>
</span><span id="line-890"></span><span>          </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span>
</span><span id="line-891"></span><span>          </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_cron_triggers&quot;</span></span><span>
</span><span id="line-892"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">NonEmptyText
-&gt; ArrRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall {a} {a}. NonEmptyText -&gt; a -&gt; Either a (RelDef a)
</span><a href="#local-6989586621687992730"><span class="hs-identifier hs-var">arrayRel</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.NonEmpty.html/Data.Text.NonEmpty.html#nonEmptyText"><span class="hs-identifier hs-type">nonEmptyText</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;cron_events&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-893"></span><span>              </span><span class="annot"><span class="annottext">(ArrRelUsing ('Postgres 'Vanilla)
 -&gt; Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla)))
-&gt; ArrRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ArrRelUsingFKeyOn ('Postgres 'Vanilla)
-&gt; ArrRelUsing ('Postgres 'Vanilla)
forall (b :: BackendType) a. a -&gt; RelUsing b a
</span><a href="Hasura.RQL.Types.Relationships.Local.html#RUFKeyOn"><span class="hs-identifier hs-var">RUFKeyOn</span></a></span><span>
</span><span id="line-894"></span><span>              </span><span class="annot"><span class="annottext">(ArrRelUsingFKeyOn ('Postgres 'Vanilla)
 -&gt; ArrRelUsing ('Postgres 'Vanilla))
-&gt; ArrRelUsingFKeyOn ('Postgres 'Vanilla)
-&gt; ArrRelUsing ('Postgres 'Vanilla)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableName ('Postgres 'Vanilla)
-&gt; NonEmpty (ColumnPath ('Postgres 'Vanilla))
-&gt; ArrRelUsingFKeyOn ('Postgres 'Vanilla)
forall (b :: BackendType).
TableName b -&gt; NonEmpty (ColumnPath b) -&gt; ArrRelUsingFKeyOn b
</span><a href="Hasura.RQL.Types.Relationships.Local.html#ArrRelUsingFKeyOn"><span class="hs-identifier hs-var">ArrRelUsingFKeyOn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SchemaName -&gt; TableName -&gt; QualifiedTable
forall a. SchemaName -&gt; a -&gt; QualifiedObject a
</span><a href="Hasura.Backends.Postgres.SQL.Types.html#QualifiedObject"><span class="hs-identifier hs-var">QualifiedObject</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_cron_events&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PGCol -&gt; NonEmpty PGCol
forall a. a -&gt; NonEmpty a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">PGCol
</span><span class="hs-string">&quot;trigger_name&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-895"></span><span>          </span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-896"></span><span>        </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span>
</span><span id="line-897"></span><span>          </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span>
</span><span id="line-898"></span><span>          </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_cron_events&quot;</span></span><span>
</span><span id="line-899"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">NonEmptyText
-&gt; ObjRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall {a} {b}. NonEmptyText -&gt; a -&gt; Either (RelDef a) b
</span><a href="#local-6989586621687992724"><span class="hs-identifier hs-var">objectRel</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.NonEmpty.html/Data.Text.NonEmpty.html#nonEmptyText"><span class="hs-identifier hs-type">nonEmptyText</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;cron_trigger&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ObjRelUsing ('Postgres 'Vanilla)
 -&gt; Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla)))
-&gt; ObjRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ObjRelUsingChoice ('Postgres 'Vanilla)
-&gt; ObjRelUsing ('Postgres 'Vanilla)
forall (b :: BackendType) a. a -&gt; RelUsing b a
</span><a href="Hasura.RQL.Types.Relationships.Local.html#RUFKeyOn"><span class="hs-identifier hs-var">RUFKeyOn</span></a></span><span> </span><span class="annot"><span class="annottext">(ObjRelUsingChoice ('Postgres 'Vanilla)
 -&gt; ObjRelUsing ('Postgres 'Vanilla))
-&gt; ObjRelUsingChoice ('Postgres 'Vanilla)
-&gt; ObjRelUsing ('Postgres 'Vanilla)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (ColumnPath ('Postgres 'Vanilla))
-&gt; ObjRelUsingChoice ('Postgres 'Vanilla)
forall (b :: BackendType).
NonEmpty (ColumnPath b) -&gt; ObjRelUsingChoice b
</span><a href="Hasura.RQL.Types.Relationships.Local.html#SameTable"><span class="hs-identifier hs-var">SameTable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PGCol -&gt; NonEmpty PGCol
forall a. a -&gt; NonEmpty a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">PGCol
</span><span class="hs-string">&quot;trigger_name&quot;</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-900"></span><span>            </span><span class="annot"><span class="annottext">NonEmptyText
-&gt; ArrRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall {a} {a}. NonEmptyText -&gt; a -&gt; Either a (RelDef a)
</span><a href="#local-6989586621687992730"><span class="hs-identifier hs-var">arrayRel</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.NonEmpty.html/Data.Text.NonEmpty.html#nonEmptyText"><span class="hs-identifier hs-type">nonEmptyText</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;cron_event_logs&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-901"></span><span>              </span><span class="annot"><span class="annottext">(ArrRelUsing ('Postgres 'Vanilla)
 -&gt; Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla)))
-&gt; ArrRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ArrRelUsingFKeyOn ('Postgres 'Vanilla)
-&gt; ArrRelUsing ('Postgres 'Vanilla)
forall (b :: BackendType) a. a -&gt; RelUsing b a
</span><a href="Hasura.RQL.Types.Relationships.Local.html#RUFKeyOn"><span class="hs-identifier hs-var">RUFKeyOn</span></a></span><span>
</span><span id="line-902"></span><span>              </span><span class="annot"><span class="annottext">(ArrRelUsingFKeyOn ('Postgres 'Vanilla)
 -&gt; ArrRelUsing ('Postgres 'Vanilla))
-&gt; ArrRelUsingFKeyOn ('Postgres 'Vanilla)
-&gt; ArrRelUsing ('Postgres 'Vanilla)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableName ('Postgres 'Vanilla)
-&gt; NonEmpty (ColumnPath ('Postgres 'Vanilla))
-&gt; ArrRelUsingFKeyOn ('Postgres 'Vanilla)
forall (b :: BackendType).
TableName b -&gt; NonEmpty (ColumnPath b) -&gt; ArrRelUsingFKeyOn b
</span><a href="Hasura.RQL.Types.Relationships.Local.html#ArrRelUsingFKeyOn"><span class="hs-identifier hs-var">ArrRelUsingFKeyOn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SchemaName -&gt; TableName -&gt; QualifiedTable
forall a. SchemaName -&gt; a -&gt; QualifiedObject a
</span><a href="Hasura.Backends.Postgres.SQL.Types.html#QualifiedObject"><span class="hs-identifier hs-var">QualifiedObject</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_cron_event_invocation_logs&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PGCol -&gt; NonEmpty PGCol
forall a. a -&gt; NonEmpty a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">PGCol
</span><span class="hs-string">&quot;event_id&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-903"></span><span>          </span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-904"></span><span>        </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span>
</span><span id="line-905"></span><span>          </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span>
</span><span id="line-906"></span><span>          </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_cron_event_invocation_logs&quot;</span></span><span>
</span><span id="line-907"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">NonEmptyText
-&gt; ObjRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall {a} {b}. NonEmptyText -&gt; a -&gt; Either (RelDef a) b
</span><a href="#local-6989586621687992724"><span class="hs-identifier hs-var">objectRel</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.NonEmpty.html/Data.Text.NonEmpty.html#nonEmptyText"><span class="hs-identifier hs-type">nonEmptyText</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;cron_event&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ObjRelUsing ('Postgres 'Vanilla)
 -&gt; Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla)))
-&gt; ObjRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ObjRelUsingChoice ('Postgres 'Vanilla)
-&gt; ObjRelUsing ('Postgres 'Vanilla)
forall (b :: BackendType) a. a -&gt; RelUsing b a
</span><a href="Hasura.RQL.Types.Relationships.Local.html#RUFKeyOn"><span class="hs-identifier hs-var">RUFKeyOn</span></a></span><span> </span><span class="annot"><span class="annottext">(ObjRelUsingChoice ('Postgres 'Vanilla)
 -&gt; ObjRelUsing ('Postgres 'Vanilla))
-&gt; ObjRelUsingChoice ('Postgres 'Vanilla)
-&gt; ObjRelUsing ('Postgres 'Vanilla)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (ColumnPath ('Postgres 'Vanilla))
-&gt; ObjRelUsingChoice ('Postgres 'Vanilla)
forall (b :: BackendType).
NonEmpty (ColumnPath b) -&gt; ObjRelUsingChoice b
</span><a href="Hasura.RQL.Types.Relationships.Local.html#SameTable"><span class="hs-identifier hs-var">SameTable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PGCol -&gt; NonEmpty PGCol
forall a. a -&gt; NonEmpty a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">PGCol
</span><span class="hs-string">&quot;event_id&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-908"></span><span>          </span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-909"></span><span>        </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span>
</span><span id="line-910"></span><span>          </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span>
</span><span id="line-911"></span><span>          </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_scheduled_events&quot;</span></span><span>
</span><span id="line-912"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">NonEmptyText
-&gt; ArrRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall {a} {a}. NonEmptyText -&gt; a -&gt; Either a (RelDef a)
</span><a href="#local-6989586621687992730"><span class="hs-identifier hs-var">arrayRel</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.NonEmpty.html/Data.Text.NonEmpty.html#nonEmptyText"><span class="hs-identifier hs-type">nonEmptyText</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;scheduled_event_logs&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-913"></span><span>              </span><span class="annot"><span class="annottext">(ArrRelUsing ('Postgres 'Vanilla)
 -&gt; Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla)))
-&gt; ArrRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ArrRelUsingFKeyOn ('Postgres 'Vanilla)
-&gt; ArrRelUsing ('Postgres 'Vanilla)
forall (b :: BackendType) a. a -&gt; RelUsing b a
</span><a href="Hasura.RQL.Types.Relationships.Local.html#RUFKeyOn"><span class="hs-identifier hs-var">RUFKeyOn</span></a></span><span>
</span><span id="line-914"></span><span>              </span><span class="annot"><span class="annottext">(ArrRelUsingFKeyOn ('Postgres 'Vanilla)
 -&gt; ArrRelUsing ('Postgres 'Vanilla))
-&gt; ArrRelUsingFKeyOn ('Postgres 'Vanilla)
-&gt; ArrRelUsing ('Postgres 'Vanilla)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableName ('Postgres 'Vanilla)
-&gt; NonEmpty (ColumnPath ('Postgres 'Vanilla))
-&gt; ArrRelUsingFKeyOn ('Postgres 'Vanilla)
forall (b :: BackendType).
TableName b -&gt; NonEmpty (ColumnPath b) -&gt; ArrRelUsingFKeyOn b
</span><a href="Hasura.RQL.Types.Relationships.Local.html#ArrRelUsingFKeyOn"><span class="hs-identifier hs-var">ArrRelUsingFKeyOn</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SchemaName -&gt; TableName -&gt; QualifiedTable
forall a. SchemaName -&gt; a -&gt; QualifiedObject a
</span><a href="Hasura.Backends.Postgres.SQL.Types.html#QualifiedObject"><span class="hs-identifier hs-var">QualifiedObject</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span> </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_scheduled_event_invocation_logs&quot;</span></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PGCol -&gt; NonEmpty PGCol
forall a. a -&gt; NonEmpty a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">PGCol
</span><span class="hs-string">&quot;event_id&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-915"></span><span>          </span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-916"></span><span>        </span><span class="annot"><span class="annottext">SchemaName
-&gt; TableName
-&gt; [Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))]
-&gt; (QualifiedTable,
    [Either
       (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))])
forall {a} {b}. SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var">table</span></a></span><span>
</span><span id="line-917"></span><span>          </span><span class="annot"><span class="annottext">SchemaName
</span><span class="hs-string">&quot;hdb_catalog&quot;</span></span><span>
</span><span id="line-918"></span><span>          </span><span class="annot"><span class="annottext">TableName
</span><span class="hs-string">&quot;hdb_scheduled_event_invocation_logs&quot;</span></span><span>
</span><span id="line-919"></span><span>          </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">NonEmptyText
-&gt; ObjRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall {a} {b}. NonEmptyText -&gt; a -&gt; Either (RelDef a) b
</span><a href="#local-6989586621687992724"><span class="hs-identifier hs-var">objectRel</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.NonEmpty.html/Data.Text.NonEmpty.html#nonEmptyText"><span class="hs-identifier hs-type">nonEmptyText</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;scheduled_event&quot;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(ObjRelUsing ('Postgres 'Vanilla)
 -&gt; Either
      (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla)))
-&gt; ObjRelUsing ('Postgres 'Vanilla)
-&gt; Either
     (ObjRelDef ('Postgres 'Vanilla)) (ArrRelDef ('Postgres 'Vanilla))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ObjRelUsingChoice ('Postgres 'Vanilla)
-&gt; ObjRelUsing ('Postgres 'Vanilla)
forall (b :: BackendType) a. a -&gt; RelUsing b a
</span><a href="Hasura.RQL.Types.Relationships.Local.html#RUFKeyOn"><span class="hs-identifier hs-var">RUFKeyOn</span></a></span><span> </span><span class="annot"><span class="annottext">(ObjRelUsingChoice ('Postgres 'Vanilla)
 -&gt; ObjRelUsing ('Postgres 'Vanilla))
-&gt; ObjRelUsingChoice ('Postgres 'Vanilla)
-&gt; ObjRelUsing ('Postgres 'Vanilla)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty (ColumnPath ('Postgres 'Vanilla))
-&gt; ObjRelUsingChoice ('Postgres 'Vanilla)
forall (b :: BackendType).
NonEmpty (ColumnPath b) -&gt; ObjRelUsingChoice b
</span><a href="Hasura.RQL.Types.Relationships.Local.html#SameTable"><span class="hs-identifier hs-var">SameTable</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PGCol -&gt; NonEmpty PGCol
forall a. a -&gt; NonEmpty a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">PGCol
</span><span class="hs-string">&quot;event_id&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-920"></span><span>          </span><span class="hs-special">]</span><span>
</span><span id="line-921"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-922"></span><span>
</span><span id="line-923"></span><span>    </span><span id="local-6989586621687992729"><span class="annot"><span class="annottext">tableNameMapping :: [(PGCol, PGCol)]
</span><a href="#local-6989586621687992729"><span class="hs-identifier hs-var hs-var">tableNameMapping</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-924"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PGCol
</span><span class="hs-string">&quot;table_schema&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PGCol
</span><span class="hs-string">&quot;table_schema&quot;</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-925"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PGCol
</span><span class="hs-string">&quot;table_name&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PGCol
</span><span class="hs-string">&quot;table_name&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-926"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-927"></span><span>
</span><span id="line-928"></span><span>    </span><span id="local-6989586621687992723"><span class="annot"><span class="annottext">table :: SchemaName -&gt; a -&gt; b -&gt; (QualifiedObject a, b)
</span><a href="#local-6989586621687992723"><span class="hs-identifier hs-var hs-var">table</span></a></span></span><span> </span><span id="local-6989586621687992738"><span class="annot"><span class="annottext">SchemaName
</span><a href="#local-6989586621687992738"><span class="hs-identifier hs-var">schemaName</span></a></span></span><span> </span><span id="local-6989586621687992739"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621687992739"><span class="hs-identifier hs-var">tableName</span></a></span></span><span> </span><span id="local-6989586621687992740"><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621687992740"><span class="hs-identifier hs-var">relationships</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SchemaName -&gt; a -&gt; QualifiedObject a
forall a. SchemaName -&gt; a -&gt; QualifiedObject a
</span><a href="Hasura.Backends.Postgres.SQL.Types.html#QualifiedObject"><span class="hs-identifier hs-var">QualifiedObject</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><a href="#local-6989586621687992738"><span class="hs-identifier hs-var">schemaName</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621687992739"><span class="hs-identifier hs-var">tableName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">b
</span><a href="#local-6989586621687992740"><span class="hs-identifier hs-var">relationships</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-929"></span><span>    </span><span id="local-6989586621687992724"><span class="annot"><span class="annottext">objectRel :: NonEmptyText -&gt; a -&gt; Either (RelDef a) b
</span><a href="#local-6989586621687992724"><span class="hs-identifier hs-var hs-var">objectRel</span></a></span></span><span> </span><span id="local-6989586621687992741"><span class="annot"><span class="annottext">NonEmptyText
</span><a href="#local-6989586621687992741"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621687992742"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621687992742"><span class="hs-identifier hs-var">using</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RelDef a -&gt; Either (RelDef a) b
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">(RelDef a -&gt; Either (RelDef a) b)
-&gt; RelDef a -&gt; Either (RelDef a) b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RelName -&gt; a -&gt; Maybe Text -&gt; RelDef a
forall a. RelName -&gt; a -&gt; Maybe Text -&gt; RelDef a
</span><a href="Hasura.RQL.Types.Relationships.Local.html#RelDef"><span class="hs-identifier hs-var">RelDef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmptyText -&gt; RelName
</span><a href="Hasura.RQL.Types.Common.html#RelName"><span class="hs-identifier hs-var">RelName</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmptyText
</span><a href="#local-6989586621687992741"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621687992742"><span class="hs-identifier hs-var">using</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-930"></span><span>    </span><span id="local-6989586621687992730"><span class="annot"><span class="annottext">arrayRel :: NonEmptyText -&gt; a -&gt; Either a (RelDef a)
</span><a href="#local-6989586621687992730"><span class="hs-identifier hs-var hs-var">arrayRel</span></a></span></span><span> </span><span id="local-6989586621687992744"><span class="annot"><span class="annottext">NonEmptyText
</span><a href="#local-6989586621687992744"><span class="hs-identifier hs-var">name</span></a></span></span><span> </span><span id="local-6989586621687992745"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621687992745"><span class="hs-identifier hs-var">using</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RelDef a -&gt; Either a (RelDef a)
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">(RelDef a -&gt; Either a (RelDef a))
-&gt; RelDef a -&gt; Either a (RelDef a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RelName -&gt; a -&gt; Maybe Text -&gt; RelDef a
forall a. RelName -&gt; a -&gt; Maybe Text -&gt; RelDef a
</span><a href="Hasura.RQL.Types.Relationships.Local.html#RelDef"><span class="hs-identifier hs-var">RelDef</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">NonEmptyText -&gt; RelName
</span><a href="Hasura.RQL.Types.Common.html#RelName"><span class="hs-identifier hs-var">RelName</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmptyText
</span><a href="#local-6989586621687992744"><span class="hs-identifier hs-var">name</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621687992745"><span class="hs-identifier hs-var">using</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-931"></span><span>    </span><span id="local-6989586621687992728"><span class="annot"><span class="annottext">manualConfig :: SchemaName -&gt; a -&gt; [(ColumnPath b, ColumnPath b)] -&gt; RelUsing b a
</span><a href="#local-6989586621687992728"><span class="hs-identifier hs-var hs-var">manualConfig</span></a></span></span><span> </span><span id="local-6989586621687992753"><span class="annot"><span class="annottext">SchemaName
</span><a href="#local-6989586621687992753"><span class="hs-identifier hs-var">schemaName</span></a></span></span><span> </span><span id="local-6989586621687992754"><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621687992754"><span class="hs-identifier hs-var">tableName</span></a></span></span><span> </span><span id="local-6989586621687992755"><span class="annot"><span class="annottext">[(ColumnPath b, ColumnPath b)]
</span><a href="#local-6989586621687992755"><span class="hs-identifier hs-var">columns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-932"></span><span>      </span><span class="annot"><span class="annottext">RelManualConfig b -&gt; RelUsing b a
forall (b :: BackendType) a. RelManualConfig b -&gt; RelUsing b a
</span><a href="Hasura.RQL.Types.Relationships.Local.html#RUManual"><span class="hs-identifier hs-var">RUManual</span></a></span><span>
</span><span id="line-933"></span><span>        </span><span class="annot"><span class="annottext">(RelManualConfig b -&gt; RelUsing b a)
-&gt; RelManualConfig b -&gt; RelUsing b a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RelManualTableConfig b -&gt; RelManualConfig b
forall (b :: BackendType).
RelManualTableConfig b -&gt; RelManualConfig b
</span><a href="Hasura.RQL.Types.Relationships.Local.html#RelManualTableConfig"><span class="hs-identifier hs-var">RelManualTableConfig</span></a></span><span>
</span><span id="line-934"></span><span>        </span><span class="annot"><span class="annottext">(RelManualTableConfig b -&gt; RelManualConfig b)
-&gt; RelManualTableConfig b -&gt; RelManualConfig b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableName b -&gt; RelManualCommon b -&gt; RelManualTableConfig b
forall (b :: BackendType).
TableName b -&gt; RelManualCommon b -&gt; RelManualTableConfig b
</span><a href="Hasura.RQL.Types.Relationships.Local.html#RelManualTableConfigC"><span class="hs-identifier hs-var">RelManualTableConfigC</span></a></span><span>
</span><span id="line-935"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SchemaName -&gt; a -&gt; QualifiedObject a
forall a. SchemaName -&gt; a -&gt; QualifiedObject a
</span><a href="Hasura.Backends.Postgres.SQL.Types.html#QualifiedObject"><span class="hs-identifier hs-var">QualifiedObject</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaName
</span><a href="#local-6989586621687992753"><span class="hs-identifier hs-var">schemaName</span></a></span><span> </span><span class="annot"><span class="annottext">a
</span><a href="#local-6989586621687992754"><span class="hs-identifier hs-var">tableName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-936"></span><span>          </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RelMapping b -&gt; Maybe InsertOrder -&gt; RelManualCommon b
forall (b :: BackendType).
RelMapping b -&gt; Maybe InsertOrder -&gt; RelManualCommon b
</span><a href="Hasura.RQL.Types.Relationships.Local.html#RelManualCommon"><span class="hs-identifier hs-var">RelManualCommon</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HashMap (ColumnPath b) (ColumnPath b) -&gt; RelMapping b
forall (b :: BackendType).
HashMap (ColumnPath b) (ColumnPath b) -&gt; RelMapping b
</span><a href="Hasura.RQL.Types.Relationships.Local.html#RelMapping"><span class="hs-identifier hs-var">RelMapping</span></a></span><span> </span><span class="annot"><span class="annottext">(HashMap (ColumnPath b) (ColumnPath b) -&gt; RelMapping b)
-&gt; HashMap (ColumnPath b) (ColumnPath b) -&gt; RelMapping b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[(ColumnPath b, ColumnPath b)]
-&gt; HashMap (ColumnPath b) (ColumnPath b)
forall k v. (Eq k, Hashable k) =&gt; [(k, v)] -&gt; HashMap k v
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/unordered-containers-0.2.20-6d56f9b3abc6011ddb6e237c415126423ab5ceb5c078221bba2ff80dbe921009/share/doc/html/src/Data.HashMap.Internal.Strict.html/Data.HashMap.Internal.Strict.html#fromList"><span class="hs-identifier hs-var">HashMap.fromList</span></a></span><span> </span><span class="annot"><span class="annottext">[(ColumnPath b, ColumnPath b)]
</span><a href="#local-6989586621687992755"><span class="hs-identifier hs-var">columns</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe InsertOrder
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span>
</span><span id="line-937"></span></pre></body></html>