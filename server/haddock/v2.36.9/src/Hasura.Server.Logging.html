<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="annot"><span class="hs-comment">-- | This is taken from wai-logger and customised for our use</span></span><span>
</span><span id="line-2"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html"><span class="hs-identifier">Hasura.Server.Logging</span></a></span><span>
</span><span id="line-3"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#StartupLog"><span class="hs-identifier">StartupLog</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-4"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#PGLog"><span class="hs-identifier">PGLog</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-5"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#RequestMode"><span class="hs-identifier">RequestMode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-6"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#mkInconsMetadataLog"><span class="hs-identifier">mkInconsMetadataLog</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-7"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#mkHttpAccessLogContext"><span class="hs-identifier">mkHttpAccessLogContext</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-8"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#mkHttpErrorLogContext"><span class="hs-identifier">mkHttpErrorLogContext</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#mkHttpLog"><span class="hs-identifier">mkHttpLog</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#HttpInfoLog"><span class="hs-identifier">HttpInfoLog</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#OperationLog"><span class="hs-identifier">OperationLog</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#HttpLogContext"><span class="hs-identifier">HttpLogContext</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#WebHookLog"><span class="hs-identifier">WebHookLog</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="Hasura.HTTP.html#HttpException"><span class="hs-identifier">HttpException</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#HttpLog"><span class="hs-identifier">HttpLog</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#GQLBatchQueryOperationLog"><span class="hs-identifier">GQLBatchQueryOperationLog</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#GQLQueryOperationSuccessLog"><span class="hs-identifier">GQLQueryOperationSuccessLog</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#GQLQueryOperationErrorLog"><span class="hs-identifier">GQLQueryOperationErrorLog</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#MetadataLog"><span class="hs-identifier">MetadataLog</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#EnvVarsMovedToMetadata"><span class="hs-identifier">EnvVarsMovedToMetadata</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#DeprecatedEnvVars"><span class="hs-identifier">DeprecatedEnvVars</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#logDeprecatedEnvVars"><span class="hs-identifier">logDeprecatedEnvVars</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#CommonHttpLogMetadata"><span class="hs-identifier">CommonHttpLogMetadata</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#HttpLogMetadata"><span class="hs-identifier">HttpLogMetadata</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#buildHttpLogMetadata"><span class="hs-identifier">buildHttpLogMetadata</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#emptyHttpLogMetadata"><span class="hs-identifier">emptyHttpLogMetadata</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#MetadataQueryLoggingMode"><span class="hs-identifier">MetadataQueryLoggingMode</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#HttpLogQueryOnlyOnError"><span class="hs-identifier">HttpLogQueryOnlyOnError</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#LoggingSettings"><span class="hs-identifier">LoggingSettings</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#SchemaSyncThreadType"><span class="hs-identifier">SchemaSyncThreadType</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#SchemaSyncLog"><span class="hs-identifier">SchemaSyncLog</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#HttpLogGraphQLInfo"><span class="hs-identifier">HttpLogGraphQLInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#emptyHttpLogGraphQLInfo"><span class="hs-identifier">emptyHttpLogGraphQLInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#ModelInfo"><span class="hs-identifier">ModelInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#ModelInfoLog"><span class="hs-identifier">ModelInfoLog</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span class="hs-keyword">where</span><span>
</span><span id="line-38"></span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/lens-5.3.2-7ec14d641784087c1f1350eada3cde7884c62d1ab2707daec993ceeca3096d32/share/doc/html/src/Control.Lens.html/Control.Lens.html"><span class="hs-identifier">Control.Lens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/lens-5.3.2-7ec14d641784087c1f1350eada3cde7884c62d1ab2707daec993ceeca3096d32/share/doc/html/src/Control.Lens.Fold.html/Control.Lens.Fold.html#%5E%3F"><span class="hs-operator">(^?)</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.html/Data.Aeson.html"><span class="hs-identifier">Data.Aeson</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">J</span></span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/lens-aeson-1.2.3-09ce05ee6aa4d7b8f95eb1fa77309d8d58f89a37d4088e81c67c0e8e851db8c6/share/doc/html/src/Data.Aeson.Lens.html/Data.Aeson.Lens.html"><span class="hs-identifier">Data.Aeson.Lens</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/lens-aeson-1.2.3-09ce05ee6aa4d7b8f95eb1fa77309d8d58f89a37d4088e81c67c0e8e851db8c6/share/doc/html/src/Data.Aeson.Lens.html/Data.Aeson.Lens.html#key"><span class="hs-identifier">key</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/lens-aeson-1.2.3-09ce05ee6aa4d7b8f95eb1fa77309d8d58f89a37d4088e81c67c0e8e851db8c6/share/doc/html/src/Data.Aeson.Lens.html/Data.Aeson.Lens.html#_String"><span class="hs-identifier">_String</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.ByteString.Lazy</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">BL</span></span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Environment.html/Data.Environment.html"><span class="hs-identifier">Data.Environment</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Env</span></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/unordered-containers-0.2.20-6d56f9b3abc6011ddb6e237c415126423ab5ceb5c078221bba2ff80dbe921009/share/doc/html/src/Data.HashMap.Strict.html/Data.HashMap.Strict.html"><span class="hs-identifier">Data.HashMap.Strict</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">HashMap</span></span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/unordered-containers-0.2.20-6d56f9b3abc6011ddb6e237c415126423ab5ceb5c078221bba2ff80dbe921009/share/doc/html/src/Data.HashSet.html/Data.HashSet.html"><span class="hs-identifier">Data.HashSet</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Set</span></span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Int</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Int64</span></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NE</span></span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.SerializableBlob.html/Data.SerializableBlob.html"><span class="hs-identifier">Data.SerializableBlob</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">SB</span></span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Extended.html/Data.Text.Extended.html"><span class="hs-identifier">Data.Text.Extended</span></a></span><span>
</span><span id="line-51"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Authentication.Session.html"><span class="hs-identifier">Hasura.Authentication.Session</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Authentication.Session.html#SessionVariables"><span class="hs-identifier">SessionVariables</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Authentication.User.html"><span class="hs-identifier">Hasura.Authentication.User</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Authentication.User.html#ExtraUserInfo"><span class="hs-identifier">ExtraUserInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.Authentication.User.html#UserInfo"><span class="hs-identifier">UserInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html"><span class="hs-identifier">Hasura.Base.Error</span></a></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.ParameterizedQueryHash.html"><span class="hs-identifier">Hasura.GraphQL.ParameterizedQueryHash</span></a></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Transport.HTTP.Protocol.html"><span class="hs-identifier">Hasura.GraphQL.Transport.HTTP.Protocol</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">GH</span></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.HTTP.html"><span class="hs-identifier">Hasura.HTTP</span></a></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Logging.html"><span class="hs-identifier">Hasura.Logging</span></a></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html"><span class="hs-identifier">Hasura.Prelude</span></a></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html"><span class="hs-identifier">Hasura.RQL.Types.Common</span></a></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Metadata.Object.html"><span class="hs-identifier">Hasura.RQL.Types.Metadata.Object</span></a></span><span>
</span><span id="line-61"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Source.html"><span class="hs-identifier">Hasura.RQL.Types.Source</span></a></span><span>
</span><span id="line-62"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Server.Compression.html"><span class="hs-identifier">Hasura.Server.Compression</span></a></span><span>
</span><span id="line-63"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Server.Types.html"><span class="hs-identifier">Hasura.Server.Types</span></a></span><span>
</span><span id="line-64"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Server.Utils.html"><span class="hs-identifier">Hasura.Server.Utils</span></a></span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.Server.Utils.html#DeprecatedEnvVars"><span class="hs-identifier">DeprecatedEnvVars</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#EnvVarsMovedToMetadata"><span class="hs-identifier">EnvVarsMovedToMetadata</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-67"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#deprecatedEnvVars"><span class="hs-identifier">deprecatedEnvVars</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>    </span><span class="annot"><a href="Hasura.Server.Utils.html#envVarsMovedToMetadata"><span class="hs-identifier">envVarsMovedToMetadata</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-69"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-70"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Tracing.html"><span class="hs-identifier">Hasura.Tracing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Tracing.Monad.html#TraceT"><span class="hs-identifier">TraceT</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/http-types-0.12.3-48808bff700213a8ec5159613d94db74ab5738412a48ffcd3e274142637b29eb/share/doc/html/src/Network.HTTP.Types.html/Network.HTTP.Types.html"><span class="hs-identifier">Network.HTTP.Types</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">HTTP</span></span><span>
</span><span id="line-72"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Network.Wai.Extended.html/Network.Wai.Extended.html"><span class="hs-identifier">Network.Wai.Extended</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Wai</span></span><span>
</span><span id="line-73"></span><span>
</span><span id="line-74"></span><span class="hs-keyword">data</span><span> </span><span id="StartupLog"><span class="annot"><a href="Hasura.Server.Logging.html#StartupLog"><span class="hs-identifier hs-var">StartupLog</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="StartupLog"><span class="annot"><a href="Hasura.Server.Logging.html#StartupLog"><span class="hs-identifier hs-var">StartupLog</span></a></span></span><span>
</span><span id="line-75"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="slLogLevel"><span class="annot"><span class="annottext">StartupLog -&gt; LogLevel
</span><a href="Hasura.Server.Logging.html#slLogLevel"><span class="hs-identifier hs-var hs-var">slLogLevel</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Logging.html#LogLevel"><span class="hs-identifier hs-type">LogLevel</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-76"></span><span>    </span><span id="slKind"><span class="annot"><span class="annottext">StartupLog -&gt; Text
</span><a href="Hasura.Server.Logging.html#slKind"><span class="hs-identifier hs-var hs-var">slKind</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">,</span><span>
</span><span id="line-77"></span><span>    </span><span id="slInfo"><span class="annot"><span class="annottext">StartupLog -&gt; Value
</span><a href="Hasura.Server.Logging.html#slInfo"><span class="hs-identifier hs-var hs-var">slInfo</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#Value"><span class="hs-identifier hs-type">J.Value</span></a></span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-79"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621687815813"><span id="local-6989586621687815820"><span class="annot"><span class="annottext">StartupLog -&gt; StartupLog -&gt; Bool
(StartupLog -&gt; StartupLog -&gt; Bool)
-&gt; (StartupLog -&gt; StartupLog -&gt; Bool) -&gt; Eq StartupLog
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: StartupLog -&gt; StartupLog -&gt; Bool
== :: StartupLog -&gt; StartupLog -&gt; Bool
$c/= :: StartupLog -&gt; StartupLog -&gt; Bool
/= :: StartupLog -&gt; StartupLog -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-80"></span><span>
</span><span id="line-81"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687815826"><span id="local-6989586621687815830"><span id="local-6989586621687815833"><span id="local-6989586621687815836"><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#ToJSON"><span class="hs-identifier hs-type">J.ToJSON</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#StartupLog"><span class="hs-identifier hs-type">StartupLog</span></a></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-82"></span><span>  </span><span id="local-6989586621687815846"><span class="annot"><span class="annottext">toJSON :: StartupLog -&gt; Value
</span><a href="#local-6989586621687815846"><span class="hs-identifier hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Logging.html#StartupLog"><span class="hs-identifier hs-type">StartupLog</span></a></span><span> </span><span class="annot"><span class="annottext">LogLevel
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621687815848"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687815848"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621687815849"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621687815849"><span class="hs-identifier hs-var">info</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-83"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#object"><span class="hs-identifier hs-var">J.object</span></a></span><span>
</span><span id="line-84"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;kind&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Text -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#.%3D"><span class="hs-operator hs-var">J..=</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687815848"><span class="hs-identifier hs-var">k</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-85"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;info&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Value -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#.%3D"><span class="hs-operator hs-var">J..=</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621687815849"><span class="hs-identifier hs-var">info</span></a></span><span>
</span><span id="line-86"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-87"></span><span>
</span><span id="line-88"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Hasura.Logging.html#ToEngineLog"><span class="hs-identifier hs-type">ToEngineLog</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#StartupLog"><span class="hs-identifier hs-type">StartupLog</span></a></span><span> </span><span class="annot"><a href="Hasura.Logging.html#Hasura"><span class="hs-identifier hs-type">Hasura</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-89"></span><span>  </span><span id="local-6989586621687815859"><span class="annot"><span class="annottext">toEngineLog :: StartupLog -&gt; (LogLevel, EngineLogType Hasura, Value)
</span><a href="#local-6989586621687815859"><span class="hs-identifier hs-var hs-var hs-var">toEngineLog</span></a></span></span><span> </span><span id="local-6989586621687815861"><span class="annot"><span class="annottext">StartupLog
</span><a href="#local-6989586621687815861"><span class="hs-identifier hs-var">startupLog</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-90"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">StartupLog -&gt; LogLevel
</span><a href="Hasura.Server.Logging.html#slLogLevel"><span class="hs-identifier hs-var">slLogLevel</span></a></span><span> </span><span class="annot"><span class="annottext">StartupLog
</span><a href="#local-6989586621687815861"><span class="hs-identifier hs-var">startupLog</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EngineLogType Hasura
</span><a href="Hasura.Logging.html#ELTStartup"><span class="hs-identifier hs-var">ELTStartup</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">StartupLog -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toJSON"><span class="hs-identifier hs-var">J.toJSON</span></a></span><span> </span><span class="annot"><span class="annottext">StartupLog
</span><a href="#local-6989586621687815861"><span class="hs-identifier hs-var">startupLog</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-91"></span><span>
</span><span id="line-92"></span><span class="hs-keyword">data</span><span> </span><span id="PGLog"><span class="annot"><a href="Hasura.Server.Logging.html#PGLog"><span class="hs-identifier hs-var">PGLog</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="PGLog"><span class="annot"><a href="Hasura.Server.Logging.html#PGLog"><span class="hs-identifier hs-var">PGLog</span></a></span></span><span>
</span><span id="line-93"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="plLogLevel"><span class="annot"><span class="annottext">PGLog -&gt; LogLevel
</span><a href="Hasura.Server.Logging.html#plLogLevel"><span class="hs-identifier hs-var hs-var">plLogLevel</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Logging.html#LogLevel"><span class="hs-identifier hs-type">LogLevel</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-94"></span><span>    </span><span id="plMessage"><span class="annot"><span class="annottext">PGLog -&gt; Value
</span><a href="Hasura.Server.Logging.html#plMessage"><span class="hs-identifier hs-var hs-var">plMessage</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#Value"><span class="hs-identifier hs-type">J.Value</span></a></span><span>
</span><span id="line-95"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-96"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621687815867"><span id="local-6989586621687815871"><span class="annot"><span class="annottext">PGLog -&gt; PGLog -&gt; Bool
(PGLog -&gt; PGLog -&gt; Bool) -&gt; (PGLog -&gt; PGLog -&gt; Bool) -&gt; Eq PGLog
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: PGLog -&gt; PGLog -&gt; Bool
== :: PGLog -&gt; PGLog -&gt; Bool
$c/= :: PGLog -&gt; PGLog -&gt; Bool
/= :: PGLog -&gt; PGLog -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687815876"><span id="local-6989586621687815880"><span id="local-6989586621687815883"><span id="local-6989586621687815886"><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#ToJSON"><span class="hs-identifier hs-type">J.ToJSON</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#PGLog"><span class="hs-identifier hs-type">PGLog</span></a></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-99"></span><span>  </span><span id="local-6989586621687815891"><span class="annot"><span class="annottext">toJSON :: PGLog -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toJSON"><span class="hs-identifier hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Logging.html#PGLog"><span class="hs-identifier hs-type">PGLog</span></a></span><span> </span><span class="annot"><span class="annottext">LogLevel
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621687815892"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621687815892"><span class="hs-identifier hs-var">msg</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-100"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#object"><span class="hs-identifier hs-var">J.object</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;message&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Value -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#.%3D"><span class="hs-operator hs-var">J..=</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621687815892"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-101"></span><span>
</span><span id="line-102"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Hasura.Logging.html#ToEngineLog"><span class="hs-identifier hs-type">ToEngineLog</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#PGLog"><span class="hs-identifier hs-type">PGLog</span></a></span><span> </span><span class="annot"><a href="Hasura.Logging.html#Hasura"><span class="hs-identifier hs-type">Hasura</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-103"></span><span>  </span><span id="local-6989586621687815898"><span class="annot"><span class="annottext">toEngineLog :: PGLog -&gt; (LogLevel, EngineLogType Hasura, Value)
</span><a href="Hasura.Logging.html#toEngineLog"><span class="hs-identifier hs-var hs-var hs-var">toEngineLog</span></a></span></span><span> </span><span id="local-6989586621687815899"><span class="annot"><span class="annottext">PGLog
</span><a href="#local-6989586621687815899"><span class="hs-identifier hs-var">pgLog</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-104"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">PGLog -&gt; LogLevel
</span><a href="Hasura.Server.Logging.html#plLogLevel"><span class="hs-identifier hs-var">plLogLevel</span></a></span><span> </span><span class="annot"><span class="annottext">PGLog
</span><a href="#local-6989586621687815899"><span class="hs-identifier hs-var">pgLog</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">InternalLogTypes -&gt; EngineLogType Hasura
</span><a href="Hasura.Logging.html#ELTInternal"><span class="hs-identifier hs-var">ELTInternal</span></a></span><span> </span><span class="annot"><span class="annottext">InternalLogTypes
</span><a href="Hasura.Logging.html#ILTPgClient"><span class="hs-identifier hs-var">ILTPgClient</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">PGLog -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toJSON"><span class="hs-identifier hs-var">J.toJSON</span></a></span><span> </span><span class="annot"><span class="annottext">PGLog
</span><a href="#local-6989586621687815899"><span class="hs-identifier hs-var">pgLog</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-105"></span><span>
</span><span id="line-106"></span><span class="hs-keyword">data</span><span> </span><span id="MetadataLog"><span class="annot"><a href="Hasura.Server.Logging.html#MetadataLog"><span class="hs-identifier hs-var">MetadataLog</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="MetadataLog"><span class="annot"><a href="Hasura.Server.Logging.html#MetadataLog"><span class="hs-identifier hs-var">MetadataLog</span></a></span></span><span>
</span><span id="line-107"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="mlLogLevel"><span class="annot"><span class="annottext">MetadataLog -&gt; LogLevel
</span><a href="Hasura.Server.Logging.html#mlLogLevel"><span class="hs-identifier hs-var hs-var">mlLogLevel</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Logging.html#LogLevel"><span class="hs-identifier hs-type">LogLevel</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-108"></span><span>    </span><span id="mlMessage"><span class="annot"><span class="annottext">MetadataLog -&gt; Text
</span><a href="Hasura.Server.Logging.html#mlMessage"><span class="hs-identifier hs-var hs-var">mlMessage</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">,</span><span>
</span><span id="line-109"></span><span>    </span><span id="mlInfo"><span class="annot"><span class="annottext">MetadataLog -&gt; Value
</span><a href="Hasura.Server.Logging.html#mlInfo"><span class="hs-identifier hs-var hs-var">mlInfo</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#Value"><span class="hs-identifier hs-type">J.Value</span></a></span><span>
</span><span id="line-110"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-111"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621687815907"><span id="local-6989586621687815912"><span class="annot"><span class="annottext">MetadataLog -&gt; MetadataLog -&gt; Bool
(MetadataLog -&gt; MetadataLog -&gt; Bool)
-&gt; (MetadataLog -&gt; MetadataLog -&gt; Bool) -&gt; Eq MetadataLog
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: MetadataLog -&gt; MetadataLog -&gt; Bool
== :: MetadataLog -&gt; MetadataLog -&gt; Bool
$c/= :: MetadataLog -&gt; MetadataLog -&gt; Bool
/= :: MetadataLog -&gt; MetadataLog -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-112"></span><span>
</span><span id="line-113"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687815917"><span id="local-6989586621687815921"><span id="local-6989586621687815924"><span id="local-6989586621687815927"><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#ToJSON"><span class="hs-identifier hs-type">J.ToJSON</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#MetadataLog"><span class="hs-identifier hs-type">MetadataLog</span></a></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-114"></span><span>  </span><span id="local-6989586621687815935"><span class="annot"><span class="annottext">toJSON :: MetadataLog -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toJSON"><span class="hs-identifier hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Logging.html#MetadataLog"><span class="hs-identifier hs-type">MetadataLog</span></a></span><span> </span><span class="annot"><span class="annottext">LogLevel
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621687815936"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687815936"><span class="hs-identifier hs-var">msg</span></a></span></span><span> </span><span id="local-6989586621687815937"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621687815937"><span class="hs-identifier hs-var">infoVal</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-115"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#object"><span class="hs-identifier hs-var">J.object</span></a></span><span>
</span><span id="line-116"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;message&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Text -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#.%3D"><span class="hs-operator hs-var">J..=</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687815936"><span class="hs-identifier hs-var">msg</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-117"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;info&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Value -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#.%3D"><span class="hs-operator hs-var">J..=</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621687815937"><span class="hs-identifier hs-var">infoVal</span></a></span><span>
</span><span id="line-118"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-119"></span><span>
</span><span id="line-120"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Hasura.Logging.html#ToEngineLog"><span class="hs-identifier hs-type">ToEngineLog</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#MetadataLog"><span class="hs-identifier hs-type">MetadataLog</span></a></span><span> </span><span class="annot"><a href="Hasura.Logging.html#Hasura"><span class="hs-identifier hs-type">Hasura</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-121"></span><span>  </span><span id="local-6989586621687815943"><span class="annot"><span class="annottext">toEngineLog :: MetadataLog -&gt; (LogLevel, EngineLogType Hasura, Value)
</span><a href="Hasura.Logging.html#toEngineLog"><span class="hs-identifier hs-var hs-var hs-var">toEngineLog</span></a></span></span><span> </span><span id="local-6989586621687815944"><span class="annot"><span class="annottext">MetadataLog
</span><a href="#local-6989586621687815944"><span class="hs-identifier hs-var">ml</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-122"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">MetadataLog -&gt; LogLevel
</span><a href="Hasura.Server.Logging.html#mlLogLevel"><span class="hs-identifier hs-var">mlLogLevel</span></a></span><span> </span><span class="annot"><span class="annottext">MetadataLog
</span><a href="#local-6989586621687815944"><span class="hs-identifier hs-var">ml</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">InternalLogTypes -&gt; EngineLogType Hasura
</span><a href="Hasura.Logging.html#ELTInternal"><span class="hs-identifier hs-var">ELTInternal</span></a></span><span> </span><span class="annot"><span class="annottext">InternalLogTypes
</span><a href="Hasura.Logging.html#ILTMetadata"><span class="hs-identifier hs-var">ILTMetadata</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MetadataLog -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toJSON"><span class="hs-identifier hs-var">J.toJSON</span></a></span><span> </span><span class="annot"><span class="annottext">MetadataLog
</span><a href="#local-6989586621687815944"><span class="hs-identifier hs-var">ml</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-123"></span><span>
</span><span id="line-124"></span><span class="annot"><a href="Hasura.Server.Logging.html#mkInconsMetadataLog"><span class="hs-identifier hs-type">mkInconsMetadataLog</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.RQL.Types.Metadata.Object.html#InconsistentMetadata"><span class="hs-identifier hs-type">InconsistentMetadata</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#MetadataLog"><span class="hs-identifier hs-type">MetadataLog</span></a></span><span>
</span><span id="line-125"></span><span id="mkInconsMetadataLog"><span class="annot"><span class="annottext">mkInconsMetadataLog :: [InconsistentMetadata] -&gt; MetadataLog
</span><a href="Hasura.Server.Logging.html#mkInconsMetadataLog"><span class="hs-identifier hs-var hs-var">mkInconsMetadataLog</span></a></span></span><span> </span><span id="local-6989586621687815946"><span class="annot"><span class="annottext">[InconsistentMetadata]
</span><a href="#local-6989586621687815946"><span class="hs-identifier hs-var">objs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-126"></span><span>  </span><span class="annot"><span class="annottext">LogLevel -&gt; Text -&gt; Value -&gt; MetadataLog
</span><a href="Hasura.Server.Logging.html#MetadataLog"><span class="hs-identifier hs-var">MetadataLog</span></a></span><span> </span><span class="annot"><span class="annottext">LogLevel
</span><a href="Hasura.Logging.html#LevelWarn"><span class="hs-identifier hs-var">LevelWarn</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;Inconsistent Metadata!&quot;</span></span><span>
</span><span id="line-127"></span><span>    </span><span class="annot"><span class="annottext">(Value -&gt; MetadataLog) -&gt; Value -&gt; MetadataLog
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#object"><span class="hs-identifier hs-var">J.object</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;objects&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; [InconsistentMetadata] -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#.%3D"><span class="hs-operator hs-var">J..=</span></a></span><span> </span><span class="annot"><span class="annottext">[InconsistentMetadata]
</span><a href="#local-6989586621687815946"><span class="hs-identifier hs-var">objs</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-128"></span><span>
</span><span id="line-129"></span><span class="hs-keyword">data</span><span> </span><span id="WebHookLog"><span class="annot"><a href="Hasura.Server.Logging.html#WebHookLog"><span class="hs-identifier hs-var">WebHookLog</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="WebHookLog"><span class="annot"><a href="Hasura.Server.Logging.html#WebHookLog"><span class="hs-identifier hs-var">WebHookLog</span></a></span></span><span>
</span><span id="line-130"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="whlLogLevel"><span class="annot"><span class="annottext">WebHookLog -&gt; LogLevel
</span><a href="Hasura.Server.Logging.html#whlLogLevel"><span class="hs-identifier hs-var hs-var">whlLogLevel</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Logging.html#LogLevel"><span class="hs-identifier hs-type">LogLevel</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-131"></span><span>    </span><span id="whlStatusCode"><span class="annot"><span class="annottext">WebHookLog -&gt; Maybe Status
</span><a href="Hasura.Server.Logging.html#whlStatusCode"><span class="hs-identifier hs-var hs-var">whlStatusCode</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/http-types-0.12.3-48808bff700213a8ec5159613d94db74ab5738412a48ffcd3e274142637b29eb/share/doc/html/src/Network.HTTP.Types.Status.html/Network.HTTP.Types.Status.html#Status"><span class="hs-identifier hs-type">HTTP.Status</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-132"></span><span>    </span><span id="whlUrl"><span class="annot"><span class="annottext">WebHookLog -&gt; Text
</span><a href="Hasura.Server.Logging.html#whlUrl"><span class="hs-identifier hs-var hs-var">whlUrl</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">,</span><span>
</span><span id="line-133"></span><span>    </span><span id="whlMethod"><span class="annot"><span class="annottext">WebHookLog -&gt; StdMethod
</span><a href="Hasura.Server.Logging.html#whlMethod"><span class="hs-identifier hs-var hs-var">whlMethod</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/http-types-0.12.3-48808bff700213a8ec5159613d94db74ab5738412a48ffcd3e274142637b29eb/share/doc/html/src/Network.HTTP.Types.Method.html/Network.HTTP.Types.Method.html#StdMethod"><span class="hs-identifier hs-type">HTTP.StdMethod</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-134"></span><span>    </span><span id="whlError"><span class="annot"><span class="annottext">WebHookLog -&gt; Maybe HttpException
</span><a href="Hasura.Server.Logging.html#whlError"><span class="hs-identifier hs-var hs-var">whlError</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.HTTP.html#HttpException"><span class="hs-identifier hs-type">HttpException</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-135"></span><span>    </span><span id="whlResponse"><span class="annot"><span class="annottext">WebHookLog -&gt; Maybe Text
</span><a href="Hasura.Server.Logging.html#whlResponse"><span class="hs-identifier hs-var hs-var">whlResponse</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-136"></span><span>    </span><span id="whlMessage"><span class="annot"><span class="annottext">WebHookLog -&gt; Maybe Text
</span><a href="Hasura.Server.Logging.html#whlMessage"><span class="hs-identifier hs-var hs-var">whlMessage</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">)</span><span>
</span><span id="line-137"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-138"></span><span>
</span><span id="line-139"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Hasura.Logging.html#ToEngineLog"><span class="hs-identifier hs-type">ToEngineLog</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#WebHookLog"><span class="hs-identifier hs-type">WebHookLog</span></a></span><span> </span><span class="annot"><a href="Hasura.Logging.html#Hasura"><span class="hs-identifier hs-type">Hasura</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-140"></span><span>  </span><span id="local-6989586621687815962"><span class="annot"><span class="annottext">toEngineLog :: WebHookLog -&gt; (LogLevel, EngineLogType Hasura, Value)
</span><a href="Hasura.Logging.html#toEngineLog"><span class="hs-identifier hs-var hs-var hs-var">toEngineLog</span></a></span></span><span> </span><span id="local-6989586621687815963"><span class="annot"><span class="annottext">WebHookLog
</span><a href="#local-6989586621687815963"><span class="hs-identifier hs-var">webHookLog</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-141"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WebHookLog -&gt; LogLevel
</span><a href="Hasura.Server.Logging.html#whlLogLevel"><span class="hs-identifier hs-var">whlLogLevel</span></a></span><span> </span><span class="annot"><span class="annottext">WebHookLog
</span><a href="#local-6989586621687815963"><span class="hs-identifier hs-var">webHookLog</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EngineLogType Hasura
</span><a href="Hasura.Logging.html#ELTWebhookLog"><span class="hs-identifier hs-var">ELTWebhookLog</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">WebHookLog -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toJSON"><span class="hs-identifier hs-var">J.toJSON</span></a></span><span> </span><span class="annot"><span class="annottext">WebHookLog
</span><a href="#local-6989586621687815963"><span class="hs-identifier hs-var">webHookLog</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-142"></span><span>
</span><span id="line-143"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687815967"><span id="local-6989586621687815970"><span id="local-6989586621687815973"><span id="local-6989586621687815976"><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#ToJSON"><span class="hs-identifier hs-type">J.ToJSON</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#WebHookLog"><span class="hs-identifier hs-type">WebHookLog</span></a></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-144"></span><span>  </span><span id="local-6989586621687816005"><span class="annot"><span class="annottext">toJSON :: WebHookLog -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toJSON"><span class="hs-identifier hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span id="local-6989586621687816006"><span class="annot"><span class="annottext">WebHookLog
</span><a href="#local-6989586621687816006"><span class="hs-identifier hs-var">whl</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-145"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#object"><span class="hs-identifier hs-var">J.object</span></a></span><span>
</span><span id="line-146"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;status_code&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Maybe Int -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#.%3D"><span class="hs-operator hs-var">J..=</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Status -&gt; Int
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/http-types-0.12.3-48808bff700213a8ec5159613d94db74ab5738412a48ffcd3e274142637b29eb/share/doc/html/src/Network.HTTP.Types.Status.html/Network.HTTP.Types.Status.html#statusCode"><span class="hs-identifier hs-var">HTTP.statusCode</span></a></span><span> </span><span class="annot"><span class="annottext">(Status -&gt; Int) -&gt; Maybe Status -&gt; Maybe Int
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">WebHookLog -&gt; Maybe Status
</span><a href="Hasura.Server.Logging.html#whlStatusCode"><span class="hs-identifier hs-var">whlStatusCode</span></a></span><span> </span><span class="annot"><span class="annottext">WebHookLog
</span><a href="#local-6989586621687816006"><span class="hs-identifier hs-var">whl</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-147"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;url&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Text -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#.%3D"><span class="hs-operator hs-var">J..=</span></a></span><span> </span><span class="annot"><span class="annottext">WebHookLog -&gt; Text
</span><a href="Hasura.Server.Logging.html#whlUrl"><span class="hs-identifier hs-var">whlUrl</span></a></span><span> </span><span class="annot"><span class="annottext">WebHookLog
</span><a href="#local-6989586621687816006"><span class="hs-identifier hs-var">whl</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-148"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;method&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; String -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#.%3D"><span class="hs-operator hs-var">J..=</span></a></span><span> </span><span class="annot"><span class="annottext">StdMethod -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">WebHookLog -&gt; StdMethod
</span><a href="Hasura.Server.Logging.html#whlMethod"><span class="hs-identifier hs-var">whlMethod</span></a></span><span> </span><span class="annot"><span class="annottext">WebHookLog
</span><a href="#local-6989586621687816006"><span class="hs-identifier hs-var">whl</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-149"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;http_error&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Maybe HttpException -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#.%3D"><span class="hs-operator hs-var">J..=</span></a></span><span> </span><span class="annot"><span class="annottext">WebHookLog -&gt; Maybe HttpException
</span><a href="Hasura.Server.Logging.html#whlError"><span class="hs-identifier hs-var">whlError</span></a></span><span> </span><span class="annot"><span class="annottext">WebHookLog
</span><a href="#local-6989586621687816006"><span class="hs-identifier hs-var">whl</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-150"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;response&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Maybe Text -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#.%3D"><span class="hs-operator hs-var">J..=</span></a></span><span> </span><span class="annot"><span class="annottext">WebHookLog -&gt; Maybe Text
</span><a href="Hasura.Server.Logging.html#whlResponse"><span class="hs-identifier hs-var">whlResponse</span></a></span><span> </span><span class="annot"><span class="annottext">WebHookLog
</span><a href="#local-6989586621687816006"><span class="hs-identifier hs-var">whl</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-151"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;message&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Maybe Text -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#.%3D"><span class="hs-operator hs-var">J..=</span></a></span><span> </span><span class="annot"><span class="annottext">WebHookLog -&gt; Maybe Text
</span><a href="Hasura.Server.Logging.html#whlMessage"><span class="hs-identifier hs-var">whlMessage</span></a></span><span> </span><span class="annot"><span class="annottext">WebHookLog
</span><a href="#local-6989586621687816006"><span class="hs-identifier hs-var">whl</span></a></span><span>
</span><span id="line-152"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-153"></span><span>
</span><span id="line-154"></span><span class="hs-comment">-- | GQLQueryOperationSuccessLog captures all the data required to construct</span><span>
</span><span id="line-155"></span><span class="hs-comment">--   an HTTP success log.</span><span>
</span><span id="line-156"></span><span class="hs-keyword">data</span><span> </span><span id="GQLQueryOperationSuccessLog"><span class="annot"><a href="Hasura.Server.Logging.html#GQLQueryOperationSuccessLog"><span class="hs-identifier hs-var">GQLQueryOperationSuccessLog</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="GQLQueryOperationSuccessLog"><span class="annot"><a href="Hasura.Server.Logging.html#GQLQueryOperationSuccessLog"><span class="hs-identifier hs-var">GQLQueryOperationSuccessLog</span></a></span></span><span>
</span><span id="line-157"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="gqolQuery"><span class="annot"><span class="annottext">GQLQueryOperationSuccessLog -&gt; GQLReqUnparsed
</span><a href="Hasura.Server.Logging.html#gqolQuery"><span class="hs-identifier hs-var hs-var">gqolQuery</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.GraphQL.Transport.HTTP.Protocol.html#GQLReqUnparsed"><span class="hs-identifier hs-type">GH.GQLReqUnparsed</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-158"></span><span>    </span><span id="gqolQueryExecutionTime"><span class="annot"><span class="annottext">GQLQueryOperationSuccessLog -&gt; DiffTime
</span><a href="Hasura.Server.Logging.html#gqolQueryExecutionTime"><span class="hs-identifier hs-var hs-var">gqolQueryExecutionTime</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">DiffTime</span></span><span class="hs-special">,</span><span>
</span><span id="line-159"></span><span>    </span><span id="gqolResponseSize"><span class="annot"><span class="annottext">GQLQueryOperationSuccessLog -&gt; Int64
</span><a href="Hasura.Server.Logging.html#gqolResponseSize"><span class="hs-identifier hs-var hs-var">gqolResponseSize</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Int64</span></span><span class="hs-special">,</span><span>
</span><span id="line-160"></span><span>    </span><span id="gqolRequestSize"><span class="annot"><span class="annottext">GQLQueryOperationSuccessLog -&gt; Int64
</span><a href="Hasura.Server.Logging.html#gqolRequestSize"><span class="hs-identifier hs-var hs-var">gqolRequestSize</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Int64</span></span><span class="hs-special">,</span><span>
</span><span id="line-161"></span><span>    </span><span id="gqolParameterizedQueryHash"><span class="annot"><span class="annottext">GQLQueryOperationSuccessLog -&gt; ParameterizedQueryHash
</span><a href="Hasura.Server.Logging.html#gqolParameterizedQueryHash"><span class="hs-identifier hs-var hs-var">gqolParameterizedQueryHash</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.GraphQL.ParameterizedQueryHash.html#ParameterizedQueryHash"><span class="hs-identifier hs-type">ParameterizedQueryHash</span></a></span><span>
</span><span id="line-162"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-163"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621687816017"><span id="local-6989586621687816029"><span class="annot"><span class="annottext">GQLQueryOperationSuccessLog -&gt; GQLQueryOperationSuccessLog -&gt; Bool
(GQLQueryOperationSuccessLog
 -&gt; GQLQueryOperationSuccessLog -&gt; Bool)
-&gt; (GQLQueryOperationSuccessLog
    -&gt; GQLQueryOperationSuccessLog -&gt; Bool)
-&gt; Eq GQLQueryOperationSuccessLog
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: GQLQueryOperationSuccessLog -&gt; GQLQueryOperationSuccessLog -&gt; Bool
== :: GQLQueryOperationSuccessLog -&gt; GQLQueryOperationSuccessLog -&gt; Bool
$c/= :: GQLQueryOperationSuccessLog -&gt; GQLQueryOperationSuccessLog -&gt; Bool
/= :: GQLQueryOperationSuccessLog -&gt; GQLQueryOperationSuccessLog -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687816034"><span id="local-6989586621687816036"><span class="annot"><span class="annottext">(forall x.
 GQLQueryOperationSuccessLog -&gt; Rep GQLQueryOperationSuccessLog x)
-&gt; (forall x.
    Rep GQLQueryOperationSuccessLog x -&gt; GQLQueryOperationSuccessLog)
-&gt; Generic GQLQueryOperationSuccessLog
forall x.
Rep GQLQueryOperationSuccessLog x -&gt; GQLQueryOperationSuccessLog
forall x.
GQLQueryOperationSuccessLog -&gt; Rep GQLQueryOperationSuccessLog x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x.
GQLQueryOperationSuccessLog -&gt; Rep GQLQueryOperationSuccessLog x
from :: forall x.
GQLQueryOperationSuccessLog -&gt; Rep GQLQueryOperationSuccessLog x
$cto :: forall x.
Rep GQLQueryOperationSuccessLog x -&gt; GQLQueryOperationSuccessLog
to :: forall x.
Rep GQLQueryOperationSuccessLog x -&gt; GQLQueryOperationSuccessLog
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-164"></span><span>
</span><span id="line-165"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687816044"><span id="local-6989586621687816048"><span id="local-6989586621687816051"><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#ToJSON"><span class="hs-identifier hs-type">J.ToJSON</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#GQLQueryOperationSuccessLog"><span class="hs-identifier hs-type">GQLQueryOperationSuccessLog</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-166"></span><span>  </span><span id="local-6989586621687816206"><span class="annot"><span class="annottext">toJSON :: GQLQueryOperationSuccessLog -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toJSON"><span class="hs-identifier hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Options -&gt; GQLQueryOperationSuccessLog -&gt; Value
forall a.
(Generic a, GToJSON' Value Zero (Rep a)) =&gt;
Options -&gt; a -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#genericToJSON"><span class="hs-identifier hs-var">J.genericToJSON</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#hasuraJSON"><span class="hs-identifier hs-var">hasuraJSON</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#omitNothingFields"><span class="hs-identifier hs-var">J.omitNothingFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">True</span></span><span class="hs-special">}</span><span>
</span><span id="line-167"></span><span>  </span><span id="local-6989586621687816324"><span class="annot"><span class="annottext">toEncoding :: GQLQueryOperationSuccessLog -&gt; Encoding
</span><a href="#local-6989586621687816324"><span class="hs-identifier hs-var hs-var hs-var">toEncoding</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Options -&gt; GQLQueryOperationSuccessLog -&gt; Encoding
forall a.
(Generic a, GToJSON' Encoding Zero (Rep a)) =&gt;
Options -&gt; a -&gt; Encoding
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#genericToEncoding"><span class="hs-identifier hs-var">J.genericToEncoding</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#hasuraJSON"><span class="hs-identifier hs-var">hasuraJSON</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#omitNothingFields"><span class="hs-identifier hs-var">J.omitNothingFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">True</span></span><span class="hs-special">}</span><span>
</span><span id="line-168"></span><span>
</span><span id="line-169"></span><span class="annot"><span class="hs-comment">-- | GQLQueryOperationErrorLog captures the request along with the error message</span></span><span>
</span><span id="line-170"></span><span class="hs-keyword">data</span><span> </span><span id="GQLQueryOperationErrorLog"><span class="annot"><a href="Hasura.Server.Logging.html#GQLQueryOperationErrorLog"><span class="hs-identifier hs-var">GQLQueryOperationErrorLog</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="GQLQueryOperationErrorLog"><span class="annot"><a href="Hasura.Server.Logging.html#GQLQueryOperationErrorLog"><span class="hs-identifier hs-var">GQLQueryOperationErrorLog</span></a></span></span><span>
</span><span id="line-171"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="gqelQuery"><span class="annot"><span class="annottext">GQLQueryOperationErrorLog -&gt; GQLReqUnparsed
</span><a href="Hasura.Server.Logging.html#gqelQuery"><span class="hs-identifier hs-var hs-var">gqelQuery</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.GraphQL.Transport.HTTP.Protocol.html#GQLReqUnparsed"><span class="hs-identifier hs-type">GH.GQLReqUnparsed</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-172"></span><span>    </span><span id="gqelError"><span class="annot"><span class="annottext">GQLQueryOperationErrorLog -&gt; QErr
</span><a href="Hasura.Server.Logging.html#gqelError"><span class="hs-identifier hs-var hs-var">gqelError</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#QErr"><span class="hs-identifier hs-type">QErr</span></a></span><span>
</span><span id="line-173"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-174"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621687816331"><span id="local-6989586621687816337"><span class="annot"><span class="annottext">GQLQueryOperationErrorLog -&gt; GQLQueryOperationErrorLog -&gt; Bool
(GQLQueryOperationErrorLog -&gt; GQLQueryOperationErrorLog -&gt; Bool)
-&gt; (GQLQueryOperationErrorLog -&gt; GQLQueryOperationErrorLog -&gt; Bool)
-&gt; Eq GQLQueryOperationErrorLog
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: GQLQueryOperationErrorLog -&gt; GQLQueryOperationErrorLog -&gt; Bool
== :: GQLQueryOperationErrorLog -&gt; GQLQueryOperationErrorLog -&gt; Bool
$c/= :: GQLQueryOperationErrorLog -&gt; GQLQueryOperationErrorLog -&gt; Bool
/= :: GQLQueryOperationErrorLog -&gt; GQLQueryOperationErrorLog -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687816341"><span id="local-6989586621687816343"><span class="annot"><span class="annottext">(forall x.
 GQLQueryOperationErrorLog -&gt; Rep GQLQueryOperationErrorLog x)
-&gt; (forall x.
    Rep GQLQueryOperationErrorLog x -&gt; GQLQueryOperationErrorLog)
-&gt; Generic GQLQueryOperationErrorLog
forall x.
Rep GQLQueryOperationErrorLog x -&gt; GQLQueryOperationErrorLog
forall x.
GQLQueryOperationErrorLog -&gt; Rep GQLQueryOperationErrorLog x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x.
GQLQueryOperationErrorLog -&gt; Rep GQLQueryOperationErrorLog x
from :: forall x.
GQLQueryOperationErrorLog -&gt; Rep GQLQueryOperationErrorLog x
$cto :: forall x.
Rep GQLQueryOperationErrorLog x -&gt; GQLQueryOperationErrorLog
to :: forall x.
Rep GQLQueryOperationErrorLog x -&gt; GQLQueryOperationErrorLog
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-175"></span><span>
</span><span id="line-176"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687816348"><span id="local-6989586621687816352"><span id="local-6989586621687816355"><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#ToJSON"><span class="hs-identifier hs-type">J.ToJSON</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#GQLQueryOperationErrorLog"><span class="hs-identifier hs-type">GQLQueryOperationErrorLog</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-177"></span><span>  </span><span id="local-6989586621687816420"><span class="annot"><span class="annottext">toJSON :: GQLQueryOperationErrorLog -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toJSON"><span class="hs-identifier hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Options -&gt; GQLQueryOperationErrorLog -&gt; Value
forall a.
(Generic a, GToJSON' Value Zero (Rep a)) =&gt;
Options -&gt; a -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#genericToJSON"><span class="hs-identifier hs-var">J.genericToJSON</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#hasuraJSON"><span class="hs-identifier hs-var">hasuraJSON</span></a></span><span>
</span><span id="line-178"></span><span>  </span><span id="local-6989586621687816483"><span class="annot"><span class="annottext">toEncoding :: GQLQueryOperationErrorLog -&gt; Encoding
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toEncoding"><span class="hs-identifier hs-var hs-var hs-var">toEncoding</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Options -&gt; GQLQueryOperationErrorLog -&gt; Encoding
forall a.
(Generic a, GToJSON' Encoding Zero (Rep a)) =&gt;
Options -&gt; a -&gt; Encoding
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#genericToEncoding"><span class="hs-identifier hs-var">J.genericToEncoding</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#hasuraJSON"><span class="hs-identifier hs-var">hasuraJSON</span></a></span><span>
</span><span id="line-179"></span><span>
</span><span id="line-180"></span><span class="hs-keyword">data</span><span> </span><span id="GQLBatchQueryOperationLog"><span class="annot"><a href="Hasura.Server.Logging.html#GQLBatchQueryOperationLog"><span class="hs-identifier hs-var">GQLBatchQueryOperationLog</span></a></span></span><span>
</span><span id="line-181"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="GQLQueryOperationSuccess"><span class="annot"><a href="Hasura.Server.Logging.html#GQLQueryOperationSuccess"><span class="hs-identifier hs-var">GQLQueryOperationSuccess</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Server.Logging.html#GQLQueryOperationSuccessLog"><span class="hs-identifier hs-type">GQLQueryOperationSuccessLog</span></a></span><span>
</span><span id="line-182"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="GQLQueryOperationError"><span class="annot"><a href="Hasura.Server.Logging.html#GQLQueryOperationError"><span class="hs-identifier hs-var">GQLQueryOperationError</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Server.Logging.html#GQLQueryOperationErrorLog"><span class="hs-identifier hs-type">GQLQueryOperationErrorLog</span></a></span><span>
</span><span id="line-183"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621687816487"><span id="local-6989586621687816494"><span class="annot"><span class="annottext">GQLBatchQueryOperationLog -&gt; GQLBatchQueryOperationLog -&gt; Bool
(GQLBatchQueryOperationLog -&gt; GQLBatchQueryOperationLog -&gt; Bool)
-&gt; (GQLBatchQueryOperationLog -&gt; GQLBatchQueryOperationLog -&gt; Bool)
-&gt; Eq GQLBatchQueryOperationLog
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: GQLBatchQueryOperationLog -&gt; GQLBatchQueryOperationLog -&gt; Bool
== :: GQLBatchQueryOperationLog -&gt; GQLBatchQueryOperationLog -&gt; Bool
$c/= :: GQLBatchQueryOperationLog -&gt; GQLBatchQueryOperationLog -&gt; Bool
/= :: GQLBatchQueryOperationLog -&gt; GQLBatchQueryOperationLog -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687816499"><span id="local-6989586621687816503"><span id="local-6989586621687816506"><span id="local-6989586621687816509"><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#ToJSON"><span class="hs-identifier hs-type">J.ToJSON</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#GQLBatchQueryOperationLog"><span class="hs-identifier hs-type">GQLBatchQueryOperationLog</span></a></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-186"></span><span>  </span><span id="local-6989586621687816513"><span class="annot"><span class="annottext">toJSON :: GQLBatchQueryOperationLog -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toJSON"><span class="hs-identifier hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-187"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#GQLQueryOperationSuccess"><span class="hs-identifier hs-type">GQLQueryOperationSuccess</span></a></span><span> </span><span id="local-6989586621687816514"><span class="annot"><span class="annottext">GQLQueryOperationSuccessLog
</span><a href="#local-6989586621687816514"><span class="hs-identifier hs-var">successLog</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GQLQueryOperationSuccessLog -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toJSON"><span class="hs-identifier hs-var">J.toJSON</span></a></span><span> </span><span class="annot"><span class="annottext">GQLQueryOperationSuccessLog
</span><a href="#local-6989586621687816514"><span class="hs-identifier hs-var">successLog</span></a></span><span>
</span><span id="line-188"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#GQLQueryOperationError"><span class="hs-identifier hs-type">GQLQueryOperationError</span></a></span><span> </span><span id="local-6989586621687816515"><span class="annot"><span class="annottext">GQLQueryOperationErrorLog
</span><a href="#local-6989586621687816515"><span class="hs-identifier hs-var">errorLog</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GQLQueryOperationErrorLog -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toJSON"><span class="hs-identifier hs-var">J.toJSON</span></a></span><span> </span><span class="annot"><span class="annottext">GQLQueryOperationErrorLog
</span><a href="#local-6989586621687816515"><span class="hs-identifier hs-var">errorLog</span></a></span><span>
</span><span id="line-189"></span><span>
</span><span id="line-190"></span><span class="annot"><span class="hs-comment">-- | whether a request is executed in batched mode or not</span></span><span>
</span><span id="line-191"></span><span class="hs-keyword">data</span><span> </span><span id="RequestMode"><span class="annot"><a href="Hasura.Server.Logging.html#RequestMode"><span class="hs-identifier hs-var">RequestMode</span></a></span></span><span>
</span><span id="line-192"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-comment">-- | this request is batched</span></span><span>
</span><span id="line-193"></span><span>    </span><span id="RequestModeBatched"><span class="annot"><a href="Hasura.Server.Logging.html#RequestModeBatched"><span class="hs-identifier hs-var">RequestModeBatched</span></a></span></span><span>
</span><span id="line-194"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-comment">-- | this is a single request</span></span><span>
</span><span id="line-195"></span><span>    </span><span id="RequestModeSingle"><span class="annot"><a href="Hasura.Server.Logging.html#RequestModeSingle"><span class="hs-identifier hs-var">RequestModeSingle</span></a></span></span><span>
</span><span id="line-196"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-comment">-- | this request is of a kind for which batching is not done or does not make sense</span></span><span>
</span><span id="line-197"></span><span>    </span><span id="RequestModeNonBatchable"><span class="annot"><a href="Hasura.Server.Logging.html#RequestModeNonBatchable"><span class="hs-identifier hs-var">RequestModeNonBatchable</span></a></span></span><span>
</span><span id="line-198"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="hs-comment">-- | the execution of this request failed</span></span><span>
</span><span id="line-199"></span><span>    </span><span id="RequestModeError"><span class="annot"><a href="Hasura.Server.Logging.html#RequestModeError"><span class="hs-identifier hs-var">RequestModeError</span></a></span></span><span>
</span><span id="line-200"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621687816521"><span id="local-6989586621687816525"><span class="annot"><span class="annottext">RequestMode -&gt; RequestMode -&gt; Bool
(RequestMode -&gt; RequestMode -&gt; Bool)
-&gt; (RequestMode -&gt; RequestMode -&gt; Bool) -&gt; Eq RequestMode
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: RequestMode -&gt; RequestMode -&gt; Bool
== :: RequestMode -&gt; RequestMode -&gt; Bool
$c/= :: RequestMode -&gt; RequestMode -&gt; Bool
/= :: RequestMode -&gt; RequestMode -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-201"></span><span>
</span><span id="line-202"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687816530"><span id="local-6989586621687816534"><span id="local-6989586621687816537"><span id="local-6989586621687816540"><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#ToJSON"><span class="hs-identifier hs-type">J.ToJSON</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#RequestMode"><span class="hs-identifier hs-type">RequestMode</span></a></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-203"></span><span>  </span><span id="local-6989586621687816546"><span class="annot"><span class="annottext">toJSON :: RequestMode -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toJSON"><span class="hs-identifier hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-204"></span><span>    </span><span class="annot"><span class="annottext">RequestMode
</span><a href="Hasura.Server.Logging.html#RequestModeBatched"><span class="hs-identifier hs-var">RequestModeBatched</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-string">&quot;batched&quot;</span></span><span>
</span><span id="line-205"></span><span>    </span><span class="annot"><span class="annottext">RequestMode
</span><a href="Hasura.Server.Logging.html#RequestModeSingle"><span class="hs-identifier hs-var">RequestModeSingle</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-string">&quot;single&quot;</span></span><span>
</span><span id="line-206"></span><span>    </span><span class="annot"><span class="annottext">RequestMode
</span><a href="Hasura.Server.Logging.html#RequestModeNonBatchable"><span class="hs-identifier hs-var">RequestModeNonBatchable</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-string">&quot;non-graphql&quot;</span></span><span>
</span><span id="line-207"></span><span>    </span><span class="annot"><span class="annottext">RequestMode
</span><a href="Hasura.Server.Logging.html#RequestModeError"><span class="hs-identifier hs-var">RequestModeError</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Value
</span><span class="hs-string">&quot;error&quot;</span></span><span>
</span><span id="line-208"></span><span>
</span><span id="line-209"></span><span class="hs-keyword">data</span><span> </span><span id="CommonHttpLogMetadata"><span class="annot"><a href="Hasura.Server.Logging.html#CommonHttpLogMetadata"><span class="hs-identifier hs-var">CommonHttpLogMetadata</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="CommonHttpLogMetadata"><span class="annot"><a href="Hasura.Server.Logging.html#CommonHttpLogMetadata"><span class="hs-identifier hs-var">CommonHttpLogMetadata</span></a></span></span><span>
</span><span id="line-210"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_chlmRequestMode"><span class="annot"><span class="annottext">CommonHttpLogMetadata -&gt; RequestMode
</span><a href="Hasura.Server.Logging.html#_chlmRequestMode"><span class="hs-identifier hs-var hs-var">_chlmRequestMode</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Server.Logging.html#RequestMode"><span class="hs-identifier hs-type">RequestMode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-211"></span><span>    </span><span id="_chlmBatchOperationLog"><span class="annot"><span class="annottext">CommonHttpLogMetadata
-&gt; Maybe (GQLBatchedReqs GQLBatchQueryOperationLog)
</span><a href="Hasura.Server.Logging.html#_chlmBatchOperationLog"><span class="hs-identifier hs-var hs-var">_chlmBatchOperationLog</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Transport.HTTP.Protocol.html#GQLBatchedReqs"><span class="hs-identifier hs-type">GH.GQLBatchedReqs</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#GQLBatchQueryOperationLog"><span class="hs-identifier hs-type">GQLBatchQueryOperationLog</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-212"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-213"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621687816551"><span id="local-6989586621687816557"><span class="annot"><span class="annottext">CommonHttpLogMetadata -&gt; CommonHttpLogMetadata -&gt; Bool
(CommonHttpLogMetadata -&gt; CommonHttpLogMetadata -&gt; Bool)
-&gt; (CommonHttpLogMetadata -&gt; CommonHttpLogMetadata -&gt; Bool)
-&gt; Eq CommonHttpLogMetadata
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: CommonHttpLogMetadata -&gt; CommonHttpLogMetadata -&gt; Bool
== :: CommonHttpLogMetadata -&gt; CommonHttpLogMetadata -&gt; Bool
$c/= :: CommonHttpLogMetadata -&gt; CommonHttpLogMetadata -&gt; Bool
/= :: CommonHttpLogMetadata -&gt; CommonHttpLogMetadata -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-214"></span><span>
</span><span id="line-215"></span><span class="hs-comment">-- The information from the GraphQL layer that needs to be included in the http-log.</span><span>
</span><span id="line-216"></span><span class="hs-comment">-- This info is used to construct 'HttpLogMetadata m'</span><span>
</span><span id="line-217"></span><span class="hs-keyword">type</span><span> </span><span id="HttpLogGraphQLInfo"><span class="annot"><a href="Hasura.Server.Logging.html#HttpLogGraphQLInfo"><span class="hs-identifier hs-var">HttpLogGraphQLInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Logging.html#CommonHttpLogMetadata"><span class="hs-identifier hs-type">CommonHttpLogMetadata</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.GraphQL.ParameterizedQueryHash.html#ParameterizedQueryHashList"><span class="hs-identifier hs-type">ParameterizedQueryHashList</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-218"></span><span>
</span><span id="line-219"></span><span class="annot"><a href="Hasura.Server.Logging.html#emptyHttpLogGraphQLInfo"><span class="hs-identifier hs-type">emptyHttpLogGraphQLInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#HttpLogGraphQLInfo"><span class="hs-identifier hs-type">HttpLogGraphQLInfo</span></a></span><span>
</span><span id="line-220"></span><span id="emptyHttpLogGraphQLInfo"><span class="annot"><span class="annottext">emptyHttpLogGraphQLInfo :: HttpLogGraphQLInfo
</span><a href="Hasura.Server.Logging.html#emptyHttpLogGraphQLInfo"><span class="hs-identifier hs-var hs-var">emptyHttpLogGraphQLInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RequestMode
-&gt; Maybe (GQLBatchedReqs GQLBatchQueryOperationLog)
-&gt; CommonHttpLogMetadata
</span><a href="Hasura.Server.Logging.html#CommonHttpLogMetadata"><span class="hs-identifier hs-var">CommonHttpLogMetadata</span></a></span><span> </span><span class="annot"><span class="annottext">RequestMode
</span><a href="Hasura.Server.Logging.html#RequestModeNonBatchable"><span class="hs-identifier hs-var">RequestModeNonBatchable</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (GQLBatchedReqs GQLBatchQueryOperationLog)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ParameterizedQueryHashList
</span><a href="Hasura.GraphQL.ParameterizedQueryHash.html#PQHSetEmpty"><span class="hs-identifier hs-var">PQHSetEmpty</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-221"></span><span>
</span><span id="line-222"></span><span class="hs-comment">-- | The http-log metadata attached to HTTP requests running in the monad 'm', split into a</span><span>
</span><span id="line-223"></span><span class="hs-comment">-- common portion that is present regardless of 'm', and a monad-specific one defined in the</span><span>
</span><span id="line-224"></span><span class="hs-comment">-- 'HttpLog' instance.</span><span>
</span><span id="line-225"></span><span class="hs-comment">--</span><span>
</span><span id="line-226"></span><span class="hs-comment">-- This allows us to not have to duplicate the code that generates the common part of the metadata</span><span>
</span><span id="line-227"></span><span class="hs-comment">-- across OSS and Pro, so that instances only have to implement the part of it unique to them.</span><span>
</span><span id="line-228"></span><span class="hs-keyword">type</span><span> </span><span id="HttpLogMetadata"><span class="annot"><a href="Hasura.Server.Logging.html#HttpLogMetadata"><span class="hs-identifier hs-var">HttpLogMetadata</span></a></span></span><span> </span><span id="local-6989586621687816563"><span class="annot"><a href="#local-6989586621687816563"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Logging.html#CommonHttpLogMetadata"><span class="hs-identifier hs-type">CommonHttpLogMetadata</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#ExtraHttpLogMetadata"><span class="hs-identifier hs-type">ExtraHttpLogMetadata</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687816563"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-229"></span><span>
</span><span id="line-230"></span><span class="annot"><a href="Hasura.Server.Logging.html#buildHttpLogMetadata"><span class="hs-identifier hs-type">buildHttpLogMetadata</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-231"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621687815555"><span class="annot"><a href="#local-6989586621687815555"><span class="hs-identifier hs-type">m</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-232"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Logging.html#HttpLog"><span class="hs-identifier hs-type">HttpLog</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687815555"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-233"></span><span>  </span><span class="annot"><a href="Hasura.Server.Logging.html#HttpLogGraphQLInfo"><span class="hs-identifier hs-type">HttpLogGraphQLInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-234"></span><span>  </span><span class="annot"><a href="Hasura.Authentication.User.html#ExtraUserInfo"><span class="hs-identifier hs-type">ExtraUserInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-235"></span><span>  </span><span class="annot"><a href="Hasura.Server.Logging.html#HttpLogMetadata"><span class="hs-identifier hs-type">HttpLogMetadata</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687815555"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-236"></span><span id="buildHttpLogMetadata"><span class="annot"><span class="annottext">buildHttpLogMetadata :: forall (m :: * -&gt; *).
HttpLog m =&gt;
HttpLogGraphQLInfo -&gt; ExtraUserInfo -&gt; HttpLogMetadata m
</span><a href="Hasura.Server.Logging.html#buildHttpLogMetadata"><span class="hs-identifier hs-var hs-var">buildHttpLogMetadata</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621687816566"><span class="annot"><span class="annottext">CommonHttpLogMetadata
</span><a href="#local-6989586621687816566"><span class="hs-identifier hs-var">commonHttpLogMetadata</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687816567"><span class="annot"><span class="annottext">ParameterizedQueryHashList
</span><a href="#local-6989586621687816567"><span class="hs-identifier hs-var">paramQueryHashList</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621687816568"><span class="annot"><span class="annottext">ExtraUserInfo
</span><a href="#local-6989586621687816568"><span class="hs-identifier hs-var">extraUserInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-237"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CommonHttpLogMetadata
</span><a href="#local-6989586621687816566"><span class="hs-identifier hs-var">commonHttpLogMetadata</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
HttpLog m =&gt;
ParameterizedQueryHashList
-&gt; ExtraUserInfo -&gt; ExtraHttpLogMetadata m
</span><a href="Hasura.Server.Logging.html#buildExtraHttpLogMetadata"><span class="hs-identifier hs-var">buildExtraHttpLogMetadata</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621687815555"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="annottext">ParameterizedQueryHashList
</span><a href="#local-6989586621687816567"><span class="hs-identifier hs-var">paramQueryHashList</span></a></span><span> </span><span class="annot"><span class="annottext">ExtraUserInfo
</span><a href="#local-6989586621687816568"><span class="hs-identifier hs-var">extraUserInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-238"></span><span>
</span><span id="line-239"></span><span class="annot"><span class="hs-comment">-- | synonym for clarity, writing `emptyHttpLogMetadata @m` instead of `def @(HttpLogMetadata m)`</span></span><span>
</span><span id="line-240"></span><span class="annot"><a href="Hasura.Server.Logging.html#emptyHttpLogMetadata"><span class="hs-identifier hs-type">emptyHttpLogMetadata</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621687815562"><span class="annot"><a href="#local-6989586621687815562"><span class="hs-identifier hs-type">m</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Logging.html#HttpLog"><span class="hs-identifier hs-type">HttpLog</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687815562"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#HttpLogMetadata"><span class="hs-identifier hs-type">HttpLogMetadata</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687815562"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-241"></span><span id="emptyHttpLogMetadata"><span class="annot"><span class="annottext">emptyHttpLogMetadata :: forall (m :: * -&gt; *). HttpLog m =&gt; HttpLogMetadata m
</span><a href="Hasura.Server.Logging.html#emptyHttpLogMetadata"><span class="hs-identifier hs-var hs-var">emptyHttpLogMetadata</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RequestMode
-&gt; Maybe (GQLBatchedReqs GQLBatchQueryOperationLog)
-&gt; CommonHttpLogMetadata
</span><a href="Hasura.Server.Logging.html#CommonHttpLogMetadata"><span class="hs-identifier hs-var">CommonHttpLogMetadata</span></a></span><span> </span><span class="annot"><span class="annottext">RequestMode
</span><a href="Hasura.Server.Logging.html#RequestModeNonBatchable"><span class="hs-identifier hs-var">RequestModeNonBatchable</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (GQLBatchedReqs GQLBatchQueryOperationLog)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HttpLog m =&gt; ExtraHttpLogMetadata m
</span><a href="Hasura.Server.Logging.html#emptyExtraHttpLogMetadata"><span class="hs-identifier hs-var">emptyExtraHttpLogMetadata</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621687815562"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-242"></span><span>
</span><span id="line-243"></span><span class="hs-comment">-- See Note [Disable query printing for metadata queries]</span><span>
</span><span id="line-244"></span><span class="hs-keyword">data</span><span> </span><span id="MetadataQueryLoggingMode"><span class="annot"><a href="Hasura.Server.Logging.html#MetadataQueryLoggingMode"><span class="hs-identifier hs-var">MetadataQueryLoggingMode</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="MetadataQueryLoggingEnabled"><span class="annot"><a href="Hasura.Server.Logging.html#MetadataQueryLoggingEnabled"><span class="hs-identifier hs-var">MetadataQueryLoggingEnabled</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="MetadataQueryLoggingDisabled"><span class="annot"><a href="Hasura.Server.Logging.html#MetadataQueryLoggingDisabled"><span class="hs-identifier hs-var">MetadataQueryLoggingDisabled</span></a></span></span><span>
</span><span id="line-245"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621687816576"><span id="local-6989586621687816578"><span id="local-6989586621687816582"><span class="annot"><span class="annottext">Int -&gt; MetadataQueryLoggingMode -&gt; ShowS
[MetadataQueryLoggingMode] -&gt; ShowS
MetadataQueryLoggingMode -&gt; String
(Int -&gt; MetadataQueryLoggingMode -&gt; ShowS)
-&gt; (MetadataQueryLoggingMode -&gt; String)
-&gt; ([MetadataQueryLoggingMode] -&gt; ShowS)
-&gt; Show MetadataQueryLoggingMode
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; MetadataQueryLoggingMode -&gt; ShowS
showsPrec :: Int -&gt; MetadataQueryLoggingMode -&gt; ShowS
$cshow :: MetadataQueryLoggingMode -&gt; String
show :: MetadataQueryLoggingMode -&gt; String
$cshowList :: [MetadataQueryLoggingMode] -&gt; ShowS
showList :: [MetadataQueryLoggingMode] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687816587"><span id="local-6989586621687816591"><span class="annot"><span class="annottext">MetadataQueryLoggingMode -&gt; MetadataQueryLoggingMode -&gt; Bool
(MetadataQueryLoggingMode -&gt; MetadataQueryLoggingMode -&gt; Bool)
-&gt; (MetadataQueryLoggingMode -&gt; MetadataQueryLoggingMode -&gt; Bool)
-&gt; Eq MetadataQueryLoggingMode
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: MetadataQueryLoggingMode -&gt; MetadataQueryLoggingMode -&gt; Bool
== :: MetadataQueryLoggingMode -&gt; MetadataQueryLoggingMode -&gt; Bool
$c/= :: MetadataQueryLoggingMode -&gt; MetadataQueryLoggingMode -&gt; Bool
/= :: MetadataQueryLoggingMode -&gt; MetadataQueryLoggingMode -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-246"></span><span>
</span><span id="line-247"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687816595"><span id="local-6989586621687816599"><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.FromJSON.html/Data.Aeson.Types.FromJSON.html#FromJSON"><span class="hs-identifier hs-type">J.FromJSON</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#MetadataQueryLoggingMode"><span class="hs-identifier hs-type">MetadataQueryLoggingMode</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-248"></span><span>  </span><span id="local-6989586621687816604"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser MetadataQueryLoggingMode
</span><a href="#local-6989586621687816604"><span class="hs-identifier hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-249"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; (Bool -&gt; Parser MetadataQueryLoggingMode)
-&gt; Value
-&gt; Parser MetadataQueryLoggingMode
forall a. String -&gt; (Bool -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.FromJSON.html/Data.Aeson.Types.FromJSON.html#withBool"><span class="hs-identifier hs-var">J.withBool</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;MetadataQueryLoggingMode&quot;</span></span><span>
</span><span id="line-250"></span><span>      </span><span class="annot"><span class="annottext">((Bool -&gt; Parser MetadataQueryLoggingMode)
 -&gt; Value -&gt; Parser MetadataQueryLoggingMode)
-&gt; (Bool -&gt; Parser MetadataQueryLoggingMode)
-&gt; Value
-&gt; Parser MetadataQueryLoggingMode
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">MetadataQueryLoggingMode -&gt; Parser MetadataQueryLoggingMode
forall a. a -&gt; Parser a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span>
</span><span id="line-251"></span><span>      </span><span class="annot"><span class="annottext">(MetadataQueryLoggingMode -&gt; Parser MetadataQueryLoggingMode)
-&gt; (Bool -&gt; MetadataQueryLoggingMode)
-&gt; Bool
-&gt; Parser MetadataQueryLoggingMode
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">MetadataQueryLoggingMode
-&gt; MetadataQueryLoggingMode -&gt; Bool -&gt; MetadataQueryLoggingMode
forall a. a -&gt; a -&gt; Bool -&gt; a
</span><span class="hs-identifier hs-var">bool</span></span><span> </span><span class="annot"><span class="annottext">MetadataQueryLoggingMode
</span><a href="Hasura.Server.Logging.html#MetadataQueryLoggingDisabled"><span class="hs-identifier hs-var">MetadataQueryLoggingDisabled</span></a></span><span> </span><span class="annot"><span class="annottext">MetadataQueryLoggingMode
</span><a href="Hasura.Server.Logging.html#MetadataQueryLoggingEnabled"><span class="hs-identifier hs-var">MetadataQueryLoggingEnabled</span></a></span><span>
</span><span id="line-252"></span><span>
</span><span id="line-253"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687816611"><span id="local-6989586621687816615"><span id="local-6989586621687816618"><span id="local-6989586621687816621"><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#ToJSON"><span class="hs-identifier hs-type">J.ToJSON</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#MetadataQueryLoggingMode"><span class="hs-identifier hs-type">MetadataQueryLoggingMode</span></a></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-254"></span><span>  </span><span id="local-6989586621687816623"><span class="annot"><span class="annottext">toJSON :: MetadataQueryLoggingMode -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toJSON"><span class="hs-identifier hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-255"></span><span>    </span><span class="annot"><span class="annottext">MetadataQueryLoggingMode
</span><a href="Hasura.Server.Logging.html#MetadataQueryLoggingEnabled"><span class="hs-identifier hs-var">MetadataQueryLoggingEnabled</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#Bool"><span class="hs-identifier hs-var">J.Bool</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-256"></span><span>    </span><span class="annot"><span class="annottext">MetadataQueryLoggingMode
</span><a href="Hasura.Server.Logging.html#MetadataQueryLoggingDisabled"><span class="hs-identifier hs-var">MetadataQueryLoggingDisabled</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#Bool"><span class="hs-identifier hs-var">J.Bool</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-257"></span><span>
</span><span id="line-258"></span><span class="hs-keyword">data</span><span> </span><span id="HttpLogQueryOnlyOnError"><span class="annot"><a href="Hasura.Server.Logging.html#HttpLogQueryOnlyOnError"><span class="hs-identifier hs-var">HttpLogQueryOnlyOnError</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="HttpLogQueryOnlyOnErrorEnabled"><span class="annot"><a href="Hasura.Server.Logging.html#HttpLogQueryOnlyOnErrorEnabled"><span class="hs-identifier hs-var">HttpLogQueryOnlyOnErrorEnabled</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="HttpLogQueryOnlyOnErrorDisabled"><span class="annot"><a href="Hasura.Server.Logging.html#HttpLogQueryOnlyOnErrorDisabled"><span class="hs-identifier hs-var">HttpLogQueryOnlyOnErrorDisabled</span></a></span></span><span>
</span><span id="line-259"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621687816628"><span id="local-6989586621687816630"><span id="local-6989586621687816634"><span class="annot"><span class="annottext">Int -&gt; HttpLogQueryOnlyOnError -&gt; ShowS
[HttpLogQueryOnlyOnError] -&gt; ShowS
HttpLogQueryOnlyOnError -&gt; String
(Int -&gt; HttpLogQueryOnlyOnError -&gt; ShowS)
-&gt; (HttpLogQueryOnlyOnError -&gt; String)
-&gt; ([HttpLogQueryOnlyOnError] -&gt; ShowS)
-&gt; Show HttpLogQueryOnlyOnError
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; HttpLogQueryOnlyOnError -&gt; ShowS
showsPrec :: Int -&gt; HttpLogQueryOnlyOnError -&gt; ShowS
$cshow :: HttpLogQueryOnlyOnError -&gt; String
show :: HttpLogQueryOnlyOnError -&gt; String
$cshowList :: [HttpLogQueryOnlyOnError] -&gt; ShowS
showList :: [HttpLogQueryOnlyOnError] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687816637"><span id="local-6989586621687816641"><span class="annot"><span class="annottext">HttpLogQueryOnlyOnError -&gt; HttpLogQueryOnlyOnError -&gt; Bool
(HttpLogQueryOnlyOnError -&gt; HttpLogQueryOnlyOnError -&gt; Bool)
-&gt; (HttpLogQueryOnlyOnError -&gt; HttpLogQueryOnlyOnError -&gt; Bool)
-&gt; Eq HttpLogQueryOnlyOnError
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: HttpLogQueryOnlyOnError -&gt; HttpLogQueryOnlyOnError -&gt; Bool
== :: HttpLogQueryOnlyOnError -&gt; HttpLogQueryOnlyOnError -&gt; Bool
$c/= :: HttpLogQueryOnlyOnError -&gt; HttpLogQueryOnlyOnError -&gt; Bool
/= :: HttpLogQueryOnlyOnError -&gt; HttpLogQueryOnlyOnError -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-260"></span><span>
</span><span id="line-261"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687816645"><span id="local-6989586621687816649"><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.FromJSON.html/Data.Aeson.Types.FromJSON.html#FromJSON"><span class="hs-identifier hs-type">J.FromJSON</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#HttpLogQueryOnlyOnError"><span class="hs-identifier hs-type">HttpLogQueryOnlyOnError</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-262"></span><span>  </span><span id="local-6989586621687816652"><span class="annot"><span class="annottext">parseJSON :: Value -&gt; Parser HttpLogQueryOnlyOnError
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.FromJSON.html/Data.Aeson.Types.FromJSON.html#parseJSON"><span class="hs-identifier hs-var hs-var hs-var">parseJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-263"></span><span>    </span><span class="annot"><span class="annottext">String
-&gt; (Bool -&gt; Parser HttpLogQueryOnlyOnError)
-&gt; Value
-&gt; Parser HttpLogQueryOnlyOnError
forall a. String -&gt; (Bool -&gt; Parser a) -&gt; Value -&gt; Parser a
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.FromJSON.html/Data.Aeson.Types.FromJSON.html#withBool"><span class="hs-identifier hs-var">J.withBool</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;HttpLogQueryOnlyOnError&quot;</span></span><span>
</span><span id="line-264"></span><span>      </span><span class="annot"><span class="annottext">((Bool -&gt; Parser HttpLogQueryOnlyOnError)
 -&gt; Value -&gt; Parser HttpLogQueryOnlyOnError)
-&gt; (Bool -&gt; Parser HttpLogQueryOnlyOnError)
-&gt; Value
-&gt; Parser HttpLogQueryOnlyOnError
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HttpLogQueryOnlyOnError -&gt; Parser HttpLogQueryOnlyOnError
forall a. a -&gt; Parser a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span>
</span><span id="line-265"></span><span>      </span><span class="annot"><span class="annottext">(HttpLogQueryOnlyOnError -&gt; Parser HttpLogQueryOnlyOnError)
-&gt; (Bool -&gt; HttpLogQueryOnlyOnError)
-&gt; Bool
-&gt; Parser HttpLogQueryOnlyOnError
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">HttpLogQueryOnlyOnError
-&gt; HttpLogQueryOnlyOnError -&gt; Bool -&gt; HttpLogQueryOnlyOnError
forall a. a -&gt; a -&gt; Bool -&gt; a
</span><span class="hs-identifier hs-var">bool</span></span><span> </span><span class="annot"><span class="annottext">HttpLogQueryOnlyOnError
</span><a href="Hasura.Server.Logging.html#HttpLogQueryOnlyOnErrorDisabled"><span class="hs-identifier hs-var">HttpLogQueryOnlyOnErrorDisabled</span></a></span><span> </span><span class="annot"><span class="annottext">HttpLogQueryOnlyOnError
</span><a href="Hasura.Server.Logging.html#HttpLogQueryOnlyOnErrorEnabled"><span class="hs-identifier hs-var">HttpLogQueryOnlyOnErrorEnabled</span></a></span><span>
</span><span id="line-266"></span><span>
</span><span id="line-267"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687816655"><span id="local-6989586621687816659"><span id="local-6989586621687816662"><span id="local-6989586621687816665"><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#ToJSON"><span class="hs-identifier hs-type">J.ToJSON</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#HttpLogQueryOnlyOnError"><span class="hs-identifier hs-type">HttpLogQueryOnlyOnError</span></a></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-268"></span><span>  </span><span id="local-6989586621687816667"><span class="annot"><span class="annottext">toJSON :: HttpLogQueryOnlyOnError -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toJSON"><span class="hs-identifier hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-269"></span><span>    </span><span class="annot"><span class="annottext">HttpLogQueryOnlyOnError
</span><a href="Hasura.Server.Logging.html#HttpLogQueryOnlyOnErrorEnabled"><span class="hs-identifier hs-var">HttpLogQueryOnlyOnErrorEnabled</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#Bool"><span class="hs-identifier hs-var">J.Bool</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-270"></span><span>    </span><span class="annot"><span class="annottext">HttpLogQueryOnlyOnError
</span><a href="Hasura.Server.Logging.html#HttpLogQueryOnlyOnErrorDisabled"><span class="hs-identifier hs-var">HttpLogQueryOnlyOnErrorDisabled</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#Bool"><span class="hs-identifier hs-var">J.Bool</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-271"></span><span>
</span><span id="line-272"></span><span class="annot"><span class="hs-comment">-- | Setting used to control the information in logs</span></span><span>
</span><span id="line-273"></span><span class="hs-keyword">data</span><span> </span><span id="LoggingSettings"><span class="annot"><a href="Hasura.Server.Logging.html#LoggingSettings"><span class="hs-identifier hs-var">LoggingSettings</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="LoggingSettings"><span class="annot"><a href="Hasura.Server.Logging.html#LoggingSettings"><span class="hs-identifier hs-var">LoggingSettings</span></a></span></span><span>
</span><span id="line-274"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="hs-comment">-- | this is only required for the short-term fix in https://github.com/hasura/graphql-engine-mono/issues/1770</span><span>
</span><span id="line-275"></span><span>    </span><span class="hs-comment">-- See Note [Disable query printing when query-log is disabled]</span><span>
</span><span id="line-276"></span><span>    </span><span id="_lsEnabledLogTypes"><span class="annot"><span class="annottext">LoggingSettings -&gt; HashSet (EngineLogType Hasura)
</span><a href="Hasura.Server.Logging.html#_lsEnabledLogTypes"><span class="hs-identifier hs-var hs-var">_lsEnabledLogTypes</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/unordered-containers-0.2.20-6d56f9b3abc6011ddb6e237c415126423ab5ceb5c078221bba2ff80dbe921009/share/doc/html/src/Data.HashSet.Internal.html/Data.HashSet.Internal.html#HashSet"><span class="hs-identifier hs-type">HashSet</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Logging.html#EngineLogType"><span class="hs-identifier hs-type">EngineLogType</span></a></span><span> </span><span class="annot"><a href="Hasura.Logging.html#Hasura"><span class="hs-identifier hs-type">Hasura</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-277"></span><span>    </span><span class="hs-comment">-- See Note [Disable query printing for metadata queries]</span><span>
</span><span id="line-278"></span><span>    </span><span id="_lsMetadataQueryLoggingMode"><span class="annot"><span class="annottext">LoggingSettings -&gt; MetadataQueryLoggingMode
</span><a href="Hasura.Server.Logging.html#_lsMetadataQueryLoggingMode"><span class="hs-identifier hs-var hs-var">_lsMetadataQueryLoggingMode</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#MetadataQueryLoggingMode"><span class="hs-identifier hs-type">MetadataQueryLoggingMode</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-279"></span><span>    </span><span id="_lsHttpLogQueryOnlyOnError"><span class="annot"><span class="annottext">LoggingSettings -&gt; HttpLogQueryOnlyOnError
</span><a href="Hasura.Server.Logging.html#_lsHttpLogQueryOnlyOnError"><span class="hs-identifier hs-var hs-var">_lsHttpLogQueryOnlyOnError</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#HttpLogQueryOnlyOnError"><span class="hs-identifier hs-type">HttpLogQueryOnlyOnError</span></a></span><span>
</span><span id="line-280"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-281"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621687816673"><span id="local-6989586621687816679"><span class="annot"><span class="annottext">LoggingSettings -&gt; LoggingSettings -&gt; Bool
(LoggingSettings -&gt; LoggingSettings -&gt; Bool)
-&gt; (LoggingSettings -&gt; LoggingSettings -&gt; Bool)
-&gt; Eq LoggingSettings
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: LoggingSettings -&gt; LoggingSettings -&gt; Bool
== :: LoggingSettings -&gt; LoggingSettings -&gt; Bool
$c/= :: LoggingSettings -&gt; LoggingSettings -&gt; Bool
/= :: LoggingSettings -&gt; LoggingSettings -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-282"></span><span>
</span><span id="line-283"></span><span class="hs-comment">{- Note [Disable query printing when query-log is disabled]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
As a temporary hack (as per https://github.com/hasura/graphql-engine-mono/issues/1770),
we want to print the graphql query string in `http-log` or `websocket-log` only
when `query-log` is enabled.
-}</span><span>
</span><span id="line-289"></span><span>
</span><span id="line-290"></span><span class="hs-comment">{- Note [Disable query printing for metadata queries]
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
The 'olQuery' in the 'OperationLog' logs the actual query that is sent over HTTP.
This can lead to security issues, since the request sent in metadata queries may
include sensitive information such as DB URLS. Thus it is important that we hide
these sensitive information for the metadata URL.

As a temporary hotfix (ref: https://github.com/hasura/graphql-engine-mono/issues/3937),
If the URL path of HTTP requests is for a metadata operation and the
HASURA_GRAPHQL_ENABLE_METADATA_QUERY_LOGGING envirnoment variables is not set, then
we disable the 'query' field in HTTP logs.
-}</span><span>
</span><span id="line-302"></span><span>
</span><span id="line-303"></span><span class="hs-keyword">class</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621687815561"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span id="HttpLog"><span class="annot"><a href="Hasura.Server.Logging.html#HttpLog"><span class="hs-identifier hs-var">HttpLog</span></a></span></span><span> </span><span id="local-6989586621687815561"><span class="annot"><a href="#local-6989586621687815561"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-304"></span><span>  </span><span class="hs-comment">-- | Extra http-log metadata that we attach when operating in 'm'.</span><span>
</span><span id="line-305"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="ExtraHttpLogMetadata"><span class="annot"><a href="Hasura.Server.Logging.html#ExtraHttpLogMetadata"><span class="hs-identifier hs-var">ExtraHttpLogMetadata</span></a></span></span><span> </span><span id="local-6989586621687815561"><span class="annot"><a href="#local-6989586621687815561"><span class="hs-identifier hs-type">m</span></a></span></span><span>
</span><span id="line-306"></span><span>
</span><span id="line-307"></span><span>  </span><span id="emptyExtraHttpLogMetadata"><span class="annot"><a href="Hasura.Server.Logging.html#emptyExtraHttpLogMetadata"><span class="hs-identifier hs-type">emptyExtraHttpLogMetadata</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#ExtraHttpLogMetadata"><span class="hs-identifier hs-type">ExtraHttpLogMetadata</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687815561"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-308"></span><span>
</span><span id="line-309"></span><span>  </span><span id="buildExtraHttpLogMetadata"><span class="annot"><a href="Hasura.Server.Logging.html#buildExtraHttpLogMetadata"><span class="hs-identifier hs-type">buildExtraHttpLogMetadata</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.GraphQL.ParameterizedQueryHash.html#ParameterizedQueryHashList"><span class="hs-identifier hs-type">ParameterizedQueryHashList</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.Authentication.User.html#ExtraUserInfo"><span class="hs-identifier hs-type">ExtraUserInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#ExtraHttpLogMetadata"><span class="hs-identifier hs-type">ExtraHttpLogMetadata</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687815561"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-310"></span><span>
</span><span id="line-311"></span><span>  </span><span id="logHttpError"><span class="annot"><a href="Hasura.Server.Logging.html#logHttpError"><span class="hs-identifier hs-type">logHttpError</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-312"></span><span>    </span><span class="annot"><span class="hs-comment">-- | the logger</span></span><span>
</span><span id="line-313"></span><span>    </span><span class="annot"><a href="Hasura.Logging.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="annot"><a href="Hasura.Logging.html#Hasura"><span class="hs-identifier hs-type">Hasura</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-314"></span><span>    </span><span class="annot"><span class="hs-comment">-- | setting used to control the information in logs</span></span><span>
</span><span id="line-315"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#LoggingSettings"><span class="hs-identifier hs-type">LoggingSettings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-316"></span><span>    </span><span class="annot"><span class="hs-comment">-- | user info may or may not be present (error can happen during user resolution)</span></span><span>
</span><span id="line-317"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.Authentication.User.html#UserInfo"><span class="hs-identifier hs-type">UserInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-318"></span><span>    </span><span class="annot"><span class="hs-comment">-- | request id of the request</span></span><span>
</span><span id="line-319"></span><span>    </span><span class="annot"><a href="Hasura.Server.Types.html#RequestId"><span class="hs-identifier hs-type">RequestId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-320"></span><span>    </span><span class="annot"><span class="hs-comment">-- | the Wai.Request object</span></span><span>
</span><span id="line-321"></span><span>    </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/wai-3.2.4-f1faaa95aed979d4a132d2900aa502afdcfa02c1b7b8106923106c2a2a52f9c3/share/doc/html/src/Network.Wai.Internal.html/Network.Wai.Internal.html#Request"><span class="hs-identifier hs-type">Wai.Request</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-322"></span><span>    </span><span class="annot"><span class="hs-comment">-- | the request body and parsed request</span></span><span>
</span><span id="line-323"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">BL.ByteString</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#Value"><span class="hs-identifier hs-type">J.Value</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-324"></span><span>    </span><span class="annot"><span class="hs-comment">-- | the error</span></span><span>
</span><span id="line-325"></span><span>    </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#QErr"><span class="hs-identifier hs-type">QErr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-326"></span><span>    </span><span class="annot"><span class="hs-comment">-- | list of request headers</span></span><span>
</span><span id="line-327"></span><span>    </span><span class="hs-special">[</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/http-types-0.12.3-48808bff700213a8ec5159613d94db74ab5738412a48ffcd3e274142637b29eb/share/doc/html/src/Network.HTTP.Types.Header.html/Network.HTTP.Types.Header.html#Header"><span class="hs-identifier hs-type">HTTP.Header</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-328"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#HttpLogMetadata"><span class="hs-identifier hs-type">HttpLogMetadata</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687815561"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-329"></span><span>    </span><span class="annot"><span class="hs-comment">-- | flag to indicate if the request/response size should be added to the Prometheus Counter</span></span><span>
</span><span id="line-330"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-331"></span><span>    </span><span class="annot"><a href="#local-6989586621687815561"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-332"></span><span>
</span><span id="line-333"></span><span>  </span><span id="logHttpSuccess"><span class="annot"><a href="Hasura.Server.Logging.html#logHttpSuccess"><span class="hs-identifier hs-type">logHttpSuccess</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-334"></span><span>    </span><span class="annot"><span class="hs-comment">-- | the logger</span></span><span>
</span><span id="line-335"></span><span>    </span><span class="annot"><a href="Hasura.Logging.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="annot"><a href="Hasura.Logging.html#Hasura"><span class="hs-identifier hs-type">Hasura</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-336"></span><span>    </span><span class="annot"><span class="hs-comment">-- | setting used to control the information in logs</span></span><span>
</span><span id="line-337"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#LoggingSettings"><span class="hs-identifier hs-type">LoggingSettings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-338"></span><span>    </span><span class="annot"><span class="hs-comment">-- | user info may or may not be present (error can happen during user resolution)</span></span><span>
</span><span id="line-339"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.Authentication.User.html#UserInfo"><span class="hs-identifier hs-type">UserInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-340"></span><span>    </span><span class="annot"><span class="hs-comment">-- | request id of the request</span></span><span>
</span><span id="line-341"></span><span>    </span><span class="annot"><a href="Hasura.Server.Types.html#RequestId"><span class="hs-identifier hs-type">RequestId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-342"></span><span>    </span><span class="annot"><span class="hs-comment">-- | the Wai.Request object</span></span><span>
</span><span id="line-343"></span><span>    </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/wai-3.2.4-f1faaa95aed979d4a132d2900aa502afdcfa02c1b7b8106923106c2a2a52f9c3/share/doc/html/src/Network.Wai.Internal.html/Network.Wai.Internal.html#Request"><span class="hs-identifier hs-type">Wai.Request</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-344"></span><span>    </span><span class="annot"><span class="hs-comment">-- | the request body and parsed request</span></span><span>
</span><span id="line-345"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">BL.ByteString</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#Value"><span class="hs-identifier hs-type">J.Value</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-346"></span><span>    </span><span class="annot"><span class="hs-comment">-- | the response bytes</span></span><span>
</span><span id="line-347"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">BL.ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-348"></span><span>    </span><span class="hs-comment">-- | the compressed response bytes</span><span>
</span><span id="line-349"></span><span>    </span><span class="hs-comment">-- ^ TODO (from master): make the above two type represented</span><span>
</span><span id="line-350"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">BL.ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-351"></span><span>    </span><span class="annot"><span class="hs-comment">-- | IO/network wait time and service time (respectively) for this request, if available.</span></span><span>
</span><span id="line-352"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DiffTime</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DiffTime</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-353"></span><span>    </span><span class="annot"><span class="hs-comment">-- | possible compression type</span></span><span>
</span><span id="line-354"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.Server.Compression.html#CompressionType"><span class="hs-identifier hs-type">CompressionType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-355"></span><span>    </span><span class="annot"><span class="hs-comment">-- | list of request headers</span></span><span>
</span><span id="line-356"></span><span>    </span><span class="hs-special">[</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/http-types-0.12.3-48808bff700213a8ec5159613d94db74ab5738412a48ffcd3e274142637b29eb/share/doc/html/src/Network.HTTP.Types.Header.html/Network.HTTP.Types.Header.html#Header"><span class="hs-identifier hs-type">HTTP.Header</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-357"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#HttpLogMetadata"><span class="hs-identifier hs-type">HttpLogMetadata</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687815561"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-358"></span><span>    </span><span class="annot"><span class="hs-comment">-- | flag to indicate if the request/response size should be added to the Prometheus Counter</span></span><span>
</span><span id="line-359"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-360"></span><span>    </span><span class="annot"><a href="#local-6989586621687815561"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-361"></span><span>
</span><span id="line-362"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687815588"><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Logging.html#HttpLog"><span class="hs-identifier hs-type">HttpLog</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687815588"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#HttpLog"><span class="hs-identifier hs-type">HttpLog</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Tracing.Monad.html#TraceT"><span class="hs-identifier hs-type">TraceT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687815588"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-363"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="ExtraHttpLogMetadata"><span class="annot"><a href="Hasura.Server.Logging.html#ExtraHttpLogMetadata"><span class="hs-identifier hs-var">ExtraHttpLogMetadata</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Tracing.Monad.html#TraceT"><span class="hs-identifier hs-type">TraceT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687815588"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#ExtraHttpLogMetadata"><span class="hs-identifier hs-type">ExtraHttpLogMetadata</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687815588"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-364"></span><span>
</span><span id="line-365"></span><span>  </span><span id="local-6989586621687816697"><span class="annot"><span class="annottext">buildExtraHttpLogMetadata :: ParameterizedQueryHashList
-&gt; ExtraUserInfo -&gt; ExtraHttpLogMetadata (TraceT m)
</span><a href="Hasura.Server.Logging.html#buildExtraHttpLogMetadata"><span class="hs-identifier hs-var hs-var hs-var">buildExtraHttpLogMetadata</span></a></span></span><span> </span><span id="local-6989586621687816698"><span class="annot"><span class="annottext">ParameterizedQueryHashList
</span><a href="#local-6989586621687816698"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
HttpLog m =&gt;
ParameterizedQueryHashList
-&gt; ExtraUserInfo -&gt; ExtraHttpLogMetadata m
</span><a href="Hasura.Server.Logging.html#buildExtraHttpLogMetadata"><span class="hs-identifier hs-var">buildExtraHttpLogMetadata</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621687815588"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="annottext">ParameterizedQueryHashList
</span><a href="#local-6989586621687816698"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-366"></span><span>  </span><span id="local-6989586621687816700"><span class="annot"><span class="annottext">emptyExtraHttpLogMetadata :: ExtraHttpLogMetadata (TraceT m)
</span><a href="Hasura.Server.Logging.html#emptyExtraHttpLogMetadata"><span class="hs-identifier hs-var hs-var hs-var">emptyExtraHttpLogMetadata</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HttpLog m =&gt; ExtraHttpLogMetadata m
</span><a href="Hasura.Server.Logging.html#emptyExtraHttpLogMetadata"><span class="hs-identifier hs-var">emptyExtraHttpLogMetadata</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621687815588"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-367"></span><span>
</span><span id="line-368"></span><span>  </span><span id="local-6989586621687816705"><span class="annot"><span class="annottext">logHttpError :: Logger Hasura
-&gt; LoggingSettings
-&gt; Maybe UserInfo
-&gt; RequestId
-&gt; Request
-&gt; (ByteString, Maybe Value)
-&gt; QErr
-&gt; [Header]
-&gt; HttpLogMetadata (TraceT m)
-&gt; Bool
-&gt; TraceT m ()
</span><a href="Hasura.Server.Logging.html#logHttpError"><span class="hs-identifier hs-var hs-var hs-var">logHttpError</span></a></span></span><span> </span><span id="local-6989586621687816706"><span class="annot"><span class="annottext">Logger Hasura
</span><a href="#local-6989586621687816706"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621687816707"><span class="annot"><span class="annottext">LoggingSettings
</span><a href="#local-6989586621687816707"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621687816708"><span class="annot"><span class="annottext">Maybe UserInfo
</span><a href="#local-6989586621687816708"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621687816709"><span class="annot"><span class="annottext">RequestId
</span><a href="#local-6989586621687816709"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621687816710"><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621687816710"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621687816711"><span class="annot"><span class="annottext">(ByteString, Maybe Value)
</span><a href="#local-6989586621687816711"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621687816712"><span class="annot"><span class="annottext">QErr
</span><a href="#local-6989586621687816712"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621687816713"><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621687816713"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621687816714"><span class="annot"><span class="annottext">HttpLogMetadata (TraceT m)
</span><a href="#local-6989586621687816714"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621687816715"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621687816715"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m () -&gt; TraceT m ()
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; TraceT m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m () -&gt; TraceT m ()) -&gt; m () -&gt; TraceT m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Logger Hasura
-&gt; LoggingSettings
-&gt; Maybe UserInfo
-&gt; RequestId
-&gt; Request
-&gt; (ByteString, Maybe Value)
-&gt; QErr
-&gt; [Header]
-&gt; HttpLogMetadata m
-&gt; Bool
-&gt; m ()
forall (m :: * -&gt; *).
HttpLog m =&gt;
Logger Hasura
-&gt; LoggingSettings
-&gt; Maybe UserInfo
-&gt; RequestId
-&gt; Request
-&gt; (ByteString, Maybe Value)
-&gt; QErr
-&gt; [Header]
-&gt; HttpLogMetadata m
-&gt; Bool
-&gt; m ()
</span><a href="Hasura.Server.Logging.html#logHttpError"><span class="hs-identifier hs-var">logHttpError</span></a></span><span> </span><span class="annot"><span class="annottext">Logger Hasura
</span><a href="#local-6989586621687816706"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">LoggingSettings
</span><a href="#local-6989586621687816707"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe UserInfo
</span><a href="#local-6989586621687816708"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">RequestId
</span><a href="#local-6989586621687816709"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621687816710"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString, Maybe Value)
</span><a href="#local-6989586621687816711"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">QErr
</span><a href="#local-6989586621687816712"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621687816713"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">HttpLogMetadata m
HttpLogMetadata (TraceT m)
</span><a href="#local-6989586621687816714"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621687816715"><span class="hs-identifier hs-var">j</span></a></span><span>
</span><span id="line-369"></span><span>
</span><span id="line-370"></span><span>  </span><span id="local-6989586621687816720"><span class="annot"><span class="annottext">logHttpSuccess :: Logger Hasura
-&gt; LoggingSettings
-&gt; Maybe UserInfo
-&gt; RequestId
-&gt; Request
-&gt; (ByteString, Maybe Value)
-&gt; ByteString
-&gt; ByteString
-&gt; Maybe (DiffTime, DiffTime)
-&gt; Maybe CompressionType
-&gt; [Header]
-&gt; HttpLogMetadata (TraceT m)
-&gt; Bool
-&gt; TraceT m ()
</span><a href="Hasura.Server.Logging.html#logHttpSuccess"><span class="hs-identifier hs-var hs-var hs-var">logHttpSuccess</span></a></span></span><span> </span><span id="local-6989586621687816721"><span class="annot"><span class="annottext">Logger Hasura
</span><a href="#local-6989586621687816721"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621687816722"><span class="annot"><span class="annottext">LoggingSettings
</span><a href="#local-6989586621687816722"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621687816723"><span class="annot"><span class="annottext">Maybe UserInfo
</span><a href="#local-6989586621687816723"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621687816724"><span class="annot"><span class="annottext">RequestId
</span><a href="#local-6989586621687816724"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621687816725"><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621687816725"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621687816726"><span class="annot"><span class="annottext">(ByteString, Maybe Value)
</span><a href="#local-6989586621687816726"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621687816727"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621687816727"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621687816728"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621687816728"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621687816729"><span class="annot"><span class="annottext">Maybe (DiffTime, DiffTime)
</span><a href="#local-6989586621687816729"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621687816730"><span class="annot"><span class="annottext">Maybe CompressionType
</span><a href="#local-6989586621687816730"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span id="local-6989586621687816731"><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621687816731"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621687816732"><span class="annot"><span class="annottext">HttpLogMetadata (TraceT m)
</span><a href="#local-6989586621687816732"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621687816733"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621687816733"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m () -&gt; TraceT m ()
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; TraceT m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m () -&gt; TraceT m ()) -&gt; m () -&gt; TraceT m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Logger Hasura
-&gt; LoggingSettings
-&gt; Maybe UserInfo
-&gt; RequestId
-&gt; Request
-&gt; (ByteString, Maybe Value)
-&gt; ByteString
-&gt; ByteString
-&gt; Maybe (DiffTime, DiffTime)
-&gt; Maybe CompressionType
-&gt; [Header]
-&gt; HttpLogMetadata m
-&gt; Bool
-&gt; m ()
forall (m :: * -&gt; *).
HttpLog m =&gt;
Logger Hasura
-&gt; LoggingSettings
-&gt; Maybe UserInfo
-&gt; RequestId
-&gt; Request
-&gt; (ByteString, Maybe Value)
-&gt; ByteString
-&gt; ByteString
-&gt; Maybe (DiffTime, DiffTime)
-&gt; Maybe CompressionType
-&gt; [Header]
-&gt; HttpLogMetadata m
-&gt; Bool
-&gt; m ()
</span><a href="Hasura.Server.Logging.html#logHttpSuccess"><span class="hs-identifier hs-var">logHttpSuccess</span></a></span><span> </span><span class="annot"><span class="annottext">Logger Hasura
</span><a href="#local-6989586621687816721"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">LoggingSettings
</span><a href="#local-6989586621687816722"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe UserInfo
</span><a href="#local-6989586621687816723"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">RequestId
</span><a href="#local-6989586621687816724"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621687816725"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString, Maybe Value)
</span><a href="#local-6989586621687816726"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621687816727"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621687816728"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (DiffTime, DiffTime)
</span><a href="#local-6989586621687816729"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe CompressionType
</span><a href="#local-6989586621687816730"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621687816731"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">HttpLogMetadata m
HttpLogMetadata (TraceT m)
</span><a href="#local-6989586621687816732"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621687816733"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-371"></span><span>
</span><span id="line-372"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687815598"><span id="local-6989586621687815599"><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Logging.html#HttpLog"><span class="hs-identifier hs-type">HttpLog</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687815598"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#HttpLog"><span class="hs-identifier hs-type">HttpLog</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ReaderT</span></span><span> </span><span class="annot"><a href="#local-6989586621687815599"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687815598"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-373"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="ExtraHttpLogMetadata"><span class="annot"><a href="Hasura.Server.Logging.html#ExtraHttpLogMetadata"><span class="hs-identifier hs-var">ExtraHttpLogMetadata</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ReaderT</span></span><span> </span><span class="annot"><a href="#local-6989586621687815599"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687815598"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#ExtraHttpLogMetadata"><span class="hs-identifier hs-type">ExtraHttpLogMetadata</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687815598"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-374"></span><span>
</span><span id="line-375"></span><span>  </span><span id="local-6989586621687816745"><span class="annot"><span class="annottext">buildExtraHttpLogMetadata :: ParameterizedQueryHashList
-&gt; ExtraUserInfo -&gt; ExtraHttpLogMetadata (ReaderT r m)
</span><a href="Hasura.Server.Logging.html#buildExtraHttpLogMetadata"><span class="hs-identifier hs-var hs-var hs-var">buildExtraHttpLogMetadata</span></a></span></span><span> </span><span id="local-6989586621687816746"><span class="annot"><span class="annottext">ParameterizedQueryHashList
</span><a href="#local-6989586621687816746"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
HttpLog m =&gt;
ParameterizedQueryHashList
-&gt; ExtraUserInfo -&gt; ExtraHttpLogMetadata m
</span><a href="Hasura.Server.Logging.html#buildExtraHttpLogMetadata"><span class="hs-identifier hs-var">buildExtraHttpLogMetadata</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621687815598"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="annottext">ParameterizedQueryHashList
</span><a href="#local-6989586621687816746"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-376"></span><span>  </span><span id="local-6989586621687816748"><span class="annot"><span class="annottext">emptyExtraHttpLogMetadata :: ExtraHttpLogMetadata (ReaderT r m)
</span><a href="Hasura.Server.Logging.html#emptyExtraHttpLogMetadata"><span class="hs-identifier hs-var hs-var hs-var">emptyExtraHttpLogMetadata</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HttpLog m =&gt; ExtraHttpLogMetadata m
</span><a href="Hasura.Server.Logging.html#emptyExtraHttpLogMetadata"><span class="hs-identifier hs-var">emptyExtraHttpLogMetadata</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621687815598"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-377"></span><span>
</span><span id="line-378"></span><span>  </span><span id="local-6989586621687816753"><span class="annot"><span class="annottext">logHttpError :: Logger Hasura
-&gt; LoggingSettings
-&gt; Maybe UserInfo
-&gt; RequestId
-&gt; Request
-&gt; (ByteString, Maybe Value)
-&gt; QErr
-&gt; [Header]
-&gt; HttpLogMetadata (ReaderT r m)
-&gt; Bool
-&gt; ReaderT r m ()
</span><a href="Hasura.Server.Logging.html#logHttpError"><span class="hs-identifier hs-var hs-var hs-var">logHttpError</span></a></span></span><span> </span><span id="local-6989586621687816754"><span class="annot"><span class="annottext">Logger Hasura
</span><a href="#local-6989586621687816754"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621687816755"><span class="annot"><span class="annottext">LoggingSettings
</span><a href="#local-6989586621687816755"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621687816756"><span class="annot"><span class="annottext">Maybe UserInfo
</span><a href="#local-6989586621687816756"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621687816757"><span class="annot"><span class="annottext">RequestId
</span><a href="#local-6989586621687816757"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621687816758"><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621687816758"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621687816759"><span class="annot"><span class="annottext">(ByteString, Maybe Value)
</span><a href="#local-6989586621687816759"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621687816760"><span class="annot"><span class="annottext">QErr
</span><a href="#local-6989586621687816760"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621687816761"><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621687816761"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621687816762"><span class="annot"><span class="annottext">HttpLogMetadata (ReaderT r m)
</span><a href="#local-6989586621687816762"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621687816763"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621687816763"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m () -&gt; ReaderT r m ()
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ReaderT r m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m () -&gt; ReaderT r m ()) -&gt; m () -&gt; ReaderT r m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Logger Hasura
-&gt; LoggingSettings
-&gt; Maybe UserInfo
-&gt; RequestId
-&gt; Request
-&gt; (ByteString, Maybe Value)
-&gt; QErr
-&gt; [Header]
-&gt; HttpLogMetadata m
-&gt; Bool
-&gt; m ()
forall (m :: * -&gt; *).
HttpLog m =&gt;
Logger Hasura
-&gt; LoggingSettings
-&gt; Maybe UserInfo
-&gt; RequestId
-&gt; Request
-&gt; (ByteString, Maybe Value)
-&gt; QErr
-&gt; [Header]
-&gt; HttpLogMetadata m
-&gt; Bool
-&gt; m ()
</span><a href="Hasura.Server.Logging.html#logHttpError"><span class="hs-identifier hs-var">logHttpError</span></a></span><span> </span><span class="annot"><span class="annottext">Logger Hasura
</span><a href="#local-6989586621687816754"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">LoggingSettings
</span><a href="#local-6989586621687816755"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe UserInfo
</span><a href="#local-6989586621687816756"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">RequestId
</span><a href="#local-6989586621687816757"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621687816758"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString, Maybe Value)
</span><a href="#local-6989586621687816759"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">QErr
</span><a href="#local-6989586621687816760"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621687816761"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">HttpLogMetadata m
HttpLogMetadata (ReaderT r m)
</span><a href="#local-6989586621687816762"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621687816763"><span class="hs-identifier hs-var">j</span></a></span><span>
</span><span id="line-379"></span><span>
</span><span id="line-380"></span><span>  </span><span id="local-6989586621687816767"><span class="annot"><span class="annottext">logHttpSuccess :: Logger Hasura
-&gt; LoggingSettings
-&gt; Maybe UserInfo
-&gt; RequestId
-&gt; Request
-&gt; (ByteString, Maybe Value)
-&gt; ByteString
-&gt; ByteString
-&gt; Maybe (DiffTime, DiffTime)
-&gt; Maybe CompressionType
-&gt; [Header]
-&gt; HttpLogMetadata (ReaderT r m)
-&gt; Bool
-&gt; ReaderT r m ()
</span><a href="Hasura.Server.Logging.html#logHttpSuccess"><span class="hs-identifier hs-var hs-var hs-var">logHttpSuccess</span></a></span></span><span> </span><span id="local-6989586621687816768"><span class="annot"><span class="annottext">Logger Hasura
</span><a href="#local-6989586621687816768"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621687816769"><span class="annot"><span class="annottext">LoggingSettings
</span><a href="#local-6989586621687816769"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621687816770"><span class="annot"><span class="annottext">Maybe UserInfo
</span><a href="#local-6989586621687816770"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621687816771"><span class="annot"><span class="annottext">RequestId
</span><a href="#local-6989586621687816771"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621687816772"><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621687816772"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621687816773"><span class="annot"><span class="annottext">(ByteString, Maybe Value)
</span><a href="#local-6989586621687816773"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621687816774"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621687816774"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621687816775"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621687816775"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621687816776"><span class="annot"><span class="annottext">Maybe (DiffTime, DiffTime)
</span><a href="#local-6989586621687816776"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621687816777"><span class="annot"><span class="annottext">Maybe CompressionType
</span><a href="#local-6989586621687816777"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span id="local-6989586621687816778"><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621687816778"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621687816779"><span class="annot"><span class="annottext">HttpLogMetadata (ReaderT r m)
</span><a href="#local-6989586621687816779"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621687816780"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621687816780"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m () -&gt; ReaderT r m ()
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ReaderT r m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m () -&gt; ReaderT r m ()) -&gt; m () -&gt; ReaderT r m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Logger Hasura
-&gt; LoggingSettings
-&gt; Maybe UserInfo
-&gt; RequestId
-&gt; Request
-&gt; (ByteString, Maybe Value)
-&gt; ByteString
-&gt; ByteString
-&gt; Maybe (DiffTime, DiffTime)
-&gt; Maybe CompressionType
-&gt; [Header]
-&gt; HttpLogMetadata m
-&gt; Bool
-&gt; m ()
forall (m :: * -&gt; *).
HttpLog m =&gt;
Logger Hasura
-&gt; LoggingSettings
-&gt; Maybe UserInfo
-&gt; RequestId
-&gt; Request
-&gt; (ByteString, Maybe Value)
-&gt; ByteString
-&gt; ByteString
-&gt; Maybe (DiffTime, DiffTime)
-&gt; Maybe CompressionType
-&gt; [Header]
-&gt; HttpLogMetadata m
-&gt; Bool
-&gt; m ()
</span><a href="Hasura.Server.Logging.html#logHttpSuccess"><span class="hs-identifier hs-var">logHttpSuccess</span></a></span><span> </span><span class="annot"><span class="annottext">Logger Hasura
</span><a href="#local-6989586621687816768"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">LoggingSettings
</span><a href="#local-6989586621687816769"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe UserInfo
</span><a href="#local-6989586621687816770"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">RequestId
</span><a href="#local-6989586621687816771"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621687816772"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString, Maybe Value)
</span><a href="#local-6989586621687816773"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621687816774"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621687816775"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (DiffTime, DiffTime)
</span><a href="#local-6989586621687816776"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe CompressionType
</span><a href="#local-6989586621687816777"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621687816778"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">HttpLogMetadata m
HttpLogMetadata (ReaderT r m)
</span><a href="#local-6989586621687816779"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621687816780"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-381"></span><span>
</span><span id="line-382"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687815606"><span id="local-6989586621687815607"><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Logging.html#HttpLog"><span class="hs-identifier hs-type">HttpLog</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687815606"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#HttpLog"><span class="hs-identifier hs-type">HttpLog</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ExceptT</span></span><span> </span><span class="annot"><a href="#local-6989586621687815607"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687815606"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-383"></span><span>  </span><span class="hs-keyword">type</span><span> </span><span id="ExtraHttpLogMetadata"><span class="annot"><a href="Hasura.Server.Logging.html#ExtraHttpLogMetadata"><span class="hs-identifier hs-var">ExtraHttpLogMetadata</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ExceptT</span></span><span> </span><span class="annot"><a href="#local-6989586621687815607"><span class="hs-identifier hs-type">e</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687815606"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#ExtraHttpLogMetadata"><span class="hs-identifier hs-type">ExtraHttpLogMetadata</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687815606"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-384"></span><span>
</span><span id="line-385"></span><span>  </span><span id="local-6989586621687816792"><span class="annot"><span class="annottext">buildExtraHttpLogMetadata :: ParameterizedQueryHashList
-&gt; ExtraUserInfo -&gt; ExtraHttpLogMetadata (ExceptT e m)
</span><a href="Hasura.Server.Logging.html#buildExtraHttpLogMetadata"><span class="hs-identifier hs-var hs-var hs-var">buildExtraHttpLogMetadata</span></a></span></span><span> </span><span id="local-6989586621687816793"><span class="annot"><span class="annottext">ParameterizedQueryHashList
</span><a href="#local-6989586621687816793"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *).
HttpLog m =&gt;
ParameterizedQueryHashList
-&gt; ExtraUserInfo -&gt; ExtraHttpLogMetadata m
</span><a href="Hasura.Server.Logging.html#buildExtraHttpLogMetadata"><span class="hs-identifier hs-var">buildExtraHttpLogMetadata</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621687815606"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="annottext">ParameterizedQueryHashList
</span><a href="#local-6989586621687816793"><span class="hs-identifier hs-var">a</span></a></span><span>
</span><span id="line-386"></span><span>  </span><span id="local-6989586621687816795"><span class="annot"><span class="annottext">emptyExtraHttpLogMetadata :: ExtraHttpLogMetadata (ExceptT e m)
</span><a href="Hasura.Server.Logging.html#emptyExtraHttpLogMetadata"><span class="hs-identifier hs-var hs-var hs-var">emptyExtraHttpLogMetadata</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (m :: * -&gt; *). HttpLog m =&gt; ExtraHttpLogMetadata m
</span><a href="Hasura.Server.Logging.html#emptyExtraHttpLogMetadata"><span class="hs-identifier hs-var">emptyExtraHttpLogMetadata</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621687815606"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-387"></span><span>
</span><span id="line-388"></span><span>  </span><span id="local-6989586621687816800"><span class="annot"><span class="annottext">logHttpError :: Logger Hasura
-&gt; LoggingSettings
-&gt; Maybe UserInfo
-&gt; RequestId
-&gt; Request
-&gt; (ByteString, Maybe Value)
-&gt; QErr
-&gt; [Header]
-&gt; HttpLogMetadata (ExceptT e m)
-&gt; Bool
-&gt; ExceptT e m ()
</span><a href="Hasura.Server.Logging.html#logHttpError"><span class="hs-identifier hs-var hs-var hs-var">logHttpError</span></a></span></span><span> </span><span id="local-6989586621687816801"><span class="annot"><span class="annottext">Logger Hasura
</span><a href="#local-6989586621687816801"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621687816802"><span class="annot"><span class="annottext">LoggingSettings
</span><a href="#local-6989586621687816802"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621687816803"><span class="annot"><span class="annottext">Maybe UserInfo
</span><a href="#local-6989586621687816803"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621687816804"><span class="annot"><span class="annottext">RequestId
</span><a href="#local-6989586621687816804"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621687816805"><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621687816805"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621687816806"><span class="annot"><span class="annottext">(ByteString, Maybe Value)
</span><a href="#local-6989586621687816806"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621687816807"><span class="annot"><span class="annottext">QErr
</span><a href="#local-6989586621687816807"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621687816808"><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621687816808"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621687816809"><span class="annot"><span class="annottext">HttpLogMetadata (ExceptT e m)
</span><a href="#local-6989586621687816809"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621687816810"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621687816810"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m () -&gt; ExceptT e m ()
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT e m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m () -&gt; ExceptT e m ()) -&gt; m () -&gt; ExceptT e m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Logger Hasura
-&gt; LoggingSettings
-&gt; Maybe UserInfo
-&gt; RequestId
-&gt; Request
-&gt; (ByteString, Maybe Value)
-&gt; QErr
-&gt; [Header]
-&gt; HttpLogMetadata m
-&gt; Bool
-&gt; m ()
forall (m :: * -&gt; *).
HttpLog m =&gt;
Logger Hasura
-&gt; LoggingSettings
-&gt; Maybe UserInfo
-&gt; RequestId
-&gt; Request
-&gt; (ByteString, Maybe Value)
-&gt; QErr
-&gt; [Header]
-&gt; HttpLogMetadata m
-&gt; Bool
-&gt; m ()
</span><a href="Hasura.Server.Logging.html#logHttpError"><span class="hs-identifier hs-var">logHttpError</span></a></span><span> </span><span class="annot"><span class="annottext">Logger Hasura
</span><a href="#local-6989586621687816801"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">LoggingSettings
</span><a href="#local-6989586621687816802"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe UserInfo
</span><a href="#local-6989586621687816803"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">RequestId
</span><a href="#local-6989586621687816804"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621687816805"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString, Maybe Value)
</span><a href="#local-6989586621687816806"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">QErr
</span><a href="#local-6989586621687816807"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621687816808"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">HttpLogMetadata m
HttpLogMetadata (ExceptT e m)
</span><a href="#local-6989586621687816809"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621687816810"><span class="hs-identifier hs-var">j</span></a></span><span>
</span><span id="line-389"></span><span>
</span><span id="line-390"></span><span>  </span><span id="local-6989586621687816814"><span class="annot"><span class="annottext">logHttpSuccess :: Logger Hasura
-&gt; LoggingSettings
-&gt; Maybe UserInfo
-&gt; RequestId
-&gt; Request
-&gt; (ByteString, Maybe Value)
-&gt; ByteString
-&gt; ByteString
-&gt; Maybe (DiffTime, DiffTime)
-&gt; Maybe CompressionType
-&gt; [Header]
-&gt; HttpLogMetadata (ExceptT e m)
-&gt; Bool
-&gt; ExceptT e m ()
</span><a href="Hasura.Server.Logging.html#logHttpSuccess"><span class="hs-identifier hs-var hs-var hs-var">logHttpSuccess</span></a></span></span><span> </span><span id="local-6989586621687816815"><span class="annot"><span class="annottext">Logger Hasura
</span><a href="#local-6989586621687816815"><span class="hs-identifier hs-var">a</span></a></span></span><span> </span><span id="local-6989586621687816816"><span class="annot"><span class="annottext">LoggingSettings
</span><a href="#local-6989586621687816816"><span class="hs-identifier hs-var">b</span></a></span></span><span> </span><span id="local-6989586621687816817"><span class="annot"><span class="annottext">Maybe UserInfo
</span><a href="#local-6989586621687816817"><span class="hs-identifier hs-var">c</span></a></span></span><span> </span><span id="local-6989586621687816818"><span class="annot"><span class="annottext">RequestId
</span><a href="#local-6989586621687816818"><span class="hs-identifier hs-var">d</span></a></span></span><span> </span><span id="local-6989586621687816819"><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621687816819"><span class="hs-identifier hs-var">e</span></a></span></span><span> </span><span id="local-6989586621687816820"><span class="annot"><span class="annottext">(ByteString, Maybe Value)
</span><a href="#local-6989586621687816820"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span id="local-6989586621687816821"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621687816821"><span class="hs-identifier hs-var">g</span></a></span></span><span> </span><span id="local-6989586621687816822"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621687816822"><span class="hs-identifier hs-var">h</span></a></span></span><span> </span><span id="local-6989586621687816823"><span class="annot"><span class="annottext">Maybe (DiffTime, DiffTime)
</span><a href="#local-6989586621687816823"><span class="hs-identifier hs-var">i</span></a></span></span><span> </span><span id="local-6989586621687816824"><span class="annot"><span class="annottext">Maybe CompressionType
</span><a href="#local-6989586621687816824"><span class="hs-identifier hs-var">j</span></a></span></span><span> </span><span id="local-6989586621687816825"><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621687816825"><span class="hs-identifier hs-var">k</span></a></span></span><span> </span><span id="local-6989586621687816826"><span class="annot"><span class="annottext">HttpLogMetadata (ExceptT e m)
</span><a href="#local-6989586621687816826"><span class="hs-identifier hs-var">l</span></a></span></span><span> </span><span id="local-6989586621687816827"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621687816827"><span class="hs-identifier hs-var">m</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m () -&gt; ExceptT e m ()
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; ExceptT e m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">(m () -&gt; ExceptT e m ()) -&gt; m () -&gt; ExceptT e m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Logger Hasura
-&gt; LoggingSettings
-&gt; Maybe UserInfo
-&gt; RequestId
-&gt; Request
-&gt; (ByteString, Maybe Value)
-&gt; ByteString
-&gt; ByteString
-&gt; Maybe (DiffTime, DiffTime)
-&gt; Maybe CompressionType
-&gt; [Header]
-&gt; HttpLogMetadata m
-&gt; Bool
-&gt; m ()
forall (m :: * -&gt; *).
HttpLog m =&gt;
Logger Hasura
-&gt; LoggingSettings
-&gt; Maybe UserInfo
-&gt; RequestId
-&gt; Request
-&gt; (ByteString, Maybe Value)
-&gt; ByteString
-&gt; ByteString
-&gt; Maybe (DiffTime, DiffTime)
-&gt; Maybe CompressionType
-&gt; [Header]
-&gt; HttpLogMetadata m
-&gt; Bool
-&gt; m ()
</span><a href="Hasura.Server.Logging.html#logHttpSuccess"><span class="hs-identifier hs-var">logHttpSuccess</span></a></span><span> </span><span class="annot"><span class="annottext">Logger Hasura
</span><a href="#local-6989586621687816815"><span class="hs-identifier hs-var">a</span></a></span><span> </span><span class="annot"><span class="annottext">LoggingSettings
</span><a href="#local-6989586621687816816"><span class="hs-identifier hs-var">b</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe UserInfo
</span><a href="#local-6989586621687816817"><span class="hs-identifier hs-var">c</span></a></span><span> </span><span class="annot"><span class="annottext">RequestId
</span><a href="#local-6989586621687816818"><span class="hs-identifier hs-var">d</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621687816819"><span class="hs-identifier hs-var">e</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString, Maybe Value)
</span><a href="#local-6989586621687816820"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621687816821"><span class="hs-identifier hs-var">g</span></a></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621687816822"><span class="hs-identifier hs-var">h</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (DiffTime, DiffTime)
</span><a href="#local-6989586621687816823"><span class="hs-identifier hs-var">i</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe CompressionType
</span><a href="#local-6989586621687816824"><span class="hs-identifier hs-var">j</span></a></span><span> </span><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621687816825"><span class="hs-identifier hs-var">k</span></a></span><span> </span><span class="annot"><span class="annottext">HttpLogMetadata m
HttpLogMetadata (ExceptT e m)
</span><a href="#local-6989586621687816826"><span class="hs-identifier hs-var">l</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621687816827"><span class="hs-identifier hs-var">m</span></a></span><span>
</span><span id="line-391"></span><span>
</span><span id="line-392"></span><span class="annot"><span class="hs-comment">-- | Log information about the HTTP request</span></span><span>
</span><span id="line-393"></span><span class="hs-keyword">data</span><span> </span><span id="HttpInfoLog"><span class="annot"><a href="Hasura.Server.Logging.html#HttpInfoLog"><span class="hs-identifier hs-var">HttpInfoLog</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="HttpInfoLog"><span class="annot"><a href="Hasura.Server.Logging.html#HttpInfoLog"><span class="hs-identifier hs-var">HttpInfoLog</span></a></span></span><span>
</span><span id="line-394"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="hlStatus"><span class="annot"><span class="annottext">HttpInfoLog -&gt; Status
</span><a href="Hasura.Server.Logging.html#hlStatus"><span class="hs-identifier hs-var hs-var">hlStatus</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/http-types-0.12.3-48808bff700213a8ec5159613d94db74ab5738412a48ffcd3e274142637b29eb/share/doc/html/src/Network.HTTP.Types.Status.html/Network.HTTP.Types.Status.html#Status"><span class="hs-identifier hs-type">HTTP.Status</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-395"></span><span>    </span><span id="hlMethod"><span class="annot"><span class="annottext">HttpInfoLog -&gt; Text
</span><a href="Hasura.Server.Logging.html#hlMethod"><span class="hs-identifier hs-var hs-var">hlMethod</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">,</span><span>
</span><span id="line-396"></span><span>    </span><span id="hlSource"><span class="annot"><span class="annottext">HttpInfoLog -&gt; IpAddress
</span><a href="Hasura.Server.Logging.html#hlSource"><span class="hs-identifier hs-var hs-var">hlSource</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Network.Wai.Extended.html/Network.Wai.Extended.html#IpAddress"><span class="hs-identifier hs-type">Wai.IpAddress</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-397"></span><span>    </span><span id="hlPath"><span class="annot"><span class="annottext">HttpInfoLog -&gt; Text
</span><a href="Hasura.Server.Logging.html#hlPath"><span class="hs-identifier hs-var hs-var">hlPath</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">,</span><span>
</span><span id="line-398"></span><span>    </span><span id="hlHttpVersion"><span class="annot"><span class="annottext">HttpInfoLog -&gt; HttpVersion
</span><a href="Hasura.Server.Logging.html#hlHttpVersion"><span class="hs-identifier hs-var hs-var">hlHttpVersion</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/http-types-0.12.3-48808bff700213a8ec5159613d94db74ab5738412a48ffcd3e274142637b29eb/share/doc/html/src/Network.HTTP.Types.Version.html/Network.HTTP.Types.Version.html#HttpVersion"><span class="hs-identifier hs-type">HTTP.HttpVersion</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-399"></span><span>    </span><span id="hlCompression"><span class="annot"><span class="annottext">HttpInfoLog -&gt; Maybe CompressionType
</span><a href="Hasura.Server.Logging.html#hlCompression"><span class="hs-identifier hs-var hs-var">hlCompression</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.Server.Compression.html#CompressionType"><span class="hs-identifier hs-type">CompressionType</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-400"></span><span>    </span><span class="annot"><span class="hs-comment">-- | all the request headers</span></span><span>
</span><span id="line-401"></span><span>    </span><span id="hlHeaders"><span class="annot"><span class="annottext">HttpInfoLog -&gt; [Header]
</span><a href="Hasura.Server.Logging.html#hlHeaders"><span class="hs-identifier hs-var hs-var">hlHeaders</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">[</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/http-types-0.12.3-48808bff700213a8ec5159613d94db74ab5738412a48ffcd3e274142637b29eb/share/doc/html/src/Network.HTTP.Types.Header.html/Network.HTTP.Types.Header.html#Header"><span class="hs-identifier hs-type">HTTP.Header</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-402"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-403"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621687816837"><span id="local-6989586621687816851"><span class="annot"><span class="annottext">HttpInfoLog -&gt; HttpInfoLog -&gt; Bool
(HttpInfoLog -&gt; HttpInfoLog -&gt; Bool)
-&gt; (HttpInfoLog -&gt; HttpInfoLog -&gt; Bool) -&gt; Eq HttpInfoLog
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: HttpInfoLog -&gt; HttpInfoLog -&gt; Bool
== :: HttpInfoLog -&gt; HttpInfoLog -&gt; Bool
$c/= :: HttpInfoLog -&gt; HttpInfoLog -&gt; Bool
/= :: HttpInfoLog -&gt; HttpInfoLog -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-404"></span><span>
</span><span id="line-405"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687816863"><span id="local-6989586621687816867"><span id="local-6989586621687816870"><span id="local-6989586621687816873"><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#ToJSON"><span class="hs-identifier hs-type">J.ToJSON</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#HttpInfoLog"><span class="hs-identifier hs-type">HttpInfoLog</span></a></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-406"></span><span>  </span><span id="local-6989586621687816897"><span class="annot"><span class="annottext">toJSON :: HttpInfoLog -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toJSON"><span class="hs-identifier hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Logging.html#HttpInfoLog"><span class="hs-identifier hs-type">HttpInfoLog</span></a></span><span> </span><span id="local-6989586621687816898"><span class="annot"><span class="annottext">Status
</span><a href="#local-6989586621687816898"><span class="hs-identifier hs-var">st</span></a></span></span><span> </span><span id="local-6989586621687816899"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687816899"><span class="hs-identifier hs-var">met</span></a></span></span><span> </span><span id="local-6989586621687816900"><span class="annot"><span class="annottext">IpAddress
</span><a href="#local-6989586621687816900"><span class="hs-identifier hs-var">src</span></a></span></span><span> </span><span id="local-6989586621687816901"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687816901"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span id="local-6989586621687816902"><span class="annot"><span class="annottext">HttpVersion
</span><a href="#local-6989586621687816902"><span class="hs-identifier hs-var">hv</span></a></span></span><span> </span><span id="local-6989586621687816903"><span class="annot"><span class="annottext">Maybe CompressionType
</span><a href="#local-6989586621687816903"><span class="hs-identifier hs-var">compressTypeM</span></a></span></span><span> </span><span class="annot"><span class="annottext">[Header]
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-407"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#object"><span class="hs-identifier hs-var">J.object</span></a></span><span>
</span><span id="line-408"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;status&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Int -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#.%3D"><span class="hs-operator hs-var">J..=</span></a></span><span> </span><span class="annot"><span class="annottext">Status -&gt; Int
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/http-types-0.12.3-48808bff700213a8ec5159613d94db74ab5738412a48ffcd3e274142637b29eb/share/doc/html/src/Network.HTTP.Types.Status.html/Network.HTTP.Types.Status.html#statusCode"><span class="hs-identifier hs-var">HTTP.statusCode</span></a></span><span> </span><span class="annot"><span class="annottext">Status
</span><a href="#local-6989586621687816898"><span class="hs-identifier hs-var">st</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-409"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;method&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Text -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#.%3D"><span class="hs-operator hs-var">J..=</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687816899"><span class="hs-identifier hs-var">met</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-410"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;ip&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Text -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#.%3D"><span class="hs-operator hs-var">J..=</span></a></span><span> </span><span class="annot"><span class="annottext">IpAddress -&gt; Text
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Network.Wai.Extended.html/Network.Wai.Extended.html#showIPAddress"><span class="hs-identifier hs-var">Wai.showIPAddress</span></a></span><span> </span><span class="annot"><span class="annottext">IpAddress
</span><a href="#local-6989586621687816900"><span class="hs-identifier hs-var">src</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-411"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;url&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Text -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#.%3D"><span class="hs-operator hs-var">J..=</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687816901"><span class="hs-identifier hs-var">path</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-412"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;http_version&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; String -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#.%3D"><span class="hs-operator hs-var">J..=</span></a></span><span> </span><span class="annot"><span class="annottext">HttpVersion -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">HttpVersion
</span><a href="#local-6989586621687816902"><span class="hs-identifier hs-var">hv</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-413"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;content_encoding&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Maybe Text -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#.%3D"><span class="hs-operator hs-var">J..=</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CompressionType -&gt; Text
</span><a href="Hasura.Server.Compression.html#compressionTypeToTxt"><span class="hs-identifier hs-var">compressionTypeToTxt</span></a></span><span> </span><span class="annot"><span class="annottext">(CompressionType -&gt; Text) -&gt; Maybe CompressionType -&gt; Maybe Text
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe CompressionType
</span><a href="#local-6989586621687816903"><span class="hs-identifier hs-var">compressTypeM</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-414"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-415"></span><span>
</span><span id="line-416"></span><span class="annot"><span class="hs-comment">-- | Information about a GraphQL/Hasura metadata operation over HTTP</span></span><span>
</span><span id="line-417"></span><span class="hs-keyword">data</span><span> </span><span id="OperationLog"><span class="annot"><a href="Hasura.Server.Logging.html#OperationLog"><span class="hs-identifier hs-var">OperationLog</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="OperationLog"><span class="annot"><a href="Hasura.Server.Logging.html#OperationLog"><span class="hs-identifier hs-var">OperationLog</span></a></span></span><span>
</span><span id="line-418"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="olRequestId"><span class="annot"><span class="annottext">OperationLog -&gt; RequestId
</span><a href="Hasura.Server.Logging.html#olRequestId"><span class="hs-identifier hs-var hs-var">olRequestId</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Server.Types.html#RequestId"><span class="hs-identifier hs-type">RequestId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-419"></span><span>    </span><span id="olUserVars"><span class="annot"><span class="annottext">OperationLog -&gt; Maybe SessionVariables
</span><a href="Hasura.Server.Logging.html#olUserVars"><span class="hs-identifier hs-var hs-var">olUserVars</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.Authentication.Session.html#SessionVariables"><span class="hs-identifier hs-type">SessionVariables</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-420"></span><span>    </span><span id="olResponseSize"><span class="annot"><span class="annottext">OperationLog -&gt; Maybe Int64
</span><a href="Hasura.Server.Logging.html#olResponseSize"><span class="hs-identifier hs-var hs-var">olResponseSize</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Int64</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-421"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Response size before compression</span></span><span>
</span><span id="line-422"></span><span>    </span><span id="olUncompressedResponseSize"><span class="annot"><span class="annottext">OperationLog -&gt; Int64
</span><a href="Hasura.Server.Logging.html#olUncompressedResponseSize"><span class="hs-identifier hs-var hs-var">olUncompressedResponseSize</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Int64</span></span><span class="hs-special">,</span><span>
</span><span id="line-423"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Request IO wait time, i.e. time spent reading the full request from the socket.</span></span><span>
</span><span id="line-424"></span><span>    </span><span id="olRequestReadTime"><span class="annot"><span class="annottext">OperationLog -&gt; Maybe Seconds
</span><a href="Hasura.Server.Logging.html#olRequestReadTime"><span class="hs-identifier hs-var hs-var">olRequestReadTime</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Data.Time.Clock.Units.html/Data.Time.Clock.Units.html#Seconds"><span class="hs-identifier hs-type">Seconds</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-425"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Service time, not including request IO wait time.</span></span><span>
</span><span id="line-426"></span><span>    </span><span id="olQueryExecutionTime"><span class="annot"><span class="annottext">OperationLog -&gt; Maybe Seconds
</span><a href="Hasura.Server.Logging.html#olQueryExecutionTime"><span class="hs-identifier hs-var hs-var">olQueryExecutionTime</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Data.Time.Clock.Units.html/Data.Time.Clock.Units.html#Seconds"><span class="hs-identifier hs-type">Seconds</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-427"></span><span>    </span><span id="olQuery"><span class="annot"><span class="annottext">OperationLog -&gt; Maybe Value
</span><a href="Hasura.Server.Logging.html#olQuery"><span class="hs-identifier hs-var hs-var">olQuery</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#Value"><span class="hs-identifier hs-type">J.Value</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-428"></span><span>    </span><span id="olRawQuery"><span class="annot"><span class="annottext">OperationLog -&gt; Maybe Text
</span><a href="Hasura.Server.Logging.html#olRawQuery"><span class="hs-identifier hs-var hs-var">olRawQuery</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-429"></span><span>    </span><span id="olError"><span class="annot"><span class="annottext">OperationLog -&gt; Maybe QErr
</span><a href="Hasura.Server.Logging.html#olError"><span class="hs-identifier hs-var hs-var">olError</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#QErr"><span class="hs-identifier hs-type">QErr</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-430"></span><span>    </span><span id="olRequestMode"><span class="annot"><span class="annottext">OperationLog -&gt; RequestMode
</span><a href="Hasura.Server.Logging.html#olRequestMode"><span class="hs-identifier hs-var hs-var">olRequestMode</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Server.Logging.html#RequestMode"><span class="hs-identifier hs-type">RequestMode</span></a></span><span>
</span><span id="line-431"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-432"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621687816918"><span id="local-6989586621687816936"><span class="annot"><span class="annottext">OperationLog -&gt; OperationLog -&gt; Bool
(OperationLog -&gt; OperationLog -&gt; Bool)
-&gt; (OperationLog -&gt; OperationLog -&gt; Bool) -&gt; Eq OperationLog
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: OperationLog -&gt; OperationLog -&gt; Bool
== :: OperationLog -&gt; OperationLog -&gt; Bool
$c/= :: OperationLog -&gt; OperationLog -&gt; Bool
/= :: OperationLog -&gt; OperationLog -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687816942"><span id="local-6989586621687816944"><span class="annot"><span class="annottext">(forall x. OperationLog -&gt; Rep OperationLog x)
-&gt; (forall x. Rep OperationLog x -&gt; OperationLog)
-&gt; Generic OperationLog
forall x. Rep OperationLog x -&gt; OperationLog
forall x. OperationLog -&gt; Rep OperationLog x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. OperationLog -&gt; Rep OperationLog x
from :: forall x. OperationLog -&gt; Rep OperationLog x
$cto :: forall x. Rep OperationLog x -&gt; OperationLog
to :: forall x. Rep OperationLog x -&gt; OperationLog
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-433"></span><span>
</span><span id="line-434"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687816949"><span id="local-6989586621687816953"><span id="local-6989586621687816956"><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#ToJSON"><span class="hs-identifier hs-type">J.ToJSON</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#OperationLog"><span class="hs-identifier hs-type">OperationLog</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-435"></span><span>  </span><span id="local-6989586621687817154"><span class="annot"><span class="annottext">toJSON :: OperationLog -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toJSON"><span class="hs-identifier hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Options -&gt; OperationLog -&gt; Value
forall a.
(Generic a, GToJSON' Value Zero (Rep a)) =&gt;
Options -&gt; a -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#genericToJSON"><span class="hs-identifier hs-var">J.genericToJSON</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#hasuraJSON"><span class="hs-identifier hs-var">hasuraJSON</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#omitNothingFields"><span class="hs-identifier hs-var">J.omitNothingFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">True</span></span><span class="hs-special">}</span><span>
</span><span id="line-436"></span><span>  </span><span id="local-6989586621687817331"><span class="annot"><span class="annottext">toEncoding :: OperationLog -&gt; Encoding
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toEncoding"><span class="hs-identifier hs-var hs-var hs-var">toEncoding</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Options -&gt; OperationLog -&gt; Encoding
forall a.
(Generic a, GToJSON' Encoding Zero (Rep a)) =&gt;
Options -&gt; a -&gt; Encoding
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#genericToEncoding"><span class="hs-identifier hs-var">J.genericToEncoding</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#hasuraJSON"><span class="hs-identifier hs-var">hasuraJSON</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#omitNothingFields"><span class="hs-identifier hs-var">J.omitNothingFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">True</span></span><span class="hs-special">}</span><span>
</span><span id="line-437"></span><span>
</span><span id="line-438"></span><span class="hs-comment">-- | @BatchOperationSuccessLog@ contains the information required for a single</span><span>
</span><span id="line-439"></span><span class="hs-comment">--   successful operation in a batch request for OSS. This type is a subset of the @GQLQueryOperationSuccessLog@</span><span>
</span><span id="line-440"></span><span class="hs-keyword">data</span><span> </span><span id="BatchOperationSuccessLog"><span class="annot"><a href="Hasura.Server.Logging.html#BatchOperationSuccessLog"><span class="hs-identifier hs-var">BatchOperationSuccessLog</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="BatchOperationSuccessLog"><span class="annot"><a href="Hasura.Server.Logging.html#BatchOperationSuccessLog"><span class="hs-identifier hs-var">BatchOperationSuccessLog</span></a></span></span><span>
</span><span id="line-441"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_bolQuery"><span class="annot"><span class="annottext">BatchOperationSuccessLog -&gt; Maybe Value
</span><a href="Hasura.Server.Logging.html#_bolQuery"><span class="hs-identifier hs-var hs-var">_bolQuery</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#Value"><span class="hs-identifier hs-type">J.Value</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-442"></span><span>    </span><span id="_bolResponseSize"><span class="annot"><span class="annottext">BatchOperationSuccessLog -&gt; Int64
</span><a href="Hasura.Server.Logging.html#_bolResponseSize"><span class="hs-identifier hs-var hs-var">_bolResponseSize</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Int64</span></span><span class="hs-special">,</span><span>
</span><span id="line-443"></span><span>    </span><span id="_bolQueryExecutionTime"><span class="annot"><span class="annottext">BatchOperationSuccessLog -&gt; Seconds
</span><a href="Hasura.Server.Logging.html#_bolQueryExecutionTime"><span class="hs-identifier hs-var hs-var">_bolQueryExecutionTime</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Data.Time.Clock.Units.html/Data.Time.Clock.Units.html#Seconds"><span class="hs-identifier hs-type">Seconds</span></a></span><span>
</span><span id="line-444"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-445"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621687817337"><span id="local-6989586621687817343"><span class="annot"><span class="annottext">BatchOperationSuccessLog -&gt; BatchOperationSuccessLog -&gt; Bool
(BatchOperationSuccessLog -&gt; BatchOperationSuccessLog -&gt; Bool)
-&gt; (BatchOperationSuccessLog -&gt; BatchOperationSuccessLog -&gt; Bool)
-&gt; Eq BatchOperationSuccessLog
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: BatchOperationSuccessLog -&gt; BatchOperationSuccessLog -&gt; Bool
== :: BatchOperationSuccessLog -&gt; BatchOperationSuccessLog -&gt; Bool
$c/= :: BatchOperationSuccessLog -&gt; BatchOperationSuccessLog -&gt; Bool
/= :: BatchOperationSuccessLog -&gt; BatchOperationSuccessLog -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687817347"><span id="local-6989586621687817349"><span class="annot"><span class="annottext">(forall x.
 BatchOperationSuccessLog -&gt; Rep BatchOperationSuccessLog x)
-&gt; (forall x.
    Rep BatchOperationSuccessLog x -&gt; BatchOperationSuccessLog)
-&gt; Generic BatchOperationSuccessLog
forall x.
Rep BatchOperationSuccessLog x -&gt; BatchOperationSuccessLog
forall x.
BatchOperationSuccessLog -&gt; Rep BatchOperationSuccessLog x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x.
BatchOperationSuccessLog -&gt; Rep BatchOperationSuccessLog x
from :: forall x.
BatchOperationSuccessLog -&gt; Rep BatchOperationSuccessLog x
$cto :: forall x.
Rep BatchOperationSuccessLog x -&gt; BatchOperationSuccessLog
to :: forall x.
Rep BatchOperationSuccessLog x -&gt; BatchOperationSuccessLog
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-446"></span><span>
</span><span id="line-447"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687817354"><span id="local-6989586621687817358"><span id="local-6989586621687817361"><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#ToJSON"><span class="hs-identifier hs-type">J.ToJSON</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#BatchOperationSuccessLog"><span class="hs-identifier hs-type">BatchOperationSuccessLog</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-448"></span><span>  </span><span id="local-6989586621687817444"><span class="annot"><span class="annottext">toJSON :: BatchOperationSuccessLog -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toJSON"><span class="hs-identifier hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Options -&gt; BatchOperationSuccessLog -&gt; Value
forall a.
(Generic a, GToJSON' Value Zero (Rep a)) =&gt;
Options -&gt; a -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#genericToJSON"><span class="hs-identifier hs-var">J.genericToJSON</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#hasuraJSON"><span class="hs-identifier hs-var">hasuraJSON</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#omitNothingFields"><span class="hs-identifier hs-var">J.omitNothingFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">True</span></span><span class="hs-special">}</span><span>
</span><span id="line-449"></span><span>  </span><span id="local-6989586621687817523"><span class="annot"><span class="annottext">toEncoding :: BatchOperationSuccessLog -&gt; Encoding
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toEncoding"><span class="hs-identifier hs-var hs-var hs-var">toEncoding</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Options -&gt; BatchOperationSuccessLog -&gt; Encoding
forall a.
(Generic a, GToJSON' Encoding Zero (Rep a)) =&gt;
Options -&gt; a -&gt; Encoding
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#genericToEncoding"><span class="hs-identifier hs-var">J.genericToEncoding</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#hasuraJSON"><span class="hs-identifier hs-var">hasuraJSON</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#omitNothingFields"><span class="hs-identifier hs-var">J.omitNothingFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">True</span></span><span class="hs-special">}</span><span>
</span><span id="line-450"></span><span>
</span><span id="line-451"></span><span class="hs-comment">-- | @BatchOperationSuccessLog@ contains the information required for a single</span><span>
</span><span id="line-452"></span><span class="hs-comment">--   erroneous operation in a batch request for OSS. This type is a subset of the @GQLQueryOperationErrorLog@</span><span>
</span><span id="line-453"></span><span class="hs-keyword">data</span><span> </span><span id="BatchOperationErrorLog"><span class="annot"><a href="Hasura.Server.Logging.html#BatchOperationErrorLog"><span class="hs-identifier hs-var">BatchOperationErrorLog</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="BatchOperationErrorLog"><span class="annot"><a href="Hasura.Server.Logging.html#BatchOperationErrorLog"><span class="hs-identifier hs-var">BatchOperationErrorLog</span></a></span></span><span>
</span><span id="line-454"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_belQuery"><span class="annot"><span class="annottext">BatchOperationErrorLog -&gt; Maybe Value
</span><a href="Hasura.Server.Logging.html#_belQuery"><span class="hs-identifier hs-var hs-var">_belQuery</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#Value"><span class="hs-identifier hs-type">J.Value</span></a></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-455"></span><span>    </span><span id="_belError"><span class="annot"><span class="annottext">BatchOperationErrorLog -&gt; QErr
</span><a href="Hasura.Server.Logging.html#_belError"><span class="hs-identifier hs-var hs-var">_belError</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#QErr"><span class="hs-identifier hs-type">QErr</span></a></span><span>
</span><span id="line-456"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-457"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621687817528"><span id="local-6989586621687817533"><span class="annot"><span class="annottext">BatchOperationErrorLog -&gt; BatchOperationErrorLog -&gt; Bool
(BatchOperationErrorLog -&gt; BatchOperationErrorLog -&gt; Bool)
-&gt; (BatchOperationErrorLog -&gt; BatchOperationErrorLog -&gt; Bool)
-&gt; Eq BatchOperationErrorLog
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: BatchOperationErrorLog -&gt; BatchOperationErrorLog -&gt; Bool
== :: BatchOperationErrorLog -&gt; BatchOperationErrorLog -&gt; Bool
$c/= :: BatchOperationErrorLog -&gt; BatchOperationErrorLog -&gt; Bool
/= :: BatchOperationErrorLog -&gt; BatchOperationErrorLog -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687817537"><span id="local-6989586621687817539"><span class="annot"><span class="annottext">(forall x. BatchOperationErrorLog -&gt; Rep BatchOperationErrorLog x)
-&gt; (forall x.
    Rep BatchOperationErrorLog x -&gt; BatchOperationErrorLog)
-&gt; Generic BatchOperationErrorLog
forall x. Rep BatchOperationErrorLog x -&gt; BatchOperationErrorLog
forall x. BatchOperationErrorLog -&gt; Rep BatchOperationErrorLog x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. BatchOperationErrorLog -&gt; Rep BatchOperationErrorLog x
from :: forall x. BatchOperationErrorLog -&gt; Rep BatchOperationErrorLog x
$cto :: forall x. Rep BatchOperationErrorLog x -&gt; BatchOperationErrorLog
to :: forall x. Rep BatchOperationErrorLog x -&gt; BatchOperationErrorLog
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-458"></span><span>
</span><span id="line-459"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687817544"><span id="local-6989586621687817548"><span id="local-6989586621687817551"><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#ToJSON"><span class="hs-identifier hs-type">J.ToJSON</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#BatchOperationErrorLog"><span class="hs-identifier hs-type">BatchOperationErrorLog</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-460"></span><span>  </span><span id="local-6989586621687817616"><span class="annot"><span class="annottext">toJSON :: BatchOperationErrorLog -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toJSON"><span class="hs-identifier hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Options -&gt; BatchOperationErrorLog -&gt; Value
forall a.
(Generic a, GToJSON' Value Zero (Rep a)) =&gt;
Options -&gt; a -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#genericToJSON"><span class="hs-identifier hs-var">J.genericToJSON</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#hasuraJSON"><span class="hs-identifier hs-var">hasuraJSON</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#omitNothingFields"><span class="hs-identifier hs-var">J.omitNothingFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">True</span></span><span class="hs-special">}</span><span>
</span><span id="line-461"></span><span>  </span><span id="local-6989586621687817679"><span class="annot"><span class="annottext">toEncoding :: BatchOperationErrorLog -&gt; Encoding
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toEncoding"><span class="hs-identifier hs-var hs-var hs-var">toEncoding</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Options -&gt; BatchOperationErrorLog -&gt; Encoding
forall a.
(Generic a, GToJSON' Encoding Zero (Rep a)) =&gt;
Options -&gt; a -&gt; Encoding
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#genericToEncoding"><span class="hs-identifier hs-var">J.genericToEncoding</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#hasuraJSON"><span class="hs-identifier hs-var">hasuraJSON</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#omitNothingFields"><span class="hs-identifier hs-var">J.omitNothingFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">True</span></span><span class="hs-special">}</span><span>
</span><span id="line-462"></span><span>
</span><span id="line-463"></span><span class="hs-keyword">data</span><span> </span><span id="BatchOperationLog"><span class="annot"><a href="Hasura.Server.Logging.html#BatchOperationLog"><span class="hs-identifier hs-var">BatchOperationLog</span></a></span></span><span>
</span><span id="line-464"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="BatchOperationSuccess"><span class="annot"><a href="Hasura.Server.Logging.html#BatchOperationSuccess"><span class="hs-identifier hs-var">BatchOperationSuccess</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Server.Logging.html#BatchOperationSuccessLog"><span class="hs-identifier hs-type">BatchOperationSuccessLog</span></a></span><span>
</span><span id="line-465"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="BatchOperationError"><span class="annot"><a href="Hasura.Server.Logging.html#BatchOperationError"><span class="hs-identifier hs-var">BatchOperationError</span></a></span></span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Server.Logging.html#BatchOperationErrorLog"><span class="hs-identifier hs-type">BatchOperationErrorLog</span></a></span><span>
</span><span id="line-466"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621687817683"><span id="local-6989586621687817689"><span class="annot"><span class="annottext">BatchOperationLog -&gt; BatchOperationLog -&gt; Bool
(BatchOperationLog -&gt; BatchOperationLog -&gt; Bool)
-&gt; (BatchOperationLog -&gt; BatchOperationLog -&gt; Bool)
-&gt; Eq BatchOperationLog
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: BatchOperationLog -&gt; BatchOperationLog -&gt; Bool
== :: BatchOperationLog -&gt; BatchOperationLog -&gt; Bool
$c/= :: BatchOperationLog -&gt; BatchOperationLog -&gt; Bool
/= :: BatchOperationLog -&gt; BatchOperationLog -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-467"></span><span>
</span><span id="line-468"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687817694"><span id="local-6989586621687817698"><span id="local-6989586621687817701"><span id="local-6989586621687817704"><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#ToJSON"><span class="hs-identifier hs-type">J.ToJSON</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#BatchOperationLog"><span class="hs-identifier hs-type">BatchOperationLog</span></a></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-469"></span><span>  </span><span id="local-6989586621687817708"><span class="annot"><span class="annottext">toJSON :: BatchOperationLog -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toJSON"><span class="hs-identifier hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-470"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#BatchOperationSuccess"><span class="hs-identifier hs-type">BatchOperationSuccess</span></a></span><span> </span><span id="local-6989586621687817709"><span class="annot"><span class="annottext">BatchOperationSuccessLog
</span><a href="#local-6989586621687817709"><span class="hs-identifier hs-var">successLog</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BatchOperationSuccessLog -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toJSON"><span class="hs-identifier hs-var">J.toJSON</span></a></span><span> </span><span class="annot"><span class="annottext">BatchOperationSuccessLog
</span><a href="#local-6989586621687817709"><span class="hs-identifier hs-var">successLog</span></a></span><span>
</span><span id="line-471"></span><span>    </span><span class="annot"><a href="Hasura.Server.Logging.html#BatchOperationError"><span class="hs-identifier hs-type">BatchOperationError</span></a></span><span> </span><span id="local-6989586621687817710"><span class="annot"><span class="annottext">BatchOperationErrorLog
</span><a href="#local-6989586621687817710"><span class="hs-identifier hs-var">errorLog</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">BatchOperationErrorLog -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toJSON"><span class="hs-identifier hs-var">J.toJSON</span></a></span><span> </span><span class="annot"><span class="annottext">BatchOperationErrorLog
</span><a href="#local-6989586621687817710"><span class="hs-identifier hs-var">errorLog</span></a></span><span>
</span><span id="line-472"></span><span>
</span><span id="line-473"></span><span class="hs-keyword">data</span><span> </span><span id="HttpLogContext"><span class="annot"><a href="Hasura.Server.Logging.html#HttpLogContext"><span class="hs-identifier hs-var">HttpLogContext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="HttpLogContext"><span class="annot"><a href="Hasura.Server.Logging.html#HttpLogContext"><span class="hs-identifier hs-var">HttpLogContext</span></a></span></span><span>
</span><span id="line-474"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="hlcHttpInfo"><span class="annot"><span class="annottext">HttpLogContext -&gt; HttpInfoLog
</span><a href="Hasura.Server.Logging.html#hlcHttpInfo"><span class="hs-identifier hs-var hs-var">hlcHttpInfo</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Server.Logging.html#HttpInfoLog"><span class="hs-identifier hs-type">HttpInfoLog</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-475"></span><span>    </span><span id="hlcOperation"><span class="annot"><span class="annottext">HttpLogContext -&gt; OperationLog
</span><a href="Hasura.Server.Logging.html#hlcOperation"><span class="hs-identifier hs-var hs-var">hlcOperation</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Server.Logging.html#OperationLog"><span class="hs-identifier hs-type">OperationLog</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-476"></span><span>    </span><span id="hlcRequestId"><span class="annot"><span class="annottext">HttpLogContext -&gt; RequestId
</span><a href="Hasura.Server.Logging.html#hlcRequestId"><span class="hs-identifier hs-var hs-var">hlcRequestId</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Server.Types.html#RequestId"><span class="hs-identifier hs-type">RequestId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-477"></span><span>    </span><span id="hlcBatchedOperations"><span class="annot"><span class="annottext">HttpLogContext -&gt; Maybe (NonEmpty BatchOperationLog)
</span><a href="Hasura.Server.Logging.html#hlcBatchedOperations"><span class="hs-identifier hs-var hs-var">hlcBatchedOperations</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">NE.NonEmpty</span></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#BatchOperationLog"><span class="hs-identifier hs-type">BatchOperationLog</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-478"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-479"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621687817717"><span id="local-6989586621687817724"><span class="annot"><span class="annottext">HttpLogContext -&gt; HttpLogContext -&gt; Bool
(HttpLogContext -&gt; HttpLogContext -&gt; Bool)
-&gt; (HttpLogContext -&gt; HttpLogContext -&gt; Bool) -&gt; Eq HttpLogContext
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: HttpLogContext -&gt; HttpLogContext -&gt; Bool
== :: HttpLogContext -&gt; HttpLogContext -&gt; Bool
$c/= :: HttpLogContext -&gt; HttpLogContext -&gt; Bool
/= :: HttpLogContext -&gt; HttpLogContext -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687817730"><span id="local-6989586621687817732"><span class="annot"><span class="annottext">(forall x. HttpLogContext -&gt; Rep HttpLogContext x)
-&gt; (forall x. Rep HttpLogContext x -&gt; HttpLogContext)
-&gt; Generic HttpLogContext
forall x. Rep HttpLogContext x -&gt; HttpLogContext
forall x. HttpLogContext -&gt; Rep HttpLogContext x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. HttpLogContext -&gt; Rep HttpLogContext x
from :: forall x. HttpLogContext -&gt; Rep HttpLogContext x
$cto :: forall x. Rep HttpLogContext x -&gt; HttpLogContext
to :: forall x. Rep HttpLogContext x -&gt; HttpLogContext
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-480"></span><span>
</span><span id="line-481"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687817737"><span id="local-6989586621687817741"><span id="local-6989586621687817744"><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#ToJSON"><span class="hs-identifier hs-type">J.ToJSON</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#HttpLogContext"><span class="hs-identifier hs-type">HttpLogContext</span></a></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-482"></span><span>  </span><span id="local-6989586621687817847"><span class="annot"><span class="annottext">toJSON :: HttpLogContext -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toJSON"><span class="hs-identifier hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Options -&gt; HttpLogContext -&gt; Value
forall a.
(Generic a, GToJSON' Value Zero (Rep a)) =&gt;
Options -&gt; a -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#genericToJSON"><span class="hs-identifier hs-var">J.genericToJSON</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#hasuraJSON"><span class="hs-identifier hs-var">hasuraJSON</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#omitNothingFields"><span class="hs-identifier hs-var">J.omitNothingFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">True</span></span><span class="hs-special">}</span><span>
</span><span id="line-483"></span><span>  </span><span id="local-6989586621687817943"><span class="annot"><span class="annottext">toEncoding :: HttpLogContext -&gt; Encoding
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toEncoding"><span class="hs-identifier hs-var hs-var hs-var">toEncoding</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Options -&gt; HttpLogContext -&gt; Encoding
forall a.
(Generic a, GToJSON' Encoding Zero (Rep a)) =&gt;
Options -&gt; a -&gt; Encoding
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#genericToEncoding"><span class="hs-identifier hs-var">J.genericToEncoding</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#hasuraJSON"><span class="hs-identifier hs-var">hasuraJSON</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#omitNothingFields"><span class="hs-identifier hs-var">J.omitNothingFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">True</span></span><span class="hs-special">}</span><span>
</span><span id="line-484"></span><span>
</span><span id="line-485"></span><span class="hs-keyword">data</span><span> </span><span id="RequestStatus"><span class="annot"><a href="Hasura.Server.Logging.html#RequestStatus"><span class="hs-identifier hs-var">RequestStatus</span></a></span></span><span>
</span><span id="line-486"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="RequestStatusSuccess"><span class="annot"><a href="Hasura.Server.Logging.html#RequestStatusSuccess"><span class="hs-identifier hs-var">RequestStatusSuccess</span></a></span></span><span>
</span><span id="line-487"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RequestStatusError"><span class="annot"><a href="Hasura.Server.Logging.html#RequestStatusError"><span class="hs-identifier hs-var">RequestStatusError</span></a></span></span><span>
</span><span id="line-488"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621687817947"><span id="local-6989586621687817951"><span class="annot"><span class="annottext">RequestStatus -&gt; RequestStatus -&gt; Bool
(RequestStatus -&gt; RequestStatus -&gt; Bool)
-&gt; (RequestStatus -&gt; RequestStatus -&gt; Bool) -&gt; Eq RequestStatus
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: RequestStatus -&gt; RequestStatus -&gt; Bool
== :: RequestStatus -&gt; RequestStatus -&gt; Bool
$c/= :: RequestStatus -&gt; RequestStatus -&gt; Bool
/= :: RequestStatus -&gt; RequestStatus -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687817954"><span id="local-6989586621687817956"><span id="local-6989586621687817960"><span class="annot"><span class="annottext">Int -&gt; RequestStatus -&gt; ShowS
[RequestStatus] -&gt; ShowS
RequestStatus -&gt; String
(Int -&gt; RequestStatus -&gt; ShowS)
-&gt; (RequestStatus -&gt; String)
-&gt; ([RequestStatus] -&gt; ShowS)
-&gt; Show RequestStatus
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; RequestStatus -&gt; ShowS
showsPrec :: Int -&gt; RequestStatus -&gt; ShowS
$cshow :: RequestStatus -&gt; String
show :: RequestStatus -&gt; String
$cshowList :: [RequestStatus] -&gt; ShowS
showList :: [RequestStatus] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-489"></span><span>
</span><span id="line-490"></span><span class="annot"><span class="hs-comment">-- | Check if the 'query' field should be included in the http-log</span></span><span>
</span><span id="line-491"></span><span class="annot"><a href="Hasura.Server.Logging.html#isQueryIncludedInLogs"><span class="hs-identifier hs-type">isQueryIncludedInLogs</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#RequestStatus"><span class="hs-identifier hs-type">RequestStatus</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#LoggingSettings"><span class="hs-identifier hs-type">LoggingSettings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-492"></span><span id="isQueryIncludedInLogs"><span class="annot"><span class="annottext">isQueryIncludedInLogs :: RequestStatus -&gt; Text -&gt; LoggingSettings -&gt; Bool
</span><a href="Hasura.Server.Logging.html#isQueryIncludedInLogs"><span class="hs-identifier hs-var hs-var">isQueryIncludedInLogs</span></a></span></span><span> </span><span id="local-6989586621687817963"><span class="annot"><span class="annottext">RequestStatus
</span><a href="#local-6989586621687817963"><span class="hs-identifier hs-var">requestStatus</span></a></span></span><span> </span><span id="local-6989586621687817964"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687817964"><span class="hs-identifier hs-var">urlPath</span></a></span></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#LoggingSettings"><span class="hs-identifier hs-type">LoggingSettings</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687817965"><span id="local-6989586621687817966"><span id="local-6989586621687817967"><span class="annot"><span class="annottext">HashSet (EngineLogType Hasura)
HttpLogQueryOnlyOnError
MetadataQueryLoggingMode
_lsEnabledLogTypes :: LoggingSettings -&gt; HashSet (EngineLogType Hasura)
_lsMetadataQueryLoggingMode :: LoggingSettings -&gt; MetadataQueryLoggingMode
_lsHttpLogQueryOnlyOnError :: LoggingSettings -&gt; HttpLogQueryOnlyOnError
_lsEnabledLogTypes :: HashSet (EngineLogType Hasura)
_lsMetadataQueryLoggingMode :: MetadataQueryLoggingMode
_lsHttpLogQueryOnlyOnError :: HttpLogQueryOnlyOnError
</span><a href="Hasura.Server.Logging.html#_lsEnabledLogTypes"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span><span class="hs-special">}</span><span>
</span><span id="line-493"></span><span>  </span><span class="hs-comment">-- if HttpLogQueryOnlyOnError is enabled, log the query when request is failed</span><span>
</span><span id="line-494"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">HttpLogQueryOnlyOnError
</span><a href="#local-6989586621687817967"><span class="hs-identifier hs-var">_lsHttpLogQueryOnlyOnError</span></a></span><span> </span><span class="annot"><span class="annottext">HttpLogQueryOnlyOnError -&gt; HttpLogQueryOnlyOnError -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">HttpLogQueryOnlyOnError
</span><a href="Hasura.Server.Logging.html#HttpLogQueryOnlyOnErrorEnabled"><span class="hs-identifier hs-var">HttpLogQueryOnlyOnErrorEnabled</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RequestStatus
</span><a href="#local-6989586621687817963"><span class="hs-identifier hs-var">requestStatus</span></a></span><span> </span><span class="annot"><span class="annottext">RequestStatus -&gt; RequestStatus -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">RequestStatus
</span><a href="Hasura.Server.Logging.html#RequestStatusError"><span class="hs-identifier hs-var">RequestStatusError</span></a></span><span>
</span><span id="line-495"></span><span>  </span><span class="hs-comment">-- See Note [Disable query printing for metadata queries]</span><span>
</span><span id="line-496"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621687817968"><span class="hs-identifier hs-var">isQueryLogEnabled</span></a></span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">&amp;&amp;</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621687817970"><span class="hs-identifier hs-var">isMetadataRequest</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MetadataQueryLoggingMode
</span><a href="#local-6989586621687817966"><span class="hs-identifier hs-var">_lsMetadataQueryLoggingMode</span></a></span><span> </span><span class="annot"><span class="annottext">MetadataQueryLoggingMode -&gt; MetadataQueryLoggingMode -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">MetadataQueryLoggingMode
</span><a href="Hasura.Server.Logging.html#MetadataQueryLoggingEnabled"><span class="hs-identifier hs-var">MetadataQueryLoggingEnabled</span></a></span><span>
</span><span id="line-497"></span><span>  </span><span class="hs-comment">-- See Note [Disable query printing when query-log is disabled]</span><span>
</span><span id="line-498"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621687817968"><span class="hs-identifier hs-var">isQueryLogEnabled</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-499"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-500"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-501"></span><span>    </span><span id="local-6989586621687817968"><span class="annot"><span class="annottext">isQueryLogEnabled :: Bool
</span><a href="#local-6989586621687817968"><span class="hs-identifier hs-var hs-var">isQueryLogEnabled</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">EngineLogType Hasura -&gt; HashSet (EngineLogType Hasura) -&gt; Bool
forall a. (Eq a, Hashable a) =&gt; a -&gt; HashSet a -&gt; Bool
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/unordered-containers-0.2.20-6d56f9b3abc6011ddb6e237c415126423ab5ceb5c078221bba2ff80dbe921009/share/doc/html/src/Data.HashSet.Internal.html/Data.HashSet.Internal.html#member"><span class="hs-identifier hs-var">Set.member</span></a></span><span> </span><span class="annot"><span class="annottext">EngineLogType Hasura
</span><a href="Hasura.Logging.html#ELTQueryLog"><span class="hs-identifier hs-var">ELTQueryLog</span></a></span><span> </span><span class="annot"><span class="annottext">HashSet (EngineLogType Hasura)
</span><a href="#local-6989586621687817965"><span class="hs-identifier hs-var">_lsEnabledLogTypes</span></a></span><span>
</span><span id="line-502"></span><span>    </span><span id="local-6989586621687817975"><span class="annot"><span class="annottext">metadataUrlPaths :: [Text]
</span><a href="#local-6989586621687817975"><span class="hs-identifier hs-var hs-var">metadataUrlPaths</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;/v1/metadata&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;/v1/query&quot;</span></span><span class="hs-special">]</span><span>
</span><span id="line-503"></span><span>    </span><span id="local-6989586621687817970"><span class="annot"><span class="annottext">isMetadataRequest :: Bool
</span><a href="#local-6989586621687817970"><span class="hs-identifier hs-var hs-var">isMetadataRequest</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687817964"><span class="hs-identifier hs-var">urlPath</span></a></span><span> </span><span class="annot"><span class="annottext">Text -&gt; [Text] -&gt; Bool
forall a. Eq a =&gt; a -&gt; [a] -&gt; Bool
forall (t :: * -&gt; *) a. (Foldable t, Eq a) =&gt; a -&gt; t a -&gt; Bool
</span><span class="hs-operator hs-var">`elem`</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621687817975"><span class="hs-identifier hs-var">metadataUrlPaths</span></a></span><span>
</span><span id="line-504"></span><span>
</span><span id="line-505"></span><span class="annot"><span class="hs-comment">-- | Add the 'query' field to the http-log</span></span><span>
</span><span id="line-506"></span><span class="annot"><a href="Hasura.Server.Logging.html#addQuery"><span class="hs-identifier hs-type">addQuery</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#RequestStatus"><span class="hs-identifier hs-type">RequestStatus</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#Value"><span class="hs-identifier hs-type">J.Value</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#LoggingSettings"><span class="hs-identifier hs-type">LoggingSettings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#Value"><span class="hs-identifier hs-type">J.Value</span></a></span><span>
</span><span id="line-507"></span><span id="addQuery"><span class="annot"><span class="annottext">addQuery :: RequestStatus
-&gt; Maybe Value -&gt; Text -&gt; LoggingSettings -&gt; Maybe Value
</span><a href="Hasura.Server.Logging.html#addQuery"><span class="hs-identifier hs-var hs-var">addQuery</span></a></span></span><span> </span><span id="local-6989586621687817978"><span class="annot"><span class="annottext">RequestStatus
</span><a href="#local-6989586621687817978"><span class="hs-identifier hs-var">requestStatus</span></a></span></span><span> </span><span id="local-6989586621687817979"><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621687817979"><span class="hs-identifier hs-var">parsedReq</span></a></span></span><span> </span><span id="local-6989586621687817980"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687817980"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span id="local-6989586621687817981"><span class="annot"><span class="annottext">LoggingSettings
</span><a href="#local-6989586621687817981"><span class="hs-identifier hs-var">loggingSettings</span></a></span></span><span>
</span><span id="line-508"></span><span>  </span><span class="hs-comment">-- Attach parsed request payload to 'query' field as is.</span><span>
</span><span id="line-509"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">RequestStatus -&gt; Text -&gt; LoggingSettings -&gt; Bool
</span><a href="Hasura.Server.Logging.html#isQueryIncludedInLogs"><span class="hs-identifier hs-var">isQueryIncludedInLogs</span></a></span><span> </span><span class="annot"><span class="annottext">RequestStatus
</span><a href="#local-6989586621687817978"><span class="hs-identifier hs-var">requestStatus</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687817980"><span class="hs-identifier hs-var">path</span></a></span><span> </span><span class="annot"><span class="annottext">LoggingSettings
</span><a href="#local-6989586621687817981"><span class="hs-identifier hs-var">loggingSettings</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621687817979"><span class="hs-identifier hs-var">parsedReq</span></a></span><span>
</span><span id="line-510"></span><span>  </span><span class="hs-comment">-- If the query cannot be included, attach only the 'operationName' when the</span><span>
</span><span id="line-511"></span><span>  </span><span class="hs-comment">-- 'HASURA_GRAPHQL_HTTP_LOG_QUERY_ONLY_ON_ERROR' option is enabled.</span><span>
</span><span id="line-512"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">LoggingSettings -&gt; HttpLogQueryOnlyOnError
</span><a href="Hasura.Server.Logging.html#_lsHttpLogQueryOnlyOnError"><span class="hs-identifier hs-var">_lsHttpLogQueryOnlyOnError</span></a></span><span> </span><span class="annot"><span class="annottext">LoggingSettings
</span><a href="#local-6989586621687817981"><span class="hs-identifier hs-var">loggingSettings</span></a></span><span> </span><span class="annot"><span class="annottext">HttpLogQueryOnlyOnError -&gt; HttpLogQueryOnlyOnError -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">HttpLogQueryOnlyOnError
</span><a href="Hasura.Server.Logging.html#HttpLogQueryOnlyOnErrorEnabled"><span class="hs-identifier hs-var">HttpLogQueryOnlyOnErrorEnabled</span></a></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-513"></span><span>      </span><span class="annot"><span class="annottext">Value -&gt; Maybe Value
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Maybe Value) -&gt; Value -&gt; Maybe Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#object"><span class="hs-identifier hs-var">J.object</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;operationName&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Maybe (Maybe Text) -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#.%3D"><span class="hs-operator hs-var">J..=</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Value -&gt; Maybe Text) -&gt; Maybe Value -&gt; Maybe (Maybe Text)
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value -&gt; Getting (First Text) Value Text -&gt; Maybe Text
forall s a. s -&gt; Getting (First a) s a -&gt; Maybe a
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/lens-5.3.2-7ec14d641784087c1f1350eada3cde7884c62d1ab2707daec993ceeca3096d32/share/doc/html/src/Control.Lens.Fold.html/Control.Lens.Fold.html#%5E%3F"><span class="hs-operator hs-var">^?</span></a></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Traversal' Value Value
forall t. AsValue t =&gt; Key -&gt; Traversal' t Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/lens-aeson-1.2.3-09ce05ee6aa4d7b8f95eb1fa77309d8d58f89a37d4088e81c67c0e8e851db8c6/share/doc/html/src/Data.Aeson.Lens.html/Data.Aeson.Lens.html#key"><span class="hs-identifier hs-var">key</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;operationName&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Value -&gt; Const (First Text) Value)
 -&gt; Value -&gt; Const (First Text) Value)
-&gt; Getting (First Text) Value Text
-&gt; Getting (First Text) Value Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Getting (First Text) Value Text
forall t. AsValue t =&gt; Prism' t Text
Prism' Value Text
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/lens-aeson-1.2.3-09ce05ee6aa4d7b8f95eb1fa77309d8d58f89a37d4088e81c67c0e8e851db8c6/share/doc/html/src/Data.Aeson.Lens.html/Data.Aeson.Lens.html#_String"><span class="hs-identifier hs-var">_String</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621687817979"><span class="hs-identifier hs-var">parsedReq</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-514"></span><span>  </span><span class="hs-comment">-- Otherwise, include only the 'type' field for metadata requests. For other requests, 'type' will be null.</span><span>
</span><span id="line-515"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Value -&gt; Maybe Value
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Value -&gt; Maybe Value) -&gt; Value -&gt; Maybe Value
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#object"><span class="hs-identifier hs-var">J.object</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Maybe (Maybe Text) -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#.%3D"><span class="hs-operator hs-var">J..=</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(Value -&gt; Maybe Text) -&gt; Maybe Value -&gt; Maybe (Maybe Text)
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Value -&gt; Getting (First Text) Value Text -&gt; Maybe Text
forall s a. s -&gt; Getting (First a) s a -&gt; Maybe a
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/lens-5.3.2-7ec14d641784087c1f1350eada3cde7884c62d1ab2707daec993ceeca3096d32/share/doc/html/src/Control.Lens.Fold.html/Control.Lens.Fold.html#%5E%3F"><span class="hs-operator hs-var">^?</span></a></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Traversal' Value Value
forall t. AsValue t =&gt; Key -&gt; Traversal' t Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/lens-aeson-1.2.3-09ce05ee6aa4d7b8f95eb1fa77309d8d58f89a37d4088e81c67c0e8e851db8c6/share/doc/html/src/Data.Aeson.Lens.html/Data.Aeson.Lens.html#key"><span class="hs-identifier hs-var">key</span></a></span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;type&quot;</span></span><span> </span><span class="annot"><span class="annottext">((Value -&gt; Const (First Text) Value)
 -&gt; Value -&gt; Const (First Text) Value)
-&gt; Getting (First Text) Value Text
-&gt; Getting (First Text) Value Text
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Getting (First Text) Value Text
forall t. AsValue t =&gt; Prism' t Text
Prism' Value Text
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/lens-aeson-1.2.3-09ce05ee6aa4d7b8f95eb1fa77309d8d58f89a37d4088e81c67c0e8e851db8c6/share/doc/html/src/Data.Aeson.Lens.html/Data.Aeson.Lens.html#_String"><span class="hs-identifier hs-var">_String</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621687817979"><span class="hs-identifier hs-var">parsedReq</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-516"></span><span>
</span><span id="line-517"></span><span class="annot"><a href="Hasura.Server.Logging.html#mkHttpAccessLogContext"><span class="hs-identifier hs-type">mkHttpAccessLogContext</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-518"></span><span>  </span><span class="annot"><span class="hs-comment">-- | Maybe because it may not have been resolved</span></span><span>
</span><span id="line-519"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.Authentication.User.html#UserInfo"><span class="hs-identifier hs-type">UserInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-520"></span><span>  </span><span class="annot"><a href="Hasura.Server.Logging.html#LoggingSettings"><span class="hs-identifier hs-type">LoggingSettings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-521"></span><span>  </span><span class="annot"><a href="Hasura.Server.Types.html#RequestId"><span class="hs-identifier hs-type">RequestId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-522"></span><span>  </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/wai-3.2.4-f1faaa95aed979d4a132d2900aa502afdcfa02c1b7b8106923106c2a2a52f9c3/share/doc/html/src/Network.Wai.Internal.html/Network.Wai.Internal.html#Request"><span class="hs-identifier hs-type">Wai.Request</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-523"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">BL.ByteString</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#Value"><span class="hs-identifier hs-type">J.Value</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-524"></span><span>  </span><span class="annot"><span class="hs-comment">-- | Size of response body, before compression</span></span><span>
</span><span id="line-525"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Int64</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-526"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">BL.ByteString</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-527"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DiffTime</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DiffTime</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-528"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.Server.Compression.html#CompressionType"><span class="hs-identifier hs-type">CompressionType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-529"></span><span>  </span><span class="hs-special">[</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/http-types-0.12.3-48808bff700213a8ec5159613d94db74ab5738412a48ffcd3e274142637b29eb/share/doc/html/src/Network.HTTP.Types.Header.html/Network.HTTP.Types.Header.html#Header"><span class="hs-identifier hs-type">HTTP.Header</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-530"></span><span>  </span><span class="annot"><a href="Hasura.Server.Logging.html#RequestMode"><span class="hs-identifier hs-type">RequestMode</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-531"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Transport.HTTP.Protocol.html#GQLBatchedReqs"><span class="hs-identifier hs-type">GH.GQLBatchedReqs</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#GQLBatchQueryOperationLog"><span class="hs-identifier hs-type">GQLBatchQueryOperationLog</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-532"></span><span>  </span><span class="annot"><a href="Hasura.Server.Logging.html#HttpLogContext"><span class="hs-identifier hs-type">HttpLogContext</span></a></span><span>
</span><span id="line-533"></span><span id="mkHttpAccessLogContext"><span class="annot"><span class="annottext">mkHttpAccessLogContext :: Maybe UserInfo
-&gt; LoggingSettings
-&gt; RequestId
-&gt; Request
-&gt; (ByteString, Maybe Value)
-&gt; Int64
-&gt; ByteString
-&gt; Maybe (DiffTime, DiffTime)
-&gt; Maybe CompressionType
-&gt; [Header]
-&gt; RequestMode
-&gt; Maybe (GQLBatchedReqs GQLBatchQueryOperationLog)
-&gt; HttpLogContext
</span><a href="Hasura.Server.Logging.html#mkHttpAccessLogContext"><span class="hs-identifier hs-var hs-var">mkHttpAccessLogContext</span></a></span></span><span> </span><span id="local-6989586621687817982"><span class="annot"><span class="annottext">Maybe UserInfo
</span><a href="#local-6989586621687817982"><span class="hs-identifier hs-var">userInfoM</span></a></span></span><span> </span><span id="local-6989586621687817983"><span class="annot"><span class="annottext">LoggingSettings
</span><a href="#local-6989586621687817983"><span class="hs-identifier hs-var">loggingSettings</span></a></span></span><span> </span><span id="local-6989586621687817984"><span class="annot"><span class="annottext">RequestId
</span><a href="#local-6989586621687817984"><span class="hs-identifier hs-var">reqId</span></a></span></span><span> </span><span id="local-6989586621687817985"><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621687817985"><span class="hs-identifier hs-var">req</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ByteString
</span><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687817986"><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621687817986"><span class="hs-identifier hs-var">parsedReq</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621687817987"><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621687817987"><span class="hs-identifier hs-var">uncompressedResponseSize</span></a></span></span><span> </span><span id="local-6989586621687817988"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621687817988"><span class="hs-identifier hs-var">res</span></a></span></span><span> </span><span id="local-6989586621687817989"><span class="annot"><span class="annottext">Maybe (DiffTime, DiffTime)
</span><a href="#local-6989586621687817989"><span class="hs-identifier hs-var">mTiming</span></a></span></span><span> </span><span id="local-6989586621687817990"><span class="annot"><span class="annottext">Maybe CompressionType
</span><a href="#local-6989586621687817990"><span class="hs-identifier hs-var">compressTypeM</span></a></span></span><span> </span><span id="local-6989586621687817991"><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621687817991"><span class="hs-identifier hs-var">headers</span></a></span></span><span> </span><span id="local-6989586621687817992"><span class="annot"><span class="annottext">RequestMode
</span><a href="#local-6989586621687817992"><span class="hs-identifier hs-var">batching</span></a></span></span><span> </span><span id="local-6989586621687817993"><span class="annot"><span class="annottext">Maybe (GQLBatchedReqs GQLBatchQueryOperationLog)
</span><a href="#local-6989586621687817993"><span class="hs-identifier hs-var">queryLogMetadata</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-534"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687817994"><span class="annot"><span class="annottext">http :: HttpInfoLog
</span><a href="#local-6989586621687817994"><span class="hs-identifier hs-var hs-var">http</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-535"></span><span>        </span><span class="annot"><a href="Hasura.Server.Logging.html#HttpInfoLog"><span class="hs-identifier hs-type">HttpInfoLog</span></a></span><span>
</span><span id="line-536"></span><span>          </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hlStatus :: Status
</span><a href="Hasura.Server.Logging.html#hlStatus"><span class="hs-identifier hs-var">hlStatus</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Status
</span><a href="#local-6989586621687817995"><span class="hs-identifier hs-var">status</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-537"></span><span>            </span><span class="annot"><span class="annottext">hlMethod :: Text
</span><a href="Hasura.Server.Logging.html#hlMethod"><span class="hs-identifier hs-var">hlMethod</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#bsToTxt"><span class="hs-identifier hs-var">bsToTxt</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Text) -&gt; ByteString -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Request -&gt; ByteString
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/wai-3.2.4-f1faaa95aed979d4a132d2900aa502afdcfa02c1b7b8106923106c2a2a52f9c3/share/doc/html/src/Network.Wai.Internal.html/Network.Wai.Internal.html#requestMethod"><span class="hs-identifier hs-var">Wai.requestMethod</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621687817985"><span class="hs-identifier hs-var">req</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-538"></span><span>            </span><span class="annot"><span class="annottext">hlSource :: IpAddress
</span><a href="Hasura.Server.Logging.html#hlSource"><span class="hs-identifier hs-var">hlSource</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Request -&gt; IpAddress
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Network.Wai.Extended.html/Network.Wai.Extended.html#getSourceFromFallback"><span class="hs-identifier hs-var">Wai.getSourceFromFallback</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621687817985"><span class="hs-identifier hs-var">req</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-539"></span><span>            </span><span class="annot"><span class="annottext">hlPath :: Text
</span><a href="Hasura.Server.Logging.html#hlPath"><span class="hs-identifier hs-var">hlPath</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#bsToTxt"><span class="hs-identifier hs-var">bsToTxt</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Text) -&gt; ByteString -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Request -&gt; ByteString
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/wai-3.2.4-f1faaa95aed979d4a132d2900aa502afdcfa02c1b7b8106923106c2a2a52f9c3/share/doc/html/src/Network.Wai.Internal.html/Network.Wai.Internal.html#rawPathInfo"><span class="hs-identifier hs-var">Wai.rawPathInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621687817985"><span class="hs-identifier hs-var">req</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-540"></span><span>            </span><span class="annot"><span class="annottext">hlHttpVersion :: HttpVersion
</span><a href="Hasura.Server.Logging.html#hlHttpVersion"><span class="hs-identifier hs-var">hlHttpVersion</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Request -&gt; HttpVersion
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/wai-3.2.4-f1faaa95aed979d4a132d2900aa502afdcfa02c1b7b8106923106c2a2a52f9c3/share/doc/html/src/Network.Wai.Internal.html/Network.Wai.Internal.html#httpVersion"><span class="hs-identifier hs-var">Wai.httpVersion</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621687817985"><span class="hs-identifier hs-var">req</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-541"></span><span>            </span><span class="annot"><span class="annottext">hlCompression :: Maybe CompressionType
</span><a href="Hasura.Server.Logging.html#hlCompression"><span class="hs-identifier hs-var">hlCompression</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe CompressionType
</span><a href="#local-6989586621687817990"><span class="hs-identifier hs-var">compressTypeM</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-542"></span><span>            </span><span class="annot"><span class="annottext">hlHeaders :: [Header]
</span><a href="Hasura.Server.Logging.html#hlHeaders"><span class="hs-identifier hs-var">hlHeaders</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621687817991"><span class="hs-identifier hs-var">headers</span></a></span><span>
</span><span id="line-543"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-544"></span><span>      </span><span id="local-6989586621687818001"><span class="annot"><span class="annottext">op :: OperationLog
</span><a href="#local-6989586621687818001"><span class="hs-identifier hs-var hs-var">op</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-545"></span><span>        </span><span class="annot"><a href="Hasura.Server.Logging.html#OperationLog"><span class="hs-identifier hs-type">OperationLog</span></a></span><span>
</span><span id="line-546"></span><span>          </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">olRequestId :: RequestId
</span><a href="Hasura.Server.Logging.html#olRequestId"><span class="hs-identifier hs-var">olRequestId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RequestId
</span><a href="#local-6989586621687817984"><span class="hs-identifier hs-var">reqId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-547"></span><span>            </span><span class="annot"><span class="annottext">olUserVars :: Maybe SessionVariables
</span><a href="Hasura.Server.Logging.html#olUserVars"><span class="hs-identifier hs-var">olUserVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UserInfo -&gt; SessionVariables
</span><a href="Hasura.Authentication.User.html#_uiSession"><span class="hs-identifier hs-var">_uiSession</span></a></span><span> </span><span class="annot"><span class="annottext">(UserInfo -&gt; SessionVariables)
-&gt; Maybe UserInfo -&gt; Maybe SessionVariables
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe UserInfo
</span><a href="#local-6989586621687817982"><span class="hs-identifier hs-var">userInfoM</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-548"></span><span>            </span><span class="annot"><span class="annottext">olResponseSize :: Maybe Int64
</span><a href="Hasura.Server.Logging.html#olResponseSize"><span class="hs-identifier hs-var">olResponseSize</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Int64
</span><a href="#local-6989586621687818003"><span class="hs-identifier hs-var">respSize</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-549"></span><span>            </span><span class="annot"><span class="annottext">olUncompressedResponseSize :: Int64
</span><a href="Hasura.Server.Logging.html#olUncompressedResponseSize"><span class="hs-identifier hs-var">olUncompressedResponseSize</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621687817987"><span class="hs-identifier hs-var">uncompressedResponseSize</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-550"></span><span>            </span><span class="annot"><span class="annottext">olRequestReadTime :: Maybe Seconds
</span><a href="Hasura.Server.Logging.html#olRequestReadTime"><span class="hs-identifier hs-var">olRequestReadTime</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DiffTime -&gt; Seconds
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Data.Time.Clock.Units.html/Data.Time.Clock.Units.html#Seconds"><span class="hs-identifier hs-var">Seconds</span></a></span><span> </span><span class="annot"><span class="annottext">(DiffTime -&gt; Seconds)
-&gt; ((DiffTime, DiffTime) -&gt; DiffTime)
-&gt; (DiffTime, DiffTime)
-&gt; Seconds
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(DiffTime, DiffTime) -&gt; DiffTime
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((DiffTime, DiffTime) -&gt; Seconds)
-&gt; Maybe (DiffTime, DiffTime) -&gt; Maybe Seconds
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (DiffTime, DiffTime)
</span><a href="#local-6989586621687817989"><span class="hs-identifier hs-var">mTiming</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-551"></span><span>            </span><span class="annot"><span class="annottext">olQueryExecutionTime :: Maybe Seconds
</span><a href="Hasura.Server.Logging.html#olQueryExecutionTime"><span class="hs-identifier hs-var">olQueryExecutionTime</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DiffTime -&gt; Seconds
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Data.Time.Clock.Units.html/Data.Time.Clock.Units.html#Seconds"><span class="hs-identifier hs-var">Seconds</span></a></span><span> </span><span class="annot"><span class="annottext">(DiffTime -&gt; Seconds)
-&gt; ((DiffTime, DiffTime) -&gt; DiffTime)
-&gt; (DiffTime, DiffTime)
-&gt; Seconds
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(DiffTime, DiffTime) -&gt; DiffTime
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">((DiffTime, DiffTime) -&gt; Seconds)
-&gt; Maybe (DiffTime, DiffTime) -&gt; Maybe Seconds
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (DiffTime, DiffTime)
</span><a href="#local-6989586621687817989"><span class="hs-identifier hs-var">mTiming</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-552"></span><span>            </span><span class="annot"><span class="annottext">olRequestMode :: RequestMode
</span><a href="Hasura.Server.Logging.html#olRequestMode"><span class="hs-identifier hs-var">olRequestMode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RequestMode
</span><a href="#local-6989586621687817992"><span class="hs-identifier hs-var">batching</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-553"></span><span>            </span><span class="annot"><span class="annottext">olQuery :: Maybe Value
</span><a href="Hasura.Server.Logging.html#olQuery"><span class="hs-identifier hs-var">olQuery</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RequestStatus
-&gt; Maybe Value -&gt; Text -&gt; LoggingSettings -&gt; Maybe Value
</span><a href="Hasura.Server.Logging.html#addQuery"><span class="hs-identifier hs-var">addQuery</span></a></span><span> </span><span class="annot"><span class="annottext">RequestStatus
</span><a href="Hasura.Server.Logging.html#RequestStatusSuccess"><span class="hs-identifier hs-var">RequestStatusSuccess</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621687817986"><span class="hs-identifier hs-var">parsedReq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HttpInfoLog -&gt; Text
</span><a href="Hasura.Server.Logging.html#hlPath"><span class="hs-identifier hs-var">hlPath</span></a></span><span> </span><span class="annot"><span class="annottext">HttpInfoLog
</span><a href="#local-6989586621687817994"><span class="hs-identifier hs-var">http</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LoggingSettings
</span><a href="#local-6989586621687817983"><span class="hs-identifier hs-var">loggingSettings</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-554"></span><span>            </span><span class="annot"><span class="annottext">olRawQuery :: Maybe Text
</span><a href="Hasura.Server.Logging.html#olRawQuery"><span class="hs-identifier hs-var">olRawQuery</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">,</span><span>
</span><span id="line-555"></span><span>            </span><span class="annot"><span class="annottext">olError :: Maybe QErr
</span><a href="Hasura.Server.Logging.html#olError"><span class="hs-identifier hs-var">olError</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe QErr
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-556"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-557"></span><span>      </span><span id="local-6989586621687818007"><span class="annot"><span class="annottext">batchOpLog :: Maybe (NonEmpty BatchOperationLog)
</span><a href="#local-6989586621687818007"><span class="hs-identifier hs-var hs-var">batchOpLog</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-558"></span><span>        </span><span class="annot"><span class="annottext">Maybe (GQLBatchedReqs GQLBatchQueryOperationLog)
</span><a href="#local-6989586621687817993"><span class="hs-identifier hs-var">queryLogMetadata</span></a></span><span>
</span><span id="line-559"></span><span>          </span><span class="annot"><span class="annottext">Maybe (GQLBatchedReqs GQLBatchQueryOperationLog)
-&gt; (GQLBatchedReqs GQLBatchQueryOperationLog
    -&gt; Maybe (NonEmpty BatchOperationLog))
-&gt; Maybe (NonEmpty BatchOperationLog)
forall a b. Maybe a -&gt; (a -&gt; Maybe b) -&gt; Maybe b
forall (m :: * -&gt; *) a b. Monad m =&gt; m a -&gt; (a -&gt; m b) -&gt; m b
</span><span class="hs-operator hs-var">&gt;&gt;=</span></span><span> </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-560"></span><span>                  </span><span class="annot"><a href="Hasura.GraphQL.Transport.HTTP.Protocol.html#GQLSingleRequest"><span class="hs-identifier hs-type">GH.GQLSingleRequest</span></a></span><span> </span><span class="annot"><span class="annottext">GQLBatchQueryOperationLog
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe (NonEmpty BatchOperationLog)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-comment">-- This case is aleady handled in the `OperationLog`</span><span>
</span><span id="line-561"></span><span>                  </span><span class="annot"><a href="Hasura.GraphQL.Transport.HTTP.Protocol.html#GQLBatchedReqs"><span class="hs-identifier hs-type">GH.GQLBatchedReqs</span></a></span><span> </span><span id="local-6989586621687818010"><span class="annot"><span class="annottext">[GQLBatchQueryOperationLog]
</span><a href="#local-6989586621687818010"><span class="hs-identifier hs-var">opLogs</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-562"></span><span>                    </span><span class="annot"><span class="annottext">[BatchOperationLog] -&gt; Maybe (NonEmpty BatchOperationLog)
forall a. [a] -&gt; Maybe (NonEmpty a)
</span><span class="hs-identifier hs-var">NE.nonEmpty</span></span><span>
</span><span id="line-563"></span><span>                      </span><span class="annot"><span class="annottext">([BatchOperationLog] -&gt; Maybe (NonEmpty BatchOperationLog))
-&gt; [BatchOperationLog] -&gt; Maybe (NonEmpty BatchOperationLog)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(GQLBatchQueryOperationLog -&gt; BatchOperationLog)
-&gt; [GQLBatchQueryOperationLog] -&gt; [BatchOperationLog]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span>
</span><span id="line-564"></span><span>                        </span><span class="hs-special">(</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-565"></span><span>                            </span><span class="annot"><a href="Hasura.Server.Logging.html#GQLQueryOperationSuccess"><span class="hs-identifier hs-type">GQLQueryOperationSuccess</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Logging.html#GQLQueryOperationSuccessLog"><span class="hs-identifier hs-type">GQLQueryOperationSuccessLog</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687818012"><span id="local-6989586621687818013"><span id="local-6989586621687818014"><span id="local-6989586621687818015"><span id="local-6989586621687818016"><span class="annot"><span class="annottext">Int64
DiffTime
ParameterizedQueryHash
GQLReqUnparsed
gqolQuery :: GQLQueryOperationSuccessLog -&gt; GQLReqUnparsed
gqolQueryExecutionTime :: GQLQueryOperationSuccessLog -&gt; DiffTime
gqolResponseSize :: GQLQueryOperationSuccessLog -&gt; Int64
gqolRequestSize :: GQLQueryOperationSuccessLog -&gt; Int64
gqolParameterizedQueryHash :: GQLQueryOperationSuccessLog -&gt; ParameterizedQueryHash
gqolQuery :: GQLReqUnparsed
gqolQueryExecutionTime :: DiffTime
gqolResponseSize :: Int64
gqolRequestSize :: Int64
gqolParameterizedQueryHash :: ParameterizedQueryHash
</span><a href="Hasura.Server.Logging.html#gqolQuery"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-566"></span><span>                              </span><span class="annot"><span class="annottext">BatchOperationSuccessLog -&gt; BatchOperationLog
</span><a href="Hasura.Server.Logging.html#BatchOperationSuccess"><span class="hs-identifier hs-var">BatchOperationSuccess</span></a></span><span>
</span><span id="line-567"></span><span>                                </span><span class="annot"><span class="annottext">(BatchOperationSuccessLog -&gt; BatchOperationLog)
-&gt; BatchOperationSuccessLog -&gt; BatchOperationLog
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe Value -&gt; Int64 -&gt; Seconds -&gt; BatchOperationSuccessLog
</span><a href="Hasura.Server.Logging.html#BatchOperationSuccessLog"><span class="hs-identifier hs-var">BatchOperationSuccessLog</span></a></span><span>
</span><span id="line-568"></span><span>                                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RequestStatus
-&gt; Maybe Value -&gt; Text -&gt; LoggingSettings -&gt; Maybe Value
</span><a href="Hasura.Server.Logging.html#addQuery"><span class="hs-identifier hs-var">addQuery</span></a></span><span> </span><span class="annot"><span class="annottext">RequestStatus
</span><a href="Hasura.Server.Logging.html#RequestStatusSuccess"><span class="hs-identifier hs-var">RequestStatusSuccess</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621687817986"><span class="hs-identifier hs-var">parsedReq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HttpInfoLog -&gt; Text
</span><a href="Hasura.Server.Logging.html#hlPath"><span class="hs-identifier hs-var">hlPath</span></a></span><span> </span><span class="annot"><span class="annottext">HttpInfoLog
</span><a href="#local-6989586621687817994"><span class="hs-identifier hs-var">http</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LoggingSettings
</span><a href="#local-6989586621687817983"><span class="hs-identifier hs-var">loggingSettings</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-569"></span><span>                                  </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621687818014"><span class="hs-identifier hs-var">gqolResponseSize</span></a></span><span>
</span><span id="line-570"></span><span>                                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DiffTime -&gt; Seconds
forall x y. (Duration x, Duration y) =&gt; x -&gt; y
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Data.Time.Clock.Units.html/Data.Time.Clock.Units.html#convertDuration"><span class="hs-identifier hs-var">convertDuration</span></a></span><span> </span><span class="annot"><span class="annottext">DiffTime
</span><a href="#local-6989586621687818013"><span class="hs-identifier hs-var">gqolQueryExecutionTime</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-571"></span><span>                            </span><span class="annot"><a href="Hasura.Server.Logging.html#GQLQueryOperationError"><span class="hs-identifier hs-type">GQLQueryOperationError</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Logging.html#GQLQueryOperationErrorLog"><span class="hs-identifier hs-type">GQLQueryOperationErrorLog</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687818018"><span id="local-6989586621687818019"><span class="annot"><span class="annottext">QErr
GQLReqUnparsed
gqelQuery :: GQLQueryOperationErrorLog -&gt; GQLReqUnparsed
gqelError :: GQLQueryOperationErrorLog -&gt; QErr
gqelQuery :: GQLReqUnparsed
gqelError :: QErr
</span><a href="Hasura.Server.Logging.html#gqelQuery"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-572"></span><span>                              </span><span class="annot"><span class="annottext">BatchOperationErrorLog -&gt; BatchOperationLog
</span><a href="Hasura.Server.Logging.html#BatchOperationError"><span class="hs-identifier hs-var">BatchOperationError</span></a></span><span>
</span><span id="line-573"></span><span>                                </span><span class="annot"><span class="annottext">(BatchOperationErrorLog -&gt; BatchOperationLog)
-&gt; BatchOperationErrorLog -&gt; BatchOperationLog
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe Value -&gt; QErr -&gt; BatchOperationErrorLog
</span><a href="Hasura.Server.Logging.html#BatchOperationErrorLog"><span class="hs-identifier hs-var">BatchOperationErrorLog</span></a></span><span>
</span><span id="line-574"></span><span>                                  </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RequestStatus
-&gt; Maybe Value -&gt; Text -&gt; LoggingSettings -&gt; Maybe Value
</span><a href="Hasura.Server.Logging.html#addQuery"><span class="hs-identifier hs-var">addQuery</span></a></span><span> </span><span class="annot"><span class="annottext">RequestStatus
</span><a href="Hasura.Server.Logging.html#RequestStatusError"><span class="hs-identifier hs-var">RequestStatusError</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621687817986"><span class="hs-identifier hs-var">parsedReq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HttpInfoLog -&gt; Text
</span><a href="Hasura.Server.Logging.html#hlPath"><span class="hs-identifier hs-var">hlPath</span></a></span><span> </span><span class="annot"><span class="annottext">HttpInfoLog
</span><a href="#local-6989586621687817994"><span class="hs-identifier hs-var">http</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LoggingSettings
</span><a href="#local-6989586621687817983"><span class="hs-identifier hs-var">loggingSettings</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-575"></span><span>                                  </span><span class="annot"><span class="annottext">QErr
</span><a href="#local-6989586621687818019"><span class="hs-identifier hs-var">gqelError</span></a></span><span>
</span><span id="line-576"></span><span>                        </span><span class="hs-special">)</span><span>
</span><span id="line-577"></span><span>                        </span><span class="annot"><span class="annottext">[GQLBatchQueryOperationLog]
</span><a href="#local-6989586621687818010"><span class="hs-identifier hs-var">opLogs</span></a></span><span>
</span><span id="line-578"></span><span>              </span><span class="hs-special">)</span><span>
</span><span id="line-579"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">HttpInfoLog
-&gt; OperationLog
-&gt; RequestId
-&gt; Maybe (NonEmpty BatchOperationLog)
-&gt; HttpLogContext
</span><a href="Hasura.Server.Logging.html#HttpLogContext"><span class="hs-identifier hs-var">HttpLogContext</span></a></span><span> </span><span class="annot"><span class="annottext">HttpInfoLog
</span><a href="#local-6989586621687817994"><span class="hs-identifier hs-var">http</span></a></span><span> </span><span class="annot"><span class="annottext">OperationLog
</span><a href="#local-6989586621687818001"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="annot"><span class="annottext">RequestId
</span><a href="#local-6989586621687817984"><span class="hs-identifier hs-var">reqId</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (NonEmpty BatchOperationLog)
</span><a href="#local-6989586621687818007"><span class="hs-identifier hs-var">batchOpLog</span></a></span><span>
</span><span id="line-580"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-581"></span><span>    </span><span id="local-6989586621687817995"><span class="annot"><span class="annottext">status :: Status
</span><a href="#local-6989586621687817995"><span class="hs-identifier hs-var hs-var">status</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Status
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/http-types-0.12.3-48808bff700213a8ec5159613d94db74ab5738412a48ffcd3e274142637b29eb/share/doc/html/src/Network.HTTP.Types.Status.html/Network.HTTP.Types.Status.html#status200"><span class="hs-identifier hs-var">HTTP.status200</span></a></span><span>
</span><span id="line-582"></span><span>    </span><span id="local-6989586621687818003"><span class="annot"><span class="annottext">respSize :: Maybe Int64
</span><a href="#local-6989586621687818003"><span class="hs-identifier hs-var hs-var">respSize</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; Maybe Int64
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Int64 -&gt; Maybe Int64) -&gt; Int64 -&gt; Maybe Int64
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Int64
</span><span class="hs-identifier hs-var">BL.length</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621687817988"><span class="hs-identifier hs-var">res</span></a></span><span>
</span><span id="line-583"></span><span>
</span><span id="line-584"></span><span class="annot"><a href="Hasura.Server.Logging.html#mkHttpErrorLogContext"><span class="hs-identifier hs-type">mkHttpErrorLogContext</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-585"></span><span>  </span><span class="annot"><span class="hs-comment">-- | Maybe because it may not have been resolved</span></span><span>
</span><span id="line-586"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.Authentication.User.html#UserInfo"><span class="hs-identifier hs-type">UserInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-587"></span><span>  </span><span class="annot"><a href="Hasura.Server.Logging.html#LoggingSettings"><span class="hs-identifier hs-type">LoggingSettings</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-588"></span><span>  </span><span class="annot"><a href="Hasura.Server.Types.html#RequestId"><span class="hs-identifier hs-type">RequestId</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-589"></span><span>  </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/wai-3.2.4-f1faaa95aed979d4a132d2900aa502afdcfa02c1b7b8106923106c2a2a52f9c3/share/doc/html/src/Network.Wai.Internal.html/Network.Wai.Internal.html#Request"><span class="hs-identifier hs-type">Wai.Request</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-590"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">BL.ByteString</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#Value"><span class="hs-identifier hs-type">J.Value</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-591"></span><span>  </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#QErr"><span class="hs-identifier hs-type">QErr</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-592"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">DiffTime</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">DiffTime</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-593"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.Server.Compression.html#CompressionType"><span class="hs-identifier hs-type">CompressionType</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-594"></span><span>  </span><span class="hs-special">[</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/http-types-0.12.3-48808bff700213a8ec5159613d94db74ab5738412a48ffcd3e274142637b29eb/share/doc/html/src/Network.HTTP.Types.Header.html/Network.HTTP.Types.Header.html#Header"><span class="hs-identifier hs-type">HTTP.Header</span></a></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-595"></span><span>  </span><span class="annot"><a href="Hasura.Server.Logging.html#HttpLogContext"><span class="hs-identifier hs-type">HttpLogContext</span></a></span><span>
</span><span id="line-596"></span><span id="mkHttpErrorLogContext"><span class="annot"><span class="annottext">mkHttpErrorLogContext :: Maybe UserInfo
-&gt; LoggingSettings
-&gt; RequestId
-&gt; Request
-&gt; (ByteString, Maybe Value)
-&gt; QErr
-&gt; Maybe (DiffTime, DiffTime)
-&gt; Maybe CompressionType
-&gt; [Header]
-&gt; HttpLogContext
</span><a href="Hasura.Server.Logging.html#mkHttpErrorLogContext"><span class="hs-identifier hs-var hs-var">mkHttpErrorLogContext</span></a></span></span><span> </span><span id="local-6989586621687818022"><span class="annot"><span class="annottext">Maybe UserInfo
</span><a href="#local-6989586621687818022"><span class="hs-identifier hs-var">userInfoM</span></a></span></span><span> </span><span id="local-6989586621687818023"><span class="annot"><span class="annottext">LoggingSettings
</span><a href="#local-6989586621687818023"><span class="hs-identifier hs-var">loggingSettings</span></a></span></span><span> </span><span id="local-6989586621687818024"><span class="annot"><span class="annottext">RequestId
</span><a href="#local-6989586621687818024"><span class="hs-identifier hs-var">reqId</span></a></span></span><span> </span><span id="local-6989586621687818025"><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621687818025"><span class="hs-identifier hs-var">waiReq</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621687818026"><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621687818026"><span class="hs-identifier hs-var">reqBody</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687818027"><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621687818027"><span class="hs-identifier hs-var">parsedReq</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621687818028"><span class="annot"><span class="annottext">QErr
</span><a href="#local-6989586621687818028"><span class="hs-identifier hs-var">err</span></a></span></span><span> </span><span id="local-6989586621687818029"><span class="annot"><span class="annottext">Maybe (DiffTime, DiffTime)
</span><a href="#local-6989586621687818029"><span class="hs-identifier hs-var">mTiming</span></a></span></span><span> </span><span id="local-6989586621687818030"><span class="annot"><span class="annottext">Maybe CompressionType
</span><a href="#local-6989586621687818030"><span class="hs-identifier hs-var">compressTypeM</span></a></span></span><span> </span><span id="local-6989586621687818031"><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621687818031"><span class="hs-identifier hs-var">headers</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-597"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687818032"><span class="annot"><span class="annottext">requestStatus :: RequestStatus
</span><a href="#local-6989586621687818032"><span class="hs-identifier hs-var hs-var">requestStatus</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RequestStatus
</span><a href="Hasura.Server.Logging.html#RequestStatusError"><span class="hs-identifier hs-var">RequestStatusError</span></a></span><span>
</span><span id="line-598"></span><span>      </span><span id="local-6989586621687818033"><span class="annot"><span class="annottext">http :: HttpInfoLog
</span><a href="#local-6989586621687818033"><span class="hs-identifier hs-var hs-var">http</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-599"></span><span>        </span><span class="annot"><a href="Hasura.Server.Logging.html#HttpInfoLog"><span class="hs-identifier hs-type">HttpInfoLog</span></a></span><span>
</span><span id="line-600"></span><span>          </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">hlStatus :: Status
</span><a href="Hasura.Server.Logging.html#hlStatus"><span class="hs-identifier hs-var">hlStatus</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QErr -&gt; Status
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#qeStatus"><span class="hs-identifier hs-var">qeStatus</span></a></span><span> </span><span class="annot"><span class="annottext">QErr
</span><a href="#local-6989586621687818028"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-601"></span><span>            </span><span class="annot"><span class="annottext">hlMethod :: Text
</span><a href="Hasura.Server.Logging.html#hlMethod"><span class="hs-identifier hs-var">hlMethod</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#bsToTxt"><span class="hs-identifier hs-var">bsToTxt</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Text) -&gt; ByteString -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Request -&gt; ByteString
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/wai-3.2.4-f1faaa95aed979d4a132d2900aa502afdcfa02c1b7b8106923106c2a2a52f9c3/share/doc/html/src/Network.Wai.Internal.html/Network.Wai.Internal.html#requestMethod"><span class="hs-identifier hs-var">Wai.requestMethod</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621687818025"><span class="hs-identifier hs-var">waiReq</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-602"></span><span>            </span><span class="annot"><span class="annottext">hlSource :: IpAddress
</span><a href="Hasura.Server.Logging.html#hlSource"><span class="hs-identifier hs-var">hlSource</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Request -&gt; IpAddress
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Network.Wai.Extended.html/Network.Wai.Extended.html#getSourceFromFallback"><span class="hs-identifier hs-var">Wai.getSourceFromFallback</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621687818025"><span class="hs-identifier hs-var">waiReq</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-603"></span><span>            </span><span class="annot"><span class="annottext">hlPath :: Text
</span><a href="Hasura.Server.Logging.html#hlPath"><span class="hs-identifier hs-var">hlPath</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#bsToTxt"><span class="hs-identifier hs-var">bsToTxt</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Text) -&gt; ByteString -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Request -&gt; ByteString
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/wai-3.2.4-f1faaa95aed979d4a132d2900aa502afdcfa02c1b7b8106923106c2a2a52f9c3/share/doc/html/src/Network.Wai.Internal.html/Network.Wai.Internal.html#rawPathInfo"><span class="hs-identifier hs-var">Wai.rawPathInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621687818025"><span class="hs-identifier hs-var">waiReq</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-604"></span><span>            </span><span class="annot"><span class="annottext">hlHttpVersion :: HttpVersion
</span><a href="Hasura.Server.Logging.html#hlHttpVersion"><span class="hs-identifier hs-var">hlHttpVersion</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Request -&gt; HttpVersion
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/wai-3.2.4-f1faaa95aed979d4a132d2900aa502afdcfa02c1b7b8106923106c2a2a52f9c3/share/doc/html/src/Network.Wai.Internal.html/Network.Wai.Internal.html#httpVersion"><span class="hs-identifier hs-var">Wai.httpVersion</span></a></span><span> </span><span class="annot"><span class="annottext">Request
</span><a href="#local-6989586621687818025"><span class="hs-identifier hs-var">waiReq</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-605"></span><span>            </span><span class="annot"><span class="annottext">hlCompression :: Maybe CompressionType
</span><a href="Hasura.Server.Logging.html#hlCompression"><span class="hs-identifier hs-var">hlCompression</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe CompressionType
</span><a href="#local-6989586621687818030"><span class="hs-identifier hs-var">compressTypeM</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-606"></span><span>            </span><span class="annot"><span class="annottext">hlHeaders :: [Header]
</span><a href="Hasura.Server.Logging.html#hlHeaders"><span class="hs-identifier hs-var">hlHeaders</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[Header]
</span><a href="#local-6989586621687818031"><span class="hs-identifier hs-var">headers</span></a></span><span>
</span><span id="line-607"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-608"></span><span>      </span><span id="local-6989586621687818035"><span class="annot"><span class="annottext">responseSize :: Int64
</span><a href="#local-6989586621687818035"><span class="hs-identifier hs-var hs-var">responseSize</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Int64
</span><span class="hs-identifier hs-var">BL.length</span></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Int64) -&gt; ByteString -&gt; Int64
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">QErr -&gt; ByteString
forall a. ToJSON a =&gt; a -&gt; ByteString
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.html/Data.Aeson.html#encode"><span class="hs-identifier hs-var">J.encode</span></a></span><span> </span><span class="annot"><span class="annottext">QErr
</span><a href="#local-6989586621687818028"><span class="hs-identifier hs-var">err</span></a></span><span>
</span><span id="line-609"></span><span>      </span><span id="local-6989586621687818037"><span class="annot"><span class="annottext">op :: OperationLog
</span><a href="#local-6989586621687818037"><span class="hs-identifier hs-var hs-var">op</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-610"></span><span>        </span><span class="annot"><a href="Hasura.Server.Logging.html#OperationLog"><span class="hs-identifier hs-type">OperationLog</span></a></span><span>
</span><span id="line-611"></span><span>          </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">olRequestId :: RequestId
</span><a href="Hasura.Server.Logging.html#olRequestId"><span class="hs-identifier hs-var">olRequestId</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RequestId
</span><a href="#local-6989586621687818024"><span class="hs-identifier hs-var">reqId</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-612"></span><span>            </span><span class="annot"><span class="annottext">olUserVars :: Maybe SessionVariables
</span><a href="Hasura.Server.Logging.html#olUserVars"><span class="hs-identifier hs-var">olUserVars</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UserInfo -&gt; SessionVariables
</span><a href="Hasura.Authentication.User.html#_uiSession"><span class="hs-identifier hs-var">_uiSession</span></a></span><span> </span><span class="annot"><span class="annottext">(UserInfo -&gt; SessionVariables)
-&gt; Maybe UserInfo -&gt; Maybe SessionVariables
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe UserInfo
</span><a href="#local-6989586621687818022"><span class="hs-identifier hs-var">userInfoM</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-613"></span><span>            </span><span class="annot"><span class="annottext">olResponseSize :: Maybe Int64
</span><a href="Hasura.Server.Logging.html#olResponseSize"><span class="hs-identifier hs-var">olResponseSize</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int64 -&gt; Maybe Int64
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621687818035"><span class="hs-identifier hs-var">responseSize</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-614"></span><span>            </span><span class="annot"><span class="annottext">olUncompressedResponseSize :: Int64
</span><a href="Hasura.Server.Logging.html#olUncompressedResponseSize"><span class="hs-identifier hs-var">olUncompressedResponseSize</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Int64
</span><a href="#local-6989586621687818035"><span class="hs-identifier hs-var">responseSize</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-615"></span><span>            </span><span class="annot"><span class="annottext">olRequestReadTime :: Maybe Seconds
</span><a href="Hasura.Server.Logging.html#olRequestReadTime"><span class="hs-identifier hs-var">olRequestReadTime</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DiffTime -&gt; Seconds
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Data.Time.Clock.Units.html/Data.Time.Clock.Units.html#Seconds"><span class="hs-identifier hs-var">Seconds</span></a></span><span> </span><span class="annot"><span class="annottext">(DiffTime -&gt; Seconds)
-&gt; ((DiffTime, DiffTime) -&gt; DiffTime)
-&gt; (DiffTime, DiffTime)
-&gt; Seconds
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(DiffTime, DiffTime) -&gt; DiffTime
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">((DiffTime, DiffTime) -&gt; Seconds)
-&gt; Maybe (DiffTime, DiffTime) -&gt; Maybe Seconds
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (DiffTime, DiffTime)
</span><a href="#local-6989586621687818029"><span class="hs-identifier hs-var">mTiming</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-616"></span><span>            </span><span class="annot"><span class="annottext">olQueryExecutionTime :: Maybe Seconds
</span><a href="Hasura.Server.Logging.html#olQueryExecutionTime"><span class="hs-identifier hs-var">olQueryExecutionTime</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">DiffTime -&gt; Seconds
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Data.Time.Clock.Units.html/Data.Time.Clock.Units.html#Seconds"><span class="hs-identifier hs-var">Seconds</span></a></span><span> </span><span class="annot"><span class="annottext">(DiffTime -&gt; Seconds)
-&gt; ((DiffTime, DiffTime) -&gt; DiffTime)
-&gt; (DiffTime, DiffTime)
-&gt; Seconds
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(DiffTime, DiffTime) -&gt; DiffTime
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">((DiffTime, DiffTime) -&gt; Seconds)
-&gt; Maybe (DiffTime, DiffTime) -&gt; Maybe Seconds
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (DiffTime, DiffTime)
</span><a href="#local-6989586621687818029"><span class="hs-identifier hs-var">mTiming</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-617"></span><span>            </span><span class="annot"><span class="annottext">olQuery :: Maybe Value
</span><a href="Hasura.Server.Logging.html#olQuery"><span class="hs-identifier hs-var">olQuery</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RequestStatus
-&gt; Maybe Value -&gt; Text -&gt; LoggingSettings -&gt; Maybe Value
</span><a href="Hasura.Server.Logging.html#addQuery"><span class="hs-identifier hs-var">addQuery</span></a></span><span> </span><span class="annot"><span class="annottext">RequestStatus
</span><a href="#local-6989586621687818032"><span class="hs-identifier hs-var">requestStatus</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621687818027"><span class="hs-identifier hs-var">parsedReq</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HttpInfoLog -&gt; Text
</span><a href="Hasura.Server.Logging.html#hlPath"><span class="hs-identifier hs-var">hlPath</span></a></span><span> </span><span class="annot"><span class="annottext">HttpInfoLog
</span><a href="#local-6989586621687818033"><span class="hs-identifier hs-var">http</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LoggingSettings
</span><a href="#local-6989586621687818023"><span class="hs-identifier hs-var">loggingSettings</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-618"></span><span>            </span><span class="hs-comment">-- if parsedReq is Nothing, add the raw query</span><span>
</span><span id="line-619"></span><span>            </span><span class="annot"><span class="annottext">olRawQuery :: Maybe Text
</span><a href="Hasura.Server.Logging.html#olRawQuery"><span class="hs-identifier hs-var">olRawQuery</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe Text -&gt; (Value -&gt; Maybe Text) -&gt; Maybe Value -&gt; Maybe Text
forall b a. b -&gt; (a -&gt; b) -&gt; Maybe a -&gt; b
</span><span class="hs-identifier hs-var">maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Text -&gt; Maybe Text
forall a. Maybe a -&gt; Maybe a
</span><a href="#local-6989586621687818039"><span class="hs-identifier hs-var">reqToLog</span></a></span><span> </span><span class="annot"><span class="annottext">(Maybe Text -&gt; Maybe Text) -&gt; Maybe Text -&gt; Maybe Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Maybe Text
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Maybe Text) -&gt; Text -&gt; Maybe Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; Text
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#bsToTxt"><span class="hs-identifier hs-var">bsToTxt</span></a></span><span> </span><span class="annot"><span class="annottext">(ByteString -&gt; Text) -&gt; ByteString -&gt; Text
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ByteString -&gt; ByteString
</span><span class="hs-identifier hs-var">BL.toStrict</span></span><span> </span><span class="annot"><span class="annottext">ByteString
</span><a href="#local-6989586621687818026"><span class="hs-identifier hs-var">reqBody</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Text -&gt; Value -&gt; Maybe Text
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">Maybe Text
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Maybe Value
</span><a href="#local-6989586621687818027"><span class="hs-identifier hs-var">parsedReq</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-620"></span><span>            </span><span class="annot"><span class="annottext">olError :: Maybe QErr
</span><a href="Hasura.Server.Logging.html#olError"><span class="hs-identifier hs-var">olError</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">QErr -&gt; Maybe QErr
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">QErr
</span><a href="#local-6989586621687818028"><span class="hs-identifier hs-var">err</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-621"></span><span>            </span><span class="annot"><span class="annottext">olRequestMode :: RequestMode
</span><a href="Hasura.Server.Logging.html#olRequestMode"><span class="hs-identifier hs-var">olRequestMode</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RequestMode
</span><a href="Hasura.Server.Logging.html#RequestModeError"><span class="hs-identifier hs-var">RequestModeError</span></a></span><span>
</span><span id="line-622"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-623"></span><span>
</span><span id="line-624"></span><span>      </span><span id="local-6989586621687815653"><span class="annot"><a href="#local-6989586621687818039"><span class="hs-identifier hs-type">reqToLog</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621687815653"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621687815653"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-625"></span><span>      </span><span id="local-6989586621687818039"><span class="annot"><span class="annottext">reqToLog :: forall a. Maybe a -&gt; Maybe a
</span><a href="#local-6989586621687818039"><span class="hs-identifier hs-var hs-var">reqToLog</span></a></span></span><span> </span><span id="local-6989586621687818042"><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621687818042"><span class="hs-identifier hs-var">req</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">if</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RequestStatus -&gt; Text -&gt; LoggingSettings -&gt; Bool
</span><a href="Hasura.Server.Logging.html#isQueryIncludedInLogs"><span class="hs-identifier hs-var">isQueryIncludedInLogs</span></a></span><span> </span><span class="annot"><span class="annottext">RequestStatus
</span><a href="#local-6989586621687818032"><span class="hs-identifier hs-var">requestStatus</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">HttpInfoLog -&gt; Text
</span><a href="Hasura.Server.Logging.html#hlPath"><span class="hs-identifier hs-var">hlPath</span></a></span><span> </span><span class="annot"><span class="annottext">HttpInfoLog
</span><a href="#local-6989586621687818033"><span class="hs-identifier hs-var">http</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">LoggingSettings
</span><a href="#local-6989586621687818023"><span class="hs-identifier hs-var">loggingSettings</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">Maybe a
</span><a href="#local-6989586621687818042"><span class="hs-identifier hs-var">req</span></a></span><span> </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">Maybe a
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-626"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">HttpInfoLog
-&gt; OperationLog
-&gt; RequestId
-&gt; Maybe (NonEmpty BatchOperationLog)
-&gt; HttpLogContext
</span><a href="Hasura.Server.Logging.html#HttpLogContext"><span class="hs-identifier hs-var">HttpLogContext</span></a></span><span> </span><span class="annot"><span class="annottext">HttpInfoLog
</span><a href="#local-6989586621687818033"><span class="hs-identifier hs-var">http</span></a></span><span> </span><span class="annot"><span class="annottext">OperationLog
</span><a href="#local-6989586621687818037"><span class="hs-identifier hs-var">op</span></a></span><span> </span><span class="annot"><span class="annottext">RequestId
</span><a href="#local-6989586621687818024"><span class="hs-identifier hs-var">reqId</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe (NonEmpty BatchOperationLog)
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-comment">-- Batched operation logs are always reported in logHttpSuccess even if there are errors</span><span>
</span><span id="line-627"></span><span>
</span><span id="line-628"></span><span class="hs-keyword">data</span><span> </span><span id="HttpLogLine"><span class="annot"><a href="Hasura.Server.Logging.html#HttpLogLine"><span class="hs-identifier hs-var">HttpLogLine</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="HttpLogLine"><span class="annot"><a href="Hasura.Server.Logging.html#HttpLogLine"><span class="hs-identifier hs-var">HttpLogLine</span></a></span></span><span>
</span><span id="line-629"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="_hlLogLevel"><span class="annot"><span class="annottext">HttpLogLine -&gt; LogLevel
</span><a href="Hasura.Server.Logging.html#_hlLogLevel"><span class="hs-identifier hs-var hs-var">_hlLogLevel</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Logging.html#LogLevel"><span class="hs-identifier hs-type">LogLevel</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-630"></span><span>    </span><span id="_hlLogLine"><span class="annot"><span class="annottext">HttpLogLine -&gt; HttpLogContext
</span><a href="Hasura.Server.Logging.html#_hlLogLine"><span class="hs-identifier hs-var hs-var">_hlLogLine</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Server.Logging.html#HttpLogContext"><span class="hs-identifier hs-type">HttpLogContext</span></a></span><span>
</span><span id="line-631"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-632"></span><span>
</span><span id="line-633"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Hasura.Logging.html#ToEngineLog"><span class="hs-identifier hs-type">ToEngineLog</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#HttpLogLine"><span class="hs-identifier hs-type">HttpLogLine</span></a></span><span> </span><span class="annot"><a href="Hasura.Logging.html#Hasura"><span class="hs-identifier hs-type">Hasura</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-634"></span><span>  </span><span id="local-6989586621687818051"><span class="annot"><span class="annottext">toEngineLog :: HttpLogLine -&gt; (LogLevel, EngineLogType Hasura, Value)
</span><a href="Hasura.Logging.html#toEngineLog"><span class="hs-identifier hs-var hs-var hs-var">toEngineLog</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Logging.html#HttpLogLine"><span class="hs-identifier hs-type">HttpLogLine</span></a></span><span> </span><span id="local-6989586621687818052"><span class="annot"><span class="annottext">LogLevel
</span><a href="#local-6989586621687818052"><span class="hs-identifier hs-var">logLevel</span></a></span></span><span> </span><span id="local-6989586621687818053"><span class="annot"><span class="annottext">HttpLogContext
</span><a href="#local-6989586621687818053"><span class="hs-identifier hs-var">logLine</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-635"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LogLevel
</span><a href="#local-6989586621687818052"><span class="hs-identifier hs-var">logLevel</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">EngineLogType Hasura
</span><a href="Hasura.Logging.html#ELTHttpLog"><span class="hs-identifier hs-var">ELTHttpLog</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">HttpLogContext -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toJSON"><span class="hs-identifier hs-var">J.toJSON</span></a></span><span> </span><span class="annot"><span class="annottext">HttpLogContext
</span><a href="#local-6989586621687818053"><span class="hs-identifier hs-var">logLine</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-636"></span><span>
</span><span id="line-637"></span><span class="annot"><a href="Hasura.Server.Logging.html#mkHttpLog"><span class="hs-identifier hs-type">mkHttpLog</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#HttpLogContext"><span class="hs-identifier hs-type">HttpLogContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#HttpLogLine"><span class="hs-identifier hs-type">HttpLogLine</span></a></span><span>
</span><span id="line-638"></span><span id="mkHttpLog"><span class="annot"><span class="annottext">mkHttpLog :: HttpLogContext -&gt; HttpLogLine
</span><a href="Hasura.Server.Logging.html#mkHttpLog"><span class="hs-identifier hs-var hs-var">mkHttpLog</span></a></span></span><span> </span><span id="local-6989586621687818055"><span class="annot"><span class="annottext">HttpLogContext
</span><a href="#local-6989586621687818055"><span class="hs-identifier hs-var">httpLogCtx</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-639"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687818056"><span class="annot"><span class="annottext">isError :: Bool
</span><a href="#local-6989586621687818056"><span class="hs-identifier hs-var hs-var">isError</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Maybe QErr -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isJust</span></span><span> </span><span class="annot"><span class="annottext">(Maybe QErr -&gt; Bool) -&gt; Maybe QErr -&gt; Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">OperationLog -&gt; Maybe QErr
</span><a href="Hasura.Server.Logging.html#olError"><span class="hs-identifier hs-var">olError</span></a></span><span> </span><span class="annot"><span class="annottext">(OperationLog -&gt; Maybe QErr) -&gt; OperationLog -&gt; Maybe QErr
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HttpLogContext -&gt; OperationLog
</span><a href="Hasura.Server.Logging.html#hlcOperation"><span class="hs-identifier hs-var">hlcOperation</span></a></span><span> </span><span class="annot"><span class="annottext">HttpLogContext
</span><a href="#local-6989586621687818055"><span class="hs-identifier hs-var">httpLogCtx</span></a></span><span>
</span><span id="line-640"></span><span>      </span><span id="local-6989586621687818058"><span class="annot"><span class="annottext">logLevel :: LogLevel
</span><a href="#local-6989586621687818058"><span class="hs-identifier hs-var hs-var">logLevel</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">LogLevel -&gt; LogLevel -&gt; Bool -&gt; LogLevel
forall a. a -&gt; a -&gt; Bool -&gt; a
</span><span class="hs-identifier hs-var">bool</span></span><span> </span><span class="annot"><span class="annottext">LogLevel
</span><a href="Hasura.Logging.html#LevelInfo"><span class="hs-identifier hs-var">LevelInfo</span></a></span><span> </span><span class="annot"><span class="annottext">LogLevel
</span><a href="Hasura.Logging.html#LevelError"><span class="hs-identifier hs-var">LevelError</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621687818056"><span class="hs-identifier hs-var">isError</span></a></span><span>
</span><span id="line-641"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">LogLevel -&gt; HttpLogContext -&gt; HttpLogLine
</span><a href="Hasura.Server.Logging.html#HttpLogLine"><span class="hs-identifier hs-var">HttpLogLine</span></a></span><span> </span><span class="annot"><span class="annottext">LogLevel
</span><a href="#local-6989586621687818058"><span class="hs-identifier hs-var">logLevel</span></a></span><span> </span><span class="annot"><span class="annottext">HttpLogContext
</span><a href="#local-6989586621687818055"><span class="hs-identifier hs-var">httpLogCtx</span></a></span><span>
</span><span id="line-642"></span><span>
</span><span id="line-643"></span><span class="annot"><span class="hs-comment">-- | Log warning messages for deprecated environment variables</span></span><span>
</span><span id="line-644"></span><span class="annot"><a href="Hasura.Server.Logging.html#logDeprecatedEnvVars"><span class="hs-identifier hs-type">logDeprecatedEnvVars</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-645"></span><span>  </span><span class="annot"><a href="Hasura.Logging.html#Logger"><span class="hs-identifier hs-type">Logger</span></a></span><span> </span><span class="annot"><a href="Hasura.Logging.html#Hasura"><span class="hs-identifier hs-type">Hasura</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-646"></span><span>  </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Environment.html/Data.Environment.html#Environment"><span class="hs-identifier hs-type">Env.Environment</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-647"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceCache"><span class="hs-identifier hs-type">SourceCache</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-648"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-649"></span><span id="logDeprecatedEnvVars"><span class="annot"><span class="annottext">logDeprecatedEnvVars :: Logger Hasura -&gt; Environment -&gt; SourceCache -&gt; IO ()
</span><a href="Hasura.Server.Logging.html#logDeprecatedEnvVars"><span class="hs-identifier hs-var hs-var">logDeprecatedEnvVars</span></a></span></span><span> </span><span id="local-6989586621687818061"><span class="annot"><span class="annottext">Logger Hasura
</span><a href="#local-6989586621687818061"><span class="hs-identifier hs-var">logger</span></a></span></span><span> </span><span id="local-6989586621687818062"><span class="annot"><span class="annottext">Environment
</span><a href="#local-6989586621687818062"><span class="hs-identifier hs-var">env</span></a></span></span><span> </span><span id="local-6989586621687818063"><span class="annot"><span class="annottext">SourceCache
</span><a href="#local-6989586621687818063"><span class="hs-identifier hs-var">sources</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-650"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687818068"><span class="annot"><span class="annottext">toText :: f t -&gt; Text
</span><a href="#local-6989586621687818068"><span class="hs-identifier hs-var hs-var hs-var">toText</span></a></span></span><span> </span><span id="local-6989586621687818069"><span class="annot"><span class="annottext">f t
</span><a href="#local-6989586621687818069"><span class="hs-identifier hs-var">envVars</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">f t -&gt; Text
forall t (f :: * -&gt; *). (ToTxt t, Foldable f) =&gt; f t -&gt; Text
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Extended.html/Data.Text.Extended.html#commaSeparated"><span class="hs-identifier hs-var">commaSeparated</span></a></span><span> </span><span class="annot"><span class="annottext">f t
</span><a href="#local-6989586621687818069"><span class="hs-identifier hs-var">envVars</span></a></span><span>
</span><span id="line-651"></span><span>      </span><span class="hs-comment">-- The environment variables that have been initialized by user</span><span>
</span><span id="line-652"></span><span>      </span><span id="local-6989586621687818071"><span class="annot"><span class="annottext">envVarsInitialized :: [String]
</span><a href="#local-6989586621687818071"><span class="hs-identifier hs-var hs-var hs-var">envVarsInitialized</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((String, String) -&gt; String) -&gt; [(String, String)] -&gt; [String]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">(String, String) -&gt; String
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Environment -&gt; [(String, String)]
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Environment.html/Data.Environment.html#toList"><span class="hs-identifier hs-var">Env.toList</span></a></span><span> </span><span class="annot"><span class="annottext">Environment
</span><a href="#local-6989586621687818062"><span class="hs-identifier hs-var">env</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-653"></span><span>      </span><span id="local-6989586621687818073"><span class="annot"><span class="annottext">checkDeprecatedEnvVars :: [String] -&gt; [Text]
</span><a href="#local-6989586621687818073"><span class="hs-identifier hs-var hs-var hs-var">checkDeprecatedEnvVars</span></a></span></span><span> </span><span id="local-6989586621687818074"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621687818074"><span class="hs-identifier hs-var">envs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String -&gt; Text
</span><span class="hs-identifier hs-var">T.pack</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; Text) -&gt; [String] -&gt; [Text]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621687818071"><span class="hs-identifier hs-var">envVarsInitialized</span></a></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. Eq a =&gt; [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">`intersect`</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621687818074"><span class="hs-identifier hs-var">envs</span></a></span><span>
</span><span id="line-654"></span><span>
</span><span id="line-655"></span><span>  </span><span class="hs-comment">-- When a source named 'default' is present, it means that it is a migrated v2</span><span>
</span><span id="line-656"></span><span>  </span><span class="hs-comment">-- hasura project. In such cases log those environment variables that are moved</span><span>
</span><span id="line-657"></span><span>  </span><span class="hs-comment">-- to the metadata</span><span>
</span><span id="line-658"></span><span>  </span><span class="annot"><span class="annottext">Maybe BackendSourceInfo -&gt; (BackendSourceInfo -&gt; IO ()) -&gt; IO ()
forall (t :: * -&gt; *) (f :: * -&gt; *) a b.
(Foldable t, Applicative f) =&gt;
t a -&gt; (a -&gt; f b) -&gt; f ()
</span><span class="hs-identifier hs-var">for_</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceName -&gt; SourceCache -&gt; Maybe BackendSourceInfo
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/unordered-containers-0.2.20-6d56f9b3abc6011ddb6e237c415126423ab5ceb5c078221bba2ff80dbe921009/share/doc/html/src/Data.HashMap.Internal.html/Data.HashMap.Internal.html#lookup"><span class="hs-identifier hs-var">HashMap.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="Hasura.RQL.Types.Common.html#SNDefault"><span class="hs-identifier hs-var">SNDefault</span></a></span><span> </span><span class="annot"><span class="annottext">SourceCache
</span><a href="#local-6989586621687818063"><span class="hs-identifier hs-var">sources</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">((BackendSourceInfo -&gt; IO ()) -&gt; IO ())
-&gt; (BackendSourceInfo -&gt; IO ()) -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621687818080"><span class="annot"><span class="annottext">BackendSourceInfo
</span><a href="#local-6989586621687818080"><span class="hs-identifier hs-var">_defSource</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-659"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687818081"><span class="annot"><span class="annottext">deprecated :: [Text]
</span><a href="#local-6989586621687818081"><span class="hs-identifier hs-var hs-var">deprecated</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [Text]
</span><a href="#local-6989586621687818073"><span class="hs-identifier hs-var">checkDeprecatedEnvVars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">EnvVarsMovedToMetadata -&gt; [String]
</span><a href="Hasura.Server.Utils.html#unEnvVarsMovedToMetadata"><span class="hs-identifier hs-var">unEnvVarsMovedToMetadata</span></a></span><span> </span><span class="annot"><span class="annottext">EnvVarsMovedToMetadata
</span><a href="Hasura.Server.Utils.html#envVarsMovedToMetadata"><span class="hs-identifier hs-var">envVarsMovedToMetadata</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-660"></span><span>    </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Text] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621687818081"><span class="hs-identifier hs-var">deprecated</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-661"></span><span>      </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Logger Hasura
-&gt; forall a (m :: * -&gt; *).
   (ToEngineLog a Hasura, MonadIO m) =&gt;
   a -&gt; m ()
forall impl.
Logger impl
-&gt; forall a (m :: * -&gt; *).
   (ToEngineLog a impl, MonadIO m) =&gt;
   a -&gt; m ()
</span><a href="Hasura.Logging.html#unLogger"><span class="hs-identifier hs-var">unLogger</span></a></span><span> </span><span class="annot"><span class="annottext">Logger Hasura
</span><a href="#local-6989586621687818061"><span class="hs-identifier hs-var">logger</span></a></span><span>
</span><span id="line-662"></span><span>      </span><span class="annot"><span class="annottext">(UnstructuredLog -&gt; IO ()) -&gt; UnstructuredLog -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">LogLevel -&gt; SerializableBlob -&gt; UnstructuredLog
</span><a href="Hasura.Logging.html#UnstructuredLog"><span class="hs-identifier hs-var">UnstructuredLog</span></a></span><span> </span><span class="annot"><span class="annottext">LogLevel
</span><a href="Hasura.Logging.html#LevelWarn"><span class="hs-identifier hs-var">LevelWarn</span></a></span><span>
</span><span id="line-663"></span><span>      </span><span class="annot"><span class="annottext">(SerializableBlob -&gt; UnstructuredLog)
-&gt; SerializableBlob -&gt; UnstructuredLog
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; SerializableBlob
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.SerializableBlob.html/Data.SerializableBlob.html#fromText"><span class="hs-identifier hs-var">SB.fromText</span></a></span><span>
</span><span id="line-664"></span><span>      </span><span class="annot"><span class="annottext">(Text -&gt; SerializableBlob) -&gt; Text -&gt; SerializableBlob
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;The following environment variables are deprecated and moved to metadata: &quot;</span></span><span>
</span><span id="line-665"></span><span>      </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Text
forall t (f :: * -&gt; *). (ToTxt t, Foldable f) =&gt; f t -&gt; Text
</span><a href="#local-6989586621687818068"><span class="hs-identifier hs-var">toText</span></a></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621687818081"><span class="hs-identifier hs-var">deprecated</span></a></span><span>
</span><span id="line-666"></span><span>
</span><span id="line-667"></span><span>  </span><span class="hs-comment">-- Log when completely deprecated environment variables are present</span><span>
</span><span id="line-668"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687818088"><span class="annot"><span class="annottext">deprecated :: [Text]
</span><a href="#local-6989586621687818088"><span class="hs-identifier hs-var hs-var">deprecated</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[String] -&gt; [Text]
</span><a href="#local-6989586621687818073"><span class="hs-identifier hs-var">checkDeprecatedEnvVars</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">DeprecatedEnvVars -&gt; [String]
</span><a href="Hasura.Server.Utils.html#unDeprecatedEnvVars"><span class="hs-identifier hs-var">unDeprecatedEnvVars</span></a></span><span> </span><span class="annot"><span class="annottext">DeprecatedEnvVars
</span><a href="Hasura.Server.Utils.html#deprecatedEnvVars"><span class="hs-identifier hs-var">deprecatedEnvVars</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-669"></span><span>  </span><span class="annot"><span class="annottext">Bool -&gt; IO () -&gt; IO ()
forall (f :: * -&gt; *). Applicative f =&gt; Bool -&gt; f () -&gt; f ()
</span><span class="hs-identifier hs-var">unless</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">[Text] -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">null</span></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621687818088"><span class="hs-identifier hs-var">deprecated</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-670"></span><span>    </span><span class="annot"><span class="annottext">(IO () -&gt; IO ()) -&gt; IO () -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Logger Hasura
-&gt; forall a (m :: * -&gt; *).
   (ToEngineLog a Hasura, MonadIO m) =&gt;
   a -&gt; m ()
forall impl.
Logger impl
-&gt; forall a (m :: * -&gt; *).
   (ToEngineLog a impl, MonadIO m) =&gt;
   a -&gt; m ()
</span><a href="Hasura.Logging.html#unLogger"><span class="hs-identifier hs-var">unLogger</span></a></span><span> </span><span class="annot"><span class="annottext">Logger Hasura
</span><a href="#local-6989586621687818061"><span class="hs-identifier hs-var">logger</span></a></span><span>
</span><span id="line-671"></span><span>    </span><span class="annot"><span class="annottext">(UnstructuredLog -&gt; IO ()) -&gt; UnstructuredLog -&gt; IO ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">LogLevel -&gt; SerializableBlob -&gt; UnstructuredLog
</span><a href="Hasura.Logging.html#UnstructuredLog"><span class="hs-identifier hs-var">UnstructuredLog</span></a></span><span> </span><span class="annot"><span class="annottext">LogLevel
</span><a href="Hasura.Logging.html#LevelWarn"><span class="hs-identifier hs-var">LevelWarn</span></a></span><span>
</span><span id="line-672"></span><span>    </span><span class="annot"><span class="annottext">(SerializableBlob -&gt; UnstructuredLog)
-&gt; SerializableBlob -&gt; UnstructuredLog
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; SerializableBlob
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.SerializableBlob.html/Data.SerializableBlob.html#fromText"><span class="hs-identifier hs-var">SB.fromText</span></a></span><span>
</span><span id="line-673"></span><span>    </span><span class="annot"><span class="annottext">(Text -&gt; SerializableBlob) -&gt; Text -&gt; SerializableBlob
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;The following environment variables are deprecated: &quot;</span></span><span>
</span><span id="line-674"></span><span>    </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Text
forall t (f :: * -&gt; *). (ToTxt t, Foldable f) =&gt; f t -&gt; Text
</span><a href="#local-6989586621687818068"><span class="hs-identifier hs-var">toText</span></a></span><span> </span><span class="annot"><span class="annottext">[Text]
</span><a href="#local-6989586621687818088"><span class="hs-identifier hs-var">deprecated</span></a></span><span>
</span><span id="line-675"></span><span>
</span><span id="line-676"></span><span class="hs-keyword">data</span><span> </span><span id="SchemaSyncThreadType"><span class="annot"><a href="Hasura.Server.Logging.html#SchemaSyncThreadType"><span class="hs-identifier hs-var">SchemaSyncThreadType</span></a></span></span><span>
</span><span id="line-677"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="TTListener"><span class="annot"><a href="Hasura.Server.Logging.html#TTListener"><span class="hs-identifier hs-var">TTListener</span></a></span></span><span>
</span><span id="line-678"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="TTProcessor"><span class="annot"><a href="Hasura.Server.Logging.html#TTProcessor"><span class="hs-identifier hs-var">TTProcessor</span></a></span></span><span>
</span><span id="line-679"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="TTMetadataApi"><span class="annot"><a href="Hasura.Server.Logging.html#TTMetadataApi"><span class="hs-identifier hs-var">TTMetadataApi</span></a></span></span><span>
</span><span id="line-680"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621687818094"><span id="local-6989586621687818098"><span class="annot"><span class="annottext">SchemaSyncThreadType -&gt; SchemaSyncThreadType -&gt; Bool
(SchemaSyncThreadType -&gt; SchemaSyncThreadType -&gt; Bool)
-&gt; (SchemaSyncThreadType -&gt; SchemaSyncThreadType -&gt; Bool)
-&gt; Eq SchemaSyncThreadType
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: SchemaSyncThreadType -&gt; SchemaSyncThreadType -&gt; Bool
== :: SchemaSyncThreadType -&gt; SchemaSyncThreadType -&gt; Bool
$c/= :: SchemaSyncThreadType -&gt; SchemaSyncThreadType -&gt; Bool
/= :: SchemaSyncThreadType -&gt; SchemaSyncThreadType -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-681"></span><span>
</span><span id="line-682"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687818102"><span id="local-6989586621687818107"><span class="annot"><span class="hs-identifier hs-type">Show</span></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#SchemaSyncThreadType"><span class="hs-identifier hs-type">SchemaSyncThreadType</span></a></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-683"></span><span>  </span><span id="local-6989586621687818109"><span class="annot"><span class="annottext">show :: SchemaSyncThreadType -&gt; String
</span><span class="hs-identifier hs-var hs-var hs-var">show</span></span></span><span> </span><span class="annot"><span class="annottext">SchemaSyncThreadType
</span><a href="Hasura.Server.Logging.html#TTListener"><span class="hs-identifier hs-var">TTListener</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;listener&quot;</span></span><span>
</span><span id="line-684"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">SchemaSyncThreadType
</span><a href="Hasura.Server.Logging.html#TTProcessor"><span class="hs-identifier hs-var">TTProcessor</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;processor&quot;</span></span><span>
</span><span id="line-685"></span><span>  </span><span class="annot"><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">SchemaSyncThreadType
</span><a href="Hasura.Server.Logging.html#TTMetadataApi"><span class="hs-identifier hs-var">TTMetadataApi</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;metadata-api&quot;</span></span><span>
</span><span id="line-686"></span><span>
</span><span id="line-687"></span><span class="hs-keyword">data</span><span> </span><span id="SchemaSyncLog"><span class="annot"><a href="Hasura.Server.Logging.html#SchemaSyncLog"><span class="hs-identifier hs-var">SchemaSyncLog</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SchemaSyncLog"><span class="annot"><a href="Hasura.Server.Logging.html#SchemaSyncLog"><span class="hs-identifier hs-var">SchemaSyncLog</span></a></span></span><span>
</span><span id="line-688"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="sslLogLevel"><span class="annot"><span class="annottext">SchemaSyncLog -&gt; LogLevel
</span><a href="Hasura.Server.Logging.html#sslLogLevel"><span class="hs-identifier hs-var hs-var">sslLogLevel</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Logging.html#LogLevel"><span class="hs-identifier hs-type">LogLevel</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-689"></span><span>    </span><span id="sslThreadType"><span class="annot"><span class="annottext">SchemaSyncLog -&gt; SchemaSyncThreadType
</span><a href="Hasura.Server.Logging.html#sslThreadType"><span class="hs-identifier hs-var hs-var">sslThreadType</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Server.Logging.html#SchemaSyncThreadType"><span class="hs-identifier hs-type">SchemaSyncThreadType</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-690"></span><span>    </span><span id="sslInfo"><span class="annot"><span class="annottext">SchemaSyncLog -&gt; Value
</span><a href="Hasura.Server.Logging.html#sslInfo"><span class="hs-identifier hs-var hs-var">sslInfo</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#Value"><span class="hs-identifier hs-type">J.Value</span></a></span><span>
</span><span id="line-691"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-692"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621687818115"><span id="local-6989586621687818124"><span id="local-6989586621687818128"><span class="annot"><span class="annottext">Int -&gt; SchemaSyncLog -&gt; ShowS
[SchemaSyncLog] -&gt; ShowS
SchemaSyncLog -&gt; String
(Int -&gt; SchemaSyncLog -&gt; ShowS)
-&gt; (SchemaSyncLog -&gt; String)
-&gt; ([SchemaSyncLog] -&gt; ShowS)
-&gt; Show SchemaSyncLog
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; SchemaSyncLog -&gt; ShowS
showsPrec :: Int -&gt; SchemaSyncLog -&gt; ShowS
$cshow :: SchemaSyncLog -&gt; String
show :: SchemaSyncLog -&gt; String
$cshowList :: [SchemaSyncLog] -&gt; ShowS
showList :: [SchemaSyncLog] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687818131"><span id="local-6989586621687818136"><span class="annot"><span class="annottext">SchemaSyncLog -&gt; SchemaSyncLog -&gt; Bool
(SchemaSyncLog -&gt; SchemaSyncLog -&gt; Bool)
-&gt; (SchemaSyncLog -&gt; SchemaSyncLog -&gt; Bool) -&gt; Eq SchemaSyncLog
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: SchemaSyncLog -&gt; SchemaSyncLog -&gt; Bool
== :: SchemaSyncLog -&gt; SchemaSyncLog -&gt; Bool
$c/= :: SchemaSyncLog -&gt; SchemaSyncLog -&gt; Bool
/= :: SchemaSyncLog -&gt; SchemaSyncLog -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-693"></span><span>
</span><span id="line-694"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687818141"><span id="local-6989586621687818145"><span id="local-6989586621687818148"><span id="local-6989586621687818151"><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#ToJSON"><span class="hs-identifier hs-type">J.ToJSON</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#SchemaSyncLog"><span class="hs-identifier hs-type">SchemaSyncLog</span></a></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-695"></span><span>  </span><span id="local-6989586621687818161"><span class="annot"><span class="annottext">toJSON :: SchemaSyncLog -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toJSON"><span class="hs-identifier hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Logging.html#SchemaSyncLog"><span class="hs-identifier hs-type">SchemaSyncLog</span></a></span><span> </span><span class="annot"><span class="annottext">LogLevel
</span><span class="hs-identifier">_</span></span><span> </span><span id="local-6989586621687818162"><span class="annot"><span class="annottext">SchemaSyncThreadType
</span><a href="#local-6989586621687818162"><span class="hs-identifier hs-var">t</span></a></span></span><span> </span><span id="local-6989586621687818163"><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621687818163"><span class="hs-identifier hs-var">info</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-696"></span><span>    </span><span class="annot"><span class="annottext">[Pair] -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#object"><span class="hs-identifier hs-var">J.object</span></a></span><span>
</span><span id="line-697"></span><span>      </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;thread_type&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; String -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#.%3D"><span class="hs-operator hs-var">J..=</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaSyncThreadType -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">SchemaSyncThreadType
</span><a href="#local-6989586621687818162"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-698"></span><span>        </span><span class="annot"><span class="annottext">Key
</span><span class="hs-string">&quot;info&quot;</span></span><span> </span><span class="annot"><span class="annottext">Key -&gt; Value -&gt; Pair
forall v. ToJSON v =&gt; Key -&gt; v -&gt; Pair
forall e kv v. (KeyValue e kv, ToJSON v) =&gt; Key -&gt; v -&gt; kv
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#.%3D"><span class="hs-operator hs-var">J..=</span></a></span><span> </span><span class="annot"><span class="annottext">Value
</span><a href="#local-6989586621687818163"><span class="hs-identifier hs-var">info</span></a></span><span>
</span><span id="line-699"></span><span>      </span><span class="hs-special">]</span><span>
</span><span id="line-700"></span><span>
</span><span id="line-701"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Hasura.Logging.html#ToEngineLog"><span class="hs-identifier hs-type">ToEngineLog</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#SchemaSyncLog"><span class="hs-identifier hs-type">SchemaSyncLog</span></a></span><span> </span><span class="annot"><a href="Hasura.Logging.html#Hasura"><span class="hs-identifier hs-type">Hasura</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-702"></span><span>  </span><span id="local-6989586621687818169"><span class="annot"><span class="annottext">toEngineLog :: SchemaSyncLog -&gt; (LogLevel, EngineLogType Hasura, Value)
</span><a href="Hasura.Logging.html#toEngineLog"><span class="hs-identifier hs-var hs-var hs-var">toEngineLog</span></a></span></span><span> </span><span id="local-6989586621687818170"><span class="annot"><span class="annottext">SchemaSyncLog
</span><a href="#local-6989586621687818170"><span class="hs-identifier hs-var">threadLog</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-703"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SchemaSyncLog -&gt; LogLevel
</span><a href="Hasura.Server.Logging.html#sslLogLevel"><span class="hs-identifier hs-var">sslLogLevel</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaSyncLog
</span><a href="#local-6989586621687818170"><span class="hs-identifier hs-var">threadLog</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">InternalLogTypes -&gt; EngineLogType Hasura
</span><a href="Hasura.Logging.html#ELTInternal"><span class="hs-identifier hs-var">ELTInternal</span></a></span><span> </span><span class="annot"><span class="annottext">InternalLogTypes
</span><a href="Hasura.Logging.html#ILTSchemaSync"><span class="hs-identifier hs-var">ILTSchemaSync</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SchemaSyncLog -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toJSON"><span class="hs-identifier hs-var">J.toJSON</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaSyncLog
</span><a href="#local-6989586621687818170"><span class="hs-identifier hs-var">threadLog</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-704"></span><span>
</span><span id="line-705"></span><span class="hs-keyword">data</span><span> </span><span id="ModelInfo"><span class="annot"><a href="Hasura.Server.Logging.html#ModelInfo"><span class="hs-identifier hs-var">ModelInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ModelInfo"><span class="annot"><a href="Hasura.Server.Logging.html#ModelInfo"><span class="hs-identifier hs-var">ModelInfo</span></a></span></span><span>
</span><span id="line-706"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="miModelName"><span class="annot"><span class="annottext">ModelInfo -&gt; Text
</span><a href="Hasura.Server.Logging.html#miModelName"><span class="hs-identifier hs-var hs-var">miModelName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">,</span><span>
</span><span id="line-707"></span><span>    </span><span id="miModelType"><span class="annot"><span class="annottext">ModelInfo -&gt; Text
</span><a href="Hasura.Server.Logging.html#miModelType"><span class="hs-identifier hs-var hs-var">miModelType</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">,</span><span>
</span><span id="line-708"></span><span>    </span><span id="miSourceName"><span class="annot"><span class="annottext">ModelInfo -&gt; Maybe Text
</span><a href="Hasura.Server.Logging.html#miSourceName"><span class="hs-identifier hs-var hs-var">miSourceName</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-709"></span><span>    </span><span id="miSourceType"><span class="annot"><span class="annottext">ModelInfo -&gt; Maybe Text
</span><a href="Hasura.Server.Logging.html#miSourceType"><span class="hs-identifier hs-var hs-var">miSourceType</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-710"></span><span>    </span><span id="miQueryType"><span class="annot"><span class="annottext">ModelInfo -&gt; Text
</span><a href="Hasura.Server.Logging.html#miQueryType"><span class="hs-identifier hs-var hs-var">miQueryType</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span class="hs-special">,</span><span>
</span><span id="line-711"></span><span>    </span><span id="miIsCached"><span class="annot"><span class="annottext">ModelInfo -&gt; Bool
</span><a href="Hasura.Server.Logging.html#miIsCached"><span class="hs-identifier hs-var hs-var">miIsCached</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-712"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-713"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621687818180"><span id="local-6989586621687818182"><span class="annot"><span class="annottext">(forall x. ModelInfo -&gt; Rep ModelInfo x)
-&gt; (forall x. Rep ModelInfo x -&gt; ModelInfo) -&gt; Generic ModelInfo
forall x. Rep ModelInfo x -&gt; ModelInfo
forall x. ModelInfo -&gt; Rep ModelInfo x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. ModelInfo -&gt; Rep ModelInfo x
from :: forall x. ModelInfo -&gt; Rep ModelInfo x
$cto :: forall x. Rep ModelInfo x -&gt; ModelInfo
to :: forall x. Rep ModelInfo x -&gt; ModelInfo
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-714"></span><span>
</span><span id="line-715"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687818186"><span id="local-6989586621687818190"><span id="local-6989586621687818193"><span id="local-6989586621687818196"><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#ToJSON"><span class="hs-identifier hs-type">J.ToJSON</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#ModelInfo"><span class="hs-identifier hs-type">ModelInfo</span></a></span></span></span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-716"></span><span>  </span><span id="local-6989586621687818316"><span class="annot"><span class="annottext">toJSON :: ModelInfo -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toJSON"><span class="hs-identifier hs-var hs-var hs-var">toJSON</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Options -&gt; ModelInfo -&gt; Value
forall a.
(Generic a, GToJSON' Value Zero (Rep a)) =&gt;
Options -&gt; a -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#genericToJSON"><span class="hs-identifier hs-var">J.genericToJSON</span></a></span><span> </span><span class="annot"><span class="annottext">Options
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#hasuraJSON"><span class="hs-identifier hs-var">hasuraJSON</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.Internal.html/Data.Aeson.Types.Internal.html#omitNothingFields"><span class="hs-identifier hs-var">J.omitNothingFields</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">True</span></span><span class="hs-special">}</span><span>
</span><span id="line-717"></span><span>
</span><span id="line-718"></span><span class="hs-keyword">data</span><span> </span><span id="ModelInfoLog"><span class="annot"><a href="Hasura.Server.Logging.html#ModelInfoLog"><span class="hs-identifier hs-var">ModelInfoLog</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ModelInfoLog"><span class="annot"><a href="Hasura.Server.Logging.html#ModelInfoLog"><span class="hs-identifier hs-var">ModelInfoLog</span></a></span></span><span>
</span><span id="line-719"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="milLogType"><span class="annot"><span class="annottext">ModelInfoLog -&gt; LogLevel
</span><a href="Hasura.Server.Logging.html#milLogType"><span class="hs-identifier hs-var hs-var">milLogType</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Logging.html#LogLevel"><span class="hs-identifier hs-type">LogLevel</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-720"></span><span>    </span><span id="milModelInfo"><span class="annot"><span class="annottext">ModelInfoLog -&gt; ModelInfo
</span><a href="Hasura.Server.Logging.html#milModelInfo"><span class="hs-identifier hs-var hs-var">milModelInfo</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-glyph">!</span><span class="annot"><a href="Hasura.Server.Logging.html#ModelInfo"><span class="hs-identifier hs-type">ModelInfo</span></a></span><span>
</span><span id="line-721"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-722"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">stock</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621687818321"><span id="local-6989586621687818323"><span class="annot"><span class="annottext">(forall x. ModelInfoLog -&gt; Rep ModelInfoLog x)
-&gt; (forall x. Rep ModelInfoLog x -&gt; ModelInfoLog)
-&gt; Generic ModelInfoLog
forall x. Rep ModelInfoLog x -&gt; ModelInfoLog
forall x. ModelInfoLog -&gt; Rep ModelInfoLog x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. ModelInfoLog -&gt; Rep ModelInfoLog x
from :: forall x. ModelInfoLog -&gt; Rep ModelInfoLog x
$cto :: forall x. Rep ModelInfoLog x -&gt; ModelInfoLog
to :: forall x. Rep ModelInfoLog x -&gt; ModelInfoLog
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-723"></span><span>
</span><span id="line-724"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><a href="Hasura.Logging.html#ToEngineLog"><span class="hs-identifier hs-type">ToEngineLog</span></a></span><span> </span><span class="annot"><a href="Hasura.Server.Logging.html#ModelInfoLog"><span class="hs-identifier hs-type">ModelInfoLog</span></a></span><span> </span><span class="annot"><a href="Hasura.Logging.html#Hasura"><span class="hs-identifier hs-type">Hasura</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-725"></span><span>  </span><span id="local-6989586621687818330"><span class="annot"><span class="annottext">toEngineLog :: ModelInfoLog -&gt; (LogLevel, EngineLogType Hasura, Value)
</span><a href="Hasura.Logging.html#toEngineLog"><span class="hs-identifier hs-var hs-var hs-var">toEngineLog</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Logging.html#ModelInfoLog"><span class="hs-identifier hs-type">ModelInfoLog</span></a></span><span> </span><span id="local-6989586621687818331"><span class="annot"><span class="annottext">LogLevel
</span><a href="#local-6989586621687818331"><span class="hs-identifier hs-var">level</span></a></span></span><span> </span><span id="local-6989586621687818332"><span class="annot"><span class="annottext">ModelInfo
</span><a href="#local-6989586621687818332"><span class="hs-identifier hs-var">t</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-726"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="annottext">LogLevel
</span><a href="#local-6989586621687818331"><span class="hs-identifier hs-var">level</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">InternalLogTypes -&gt; EngineLogType Hasura
</span><a href="Hasura.Logging.html#ELTInternal"><span class="hs-identifier hs-var">ELTInternal</span></a></span><span> </span><span class="annot"><span class="annottext">InternalLogTypes
</span><a href="Hasura.Logging.html#ILTModelInfo"><span class="hs-identifier hs-var">ILTModelInfo</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ModelInfo -&gt; Value
forall a. ToJSON a =&gt; a -&gt; Value
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/aeson-2.2.3.0-5d7ee246cfa338f30d154e06f34dc50b9af0797ae9abbdeb4efa1326ac8786e5/share/doc/html/src/Data.Aeson.Types.ToJSON.html/Data.Aeson.Types.ToJSON.html#toJSON"><span class="hs-identifier hs-var">J.toJSON</span></a></span><span> </span><span class="annot"><span class="annottext">ModelInfo
</span><a href="#local-6989586621687818332"><span class="hs-identifier hs-var">t</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-727"></span></pre></body></html>