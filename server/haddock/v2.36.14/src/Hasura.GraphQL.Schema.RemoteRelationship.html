<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.RemoteRelationship.html"><span class="hs-identifier">Hasura.GraphQL.Schema.RemoteRelationship</span></a></span><span>
</span><span id="line-2"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#remoteRelationshipField"><span class="hs-identifier">remoteRelationshipField</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-3"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-4"></span><span class="hs-keyword">where</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/lens-5.3.2-7ec14d641784087c1f1350eada3cde7884c62d1ab2707daec993ceeca3096d32/share/doc/html/src/Control.Lens.html/Control.Lens.html"><span class="hs-identifier">Control.Lens</span></a></span><span>
</span><span id="line-7"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.HashMap.Strict.Extended.html/Data.HashMap.Strict.Extended.html"><span class="hs-identifier">Data.HashMap.Strict.Extended</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">HashMap</span></span><span>
</span><span id="line-8"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List.NonEmpty</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">NE</span></span><span>
</span><span id="line-9"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Casing.html/Data.Text.Casing.html"><span class="hs-identifier">Data.Text.Casing</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">C</span></span><span>
</span><span id="line-10"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Extended.html/Data.Text.Extended.html"><span class="hs-identifier">Data.Text.Extended</span></a></span><span>
</span><span id="line-11"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Authentication.Role.html"><span class="hs-identifier">Hasura.Authentication.Role</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Authentication.Role.html#adminRoleName"><span class="hs-identifier">adminRoleName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-12"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html"><span class="hs-identifier">Hasura.Base.Error</span></a></span><span>
</span><span id="line-13"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html"><span class="hs-identifier">Hasura.GraphQL.Schema.Backend</span></a></span><span>
</span><span id="line-14"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html"><span class="hs-identifier">Hasura.GraphQL.Schema.Common</span></a></span><span>
</span><span id="line-15"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Instances.html"><span class="hs-identifier">Hasura.GraphQL.Schema.Instances</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span>
</span><span id="line-16"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html"><span class="hs-identifier">Hasura.GraphQL.Schema.Parser</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#FieldParser"><span class="hs-identifier">FieldParser</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Control.Monad.Memoize.html#MonadMemoize"><span class="hs-identifier">MonadMemoize</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-17"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html"><span class="hs-identifier">Hasura.GraphQL.Schema.Parser</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P</span></span><span>
</span><span id="line-18"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html"><span class="hs-identifier">Hasura.GraphQL.Schema.Remote</span></a></span><span>
</span><span id="line-19"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Table.html"><span class="hs-identifier">Hasura.GraphQL.Schema.Table</span></a></span><span>
</span><span id="line-20"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Name.html"><span class="hs-identifier">Hasura.Name</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Name</span></span><span>
</span><span id="line-21"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html"><span class="hs-identifier">Hasura.Prelude</span></a></span><span>
</span><span id="line-22"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.html"><span class="hs-identifier">Hasura.RQL.IR</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">IR</span></span><span>
</span><span id="line-23"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html"><span class="hs-identifier">Hasura.RQL.Types.Common</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Common.html#FieldName"><span class="hs-identifier">FieldName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#RelType"><span class="hs-identifier">RelType</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#relNameToTxt"><span class="hs-identifier">relNameToTxt</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-24"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Relationships.Remote.html"><span class="hs-identifier">Hasura.RQL.Types.Relationships.Remote</span></a></span><span>
</span><span id="line-25"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.ResultCustomization.html"><span class="hs-identifier">Hasura.RQL.Types.ResultCustomization</span></a></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Schema.Options.html"><span class="hs-identifier">Hasura.RQL.Types.Schema.Options</span></a></span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html"><span class="hs-identifier">Hasura.RQL.Types.SchemaCache</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html#askTableInfo"><span class="hs-identifier">askTableInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Source.html"><span class="hs-identifier">Hasura.RQL.Types.Source</span></a></span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SourceCustomization.html"><span class="hs-identifier">Hasura.RQL.Types.SourceCustomization</span></a></span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RemoteSchema.Metadata.html"><span class="hs-identifier">Hasura.RemoteSchema.Metadata</span></a></span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RemoteSchema.SchemaCache.html"><span class="hs-identifier">Hasura.RemoteSchema.SchemaCache</span></a></span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RemoteSchema.SchemaCache.html"><span class="hs-identifier">Hasura.RemoteSchema.SchemaCache</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Remote</span></span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.SQL.AnyBackend.html"><span class="hs-identifier">Hasura.SQL.AnyBackend</span></a></span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.html/Language.GraphQL.Draft.Syntax.html"><span class="hs-identifier">Language.GraphQL.Draft.Syntax</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">G</span></span><span>
</span><span id="line-35"></span><span>
</span><span id="line-36"></span><span class="annot"><span class="hs-comment">-- | Remote relationship field parsers</span></span><span>
</span><span id="line-37"></span><span class="annot"><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#remoteRelationshipField"><span class="hs-identifier hs-type">remoteRelationshipField</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-38"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaContext"><span class="hs-identifier hs-type">SchemaContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-39"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Schema.Options.html#SchemaOptions"><span class="hs-identifier hs-type">SchemaOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-40"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceCache"><span class="hs-identifier hs-type">SourceCache</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-41"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html#RemoteSchemaMap"><span class="hs-identifier hs-type">RemoteSchemaMap</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-42"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Schema.Options.html#RemoteSchemaPermissions"><span class="hs-identifier hs-type">RemoteSchemaPermissions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-43"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Relationships.Remote.html#RemoteSourceRelationshipBuilder"><span class="hs-identifier hs-type">RemoteSourceRelationshipBuilder</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-44"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#RemoteRelationshipParserBuilder"><span class="hs-identifier hs-type">RemoteRelationshipParserBuilder</span></a></span><span>
</span><span id="line-45"></span><span id="remoteRelationshipField"><span class="annot"><span class="annottext">remoteRelationshipField :: SchemaContext
-&gt; SchemaOptions
-&gt; SourceCache
-&gt; RemoteSchemaMap
-&gt; RemoteSchemaPermissions
-&gt; RemoteSourceRelationshipBuilder
-&gt; RemoteRelationshipParserBuilder
</span><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#remoteRelationshipField"><span class="hs-identifier hs-var hs-var">remoteRelationshipField</span></a></span></span><span> </span><span id="local-6989586621687994793"><span class="annot"><span class="annottext">SchemaContext
</span><a href="#local-6989586621687994793"><span class="hs-identifier hs-var">schemaContext</span></a></span></span><span> </span><span id="local-6989586621687994794"><span class="annot"><span class="annottext">SchemaOptions
</span><a href="#local-6989586621687994794"><span class="hs-identifier hs-var">schemaOptions</span></a></span></span><span> </span><span id="local-6989586621687994795"><span class="annot"><span class="annottext">SourceCache
</span><a href="#local-6989586621687994795"><span class="hs-identifier hs-var">sourceCache</span></a></span></span><span> </span><span id="local-6989586621687994796"><span class="annot"><span class="annottext">RemoteSchemaMap
</span><a href="#local-6989586621687994796"><span class="hs-identifier hs-var">remoteSchemaCache</span></a></span></span><span> </span><span id="local-6989586621687994797"><span class="annot"><span class="annottext">RemoteSchemaPermissions
</span><a href="#local-6989586621687994797"><span class="hs-identifier hs-var">remoteSchemaPermissions</span></a></span></span><span> </span><span id="local-6989586621687994798"><span class="annot"><span class="annottext">RemoteSourceRelationshipBuilder
</span><a href="#local-6989586621687994798"><span class="hs-identifier hs-var">remoteSourceRelationshipBuilder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall lhsJoinField r (n :: * -&gt; *) (m :: * -&gt; *).
 MonadBuildSchemaBase m n =&gt;
 RemoteFieldInfo lhsJoinField
 -&gt; SchemaT
      r
      m
      (Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)]))
-&gt; RemoteRelationshipParserBuilder
</span><a href="Hasura.GraphQL.Schema.Common.html#RemoteRelationshipParserBuilder"><span class="hs-identifier hs-var">RemoteRelationshipParserBuilder</span></a></span><span>
</span><span id="line-46"></span><span>  </span><span class="hs-glyph">\</span><span class="annot"><a href="Hasura.RQL.Types.Relationships.Remote.html#RemoteFieldInfo"><span class="hs-identifier hs-type">RemoteFieldInfo</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687994900"><span id="local-6989586621687994901"><span class="annot"><span class="annottext">HashMap FieldName lhsJoinField
RemoteFieldInfoRHS
_rfiLHS :: HashMap FieldName lhsJoinField
_rfiRHS :: RemoteFieldInfoRHS
_rfiRHS :: forall lhsJoinField.
RemoteFieldInfo lhsJoinField -&gt; RemoteFieldInfoRHS
_rfiLHS :: forall lhsJoinField.
RemoteFieldInfo lhsJoinField -&gt; HashMap FieldName lhsJoinField
</span><a href="#local-6989586621687994900"><span class="hs-glyph hs-var hs-var hs-var hs-var">..</span></a></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">m (Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)])
-&gt; SchemaT
     r
     m
     (Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)])
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; SchemaT r m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-47"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RemoteFieldInfoRHS
</span><a href="#local-6989586621687994901"><span class="hs-identifier hs-var">_rfiRHS</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-48"></span><span>      </span><span class="annot"><a href="Hasura.RQL.Types.Relationships.Remote.html#RFISource"><span class="hs-identifier hs-type">RFISource</span></a></span><span> </span><span id="local-6989586621687994906"><span class="annot"><span class="annottext">AnyBackend RemoteSourceFieldInfo
</span><a href="#local-6989586621687994906"><span class="hs-identifier hs-var">anyRemoteSourceFieldInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-49"></span><span>        </span><span class="hs-comment">-- see Note [SchemaT and stacking]</span><span>
</span><span id="line-50"></span><span>        </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RemoteSourceRelationshipBuilder
</span><a href="#local-6989586621687994798"><span class="hs-identifier hs-var">remoteSourceRelationshipBuilder</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-51"></span><span>          </span><span class="annot"><span class="annottext">RemoteSourceRelationshipBuilder
</span><a href="Hasura.RQL.Types.Relationships.Remote.html#IncludeRemoteSourceRelationship"><span class="hs-identifier hs-var">IncludeRemoteSourceRelationship</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">forall (c1 :: BackendType -&gt; Constraint)
       (c2 :: BackendType -&gt; Constraint) (i :: BackendType -&gt; *) r.
(AllBackendsSatisfy c1, AllBackendsSatisfy c2) =&gt;
AnyBackend i
-&gt; (forall (b :: BackendType). (c1 b, c2 b) =&gt; i b -&gt; r) -&gt; r
</span><a href="Hasura.SQL.AnyBackend.html#dispatchAnyBackendWithTwoConstraints"><span class="hs-identifier hs-var">dispatchAnyBackendWithTwoConstraints</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#BackendSchema"><span class="hs-identifier hs-type">BackendSchema</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#BackendTableSelectSchema"><span class="hs-identifier hs-type">BackendTableSelectSchema</span></a></span><span>
</span><span id="line-52"></span><span>            </span><span class="annot"><span class="annottext">AnyBackend RemoteSourceFieldInfo
</span><a href="#local-6989586621687994906"><span class="hs-identifier hs-var">anyRemoteSourceFieldInfo</span></a></span><span>
</span><span id="line-53"></span><span>            </span><span class="hs-glyph">\</span><span id="local-6989586621687994926"><span class="annot"><span class="annottext">RemoteSourceFieldInfo b
</span><a href="#local-6989586621687994926"><span class="hs-identifier hs-var">remoteSourceFieldInfo</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-54"></span><span>              </span><span id="local-6989586621687994927"><span class="annot"><a href="#local-6989586621687994927"><span class="hs-identifier hs-var">fields</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">SchemaContext
-&gt; SchemaOptions
-&gt; SourceCache
-&gt; RemoteSourceFieldInfo b
-&gt; m [FieldParser
        n
        (RemoteSourceSelect
           (RemoteRelationshipField UnpreparedValue) UnpreparedValue b)]
forall (m :: * -&gt; *) (n :: * -&gt; *) (tgt :: BackendType).
(MonadError QErr m, MonadMemoize m, MonadParse n,
 BackendSchema tgt, BackendTableSelectSchema tgt) =&gt;
SchemaContext
-&gt; SchemaOptions
-&gt; SourceCache
-&gt; RemoteSourceFieldInfo tgt
-&gt; m [FieldParser
        n
        (RemoteSourceSelect
           (RemoteRelationshipField UnpreparedValue) UnpreparedValue tgt)]
</span><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#remoteRelationshipToSourceField"><span class="hs-identifier hs-var">remoteRelationshipToSourceField</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaContext
</span><a href="#local-6989586621687994793"><span class="hs-identifier hs-var">schemaContext</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaOptions
</span><a href="#local-6989586621687994794"><span class="hs-identifier hs-var">schemaOptions</span></a></span><span> </span><span class="annot"><span class="annottext">SourceCache
</span><a href="#local-6989586621687994795"><span class="hs-identifier hs-var">sourceCache</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSourceFieldInfo b
</span><a href="#local-6989586621687994926"><span class="hs-identifier hs-var">remoteSourceFieldInfo</span></a></span><span>
</span><span id="line-55"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Root.html#RemoteSourceField"><span class="hs-identifier hs-type">IR.RemoteSourceField</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><a href="Hasura.SQL.AnyBackend.html#mkAnyBackend"><span class="hs-identifier hs-type">mkAnyBackend</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621687994927"><span class="hs-identifier hs-type">fields</span></a></span><span>
</span><span id="line-56"></span><span>          </span><span class="annot"><span class="annottext">RemoteSourceRelationshipBuilder
</span><a href="Hasura.RQL.Types.Relationships.Remote.html#ExcludeRemoteSourceRelationship"><span class="hs-identifier hs-var">ExcludeRemoteSourceRelationship</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)]
-&gt; m (Maybe
        [FieldParser n (RemoteRelationshipField UnpreparedValue)])
forall a. a -&gt; m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-57"></span><span>      </span><span class="annot"><a href="Hasura.RQL.Types.Relationships.Remote.html#RFISchema"><span class="hs-identifier hs-type">RFISchema</span></a></span><span> </span><span id="local-6989586621687994935"><span class="annot"><span class="annottext">RemoteSchemaFieldInfo
</span><a href="#local-6989586621687994935"><span class="hs-identifier hs-var">remoteSchema</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-58"></span><span>        </span><span class="hs-comment">-- see Note [SchemaT and stacking]</span><span>
</span><span id="line-59"></span><span>        </span><span class="annot"><span class="annottext">SchemaContext
-&gt; RemoteNullForwardingPolicy
-&gt; SchemaT
     (SchemaContext, RemoteNullForwardingPolicy, MkTypename,
      CustomizeRemoteFieldName)
     m
     (Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)])
-&gt; m (Maybe
        [FieldParser n (RemoteRelationshipField UnpreparedValue)])
forall (m :: * -&gt; *) a.
SchemaContext
-&gt; RemoteNullForwardingPolicy
-&gt; SchemaT
     (SchemaContext, RemoteNullForwardingPolicy, MkTypename,
      CustomizeRemoteFieldName)
     m
     a
-&gt; m a
</span><a href="Hasura.GraphQL.Schema.Common.html#runRemoteSchema"><span class="hs-identifier hs-var">runRemoteSchema</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaContext
</span><a href="#local-6989586621687994793"><span class="hs-identifier hs-var">schemaContext</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SchemaOptions -&gt; RemoteNullForwardingPolicy
</span><a href="Hasura.RQL.Types.Schema.Options.html#soRemoteNullForwardingPolicy"><span class="hs-identifier hs-var">soRemoteNullForwardingPolicy</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaOptions
</span><a href="#local-6989586621687994794"><span class="hs-identifier hs-var">schemaOptions</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-60"></span><span>          </span><span id="local-6989586621687994938"><span class="annot"><a href="#local-6989586621687994938"><span class="hs-identifier hs-var">fields</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaMap
-&gt; RemoteSchemaPermissions
-&gt; HashMap FieldName lhsJoinField
-&gt; RemoteSchemaFieldInfo
-&gt; SchemaT
     (SchemaContext, RemoteNullForwardingPolicy, MkTypename,
      CustomizeRemoteFieldName)
     m
     (Maybe
        (FieldParser
           n (RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue))))
forall r (m :: * -&gt; *) (n :: * -&gt; *) lhsJoinField.
MonadBuildRemoteSchema r m n =&gt;
RemoteSchemaMap
-&gt; RemoteSchemaPermissions
-&gt; HashMap FieldName lhsJoinField
-&gt; RemoteSchemaFieldInfo
-&gt; SchemaT
     r
     m
     (Maybe
        (FieldParser
           n (RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue))))
</span><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#remoteRelationshipToSchemaField"><span class="hs-identifier hs-var">remoteRelationshipToSchemaField</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaMap
</span><a href="#local-6989586621687994796"><span class="hs-identifier hs-var">remoteSchemaCache</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaPermissions
</span><a href="#local-6989586621687994797"><span class="hs-identifier hs-var">remoteSchemaPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap FieldName lhsJoinField
</span><a href="#local-6989586621687994900"><span class="hs-identifier hs-var">_rfiLHS</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaFieldInfo
</span><a href="#local-6989586621687994935"><span class="hs-identifier hs-var">remoteSchema</span></a></span><span>
</span><span id="line-61"></span><span>          </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">.</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">fmap</span></span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Root.html#RemoteSchemaField"><span class="hs-identifier hs-type">IR.RemoteSchemaField</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621687994938"><span class="hs-identifier hs-type">fields</span></a></span><span>
</span><span id="line-62"></span><span>
</span><span id="line-63"></span><span class="annot"><span class="hs-comment">-- | Parser(s) for remote relationship fields to a remote schema</span></span><span>
</span><span id="line-64"></span><span class="annot"><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#remoteRelationshipToSchemaField"><span class="hs-identifier hs-type">remoteRelationshipToSchemaField</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-65"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621687994537"><span class="annot"><a href="#local-6989586621687994537"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621687994538"><span class="annot"><a href="#local-6989586621687994538"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621687994539"><span class="annot"><a href="#local-6989586621687994539"><span class="hs-identifier hs-type">n</span></a></span></span><span> </span><span id="local-6989586621687994540"><span class="annot"><a href="#local-6989586621687994540"><span class="hs-identifier hs-type">lhsJoinField</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-66"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#MonadBuildRemoteSchema"><span class="hs-identifier hs-type">MonadBuildRemoteSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687994537"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687994538"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687994539"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-67"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html#RemoteSchemaMap"><span class="hs-identifier hs-type">RemoteSchemaMap</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-68"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Schema.Options.html#RemoteSchemaPermissions"><span class="hs-identifier hs-type">RemoteSchemaPermissions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-69"></span><span>  </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/unordered-containers-0.2.20-6d56f9b3abc6011ddb6e237c415126423ab5ceb5c078221bba2ff80dbe921009/share/doc/html/src/Data.HashMap.Internal.html/Data.HashMap.Internal.html#HashMap"><span class="hs-identifier hs-type">HashMap.HashMap</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#FieldName"><span class="hs-identifier hs-type">FieldName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687994540"><span class="hs-identifier hs-type">lhsJoinField</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-70"></span><span>  </span><span class="annot"><a href="Hasura.RemoteSchema.SchemaCache.Types.html#RemoteSchemaFieldInfo"><span class="hs-identifier hs-type">RemoteSchemaFieldInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-71"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaT"><span class="hs-identifier hs-type">SchemaT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687994537"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687994538"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687994539"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.RemoteSchema.html#RemoteSchemaSelect"><span class="hs-identifier hs-type">IR.RemoteSchemaSelect</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Root.html#RemoteRelationshipField"><span class="hs-identifier hs-type">IR.RemoteRelationshipField</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-72"></span><span id="remoteRelationshipToSchemaField"><span class="annot"><span class="annottext">remoteRelationshipToSchemaField :: forall r (m :: * -&gt; *) (n :: * -&gt; *) lhsJoinField.
MonadBuildRemoteSchema r m n =&gt;
RemoteSchemaMap
-&gt; RemoteSchemaPermissions
-&gt; HashMap FieldName lhsJoinField
-&gt; RemoteSchemaFieldInfo
-&gt; SchemaT
     r
     m
     (Maybe
        (FieldParser
           n (RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue))))
</span><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#remoteRelationshipToSchemaField"><span class="hs-identifier hs-var hs-var">remoteRelationshipToSchemaField</span></a></span></span><span> </span><span id="local-6989586621687995032"><span class="annot"><span class="annottext">RemoteSchemaMap
</span><a href="#local-6989586621687995032"><span class="hs-identifier hs-var">remoteSchemaCache</span></a></span></span><span> </span><span id="local-6989586621687995033"><span class="annot"><span class="annottext">RemoteSchemaPermissions
</span><a href="#local-6989586621687995033"><span class="hs-identifier hs-var">remoteSchemaPermissions</span></a></span></span><span> </span><span id="local-6989586621687995034"><span class="annot"><span class="annottext">HashMap FieldName lhsJoinField
</span><a href="#local-6989586621687995034"><span class="hs-identifier hs-var">lhsFields</span></a></span></span><span> </span><span class="annot"><a href="Hasura.RemoteSchema.SchemaCache.Types.html#RemoteSchemaFieldInfo"><span class="hs-identifier hs-type">RemoteSchemaFieldInfo</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687995036"><span id="local-6989586621687995037"><span id="local-6989586621687995038"><span id="local-6989586621687995039"><span id="local-6989586621687995040"><span id="local-6989586621687995041"><span id="local-6989586621687995042"><span class="annot"><span class="annottext">[TypeDefinition [Name] RemoteSchemaInputValueDefinition]
HashMap Name RemoteSchemaInputValueDefinition
RelName
RemoteSchemaName
RemoteFields
LHSIdentifier
RemoteSchemaInfo
_rrfiName :: RelName
_rrfiParamMap :: HashMap Name RemoteSchemaInputValueDefinition
_rrfiRemoteFields :: RemoteFields
_rrfiRemoteSchema :: RemoteSchemaInfo
_rrfiInputValueDefinitions :: [TypeDefinition [Name] RemoteSchemaInputValueDefinition]
_rrfiRemoteSchemaName :: RemoteSchemaName
_rrfiLHSIdentifier :: LHSIdentifier
_rrfiLHSIdentifier :: RemoteSchemaFieldInfo -&gt; LHSIdentifier
_rrfiRemoteSchemaName :: RemoteSchemaFieldInfo -&gt; RemoteSchemaName
_rrfiInputValueDefinitions :: RemoteSchemaFieldInfo
-&gt; [TypeDefinition [Name] RemoteSchemaInputValueDefinition]
_rrfiRemoteSchema :: RemoteSchemaFieldInfo -&gt; RemoteSchemaInfo
_rrfiRemoteFields :: RemoteSchemaFieldInfo -&gt; RemoteFields
_rrfiParamMap :: RemoteSchemaFieldInfo
-&gt; HashMap Name RemoteSchemaInputValueDefinition
_rrfiName :: RemoteSchemaFieldInfo -&gt; RelName
</span><a href="#local-6989586621687995036"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">MaybeT
  (SchemaT r m)
  (FieldParser
     n (RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue)))
-&gt; SchemaT
     r
     m
     (Maybe
        (FieldParser
           n (RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue))))
forall (m :: * -&gt; *) a. MaybeT m a -&gt; m (Maybe a)
</span><span class="hs-identifier hs-var">runMaybeT</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-73"></span><span>  </span><span id="local-6989586621687995051"><span class="annot"><a href="#local-6989586621687995051"><span class="hs-identifier hs-var">roleName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(SchemaContext -&gt; RoleName) -&gt; MaybeT (SchemaT r m) RoleName
forall r (m :: * -&gt; *) a b.
(MonadReader r m, Has a r) =&gt;
(a -&gt; b) -&gt; m b
</span><a href="Hasura.GraphQL.Schema.Common.html#retrieve"><span class="hs-identifier hs-var">retrieve</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaContext -&gt; RoleName
</span><a href="Hasura.GraphQL.Schema.Common.html#scRole"><span class="hs-identifier hs-var">scRole</span></a></span><span>
</span><span id="line-74"></span><span>  </span><span id="local-6989586621687995054"><span class="annot"><a href="#local-6989586621687995054"><span class="hs-identifier hs-var">remoteSchemaContext</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-75"></span><span>    </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/unordered-containers-0.2.20-6d56f9b3abc6011ddb6e237c415126423ab5ceb5c078221bba2ff80dbe921009/share/doc/html/src/Data.HashMap.Internal.html/Data.HashMap.Internal.html#lookup"><span class="hs-identifier hs-type">HashMap.lookup</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995041"><span class="hs-identifier hs-type">_rrfiRemoteSchemaName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995032"><span class="hs-identifier hs-type">remoteSchemaCache</span></a></span><span>
</span><span id="line-76"></span><span>      </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#onNothing"><span class="hs-operator hs-type">`onNothing`</span></a></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#throw500"><span class="hs-identifier hs-type">throw500</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;invalid remote schema name: &quot;</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Extended.html/Data.Text.Extended.html#%3C%3E%3E"><span class="hs-operator hs-type">&lt;&gt;&gt;</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995041"><span class="hs-identifier hs-type">_rrfiRemoteSchemaName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-77"></span><span>  </span><span id="local-6989586621687995059"><span class="annot"><a href="#local-6989586621687995059"><span class="hs-identifier hs-var">introspection</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#hoistMaybe"><span class="hs-identifier hs-type">hoistMaybe</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#getIntrospectionResult"><span class="hs-identifier hs-type">getIntrospectionResult</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995033"><span class="hs-identifier hs-type">remoteSchemaPermissions</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995051"><span class="hs-identifier hs-type">roleName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995054"><span class="hs-identifier hs-type">remoteSchemaContext</span></a></span><span>
</span><span id="line-78"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687995062"><span class="annot"><a href="#local-6989586621687995062"><span class="hs-identifier hs-var hs-var">remoteSchemaRelationships</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaCtx
-&gt; RemoteSchemaRelationshipsG (RemoteFieldInfo Name)
forall remoteFieldInfo.
RemoteSchemaCtxG remoteFieldInfo
-&gt; RemoteSchemaRelationshipsG remoteFieldInfo
</span><a href="Hasura.RemoteSchema.SchemaCache.Types.html#_rscRemoteRelationships"><span class="hs-identifier hs-var">_rscRemoteRelationships</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaCtx
</span><a href="#local-6989586621687995054"><span class="hs-identifier hs-var">remoteSchemaContext</span></a></span><span>
</span><span id="line-79"></span><span>      </span><span id="local-6989586621687995064"><span class="annot"><a href="#local-6989586621687995064"><span class="hs-identifier hs-var hs-var">roleIntrospection</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IntrospectionResult -&gt; RemoteSchemaIntrospection
</span><a href="Hasura.RemoteSchema.SchemaCache.Types.html#irDoc"><span class="hs-identifier hs-var">irDoc</span></a></span><span> </span><span class="annot"><span class="annottext">IntrospectionResult
</span><a href="#local-6989586621687995059"><span class="hs-identifier hs-var">introspection</span></a></span><span>
</span><span id="line-80"></span><span>      </span><span id="local-6989586621687995066"><span class="annot"><a href="#local-6989586621687995066"><span class="hs-identifier hs-var hs-var">remoteSchemaRoot</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">IntrospectionResult -&gt; Name
</span><a href="Hasura.RemoteSchema.SchemaCache.Types.html#irQueryRoot"><span class="hs-identifier hs-var">irQueryRoot</span></a></span><span> </span><span class="annot"><span class="annottext">IntrospectionResult
</span><a href="#local-6989586621687995059"><span class="hs-identifier hs-var">introspection</span></a></span><span>
</span><span id="line-81"></span><span>      </span><span id="local-6989586621687995068"><span class="annot"><a href="#local-6989586621687995068"><span class="hs-identifier hs-var hs-var">remoteSchemaCustomizer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaInfo -&gt; RemoteSchemaCustomizer
</span><a href="Hasura.RemoteSchema.SchemaCache.Types.html#rsCustomizer"><span class="hs-identifier hs-var">rsCustomizer</span></a></span><span> </span><span class="annot"><span class="annottext">(RemoteSchemaInfo -&gt; RemoteSchemaCustomizer)
-&gt; RemoteSchemaInfo -&gt; RemoteSchemaCustomizer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaCtx -&gt; RemoteSchemaInfo
forall remoteFieldInfo.
RemoteSchemaCtxG remoteFieldInfo -&gt; RemoteSchemaInfo
</span><a href="Hasura.RemoteSchema.SchemaCache.Types.html#_rscInfo"><span class="hs-identifier hs-var">_rscInfo</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaCtx
</span><a href="#local-6989586621687995054"><span class="hs-identifier hs-var">remoteSchemaContext</span></a></span><span>
</span><span id="line-82"></span><span>      </span><span class="annot"><a href="Hasura.RemoteSchema.SchemaCache.Types.html#RemoteSchemaIntrospection"><span class="hs-identifier hs-type">RemoteSchemaIntrospection</span></a></span><span> </span><span id="local-6989586621687995072"><span class="annot"><a href="#local-6989586621687995072"><span class="hs-identifier hs-var">typeDefns</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="#local-6989586621687995064"><span class="hs-identifier hs-type">roleIntrospection</span></a></span><span>
</span><span id="line-83"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687995073"><span class="annot"><a href="#local-6989586621687995073"><span class="hs-identifier hs-var hs-var">hasuraFieldNames</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashMap FieldName lhsJoinField -&gt; HashSet FieldName
forall k a. HashMap k a -&gt; HashSet k
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/unordered-containers-0.2.20-6d56f9b3abc6011ddb6e237c415126423ab5ceb5c078221bba2ff80dbe921009/share/doc/html/src/Data.HashSet.Internal.html/Data.HashSet.Internal.html#keysSet"><span class="hs-identifier hs-var">HashMap.keysSet</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap FieldName lhsJoinField
</span><a href="#local-6989586621687995034"><span class="hs-identifier hs-var">lhsFields</span></a></span><span>
</span><span id="line-84"></span><span>      </span><span id="local-6989586621687995075"><span class="annot"><a href="#local-6989586621687995075"><span class="hs-identifier hs-var hs-var">relationshipDef</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaName
-&gt; HashSet FieldName -&gt; RemoteFields -&gt; ToSchemaRelationshipDef
</span><a href="Hasura.RemoteSchema.Metadata.RemoteRelationship.html#ToSchemaRelationshipDef"><span class="hs-identifier hs-var">ToSchemaRelationshipDef</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaName
</span><a href="#local-6989586621687995041"><span class="hs-identifier hs-var">_rrfiRemoteSchemaName</span></a></span><span> </span><span class="annot"><span class="annottext">HashSet FieldName
</span><a href="#local-6989586621687995073"><span class="hs-identifier hs-var">hasuraFieldNames</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteFields
</span><a href="#local-6989586621687995038"><span class="hs-identifier hs-var">_rrfiRemoteFields</span></a></span><span>
</span><span id="line-85"></span><span>  </span><span class="hs-special">(</span><span id="local-6989586621687995077"><span class="annot"><a href="#local-6989586621687995077"><span class="hs-identifier hs-var">newInpValDefns</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier">G.TypeDefinition</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier">G.Name</span></span><span class="hs-special">]</span><span> </span><span class="annot"><span class="hs-identifier">RemoteSchemaInputValueDefinition</span></span><span class="hs-special">]</span><span class="hs-special">,</span><span> </span><span id="local-6989586621687995078"><span class="annot"><a href="#local-6989586621687995078"><span class="hs-identifier hs-var">remoteFieldParamMap</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-86"></span><span>    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><a href="#local-6989586621687995051"><span class="hs-identifier hs-type">roleName</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">==</span></span><span> </span><span class="annot"><a href="Hasura.Authentication.Role.html#adminRoleName"><span class="hs-identifier hs-type">adminRoleName</span></a></span><span>
</span><span id="line-87"></span><span>      </span><span class="hs-keyword">then</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-88"></span><span>        </span><span class="hs-comment">-- we don't validate the remote relationship when the role is admin</span><span>
</span><span id="line-89"></span><span>        </span><span class="hs-comment">-- because it's already been validated, when the remote relationship</span><span>
</span><span id="line-90"></span><span>        </span><span class="hs-comment">-- was created</span><span>
</span><span id="line-91"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621687995040"><span class="hs-identifier hs-type">_rrfiInputValueDefinitions</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621687995037"><span class="hs-identifier hs-type">_rrfiParamMap</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-92"></span><span>      </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-93"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687995079"><span class="annot"><a href="#local-6989586621687995079"><span class="hs-identifier hs-var">roleRemoteField</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-94"></span><span>          </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#afold"><span class="hs-identifier hs-type">afold</span></a></span><span> </span><span class="hs-glyph">@</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span>
</span><span id="line-95"></span><span>            </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span>
</span><span id="line-96"></span><span>            </span><span class="hs-comment">-- TODO: this really needs to go way, we shouldn't be doing</span><span>
</span><span id="line-97"></span><span>            </span><span class="hs-comment">-- validation when building parsers</span><span>
</span><span id="line-98"></span><span>            </span><span class="annot"><a href="Hasura.RemoteSchema.SchemaCache.RemoteRelationship.html#validateToSchemaRelationship"><span class="hs-identifier hs-type">validateToSchemaRelationship</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995075"><span class="hs-identifier hs-type">relationshipDef</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995042"><span class="hs-identifier hs-type">_rrfiLHSIdentifier</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995036"><span class="hs-identifier hs-type">_rrfiName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621687995039"><span class="hs-identifier hs-type">_rrfiRemoteSchema</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621687995059"><span class="hs-identifier hs-type">introspection</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621687995034"><span class="hs-identifier hs-type">lhsFields</span></a></span><span>
</span><span id="line-99"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RemoteSchema.SchemaCache.Types.html#_rrfiInputValueDefinitions"><span class="hs-identifier hs-var">Remote._rrfiInputValueDefinitions</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995079"><span class="hs-identifier hs-type">roleRemoteField</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.RemoteSchema.SchemaCache.Types.html#_rrfiParamMap"><span class="hs-identifier hs-var">Remote._rrfiParamMap</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995079"><span class="hs-identifier hs-type">roleRemoteField</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-100"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span class="hs-comment">-- add the new input value definitions created by the remote relationship</span><span>
</span><span id="line-101"></span><span>      </span><span class="hs-comment">-- to the existing schema introspection of the role</span><span>
</span><span id="line-102"></span><span>      </span><span id="local-6989586621687995082"><span class="annot"><a href="#local-6989586621687995082"><span class="hs-identifier hs-var hs-var">remoteRelationshipIntrospection</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashMap
  Name (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
-&gt; RemoteSchemaIntrospection
</span><a href="Hasura.RemoteSchema.SchemaCache.Types.html#RemoteSchemaIntrospection"><span class="hs-identifier hs-var">RemoteSchemaIntrospection</span></a></span><span> </span><span class="annot"><span class="annottext">(HashMap
   Name (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
 -&gt; RemoteSchemaIntrospection)
-&gt; HashMap
     Name (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
-&gt; RemoteSchemaIntrospection
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HashMap
  Name (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
</span><a href="#local-6989586621687995072"><span class="hs-identifier hs-var">typeDefns</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap
  Name (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
-&gt; HashMap
     Name (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
-&gt; HashMap
     Name (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">(TypeDefinition [Name] RemoteSchemaInputValueDefinition -&gt; Name)
-&gt; [TypeDefinition [Name] RemoteSchemaInputValueDefinition]
-&gt; HashMap
     Name (TypeDefinition [Name] RemoteSchemaInputValueDefinition)
forall k v. Hashable k =&gt; (v -&gt; k) -&gt; [v] -&gt; HashMap k v
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.HashMap.Strict.Extended.html/Data.HashMap.Strict.Extended.html#fromListOn"><span class="hs-identifier hs-var">HashMap.fromListOn</span></a></span><span> </span><span class="annot"><span class="annottext">TypeDefinition [Name] RemoteSchemaInputValueDefinition -&gt; Name
forall possibleTypes inputType.
TypeDefinition possibleTypes inputType -&gt; Name
</span><a href="Hasura.RemoteSchema.SchemaCache.Types.html#getTypeName"><span class="hs-identifier hs-var">getTypeName</span></a></span><span> </span><span class="annot"><span class="annottext">[TypeDefinition [Name] RemoteSchemaInputValueDefinition]
</span><a href="#local-6989586621687995077"><span class="hs-identifier hs-var">newInpValDefns</span></a></span><span>
</span><span id="line-103"></span><span>  </span><span id="local-6989586621687995085"><span class="annot"><a href="#local-6989586621687995085"><span class="hs-identifier hs-var">fieldName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#textToName"><span class="hs-identifier hs-type">textToName</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#relNameToTxt"><span class="hs-identifier hs-type">relNameToTxt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995036"><span class="hs-identifier hs-type">_rrfiName</span></a></span><span>
</span><span id="line-104"></span><span>
</span><span id="line-105"></span><span>  </span><span class="hs-comment">-- This selection set parser, should be of the remote node's selection set parser, which comes</span><span>
</span><span id="line-106"></span><span>  </span><span class="hs-comment">-- from the fieldCall</span><span>
</span><span id="line-107"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687995087"><span class="annot"><a href="#local-6989586621687995087"><span class="hs-identifier hs-var hs-var">fieldCalls</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RemoteFields -&gt; NonEmpty FieldCall
</span><a href="Hasura.RemoteSchema.Metadata.RemoteRelationship.html#unRemoteFields"><span class="hs-identifier hs-var">unRemoteFields</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteFields
</span><a href="#local-6989586621687995038"><span class="hs-identifier hs-var">_rrfiRemoteFields</span></a></span><span>
</span><span id="line-108"></span><span>  </span><span id="local-6989586621687995089"><span class="annot"><a href="#local-6989586621687995089"><span class="hs-identifier hs-var">nestedFieldType</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">lift</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#lookupNestedFieldType"><span class="hs-identifier hs-type">lookupNestedFieldType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995066"><span class="hs-identifier hs-type">remoteSchemaRoot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995064"><span class="hs-identifier hs-type">roleIntrospection</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995087"><span class="hs-identifier hs-type">fieldCalls</span></a></span><span>
</span><span id="line-109"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687995091"><span class="annot"><a href="#local-6989586621687995091"><span class="hs-identifier hs-var hs-var">typeName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">GType -&gt; Name
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.html/Language.GraphQL.Draft.Syntax.html#getBaseType"><span class="hs-identifier hs-var">G.getBaseType</span></a></span><span> </span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621687995089"><span class="hs-identifier hs-var">nestedFieldType</span></a></span><span>
</span><span id="line-110"></span><span>  </span><span id="local-6989586621687995093"><span class="annot"><a href="#local-6989586621687995093"><span class="hs-identifier hs-var">fieldTypeDefinition</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-111"></span><span>    </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#onNothing"><span class="hs-identifier hs-type">onNothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RemoteSchema.SchemaCache.Types.html#lookupType"><span class="hs-identifier hs-type">lookupType</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995064"><span class="hs-identifier hs-type">roleIntrospection</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995091"><span class="hs-identifier hs-type">typeName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-112"></span><span>      </span><span class="hs-comment">-- the below case will never happen because we get the type name</span><span>
</span><span id="line-113"></span><span>      </span><span class="hs-comment">-- from the schema document itself i.e. if a field exists for the</span><span>
</span><span id="line-114"></span><span>      </span><span class="hs-comment">-- given role, then it's return type also must exist</span><span>
</span><span id="line-115"></span><span>      </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#throw500"><span class="hs-identifier hs-type">throw500</span></a></span><span>
</span><span id="line-116"></span><span>      </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-string">&quot;unexpected: &quot;</span></span><span>
</span><span id="line-117"></span><span>      </span><span class="annot"><span class="hs-operator hs-type">&lt;&gt;</span></span><span> </span><span class="annot"><a href="#local-6989586621687995091"><span class="hs-identifier hs-type">typeName</span></a></span><span>
</span><span id="line-118"></span><span>      </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Extended.html/Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-type">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot; not found &quot;</span></span><span>
</span><span id="line-119"></span><span>  </span><span class="hs-comment">-- These are the arguments that are given by the user while executing a query</span><span>
</span><span id="line-120"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687995096"><span class="annot"><a href="#local-6989586621687995096"><span class="hs-identifier hs-var hs-var">remoteFieldUserArguments</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((Name, RemoteSchemaInputValueDefinition)
 -&gt; RemoteSchemaInputValueDefinition)
-&gt; [(Name, RemoteSchemaInputValueDefinition)]
-&gt; [RemoteSchemaInputValueDefinition]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(Name, RemoteSchemaInputValueDefinition)
-&gt; RemoteSchemaInputValueDefinition
forall a b. (a, b) -&gt; b
</span><span class="hs-identifier hs-var">snd</span></span><span> </span><span class="annot"><span class="annottext">([(Name, RemoteSchemaInputValueDefinition)]
 -&gt; [RemoteSchemaInputValueDefinition])
-&gt; [(Name, RemoteSchemaInputValueDefinition)]
-&gt; [RemoteSchemaInputValueDefinition]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">HashMap Name RemoteSchemaInputValueDefinition
-&gt; [(Name, RemoteSchemaInputValueDefinition)]
forall k v. HashMap k v -&gt; [(k, v)]
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/unordered-containers-0.2.20-6d56f9b3abc6011ddb6e237c415126423ab5ceb5c078221bba2ff80dbe921009/share/doc/html/src/Data.HashMap.Internal.html/Data.HashMap.Internal.html#toList"><span class="hs-identifier hs-var">HashMap.toList</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Name RemoteSchemaInputValueDefinition
</span><a href="#local-6989586621687995078"><span class="hs-identifier hs-var">remoteFieldParamMap</span></a></span><span>
</span><span id="line-121"></span><span>  </span><span id="local-6989586621687995099"><span class="annot"><a href="#local-6989586621687995099"><span class="hs-identifier hs-var">remoteFld</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-122"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#withRemoteSchemaCustomization"><span class="hs-identifier hs-type">withRemoteSchemaCustomization</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995068"><span class="hs-identifier hs-type">remoteSchemaCustomizer</span></a></span><span>
</span><span id="line-123"></span><span>      </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">lift</span></span><span>
</span><span id="line-124"></span><span>      </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/schema-parsers-1.0.0/opt/doc/html/schema-parsers/src/Hasura.GraphQL.Parser.Internal.Parser.html/Hasura.GraphQL.Parser.Internal.Parser.html#wrapFieldParser"><span class="hs-identifier hs-type">P.wrapFieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995089"><span class="hs-identifier hs-type">nestedFieldType</span></a></span><span>
</span><span id="line-125"></span><span>      </span><span class="annot"><span class="hs-operator hs-type">&lt;$&gt;</span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Remote.html#remoteField"><span class="hs-identifier hs-type">remoteField</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995082"><span class="hs-identifier hs-type">remoteRelationshipIntrospection</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995062"><span class="hs-identifier hs-type">remoteSchemaRelationships</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995066"><span class="hs-identifier hs-type">remoteSchemaRoot</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995085"><span class="hs-identifier hs-type">fieldName</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span> </span><span class="annot"><a href="#local-6989586621687995096"><span class="hs-identifier hs-type">remoteFieldUserArguments</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995093"><span class="hs-identifier hs-type">fieldTypeDefinition</span></a></span><span>
</span><span id="line-126"></span><span>
</span><span id="line-127"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span>
</span><span id="line-128"></span><span>    </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621687995099"><span class="hs-identifier hs-type">remoteFld</span></a></span><span>
</span><span id="line-129"></span><span>    </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/schema-parsers-1.0.0/opt/doc/html/schema-parsers/src/Hasura.GraphQL.Parser.Internal.Parser.html/Hasura.GraphQL.Parser.Internal.Parser.html#bindField"><span class="hs-operator hs-type">`P.bindField`</span></a></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621687995104"><span class="annot"><span class="annottext">fld :: GraphQLField
  (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable
</span><a href="#local-6989586621687995104"><span class="hs-identifier hs-var">fld</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="Hasura.RQL.IR.RemoteSchema.html#GraphQLField"><span class="hs-identifier hs-type">IR.GraphQLField</span></a></span><span> </span><span class="hs-special">{</span><span class="annot"><span class="annottext">_fArguments :: forall r var. GraphQLField r var -&gt; HashMap Name (Value var)
</span><a href="Hasura.RQL.IR.RemoteSchema.html#_fArguments"><span class="hs-identifier hs-var">IR._fArguments</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621687995107"><span class="annot"><span class="annottext">HashMap Name (Value RemoteSchemaVariable)
</span><a href="#local-6989586621687995107"><span class="hs-identifier hs-var">args</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_fSelectionSet :: forall r var. GraphQLField r var -&gt; SelectionSet r var
</span><a href="Hasura.RQL.IR.RemoteSchema.html#_fSelectionSet"><span class="hs-identifier hs-var">IR._fSelectionSet</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621687995109"><span class="annot"><span class="annottext">SelectionSet
  (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable
</span><a href="#local-6989586621687995109"><span class="hs-identifier hs-var">selSet</span></a></span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">_fName :: forall r var. GraphQLField r var -&gt; Name
</span><a href="Hasura.RQL.IR.RemoteSchema.html#_fName"><span class="hs-identifier hs-var">IR._fName</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="local-6989586621687995111"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687995111"><span class="hs-identifier hs-var">fname</span></a></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-130"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687995112"><span class="annot"><span class="annottext">remoteArgs :: [RemoteFieldArgument]
</span><a href="#local-6989586621687995112"><span class="hs-identifier hs-var hs-var hs-var">remoteArgs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-131"></span><span>            </span><span class="annot"><span class="annottext">HashMap Name (Value RemoteSchemaVariable)
-&gt; [(Name, Value RemoteSchemaVariable)]
forall k v. HashMap k v -&gt; [(k, v)]
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/unordered-containers-0.2.20-6d56f9b3abc6011ddb6e237c415126423ab5ceb5c078221bba2ff80dbe921009/share/doc/html/src/Data.HashMap.Internal.html/Data.HashMap.Internal.html#toList"><span class="hs-identifier hs-var">HashMap.toList</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap Name (Value RemoteSchemaVariable)
</span><a href="#local-6989586621687995107"><span class="hs-identifier hs-var">args</span></a></span><span> </span><span class="annot"><span class="annottext">[(Name, Value RemoteSchemaVariable)]
-&gt; ((Name, Value RemoteSchemaVariable) -&gt; RemoteFieldArgument)
-&gt; [RemoteFieldArgument]
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span class="hs-special">(</span><span id="local-6989586621687995114"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687995114"><span class="hs-identifier hs-var">argName</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687995115"><span class="annot"><span class="annottext">Value RemoteSchemaVariable
</span><a href="#local-6989586621687995115"><span class="hs-identifier hs-var">argVal</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Name -&gt; InputValue RemoteSchemaVariable -&gt; RemoteFieldArgument
</span><a href="Hasura.RQL.IR.RemoteSchema.html#RemoteFieldArgument"><span class="hs-identifier hs-var">IR.RemoteFieldArgument</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687995114"><span class="hs-identifier hs-var">argName</span></a></span><span> </span><span class="annot"><span class="annottext">(InputValue RemoteSchemaVariable -&gt; RemoteFieldArgument)
-&gt; InputValue RemoteSchemaVariable -&gt; RemoteFieldArgument
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Value RemoteSchemaVariable -&gt; InputValue RemoteSchemaVariable
forall v. Value v -&gt; InputValue v
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/schema-parsers-1.0.0/opt/doc/html/schema-parsers/src/Hasura.GraphQL.Parser.Variable.html/Hasura.GraphQL.Parser.Variable.html#GraphQLValue"><span class="hs-identifier hs-var">P.GraphQLValue</span></a></span><span> </span><span class="annot"><span class="annottext">Value RemoteSchemaVariable
</span><a href="#local-6989586621687995115"><span class="hs-identifier hs-var">argVal</span></a></span><span>
</span><span id="line-132"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687995118"><span class="annot"><span class="annottext">resultCustomizer :: ResultCustomizer
</span><a href="#local-6989586621687995118"><span class="hs-identifier hs-var hs-var">resultCustomizer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-133"></span><span>            </span><span class="annot"><span class="annottext">NonEmpty FieldCall -&gt; ResultCustomizer -&gt; ResultCustomizer
</span><a href="#local-6989586621687995119"><span class="hs-identifier hs-var">applyFieldCalls</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty FieldCall
</span><a href="#local-6989586621687995087"><span class="hs-identifier hs-var">fieldCalls</span></a></span><span>
</span><span id="line-134"></span><span>              </span><span class="annot"><span class="annottext">(ResultCustomizer -&gt; ResultCustomizer)
-&gt; ResultCustomizer -&gt; ResultCustomizer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">AliasMapping -&gt; ResultCustomizer -&gt; ResultCustomizer
</span><a href="Hasura.RQL.Types.ResultCustomization.html#applyAliasMapping"><span class="hs-identifier hs-var">applyAliasMapping</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; AliasMapping
</span><a href="Hasura.RQL.Types.ResultCustomization.html#singletonAliasMapping"><span class="hs-identifier hs-var">singletonAliasMapping</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687995111"><span class="hs-identifier hs-var">fname</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FieldCall -&gt; Name
</span><a href="Hasura.RemoteSchema.Metadata.RemoteRelationship.html#fcName"><span class="hs-identifier hs-var">fcName</span></a></span><span> </span><span class="annot"><span class="annottext">(FieldCall -&gt; Name) -&gt; FieldCall -&gt; Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty FieldCall -&gt; FieldCall
forall a. NonEmpty a -&gt; a
</span><span class="hs-identifier hs-var">NE.last</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty FieldCall
</span><a href="#local-6989586621687995087"><span class="hs-identifier hs-var">fieldCalls</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span>              </span><span class="annot"><span class="annottext">(ResultCustomizer -&gt; ResultCustomizer)
-&gt; ResultCustomizer -&gt; ResultCustomizer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaCustomizer
-&gt; GraphQLField
     (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable
-&gt; ResultCustomizer
</span><a href="Hasura.GraphQL.Schema.Remote.html#makeResultCustomizer"><span class="hs-identifier hs-var">makeResultCustomizer</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaCustomizer
</span><a href="#local-6989586621687995068"><span class="hs-identifier hs-var">remoteSchemaCustomizer</span></a></span><span> </span><span class="annot"><span class="annottext">GraphQLField
  (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable
</span><a href="#local-6989586621687995104"><span class="hs-identifier hs-var">fld</span></a></span><span>
</span><span id="line-136"></span><span>      </span><span class="annot"><span class="annottext">RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue)
-&gt; n (RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue))
forall a. a -&gt; n a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span>
</span><span id="line-137"></span><span>        </span><span class="annot"><span class="annottext">(RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue)
 -&gt; n (RemoteSchemaSelect
         (RemoteRelationshipField UnpreparedValue)))
-&gt; RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue)
-&gt; n (RemoteSchemaSelect (RemoteRelationshipField UnpreparedValue))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><a href="Hasura.RQL.IR.RemoteSchema.html#RemoteSchemaSelect"><span class="hs-identifier hs-type">IR.RemoteSchemaSelect</span></a></span><span>
</span><span id="line-138"></span><span>          </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_rselArgs :: [RemoteFieldArgument]
</span><a href="#local-6989586621687995126"><span class="hs-identifier hs-var">IR._rselArgs</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">[RemoteFieldArgument]
</span><a href="#local-6989586621687995112"><span class="hs-identifier hs-var">remoteArgs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-139"></span><span>            </span><span class="annot"><span class="annottext">_rselResultCustomizer :: ResultCustomizer
</span><a href="#local-6989586621687995127"><span class="hs-identifier hs-var">IR._rselResultCustomizer</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ResultCustomizer
</span><a href="#local-6989586621687995118"><span class="hs-identifier hs-var">resultCustomizer</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-140"></span><span>            </span><span class="annot"><span class="annottext">_rselSelection :: SelectionSet
  (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable
</span><a href="#local-6989586621687995128"><span class="hs-identifier hs-var">IR._rselSelection</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SelectionSet
  (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable
</span><a href="#local-6989586621687995109"><span class="hs-identifier hs-var">selSet</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-141"></span><span>            </span><span class="annot"><span class="annottext">_rselFieldCall :: NonEmpty FieldCall
</span><a href="#local-6989586621687995129"><span class="hs-identifier hs-var">IR._rselFieldCall</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NonEmpty FieldCall
</span><a href="#local-6989586621687995087"><span class="hs-identifier hs-var">fieldCalls</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-142"></span><span>            </span><span class="annot"><span class="annottext">_rselRemoteSchema :: RemoteSchemaInfo
</span><a href="#local-6989586621687995130"><span class="hs-identifier hs-var">IR._rselRemoteSchema</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaInfo
</span><a href="#local-6989586621687995039"><span class="hs-identifier hs-var">_rrfiRemoteSchema</span></a></span><span>
</span><span id="line-143"></span><span>          </span><span class="hs-special">}</span><span>
</span><span id="line-144"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-145"></span><span>    </span><span class="hs-comment">-- Apply parent field calls so that the result customizer modifies the nested field</span><span>
</span><span id="line-146"></span><span>    </span><span class="annot"><a href="#local-6989586621687995119"><span class="hs-identifier hs-type">applyFieldCalls</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><a href="Hasura.RemoteSchema.Metadata.RemoteRelationship.html#FieldCall"><span class="hs-identifier hs-type">FieldCall</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.ResultCustomization.html#ResultCustomizer"><span class="hs-identifier hs-type">ResultCustomizer</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.ResultCustomization.html#ResultCustomizer"><span class="hs-identifier hs-type">ResultCustomizer</span></a></span><span>
</span><span id="line-147"></span><span>    </span><span id="local-6989586621687995119"><span class="annot"><span class="annottext">applyFieldCalls :: NonEmpty FieldCall -&gt; ResultCustomizer -&gt; ResultCustomizer
</span><a href="#local-6989586621687995119"><span class="hs-identifier hs-var hs-var">applyFieldCalls</span></a></span></span><span> </span><span id="local-6989586621687995131"><span class="annot"><span class="annottext">NonEmpty FieldCall
</span><a href="#local-6989586621687995131"><span class="hs-identifier hs-var">fieldCalls</span></a></span></span><span> </span><span id="local-6989586621687995132"><span class="annot"><span class="annottext">ResultCustomizer
</span><a href="#local-6989586621687995132"><span class="hs-identifier hs-var">resultCustomizer</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-148"></span><span>      </span><span class="annot"><span class="annottext">(FieldCall -&gt; ResultCustomizer -&gt; ResultCustomizer)
-&gt; ResultCustomizer -&gt; [FieldCall] -&gt; ResultCustomizer
forall a b. (a -&gt; b -&gt; b) -&gt; b -&gt; [a] -&gt; b
forall (t :: * -&gt; *) a b.
Foldable t =&gt;
(a -&gt; b -&gt; b) -&gt; b -&gt; t a -&gt; b
</span><span class="hs-identifier hs-var">foldr</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; ResultCustomizer -&gt; ResultCustomizer
</span><a href="Hasura.RQL.Types.ResultCustomization.html#modifyFieldByName"><span class="hs-identifier hs-var">modifyFieldByName</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; ResultCustomizer -&gt; ResultCustomizer)
-&gt; (FieldCall -&gt; Name)
-&gt; FieldCall
-&gt; ResultCustomizer
-&gt; ResultCustomizer
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">FieldCall -&gt; Name
</span><a href="Hasura.RemoteSchema.Metadata.RemoteRelationship.html#fcName"><span class="hs-identifier hs-var">fcName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">ResultCustomizer
</span><a href="#local-6989586621687995132"><span class="hs-identifier hs-var">resultCustomizer</span></a></span><span> </span><span class="annot"><span class="annottext">([FieldCall] -&gt; ResultCustomizer)
-&gt; [FieldCall] -&gt; ResultCustomizer
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty FieldCall -&gt; [FieldCall]
forall a. NonEmpty a -&gt; [a]
</span><span class="hs-identifier hs-var">NE.init</span></span><span> </span><span class="annot"><span class="annottext">NonEmpty FieldCall
</span><a href="#local-6989586621687995131"><span class="hs-identifier hs-var">fieldCalls</span></a></span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span id="local-6989586621687994669"><span id="local-6989586621687994670"><span class="annot"><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#lookupNestedFieldType%27"><span class="hs-identifier hs-type">lookupNestedFieldType'</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-151"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Memoize.html#MonadMemoize"><span class="hs-identifier hs-type">MonadMemoize</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687994669"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#QErr"><span class="hs-identifier hs-type">QErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687994669"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-152"></span><span>  </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.Name.html/Language.GraphQL.Draft.Syntax.Name.html#Name"><span class="hs-identifier hs-type">G.Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-153"></span><span>  </span><span class="annot"><a href="Hasura.RemoteSchema.SchemaCache.Types.html#RemoteSchemaIntrospection"><span class="hs-identifier hs-type">RemoteSchemaIntrospection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-154"></span><span>  </span><span class="annot"><a href="Hasura.RemoteSchema.Metadata.RemoteRelationship.html#FieldCall"><span class="hs-identifier hs-type">FieldCall</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-155"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaT"><span class="hs-identifier hs-type">SchemaT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687994670"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687994669"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.html/Language.GraphQL.Draft.Syntax.html#GType"><span class="hs-identifier hs-type">G.GType</span></a></span></span></span><span>
</span><span id="line-156"></span><span id="lookupNestedFieldType%27"><span class="annot"><span class="annottext">lookupNestedFieldType' :: forall (m :: * -&gt; *) r.
(MonadMemoize m, MonadError QErr m) =&gt;
Name -&gt; RemoteSchemaIntrospection -&gt; FieldCall -&gt; SchemaT r m GType
</span><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#lookupNestedFieldType%27"><span class="hs-identifier hs-var hs-var">lookupNestedFieldType'</span></a></span></span><span> </span><span id="local-6989586621687995155"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687995155"><span class="hs-identifier hs-var">parentTypeName</span></a></span></span><span> </span><span id="local-6989586621687995156"><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621687995156"><span class="hs-identifier hs-var">remoteSchemaIntrospection</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RemoteSchema.Metadata.RemoteRelationship.html#FieldCall"><span class="hs-identifier hs-type">FieldCall</span></a></span><span> </span><span id="local-6989586621687995158"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687995158"><span class="hs-identifier hs-var">fcName</span></a></span></span><span> </span><span class="annot"><span class="annottext">RemoteArguments
</span><span class="hs-identifier">_</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-157"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
-&gt; Name
-&gt; Maybe (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
</span><a href="Hasura.RemoteSchema.SchemaCache.Types.html#lookupObject"><span class="hs-identifier hs-var">lookupObject</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621687995156"><span class="hs-identifier hs-var">remoteSchemaIntrospection</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687995155"><span class="hs-identifier hs-var">parentTypeName</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-158"></span><span>    </span><span class="annot"><span class="annottext">Maybe (ObjectTypeDefinition RemoteSchemaInputValueDefinition)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Code -&gt; Text -&gt; SchemaT r m GType
forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#RemoteSchemaError"><span class="hs-identifier hs-var">RemoteSchemaError</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; SchemaT r m GType) -&gt; Text -&gt; SchemaT r m GType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;object with name &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687995155"><span class="hs-identifier hs-var">parentTypeName</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Extended.html/Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; not found&quot;</span></span><span>
</span><span id="line-159"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.html/Language.GraphQL.Draft.Syntax.html#ObjectTypeDefinition"><span class="hs-identifier hs-type">G.ObjectTypeDefinition</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687995163"><span id="local-6989586621687995164"><span id="local-6989586621687995165"><span id="local-6989586621687995166"><span id="local-6989586621687995167"><span class="annot"><span class="annottext">[Name]
[FieldDefinition RemoteSchemaInputValueDefinition]
[Directive Void]
Maybe Description
Name
_otdDescription :: Maybe Description
_otdName :: Name
_otdImplementsInterfaces :: [Name]
_otdDirectives :: [Directive Void]
_otdFieldsDefinition :: [FieldDefinition RemoteSchemaInputValueDefinition]
_otdFieldsDefinition :: forall inputType.
ObjectTypeDefinition inputType -&gt; [FieldDefinition inputType]
_otdDirectives :: forall inputType.
ObjectTypeDefinition inputType -&gt; [Directive Void]
_otdImplementsInterfaces :: forall inputType. ObjectTypeDefinition inputType -&gt; [Name]
_otdName :: forall inputType. ObjectTypeDefinition inputType -&gt; Name
_otdDescription :: forall inputType.
ObjectTypeDefinition inputType -&gt; Maybe Description
</span><a href="#local-6989586621687995163"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-160"></span><span>      </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">(FieldDefinition RemoteSchemaInputValueDefinition -&gt; Bool)
-&gt; [FieldDefinition RemoteSchemaInputValueDefinition]
-&gt; Maybe (FieldDefinition RemoteSchemaInputValueDefinition)
forall (t :: * -&gt; *) a. Foldable t =&gt; (a -&gt; Bool) -&gt; t a -&gt; Maybe a
</span><span class="hs-identifier hs-var">find</span></span><span> </span><span class="hs-special">(</span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name -&gt; Name -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687995158"><span class="hs-identifier hs-var">fcName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Name -&gt; Bool)
-&gt; (FieldDefinition RemoteSchemaInputValueDefinition -&gt; Name)
-&gt; FieldDefinition RemoteSchemaInputValueDefinition
-&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">FieldDefinition RemoteSchemaInputValueDefinition -&gt; Name
forall inputType. FieldDefinition inputType -&gt; Name
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.html/Language.GraphQL.Draft.Syntax.html#_fldName"><span class="hs-identifier hs-var">G._fldName</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[FieldDefinition RemoteSchemaInputValueDefinition]
</span><a href="#local-6989586621687995167"><span class="hs-identifier hs-var">_otdFieldsDefinition</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-161"></span><span>        </span><span class="annot"><span class="annottext">Maybe (FieldDefinition RemoteSchemaInputValueDefinition)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Code -&gt; Text -&gt; SchemaT r m GType
forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span> </span><span class="annot"><span class="annottext">Code
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#RemoteSchemaError"><span class="hs-identifier hs-var">RemoteSchemaError</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; SchemaT r m GType) -&gt; Text -&gt; SchemaT r m GType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;field with name &quot;</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687995158"><span class="hs-identifier hs-var">fcName</span></a></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Extended.html/Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; not found&quot;</span></span><span>
</span><span id="line-162"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.html/Language.GraphQL.Draft.Syntax.html#FieldDefinition"><span class="hs-identifier hs-type">G.FieldDefinition</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687995176"><span id="local-6989586621687995177"><span id="local-6989586621687995178"><span id="local-6989586621687995179"><span id="local-6989586621687995180"><span class="annot"><span class="annottext">[Directive Void]
[RemoteSchemaInputValueDefinition]
Maybe Description
Name
GType
_fldName :: forall inputType. FieldDefinition inputType -&gt; Name
_fldDescription :: Maybe Description
_fldName :: Name
_fldArgumentsDefinition :: [RemoteSchemaInputValueDefinition]
_fldType :: GType
_fldDirectives :: [Directive Void]
_fldDirectives :: forall inputType. FieldDefinition inputType -&gt; [Directive Void]
_fldType :: forall inputType. FieldDefinition inputType -&gt; GType
_fldArgumentsDefinition :: forall inputType.
FieldDefinition inputType -&gt; ArgumentsDefinition inputType
_fldDescription :: forall inputType. FieldDefinition inputType -&gt; Maybe Description
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.html/Language.GraphQL.Draft.Syntax.html#_fldName"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GType -&gt; SchemaT r m GType
forall a. a -&gt; SchemaT r m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621687995179"><span class="hs-identifier hs-var">_fldType</span></a></span><span>
</span><span id="line-163"></span><span>
</span><span id="line-164"></span><span id="local-6989586621687994623"><span id="local-6989586621687994624"><span class="annot"><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#lookupNestedFieldType"><span class="hs-identifier hs-type">lookupNestedFieldType</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-165"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Control.Monad.Memoize.html#MonadMemoize"><span class="hs-identifier hs-type">MonadMemoize</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687994623"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#QErr"><span class="hs-identifier hs-type">QErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687994623"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-166"></span><span>  </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.Name.html/Language.GraphQL.Draft.Syntax.Name.html#Name"><span class="hs-identifier hs-type">G.Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-167"></span><span>  </span><span class="annot"><a href="Hasura.RemoteSchema.SchemaCache.Types.html#RemoteSchemaIntrospection"><span class="hs-identifier hs-type">RemoteSchemaIntrospection</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-168"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">NonEmpty</span></span><span> </span><span class="annot"><a href="Hasura.RemoteSchema.Metadata.RemoteRelationship.html#FieldCall"><span class="hs-identifier hs-type">FieldCall</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-169"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaT"><span class="hs-identifier hs-type">SchemaT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687994624"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687994623"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.html/Language.GraphQL.Draft.Syntax.html#GType"><span class="hs-identifier hs-type">G.GType</span></a></span></span></span><span>
</span><span id="line-170"></span><span id="lookupNestedFieldType"><span class="annot"><span class="annottext">lookupNestedFieldType :: forall (m :: * -&gt; *) r.
(MonadMemoize m, MonadError QErr m) =&gt;
Name
-&gt; RemoteSchemaIntrospection
-&gt; NonEmpty FieldCall
-&gt; SchemaT r m GType
</span><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#lookupNestedFieldType"><span class="hs-identifier hs-var hs-var">lookupNestedFieldType</span></a></span></span><span> </span><span id="local-6989586621687995195"><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687995195"><span class="hs-identifier hs-var">parentTypeName</span></a></span></span><span> </span><span id="local-6989586621687995196"><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621687995196"><span class="hs-identifier hs-var">remoteSchemaIntrospection</span></a></span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621687995197"><span class="annot"><span class="annottext">FieldCall
</span><a href="#local-6989586621687995197"><span class="hs-identifier hs-var">fieldCall</span></a></span></span><span> </span><span class="annot"><span class="hs-operator hs-type">:|</span></span><span> </span><span id="local-6989586621687995199"><span class="annot"><span class="annottext">[FieldCall]
</span><a href="#local-6989586621687995199"><span class="hs-identifier hs-var">rest</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-171"></span><span>  </span><span id="local-6989586621687995200"><span class="annot"><a href="#local-6989586621687995200"><span class="hs-identifier hs-var">fieldType</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">Name -&gt; RemoteSchemaIntrospection -&gt; FieldCall -&gt; SchemaT r m GType
forall (m :: * -&gt; *) r.
(MonadMemoize m, MonadError QErr m) =&gt;
Name -&gt; RemoteSchemaIntrospection -&gt; FieldCall -&gt; SchemaT r m GType
</span><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#lookupNestedFieldType%27"><span class="hs-identifier hs-var">lookupNestedFieldType'</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687995195"><span class="hs-identifier hs-var">parentTypeName</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621687995196"><span class="hs-identifier hs-var">remoteSchemaIntrospection</span></a></span><span> </span><span class="annot"><span class="annottext">FieldCall
</span><a href="#local-6989586621687995197"><span class="hs-identifier hs-var">fieldCall</span></a></span><span>
</span><span id="line-172"></span><span>  </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="hs-identifier hs-type">NE.nonEmpty</span></span><span> </span><span class="annot"><a href="#local-6989586621687995199"><span class="hs-identifier hs-type">rest</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-173"></span><span>    </span><span class="annot"><span class="annottext">Maybe (NonEmpty FieldCall)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">GType -&gt; SchemaT r m GType
forall a. a -&gt; SchemaT r m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621687995200"><span class="hs-identifier hs-var">fieldType</span></a></span><span>
</span><span id="line-174"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621687995202"><span class="annot"><span class="annottext">NonEmpty FieldCall
</span><a href="#local-6989586621687995202"><span class="hs-identifier hs-var">rest'</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-175"></span><span>      </span><span class="annot"><span class="annottext">Name
-&gt; RemoteSchemaIntrospection
-&gt; NonEmpty FieldCall
-&gt; SchemaT r m GType
forall (m :: * -&gt; *) r.
(MonadMemoize m, MonadError QErr m) =&gt;
Name
-&gt; RemoteSchemaIntrospection
-&gt; NonEmpty FieldCall
-&gt; SchemaT r m GType
</span><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#lookupNestedFieldType"><span class="hs-identifier hs-var">lookupNestedFieldType</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">GType -&gt; Name
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.html/Language.GraphQL.Draft.Syntax.html#getBaseType"><span class="hs-identifier hs-var">G.getBaseType</span></a></span><span> </span><span class="annot"><span class="annottext">GType
</span><a href="#local-6989586621687995200"><span class="hs-identifier hs-var">fieldType</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">RemoteSchemaIntrospection
</span><a href="#local-6989586621687995196"><span class="hs-identifier hs-var">remoteSchemaIntrospection</span></a></span><span> </span><span class="annot"><span class="annottext">NonEmpty FieldCall
</span><a href="#local-6989586621687995202"><span class="hs-identifier hs-var">rest'</span></a></span><span>
</span><span id="line-176"></span><span>
</span><span id="line-177"></span><span class="hs-comment">-- | Parser(s) for remote relationship fields to a database table.</span><span>
</span><span id="line-178"></span><span class="hs-comment">-- Note that when the target is a database table, an array relationship</span><span>
</span><span id="line-179"></span><span class="hs-comment">-- declaration would have the '_aggregate' field in addition to the array</span><span>
</span><span id="line-180"></span><span class="hs-comment">-- relationship field, hence [FieldParser ...] instead of 'FieldParser'</span><span>
</span><span id="line-181"></span><span class="annot"><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#remoteRelationshipToSourceField"><span class="hs-identifier hs-type">remoteRelationshipToSourceField</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-182"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621687994513"><span class="annot"><a href="#local-6989586621687994513"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621687994514"><span class="annot"><a href="#local-6989586621687994514"><span class="hs-identifier hs-type">n</span></a></span></span><span> </span><span id="local-6989586621687994515"><span class="annot"><a href="#local-6989586621687994515"><span class="hs-identifier hs-type">tgt</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-183"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#QErr"><span class="hs-identifier hs-type">QErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687994513"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-184"></span><span>    </span><span class="annot"><a href="Control.Monad.Memoize.html#MonadMemoize"><span class="hs-identifier hs-type">P.MonadMemoize</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687994513"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-185"></span><span>    </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/schema-parsers-1.0.0/opt/doc/html/schema-parsers/src/Hasura.GraphQL.Parser.Class.html/Hasura.GraphQL.Parser.Class.html#MonadParse"><span class="hs-identifier hs-type">P.MonadParse</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687994514"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-186"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#BackendSchema"><span class="hs-identifier hs-type">BackendSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687994515"><span class="hs-identifier hs-type">tgt</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-187"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#BackendTableSelectSchema"><span class="hs-identifier hs-type">BackendTableSelectSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687994515"><span class="hs-identifier hs-type">tgt</span></a></span><span>
</span><span id="line-188"></span><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-189"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaContext"><span class="hs-identifier hs-type">SchemaContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-190"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Schema.Options.html#SchemaOptions"><span class="hs-identifier hs-type">SchemaOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-191"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceCache"><span class="hs-identifier hs-type">SourceCache</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-192"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Relationships.ToSource.html#RemoteSourceFieldInfo"><span class="hs-identifier hs-type">RemoteSourceFieldInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687994515"><span class="hs-identifier hs-type">tgt</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-193"></span><span>  </span><span class="annot"><a href="#local-6989586621687994513"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#FieldParser"><span class="hs-identifier hs-type">FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687994514"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Select.html#RemoteSourceSelect"><span class="hs-identifier hs-type">IR.RemoteSourceSelect</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Root.html#RemoteRelationshipField"><span class="hs-identifier hs-type">IR.RemoteRelationshipField</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687994515"><span class="hs-identifier hs-type">tgt</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-194"></span><span id="remoteRelationshipToSourceField"><span class="annot"><span class="annottext">remoteRelationshipToSourceField :: forall (m :: * -&gt; *) (n :: * -&gt; *) (tgt :: BackendType).
(MonadError QErr m, MonadMemoize m, MonadParse n,
 BackendSchema tgt, BackendTableSelectSchema tgt) =&gt;
SchemaContext
-&gt; SchemaOptions
-&gt; SourceCache
-&gt; RemoteSourceFieldInfo tgt
-&gt; m [FieldParser
        n
        (RemoteSourceSelect
           (RemoteRelationshipField UnpreparedValue) UnpreparedValue tgt)]
</span><a href="Hasura.GraphQL.Schema.RemoteRelationship.html#remoteRelationshipToSourceField"><span class="hs-identifier hs-var hs-var">remoteRelationshipToSourceField</span></a></span></span><span> </span><span id="local-6989586621687995268"><span class="annot"><span class="annottext">SchemaContext
</span><a href="#local-6989586621687995268"><span class="hs-identifier hs-var">context</span></a></span></span><span> </span><span id="local-6989586621687995269"><span class="annot"><span class="annottext">SchemaOptions
</span><a href="#local-6989586621687995269"><span class="hs-identifier hs-var">options</span></a></span></span><span> </span><span id="local-6989586621687995270"><span class="annot"><span class="annottext">SourceCache
</span><a href="#local-6989586621687995270"><span class="hs-identifier hs-var">sourceCache</span></a></span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Relationships.ToSource.html#RemoteSourceFieldInfo"><span class="hs-identifier hs-type">RemoteSourceFieldInfo</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687995272"><span id="local-6989586621687995273"><span id="local-6989586621687995274"><span id="local-6989586621687995275"><span id="local-6989586621687995276"><span id="local-6989586621687995277"><span class="annot"><span class="annottext">HashMap FieldName (ScalarType tgt, Column tgt)
SourceName
RelType
RelName
SourceConfig tgt
TableName tgt
_rsfiName :: RelName
_rsfiType :: RelType
_rsfiSource :: SourceName
_rsfiSourceConfig :: SourceConfig tgt
_rsfiTable :: TableName tgt
_rsfiMapping :: HashMap FieldName (ScalarType tgt, Column tgt)
_rsfiMapping :: forall (tgt :: BackendType).
RemoteSourceFieldInfo tgt
-&gt; HashMap FieldName (ScalarType tgt, Column tgt)
_rsfiTable :: forall (tgt :: BackendType).
RemoteSourceFieldInfo tgt -&gt; TableName tgt
_rsfiSourceConfig :: forall (tgt :: BackendType).
RemoteSourceFieldInfo tgt -&gt; SourceConfig tgt
_rsfiSource :: forall (tgt :: BackendType).
RemoteSourceFieldInfo tgt -&gt; SourceName
_rsfiType :: forall (tgt :: BackendType). RemoteSourceFieldInfo tgt -&gt; RelType
_rsfiName :: forall (tgt :: BackendType). RemoteSourceFieldInfo tgt -&gt; RelName
</span><a href="#local-6989586621687995272"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-195"></span><span>  </span><span id="local-6989586621687995284"><span class="annot"><a href="#local-6989586621687995284"><span class="hs-identifier hs-var">sourceInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span>
</span><span id="line-196"></span><span>    </span><span class="annot"><span class="annottext">Maybe (SourceInfo tgt) -&gt; m (SourceInfo tgt) -&gt; m (SourceInfo tgt)
forall (m :: * -&gt; *) a. Applicative m =&gt; Maybe a -&gt; m a -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#onNothing"><span class="hs-identifier hs-var">onNothing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (b :: BackendType).
HasTag b =&gt;
BackendSourceInfo -&gt; Maybe (SourceInfo b)
</span><a href="Hasura.RQL.Types.Source.html#unsafeSourceInfo"><span class="hs-identifier hs-var">unsafeSourceInfo</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621687994515"><span class="hs-identifier hs-type">tgt</span></a></span><span> </span><span class="annot"><span class="annottext">(BackendSourceInfo -&gt; Maybe (SourceInfo tgt))
-&gt; Maybe BackendSourceInfo -&gt; Maybe (SourceInfo tgt)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">SourceName -&gt; SourceCache -&gt; Maybe BackendSourceInfo
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/unordered-containers-0.2.20-6d56f9b3abc6011ddb6e237c415126423ab5ceb5c078221bba2ff80dbe921009/share/doc/html/src/Data.HashMap.Internal.html/Data.HashMap.Internal.html#lookup"><span class="hs-identifier hs-var">HashMap.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621687995274"><span class="hs-identifier hs-var">_rsfiSource</span></a></span><span> </span><span class="annot"><span class="annottext">SourceCache
</span><a href="#local-6989586621687995270"><span class="hs-identifier hs-var">sourceCache</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-197"></span><span>      </span><span class="annot"><span class="annottext">(m (SourceInfo tgt) -&gt; m (SourceInfo tgt))
-&gt; m (SourceInfo tgt) -&gt; m (SourceInfo tgt)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text -&gt; m (SourceInfo tgt)
forall (m :: * -&gt; *) a. QErrM m =&gt; Text -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#throw500"><span class="hs-identifier hs-var">throw500</span></a></span><span>
</span><span id="line-198"></span><span>      </span><span class="annot"><span class="annottext">(Text -&gt; m (SourceInfo tgt)) -&gt; Text -&gt; m (SourceInfo tgt)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;source not found &quot;</span></span><span>
</span><span id="line-199"></span><span>      </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">SourceName -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Extended.html/Data.Text.Extended.html#dquote"><span class="hs-identifier hs-var">dquote</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621687995274"><span class="hs-identifier hs-var">_rsfiSource</span></a></span><span>
</span><span id="line-200"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#runSourceSchema"><span class="hs-identifier hs-type">runSourceSchema</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995268"><span class="hs-identifier hs-type">context</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995269"><span class="hs-identifier hs-type">options</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995284"><span class="hs-identifier hs-type">sourceInfo</span></a></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-201"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687995289"><span class="annot"><a href="#local-6989586621687995289"><span class="hs-identifier hs-var hs-var">roleName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SchemaContext -&gt; RoleName
</span><a href="Hasura.GraphQL.Schema.Common.html#scRole"><span class="hs-identifier hs-var">scRole</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaContext
</span><a href="#local-6989586621687995268"><span class="hs-identifier hs-var">context</span></a></span><span>
</span><span id="line-202"></span><span>        </span><span id="local-6989586621687995290"><span class="annot"><a href="#local-6989586621687995290"><span class="hs-identifier hs-var hs-var">tCase</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ResolvedSourceCustomization -&gt; NamingCase
</span><a href="Hasura.RQL.Types.SourceCustomization.html#_rscNamingConvention"><span class="hs-identifier hs-var">_rscNamingConvention</span></a></span><span> </span><span class="annot"><span class="annottext">(ResolvedSourceCustomization -&gt; NamingCase)
-&gt; ResolvedSourceCustomization -&gt; NamingCase
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SourceInfo tgt -&gt; ResolvedSourceCustomization
forall (b :: BackendType).
SourceInfo b -&gt; ResolvedSourceCustomization
</span><a href="Hasura.RQL.Types.Source.html#_siCustomization"><span class="hs-identifier hs-var">_siCustomization</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo tgt
</span><a href="#local-6989586621687995284"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span>
</span><span id="line-203"></span><span>    </span><span id="local-6989586621687995293"><span class="annot"><a href="#local-6989586621687995293"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#askTableInfo"><span class="hs-identifier hs-type">askTableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995276"><span class="hs-identifier hs-type">_rsfiTable</span></a></span><span>
</span><span id="line-204"></span><span>    </span><span id="local-6989586621687995295"><span class="annot"><a href="#local-6989586621687995295"><span class="hs-identifier hs-var">fieldName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#textToName"><span class="hs-identifier hs-type">textToName</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#relNameToTxt"><span class="hs-identifier hs-type">relNameToTxt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995272"><span class="hs-identifier hs-type">_rsfiName</span></a></span><span>
</span><span id="line-205"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Table.html#tableSelectPermissions"><span class="hs-identifier hs-type">tableSelectPermissions</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621687994515"><span class="hs-identifier hs-type">tgt</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995289"><span class="hs-identifier hs-type">roleName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995293"><span class="hs-identifier hs-type">tableInfo</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-206"></span><span>      </span><span class="annot"><span class="annottext">Maybe (SelPermInfo tgt)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[FieldParser
   n
   (RemoteSourceSelect
      (RemoteRelationshipField UnpreparedValue) UnpreparedValue tgt)]
-&gt; SchemaT
     (SchemaContext, SchemaOptions, SourceInfo tgt)
     m
     [FieldParser
        n
        (RemoteSourceSelect
           (RemoteRelationshipField UnpreparedValue) UnpreparedValue tgt)]
forall a.
a -&gt; SchemaT (SchemaContext, SchemaOptions, SourceInfo tgt) m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-207"></span><span>      </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621687995297"><span class="annot"><span class="annottext">SelPermInfo tgt
</span><a href="#local-6989586621687995297"><span class="hs-identifier hs-var">tablePerms</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-208"></span><span>        </span><span id="local-6989586621687995298"><span class="annot"><a href="#local-6989586621687995298"><span class="hs-identifier hs-var">parsers</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">RelType
</span><a href="#local-6989586621687995273"><span class="hs-identifier hs-var">_rsfiType</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-209"></span><span>          </span><span class="annot"><span class="annottext">RelType
</span><a href="Hasura.RQL.Types.Common.html#ObjRel"><span class="hs-identifier hs-var">ObjRel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-210"></span><span>            </span><span id="local-6989586621687995300"><span class="annot"><a href="#local-6989586621687995300"><span class="hs-identifier hs-var">selectionSetParserM</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TableInfo tgt
-&gt; SchemaT
     (SchemaContext, SchemaOptions, SourceInfo tgt)
     m
     (Maybe (Parser 'Output n (AnnotatedFields tgt)))
forall r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSourceSchema tgt r m n =&gt;
TableInfo tgt
-&gt; SchemaT r m (Maybe (Parser 'Output n (AnnotatedFields tgt)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(BackendTableSelectSchema b, MonadBuildSourceSchema b r m n) =&gt;
TableInfo b
-&gt; SchemaT r m (Maybe (Parser 'Output n (AnnotatedFields b)))
</span><a href="Hasura.GraphQL.Schema.Backend.html#tableSelectionSet"><span class="hs-identifier hs-var">tableSelectionSet</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo tgt
</span><a href="#local-6989586621687995293"><span class="hs-identifier hs-var">tableInfo</span></a></span><span>
</span><span id="line-211"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><a href="#local-6989586621687995300"><span class="hs-identifier hs-type">selectionSetParserM</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-212"></span><span>              </span><span class="annot"><span class="annottext">Maybe (Parser 'Output n (AnnotatedFields tgt))
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span>
</span><span id="line-213"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621687995302"><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields tgt)
</span><a href="#local-6989586621687995302"><span class="hs-identifier hs-var">selectionSetParser</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-214"></span><span>                </span><span class="annot"><span class="annottext">FieldParser
  MetadataObjId
  n
  (SourceRelationshipSelection
     tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)
-&gt; [FieldParser
      MetadataObjId
      n
      (SourceRelationshipSelection
         tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)]
forall a. a -&gt; [a]
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span>
</span><span id="line-215"></span><span>                  </span><span class="annot"><span class="annottext">(FieldParser
   MetadataObjId
   n
   (SourceRelationshipSelection
      tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)
 -&gt; [FieldParser
       MetadataObjId
       n
       (SourceRelationshipSelection
          tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)])
-&gt; FieldParser
     MetadataObjId
     n
     (SourceRelationshipSelection
        tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)
-&gt; [FieldParser
      MetadataObjId
      n
      (SourceRelationshipSelection
         tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Name
-&gt; Maybe Description
-&gt; Parser 'Output n (AnnotatedFields tgt)
-&gt; FieldParser MetadataObjId n (AnnotatedFields tgt)
forall (m :: * -&gt; *) origin a.
MonadParse m =&gt;
Name
-&gt; Maybe Description
-&gt; Parser origin 'Output m a
-&gt; FieldParser origin m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/schema-parsers-1.0.0/opt/doc/html/schema-parsers/src/Hasura.GraphQL.Parser.Internal.Parser.html/Hasura.GraphQL.Parser.Internal.Parser.html#subselection_"><span class="hs-identifier hs-var">P.subselection_</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687995295"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Output n (AnnotatedFields tgt)
</span><a href="#local-6989586621687995302"><span class="hs-identifier hs-var">selectionSetParser</span></a></span><span>
</span><span id="line-216"></span><span>                  </span><span class="annot"><span class="annottext">FieldParser MetadataObjId n (AnnotatedFields tgt)
-&gt; (AnnotatedFields tgt
    -&gt; SourceRelationshipSelection
         tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)
-&gt; FieldParser
     MetadataObjId
     n
     (SourceRelationshipSelection
        tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)
forall (f :: * -&gt; *) a b. Functor f =&gt; f a -&gt; (a -&gt; b) -&gt; f b
</span><span class="hs-operator hs-var">&lt;&amp;&gt;</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621687995304"><span class="annot"><span class="annottext">AnnotatedFields tgt
</span><a href="#local-6989586621687995304"><span class="hs-identifier hs-var">fields</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-217"></span><span>                    </span><span class="annot"><span class="annottext">AnnObjectSelectG
  tgt (RemoteRelationshipField UnpreparedValue) (UnpreparedValue tgt)
-&gt; SourceRelationshipSelection
     tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue
forall (b :: BackendType) r (vf :: BackendType -&gt; *).
AnnObjectSelectG b r (vf b) -&gt; SourceRelationshipSelection b r vf
</span><a href="Hasura.RQL.IR.Select.html#SourceRelationshipObject"><span class="hs-identifier hs-var">IR.SourceRelationshipObject</span></a></span><span>
</span><span id="line-218"></span><span>                      </span><span class="annot"><span class="annottext">(AnnObjectSelectG
   tgt (RemoteRelationshipField UnpreparedValue) (UnpreparedValue tgt)
 -&gt; SourceRelationshipSelection
      tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue)
-&gt; AnnObjectSelectG
     tgt (RemoteRelationshipField UnpreparedValue) (UnpreparedValue tgt)
-&gt; SourceRelationshipSelection
     tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">AnnotatedFields tgt
-&gt; SelectFromG tgt (UnpreparedValue tgt)
-&gt; AnnBoolExp tgt (UnpreparedValue tgt)
-&gt; AnnObjectSelectG
     tgt (RemoteRelationshipField UnpreparedValue) (UnpreparedValue tgt)
forall (b :: BackendType) r v.
AnnFieldsG b r v
-&gt; SelectFromG b v -&gt; AnnBoolExp b v -&gt; AnnObjectSelectG b r v
</span><a href="Hasura.RQL.IR.Select.html#AnnObjectSelectG"><span class="hs-identifier hs-var">IR.AnnObjectSelectG</span></a></span><span> </span><span class="annot"><span class="annottext">AnnotatedFields tgt
</span><a href="#local-6989586621687995304"><span class="hs-identifier hs-var">fields</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TableName tgt -&gt; SelectFromG tgt (UnpreparedValue tgt)
forall (b :: BackendType) v. TableName b -&gt; SelectFromG b v
</span><a href="Hasura.RQL.IR.Select.From.html#FromTable"><span class="hs-identifier hs-var">IR.FromTable</span></a></span><span> </span><span class="annot"><span class="annottext">TableName tgt
</span><a href="#local-6989586621687995276"><span class="hs-identifier hs-var">_rsfiTable</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-219"></span><span>                      </span><span class="annot"><span class="annottext">(AnnBoolExp tgt (UnpreparedValue tgt)
 -&gt; AnnObjectSelectG
      tgt
      (RemoteRelationshipField UnpreparedValue)
      (UnpreparedValue tgt))
-&gt; AnnBoolExp tgt (UnpreparedValue tgt)
-&gt; AnnObjectSelectG
     tgt (RemoteRelationshipField UnpreparedValue) (UnpreparedValue tgt)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TablePermG tgt (UnpreparedValue tgt)
-&gt; AnnBoolExp tgt (UnpreparedValue tgt)
forall (b :: BackendType) v. TablePermG b v -&gt; AnnBoolExp b v
</span><a href="Hasura.RQL.IR.Select.TablePerm.html#_tpFilter"><span class="hs-identifier hs-var">IR._tpFilter</span></a></span><span>
</span><span id="line-220"></span><span>                      </span><span class="annot"><span class="annottext">(TablePermG tgt (UnpreparedValue tgt)
 -&gt; AnnBoolExp tgt (UnpreparedValue tgt))
-&gt; TablePermG tgt (UnpreparedValue tgt)
-&gt; AnnBoolExp tgt (UnpreparedValue tgt)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SelPermInfo tgt -&gt; TablePermG tgt (UnpreparedValue tgt)
forall (b :: BackendType).
Backend b =&gt;
SelPermInfo b -&gt; TablePerms b
</span><a href="Hasura.GraphQL.Schema.Common.html#tablePermissionsInfo"><span class="hs-identifier hs-var">tablePermissionsInfo</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo tgt
</span><a href="#local-6989586621687995297"><span class="hs-identifier hs-var">tablePerms</span></a></span><span>
</span><span id="line-221"></span><span>          </span><span class="annot"><span class="annottext">RelType
</span><a href="Hasura.RQL.Types.Common.html#ArrRel"><span class="hs-identifier hs-var">ArrRel</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-222"></span><span>            </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687995311"><span class="annot"><span class="annottext">aggFieldName :: Name
</span><a href="#local-6989586621687995311"><span class="hs-identifier hs-var hs-var hs-var">aggFieldName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NamingCase -&gt; GQLNameIdentifier -&gt; Name
</span><a href="Hasura.RQL.Types.SourceCustomization.html#applyFieldNameCaseIdentifier"><span class="hs-identifier hs-var">applyFieldNameCaseIdentifier</span></a></span><span> </span><span class="annot"><span class="annottext">NamingCase
</span><a href="#local-6989586621687995290"><span class="hs-identifier hs-var">tCase</span></a></span><span> </span><span class="annot"><span class="annottext">(GQLNameIdentifier -&gt; Name) -&gt; GQLNameIdentifier -&gt; Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Name, [NameSuffix]) -&gt; GQLNameIdentifier
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Casing.html/Data.Text.Casing.html#fromAutogeneratedTuple"><span class="hs-identifier hs-var">C.fromAutogeneratedTuple</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687995295"><span class="hs-identifier hs-var">fieldName</span></a></span><span class="hs-special">,</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Name -&gt; NameSuffix
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.Name.html/Language.GraphQL.Draft.Syntax.Name.html#convertNameToSuffix"><span class="hs-identifier hs-var">G.convertNameToSuffix</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="Hasura.Name.html#_aggregate"><span class="hs-identifier hs-var">Name._aggregate</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-223"></span><span>            </span><span id="local-6989586621687995316"><span class="annot"><a href="#local-6989586621687995316"><span class="hs-identifier hs-var">selectionSetParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">TableInfo tgt
-&gt; Name
-&gt; Maybe Description
-&gt; SchemaT
     (SchemaContext, SchemaOptions, SourceInfo tgt)
     m
     (Maybe (FieldParser n (SelectExp tgt)))
forall r (m :: * -&gt; *) (n :: * -&gt; *).
MonadBuildSourceSchema tgt r m n =&gt;
TableInfo tgt
-&gt; Name
-&gt; Maybe Description
-&gt; SchemaT r m (Maybe (FieldParser n (SelectExp tgt)))
forall (b :: BackendType) r (m :: * -&gt; *) (n :: * -&gt; *).
(BackendTableSelectSchema b, MonadBuildSourceSchema b r m n) =&gt;
TableInfo b
-&gt; Name
-&gt; Maybe Description
-&gt; SchemaT r m (Maybe (FieldParser n (SelectExp b)))
</span><a href="Hasura.GraphQL.Schema.Backend.html#selectTable"><span class="hs-identifier hs-var">selectTable</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo tgt
</span><a href="#local-6989586621687995293"><span class="hs-identifier hs-var">tableInfo</span></a></span><span> </span><span class="annot"><span class="annottext">Name
</span><a href="#local-6989586621687995295"><span class="hs-identifier hs-var">fieldName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Description
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-224"></span><span>            </span><span id="local-6989586621687995318"><span class="annot"><a href="#local-6989586621687995318"><span class="hs-identifier hs-var">aggSelectionSetParser</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Backend.html#selectTableAggregate"><span class="hs-identifier hs-type">selectTableAggregate</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995293"><span class="hs-identifier hs-type">tableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687995311"><span class="hs-identifier hs-type">aggFieldName</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Nothing</span></span><span>
</span><span id="line-225"></span><span>            </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span>
</span><span id="line-226"></span><span>              </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/witherable-0.5-ed5d92584b79c1fa03d7efeb1159ae93eef86189605b088dd8806eb40d0b16f5/share/doc/html/src/Witherable.html/Witherable.html#catMaybes"><span class="hs-identifier hs-type">catMaybes</span></a></span><span>
</span><span id="line-227"></span><span>                </span><span class="hs-special">[</span><span> </span><span class="annot"><a href="#local-6989586621687995316"><span class="hs-identifier hs-type">selectionSetParser</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">fmap</span></span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#SourceRelationshipArray"><span class="hs-identifier hs-type">IR.SourceRelationshipArray</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-228"></span><span>                  </span><span class="annot"><a href="#local-6989586621687995318"><span class="hs-identifier hs-type">aggSelectionSetParser</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">fmap</span></span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#SourceRelationshipArrayAggregate"><span class="hs-identifier hs-type">IR.SourceRelationshipArrayAggregate</span></a></span><span>
</span><span id="line-229"></span><span>                </span><span class="hs-special">]</span><span>
</span><span id="line-230"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span>
</span><span id="line-231"></span><span>          </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="#local-6989586621687995298"><span class="hs-identifier hs-type">parsers</span></a></span><span>
</span><span id="line-232"></span><span>          </span><span class="annot"><span class="hs-operator hs-type">&lt;&amp;&gt;</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">fmap</span></span><span> </span><span class="hs-glyph">\</span><span id="local-6989586621687995323"><span class="annot"><span class="annottext">SourceRelationshipSelection
  tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue
</span><a href="#local-6989586621687995323"><span class="hs-identifier hs-var">select</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-233"></span><span>            </span><span class="annot"><span class="annottext">SourceName
-&gt; SourceConfig tgt
-&gt; SourceRelationshipSelection
     tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue
-&gt; HashMap FieldName (ScalarType tgt, Column tgt)
-&gt; StringifyNumbers
-&gt; RemoteSourceSelect
     (RemoteRelationshipField UnpreparedValue) UnpreparedValue tgt
forall r (vf :: BackendType -&gt; *) (tgt :: BackendType).
SourceName
-&gt; SourceConfig tgt
-&gt; SourceRelationshipSelection tgt r vf
-&gt; HashMap FieldName (ScalarType tgt, Column tgt)
-&gt; StringifyNumbers
-&gt; RemoteSourceSelect r vf tgt
</span><a href="Hasura.RQL.IR.Select.html#RemoteSourceSelect"><span class="hs-identifier hs-var">IR.RemoteSourceSelect</span></a></span><span> </span><span class="annot"><span class="annottext">SourceName
</span><a href="#local-6989586621687995274"><span class="hs-identifier hs-var">_rsfiSource</span></a></span><span> </span><span class="annot"><span class="annottext">SourceConfig tgt
</span><a href="#local-6989586621687995275"><span class="hs-identifier hs-var">_rsfiSourceConfig</span></a></span><span> </span><span class="annot"><span class="annottext">SourceRelationshipSelection
  tgt (RemoteRelationshipField UnpreparedValue) UnpreparedValue
</span><a href="#local-6989586621687995323"><span class="hs-identifier hs-var">select</span></a></span><span> </span><span class="annot"><span class="annottext">HashMap FieldName (ScalarType tgt, Column tgt)
</span><a href="#local-6989586621687995277"><span class="hs-identifier hs-var">_rsfiMapping</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SchemaOptions -&gt; StringifyNumbers
</span><a href="Hasura.RQL.Types.Schema.Options.html#soStringifyNumbers"><span class="hs-identifier hs-var">soStringifyNumbers</span></a></span><span> </span><span class="annot"><span class="annottext">SchemaOptions
</span><a href="#local-6989586621687995269"><span class="hs-identifier hs-var">options</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-234"></span></pre></body></html>