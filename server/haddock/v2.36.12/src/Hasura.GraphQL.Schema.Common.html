<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span id="local-6989586621687862569"><span id="local-6989586621687862570"></span></span><span class="hs-pragma">{-# LANGUAGE TemplateHaskell #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE UndecidableInstances #-}</span><span>
</span><span id="line-3"></span><span class="hs-comment">-- ghc 9.6 seems to be doing something screwy with...</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# OPTIONS_GHC -Wno-redundant-constraints #-}</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-keyword">module</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html"><span class="hs-identifier">Hasura.GraphQL.Schema.Common</span></a></span><span>
</span><span id="line-7"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaContext"><span class="hs-identifier">SchemaContext</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-8"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaSampledFeatureFlags"><span class="hs-identifier">SchemaSampledFeatureFlags</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#sampleFeatureFlags"><span class="hs-identifier">sampleFeatureFlags</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#WithSchemaSampledFeatureFlags"><span class="hs-identifier">WithSchemaSampledFeatureFlags</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#withSchemaSampledFeatureFlags"><span class="hs-identifier">withSchemaSampledFeatureFlags</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaKind"><span class="hs-identifier">SchemaKind</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#RemoteRelationshipParserBuilder"><span class="hs-identifier">RemoteRelationshipParserBuilder</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#NodeInterfaceParserBuilder"><span class="hs-identifier">NodeInterfaceParserBuilder</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#MonadBuildSchemaBase"><span class="hs-identifier">MonadBuildSchemaBase</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#retrieve"><span class="hs-identifier">retrieve</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaT"><span class="hs-identifier">SchemaT</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#MonadBuildSourceSchema"><span class="hs-identifier">MonadBuildSourceSchema</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#MonadBuildRemoteSchema"><span class="hs-identifier">MonadBuildRemoteSchema</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#MonadBuildActionSchema"><span class="hs-identifier">MonadBuildActionSchema</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#runSourceSchema"><span class="hs-identifier">runSourceSchema</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#runRemoteSchema"><span class="hs-identifier">runRemoteSchema</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#runActionSchema"><span class="hs-identifier">runActionSchema</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#ignoreRemoteRelationship"><span class="hs-identifier">ignoreRemoteRelationship</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-25"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#isHasuraSchema"><span class="hs-identifier">isHasuraSchema</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-26"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#AggSelectExp"><span class="hs-identifier">AggSelectExp</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-27"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#AnnotatedField"><span class="hs-identifier">AnnotatedField</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-28"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#AnnotatedFields"><span class="hs-identifier">AnnotatedFields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-29"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#ConnectionFields"><span class="hs-identifier">ConnectionFields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-30"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#ConnectionSelectExp"><span class="hs-identifier">ConnectionSelectExp</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-31"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#AnnotatedActionField"><span class="hs-identifier">AnnotatedActionField</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-32"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#AnnotatedActionFields"><span class="hs-identifier">AnnotatedActionFields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-33"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#AnnotatedNestedObjectSelect"><span class="hs-identifier">AnnotatedNestedObjectSelect</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-34"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#AnnotatedNestedArraySelect"><span class="hs-identifier">AnnotatedNestedArraySelect</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-35"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#EdgeFields"><span class="hs-identifier">EdgeFields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-36"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#Scenario"><span class="hs-identifier">Scenario</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-37"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SelectArgs"><span class="hs-identifier">SelectArgs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-38"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SelectStreamArgs"><span class="hs-identifier">SelectStreamArgs</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-39"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SelectExp"><span class="hs-identifier">SelectExp</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-40"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#StreamSelectExp"><span class="hs-identifier">StreamSelectExp</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-41"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#TablePerms"><span class="hs-identifier">TablePerms</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-42"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#getTableRoles"><span class="hs-identifier">getTableRoles</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-43"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#getLogicalModelRoles"><span class="hs-identifier">getLogicalModelRoles</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-44"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#askScalarTypeParsingContext"><span class="hs-identifier">askScalarTypeParsingContext</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-45"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#askTableInfo"><span class="hs-identifier">askTableInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-46"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#askLogicalModelInfo"><span class="hs-identifier">askLogicalModelInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-47"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#askNativeQueryInfo"><span class="hs-identifier">askNativeQueryInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-48"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#comparisonAggOperators"><span class="hs-identifier">comparisonAggOperators</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-49"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#mapField"><span class="hs-identifier">mapField</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-50"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#mkDescriptionWith"><span class="hs-identifier">mkDescriptionWith</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-51"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#numericAggOperators"><span class="hs-identifier">numericAggOperators</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-52"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#optionalFieldParser"><span class="hs-identifier">optionalFieldParser</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-53"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#parsedSelectionsToFields"><span class="hs-identifier">parsedSelectionsToFields</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-54"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#partialSQLExpToUnpreparedValue"><span class="hs-identifier">partialSQLExpToUnpreparedValue</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-55"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#getRedactionExprForColumn"><span class="hs-identifier">getRedactionExprForColumn</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-56"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#getRedactionExprForComputedField"><span class="hs-identifier">getRedactionExprForComputedField</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-57"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#requiredFieldParser"><span class="hs-identifier">requiredFieldParser</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-58"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#takeValidNativeQueries"><span class="hs-identifier">takeValidNativeQueries</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-59"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#takeValidStoredProcedures"><span class="hs-identifier">takeValidStoredProcedures</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-60"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#takeValidFunctions"><span class="hs-identifier">takeValidFunctions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-61"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#takeValidTables"><span class="hs-identifier">takeValidTables</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-62"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#textToName"><span class="hs-identifier">textToName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-63"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#textToGQLIdentifier"><span class="hs-identifier">textToGQLIdentifier</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-64"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#RemoteSchemaParser"><span class="hs-identifier">RemoteSchemaParser</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-65"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#mkEnumTypeName"><span class="hs-identifier">mkEnumTypeName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-66"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#addEnumSuffix"><span class="hs-identifier">addEnumSuffix</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-67"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#peelWithOrigin"><span class="hs-identifier">peelWithOrigin</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-68"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#getIntrospectionResult"><span class="hs-identifier">getIntrospectionResult</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-69"></span><span>    </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#tablePermissionsInfo"><span class="hs-identifier">tablePermissionsInfo</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-70"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-71"></span><span class="hs-keyword">where</span><span>
</span><span id="line-72"></span><span>
</span><span id="line-73"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/monad-control-1.0.3.1-127c0b1895a90d6faa345827c6b6be6447278996974a93c84184eef9ccf5fbbc/share/doc/html/src/Control.Monad.Trans.Control.html/Control.Monad.Trans.Control.html"><span class="hs-identifier">Control.Monad.Trans.Control</span></a></span><span>
</span><span id="line-74"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">isRight</span></span><span class="hs-special">)</span><span>
</span><span id="line-75"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/data-has-0.4.0.0-53a688b2221046a4de0fb8e7927d1d69f385837da1af187d22b34ea76ed4183c/share/doc/html/src/Data.Has.html/Data.Has.html"><span class="hs-identifier">Data.Has</span></a></span><span>
</span><span id="line-76"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/unordered-containers-0.2.20-6d56f9b3abc6011ddb6e237c415126423ab5ceb5c078221bba2ff80dbe921009/share/doc/html/src/Data.HashMap.Strict.html/Data.HashMap.Strict.html"><span class="hs-identifier">Data.HashMap.Strict</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">HashMap</span></span><span>
</span><span id="line-77"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/insert-ordered-containers-0.2.5.3-dcb71999c8104475fd299533bb40a6c15ee8a9411f3a03b68aa99a14a4143c19/share/doc/html/src/Data.HashMap.Strict.InsOrd.html/Data.HashMap.Strict.InsOrd.html"><span class="hs-identifier">Data.HashMap.Strict.InsOrd</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">InsOrdHashMap</span></span><span>
</span><span id="line-78"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">uncons</span></span><span class="hs-special">)</span><span>
</span><span id="line-79"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Text</span></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">T</span></span><span>
</span><span id="line-80"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Casing.html/Data.Text.Casing.html"><span class="hs-identifier">Data.Text.Casing</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Casing.html/Data.Text.Casing.html#GQLNameIdentifier"><span class="hs-identifier">GQLNameIdentifier</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-81"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Casing.html/Data.Text.Casing.html"><span class="hs-identifier">Data.Text.Casing</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">C</span></span><span>
</span><span id="line-82"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Extended.html/Data.Text.Extended.html"><span class="hs-identifier">Data.Text.Extended</span></a></span><span>
</span><span id="line-83"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Authentication.Role.html"><span class="hs-identifier">Hasura.Authentication.Role</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Authentication.Role.html#RoleName"><span class="hs-identifier">RoleName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.Authentication.Role.html#adminRoleName"><span class="hs-identifier">adminRoleName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-84"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.SQL.Types.html"><span class="hs-identifier">Hasura.Backends.Postgres.SQL.Types</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Postgres</span></span><span>
</span><span id="line-85"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html"><span class="hs-identifier">Hasura.Base.Error</span></a></span><span>
</span><span id="line-86"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Function.Cache.html"><span class="hs-identifier">Hasura.Function.Cache</span></a></span><span>
</span><span id="line-87"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Namespace.html"><span class="hs-identifier">Hasura.GraphQL.Namespace</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Namespace.html#NamespacedField"><span class="hs-identifier">NamespacedField</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/schema-parsers-1.0.0/opt/doc/html/schema-parsers/src/Hasura.GraphQL.Parser.Internal.TypeChecking.html/Hasura.GraphQL.Parser.Internal.TypeChecking.html"><span class="hs-identifier">Hasura.GraphQL.Parser.Internal.TypeChecking</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P</span></span><span>
</span><span id="line-89"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Node.html"><span class="hs-identifier">Hasura.GraphQL.Schema.Node</span></a></span><span>
</span><span id="line-90"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html"><span class="hs-identifier">Hasura.GraphQL.Schema.Parser</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">P</span></span><span>
</span><span id="line-91"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Typename.html"><span class="hs-identifier">Hasura.GraphQL.Schema.Typename</span></a></span><span>
</span><span id="line-92"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.LogicalModel.Cache.html"><span class="hs-identifier">Hasura.LogicalModel.Cache</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.LogicalModel.Cache.html#LogicalModelInfo"><span class="hs-identifier">LogicalModelInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.LogicalModel.Cache.html#_lmiPermissions"><span class="hs-identifier">_lmiPermissions</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-93"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.LogicalModel.Types.html"><span class="hs-identifier">Hasura.LogicalModel.Types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.LogicalModel.Types.html#LogicalModelName"><span class="hs-identifier">LogicalModelName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-94"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.NativeQuery.Cache.html"><span class="hs-identifier">Hasura.NativeQuery.Cache</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.NativeQuery.Cache.html#NativeQueryCache"><span class="hs-identifier">NativeQueryCache</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="Hasura.NativeQuery.Cache.html#NativeQueryInfo"><span class="hs-identifier">NativeQueryInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-95"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.NativeQuery.Types.html"><span class="hs-identifier">Hasura.NativeQuery.Types</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.NativeQuery.Types.html#NativeQueryName"><span class="hs-identifier">NativeQueryName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-96"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html"><span class="hs-identifier">Hasura.Prelude</span></a></span><span>
</span><span id="line-97"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.html"><span class="hs-identifier">Hasura.RQL.IR</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">IR</span></span><span>
</span><span id="line-98"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.BoolExp.html"><span class="hs-identifier">Hasura.RQL.IR.BoolExp</span></a></span><span>
</span><span id="line-99"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Backend.html"><span class="hs-identifier">Hasura.RQL.Types.Backend</span></a></span><span>
</span><span id="line-100"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Common.html"><span class="hs-identifier">Hasura.RQL.Types.Common</span></a></span><span>
</span><span id="line-101"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.ComputedField.Name.html"><span class="hs-identifier">Hasura.RQL.Types.ComputedField.Name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.ComputedField.Name.html#ComputedFieldName"><span class="hs-identifier">ComputedFieldName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-102"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Relationships.Remote.html"><span class="hs-identifier">Hasura.RQL.Types.Relationships.Remote</span></a></span><span>
</span><span id="line-103"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Schema.Options.html"><span class="hs-identifier">Hasura.RQL.Types.Schema.Options</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Schema.Options.html#SchemaOptions"><span class="hs-identifier">SchemaOptions</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-104"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Schema.Options.html"><span class="hs-identifier">Hasura.RQL.Types.Schema.Options</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Options</span></span><span>
</span><span id="line-105"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html"><span class="hs-identifier">Hasura.RQL.Types.SchemaCache</span></a></span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.SchemaCache.html#askTableInfo"><span class="hs-identifier">askTableInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-106"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Source.html"><span class="hs-identifier">Hasura.RQL.Types.Source</span></a></span><span>
</span><span id="line-107"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SourceCustomization.html"><span class="hs-identifier">Hasura.RQL.Types.SourceCustomization</span></a></span><span>
</span><span id="line-108"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.RemoteSchema.SchemaCache.Types.html"><span class="hs-identifier">Hasura.RemoteSchema.SchemaCache.Types</span></a></span><span>
</span><span id="line-109"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.SQL.AnyBackend.html"><span class="hs-identifier">Hasura.SQL.AnyBackend</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">AB</span></span><span>
</span><span id="line-110"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Server.Init.FeatureFlag.html"><span class="hs-identifier">Hasura.Server.Init.FeatureFlag</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">FF</span></span><span>
</span><span id="line-111"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.StoredProcedure.Cache.html"><span class="hs-identifier">Hasura.StoredProcedure.Cache</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.StoredProcedure.Cache.html#StoredProcedureCache"><span class="hs-identifier">StoredProcedureCache</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-112"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hasura.Table.Cache.html"><span class="hs-identifier">Hasura.Table.Cache</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Table.Cache.html#SelPermInfo"><span class="hs-identifier">SelPermInfo</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-113"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.html/Language.GraphQL.Draft.Syntax.html"><span class="hs-identifier">Language.GraphQL.Draft.Syntax</span></a></span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">G</span></span><span>
</span><span id="line-114"></span><span>
</span><span id="line-115"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-116"></span><span>
</span><span id="line-117"></span><span class="annot"><span class="hs-comment">-- | Aggregation of contextual information required to build the schema.</span></span><span>
</span><span id="line-118"></span><span class="hs-keyword">data</span><span> </span><span id="SchemaContext"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaContext"><span class="hs-identifier hs-var">SchemaContext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SchemaContext"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaContext"><span class="hs-identifier hs-var">SchemaContext</span></a></span></span><span>
</span><span id="line-119"></span><span>  </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="hs-comment">-- | the kind of schema being built</span></span><span>
</span><span id="line-120"></span><span>    </span><span id="scSchemaKind"><span class="annot"><span class="annottext">SchemaContext -&gt; SchemaKind
</span><a href="Hasura.GraphQL.Schema.Common.html#scSchemaKind"><span class="hs-identifier hs-var hs-var">scSchemaKind</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaKind"><span class="hs-identifier hs-type">SchemaKind</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-121"></span><span>    </span><span class="annot"><span class="hs-comment">-- | how to process remote relationships</span></span><span>
</span><span id="line-122"></span><span>    </span><span id="scRemoteRelationshipParserBuilder"><span class="annot"><span class="annottext">SchemaContext -&gt; RemoteRelationshipParserBuilder
</span><a href="Hasura.GraphQL.Schema.Common.html#scRemoteRelationshipParserBuilder"><span class="hs-identifier hs-var hs-var">scRemoteRelationshipParserBuilder</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#RemoteRelationshipParserBuilder"><span class="hs-identifier hs-type">RemoteRelationshipParserBuilder</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-123"></span><span>    </span><span class="annot"><span class="hs-comment">-- | the role for which the schema is being built</span></span><span>
</span><span id="line-124"></span><span>    </span><span id="scRole"><span class="annot"><span class="annottext">SchemaContext -&gt; RoleName
</span><a href="Hasura.GraphQL.Schema.Common.html#scRole"><span class="hs-identifier hs-var hs-var">scRole</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Authentication.Role.html#RoleName"><span class="hs-identifier hs-type">RoleName</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-125"></span><span>    </span><span id="scSampledFeatureFlags"><span class="annot"><span class="annottext">SchemaContext -&gt; SchemaSampledFeatureFlags
</span><a href="Hasura.GraphQL.Schema.Common.html#scSampledFeatureFlags"><span class="hs-identifier hs-var hs-var">scSampledFeatureFlags</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaSampledFeatureFlags"><span class="hs-identifier hs-type">SchemaSampledFeatureFlags</span></a></span><span>
</span><span id="line-126"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-127"></span><span>
</span><span id="line-128"></span><span class="hs-comment">-- | We want to be able to probe feature flags in the schema parsers, but we also</span><span>
</span><span id="line-129"></span><span class="hs-comment">-- want to be able to run schema actions without requiring IO, in part because we</span><span>
</span><span id="line-130"></span><span class="hs-comment">-- want to be able to run them in tests and in part because we want some assurance</span><span>
</span><span id="line-131"></span><span class="hs-comment">-- that the schema we parse doesn't change without our knowledge, as that precludes</span><span>
</span><span id="line-132"></span><span class="hs-comment">-- safely caching schema introspection.</span><span>
</span><span id="line-133"></span><span class="hs-keyword">newtype</span><span> </span><span id="SchemaSampledFeatureFlags"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaSampledFeatureFlags"><span class="hs-identifier hs-var">SchemaSampledFeatureFlags</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SchemaSampledFeatureFlags"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaSampledFeatureFlags"><span class="hs-identifier hs-var">SchemaSampledFeatureFlags</span></a></span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Server.Init.FeatureFlag.html#FeatureFlag"><span class="hs-identifier hs-type">FF.FeatureFlag</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-134"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621687862689"><span id="local-6989586621687862695"><span class="annot"><span class="annottext">SchemaSampledFeatureFlags -&gt; SchemaSampledFeatureFlags -&gt; Bool
(SchemaSampledFeatureFlags -&gt; SchemaSampledFeatureFlags -&gt; Bool)
-&gt; (SchemaSampledFeatureFlags -&gt; SchemaSampledFeatureFlags -&gt; Bool)
-&gt; Eq SchemaSampledFeatureFlags
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: SchemaSampledFeatureFlags -&gt; SchemaSampledFeatureFlags -&gt; Bool
== :: SchemaSampledFeatureFlags -&gt; SchemaSampledFeatureFlags -&gt; Bool
$c/= :: SchemaSampledFeatureFlags -&gt; SchemaSampledFeatureFlags -&gt; Bool
/= :: SchemaSampledFeatureFlags -&gt; SchemaSampledFeatureFlags -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687862707"><span id="local-6989586621687862714"><span id="local-6989586621687862718"><span class="annot"><span class="annottext">Int -&gt; SchemaSampledFeatureFlags -&gt; ShowS
[SchemaSampledFeatureFlags] -&gt; ShowS
SchemaSampledFeatureFlags -&gt; String
(Int -&gt; SchemaSampledFeatureFlags -&gt; ShowS)
-&gt; (SchemaSampledFeatureFlags -&gt; String)
-&gt; ([SchemaSampledFeatureFlags] -&gt; ShowS)
-&gt; Show SchemaSampledFeatureFlags
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; SchemaSampledFeatureFlags -&gt; ShowS
showsPrec :: Int -&gt; SchemaSampledFeatureFlags -&gt; ShowS
$cshow :: SchemaSampledFeatureFlags -&gt; String
show :: SchemaSampledFeatureFlags -&gt; String
$cshowList :: [SchemaSampledFeatureFlags] -&gt; ShowS
showList :: [SchemaSampledFeatureFlags] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-135"></span><span>
</span><span id="line-136"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#sampleFeatureFlags"><span class="hs-identifier hs-type">sampleFeatureFlags</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.Server.Init.FeatureFlag.html#CheckFeatureFlag"><span class="hs-identifier hs-type">FF.CheckFeatureFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaSampledFeatureFlags"><span class="hs-identifier hs-type">SchemaSampledFeatureFlags</span></a></span><span>
</span><span id="line-137"></span><span id="sampleFeatureFlags"><span class="annot"><span class="annottext">sampleFeatureFlags :: CheckFeatureFlag -&gt; IO SchemaSampledFeatureFlags
</span><a href="Hasura.GraphQL.Schema.Common.html#sampleFeatureFlags"><span class="hs-identifier hs-var hs-var">sampleFeatureFlags</span></a></span></span><span> </span><span id="local-6989586621687862727"><span class="annot"><span class="annottext">CheckFeatureFlag
</span><a href="#local-6989586621687862727"><span class="hs-identifier hs-var">checkFeatureFlag</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-138"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687862728"><span class="annot"><span class="annottext">ffs :: [FeatureFlag]
</span><a href="#local-6989586621687862728"><span class="hs-identifier hs-var hs-var">ffs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">((FeatureFlag, Text) -&gt; FeatureFlag)
-&gt; [(FeatureFlag, Text)] -&gt; [FeatureFlag]
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="annot"><span class="annottext">(FeatureFlag, Text) -&gt; FeatureFlag
forall a b. (a, b) -&gt; a
</span><span class="hs-identifier hs-var">fst</span></span><span> </span><span class="annot"><span class="annottext">([(FeatureFlag, Text)] -&gt; [FeatureFlag])
-&gt; [(FeatureFlag, Text)] -&gt; [FeatureFlag]
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CheckFeatureFlag -&gt; [(FeatureFlag, Text)]
</span><a href="Hasura.Server.Init.FeatureFlag.html#listKnownFeatureFlags"><span class="hs-identifier hs-var">FF.listKnownFeatureFlags</span></a></span><span> </span><span class="annot"><span class="annottext">CheckFeatureFlag
</span><a href="#local-6989586621687862727"><span class="hs-identifier hs-var">checkFeatureFlag</span></a></span><span>
</span><span id="line-139"></span><span>  </span><span class="annot"><span class="annottext">[(FeatureFlag, Bool)] -&gt; SchemaSampledFeatureFlags
</span><a href="Hasura.GraphQL.Schema.Common.html#SchemaSampledFeatureFlags"><span class="hs-identifier hs-var">SchemaSampledFeatureFlags</span></a></span><span> </span><span class="annot"><span class="annottext">([(FeatureFlag, Bool)] -&gt; SchemaSampledFeatureFlags)
-&gt; IO [(FeatureFlag, Bool)] -&gt; IO SchemaSampledFeatureFlags
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">(FeatureFlag -&gt; IO (FeatureFlag, Bool))
-&gt; [FeatureFlag] -&gt; IO [(FeatureFlag, Bool)]
forall (t :: * -&gt; *) (m :: * -&gt; *) a b.
(Traversable t, Monad m) =&gt;
(a -&gt; m b) -&gt; t a -&gt; m (t b)
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; [a] -&gt; m [b]
</span><span class="hs-identifier hs-var">mapM</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">\</span><span id="local-6989586621687862733"><span class="annot"><span class="annottext">FeatureFlag
</span><a href="#local-6989586621687862733"><span class="hs-identifier hs-var">ff</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FeatureFlag
</span><a href="#local-6989586621687862733"><span class="hs-identifier hs-var">ff</span></a></span><span class="hs-special">,</span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; (FeatureFlag, Bool)) -&gt; IO Bool -&gt; IO (FeatureFlag, Bool)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">CheckFeatureFlag -&gt; FeatureFlag -&gt; IO Bool
</span><a href="Hasura.Server.Init.FeatureFlag.html#runCheckFeatureFlag"><span class="hs-identifier hs-var">FF.runCheckFeatureFlag</span></a></span><span> </span><span class="annot"><span class="annottext">CheckFeatureFlag
</span><a href="#local-6989586621687862727"><span class="hs-identifier hs-var">checkFeatureFlag</span></a></span><span> </span><span class="annot"><span class="annottext">FeatureFlag
</span><a href="#local-6989586621687862733"><span class="hs-identifier hs-var">ff</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">[FeatureFlag]
</span><a href="#local-6989586621687862728"><span class="hs-identifier hs-var">ffs</span></a></span><span>
</span><span id="line-140"></span><span>
</span><span id="line-141"></span><span class="hs-comment">-- | Monad transformer that lets you use the sampled feature flags from a reader environment.</span><span>
</span><span id="line-142"></span><span class="hs-comment">-- This is necessary because we want 'ReaderT r m` to be transparent wrt. 'HasFeatureFlagChecker m'.</span><span>
</span><span id="line-143"></span><span class="hs-keyword">newtype</span><span> </span><span id="WithSchemaSampledFeatureFlags"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#WithSchemaSampledFeatureFlags"><span class="hs-identifier hs-var">WithSchemaSampledFeatureFlags</span></a></span></span><span> </span><span id="local-6989586621687862007"><span class="annot"><a href="#local-6989586621687862007"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621687862008"><span class="annot"><a href="#local-6989586621687862008"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="WithSchemaSampledFeatureFlags"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#WithSchemaSampledFeatureFlags"><span class="hs-identifier hs-var">WithSchemaSampledFeatureFlags</span></a></span></span><span> </span><span class="hs-special">{</span><span id="unWithSchemaSampledFeatureFlags"><span class="annot"><span class="annottext">forall (m :: * -&gt; *) a.
WithSchemaSampledFeatureFlags m a
-&gt; ReaderT SchemaSampledFeatureFlags m a
</span><a href="Hasura.GraphQL.Schema.Common.html#unWithSchemaSampledFeatureFlags"><span class="hs-identifier hs-var hs-var">unWithSchemaSampledFeatureFlags</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ReaderT</span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaSampledFeatureFlags"><span class="hs-identifier hs-type">SchemaSampledFeatureFlags</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862007"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862008"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-144"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621687862739"><span id="local-6989586621687862744"><span class="annot"><span class="annottext">(forall a b.
 (a -&gt; b)
 -&gt; WithSchemaSampledFeatureFlags m a
 -&gt; WithSchemaSampledFeatureFlags m b)
-&gt; (forall a b.
    a
    -&gt; WithSchemaSampledFeatureFlags m b
    -&gt; WithSchemaSampledFeatureFlags m a)
-&gt; Functor (WithSchemaSampledFeatureFlags m)
forall a b.
a
-&gt; WithSchemaSampledFeatureFlags m b
-&gt; WithSchemaSampledFeatureFlags m a
forall a b.
(a -&gt; b)
-&gt; WithSchemaSampledFeatureFlags m a
-&gt; WithSchemaSampledFeatureFlags m b
forall (m :: * -&gt; *) a b.
Functor m =&gt;
a
-&gt; WithSchemaSampledFeatureFlags m b
-&gt; WithSchemaSampledFeatureFlags m a
forall (m :: * -&gt; *) a b.
Functor m =&gt;
(a -&gt; b)
-&gt; WithSchemaSampledFeatureFlags m a
-&gt; WithSchemaSampledFeatureFlags m b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall (m :: * -&gt; *) a b.
Functor m =&gt;
(a -&gt; b)
-&gt; WithSchemaSampledFeatureFlags m a
-&gt; WithSchemaSampledFeatureFlags m b
fmap :: forall a b.
(a -&gt; b)
-&gt; WithSchemaSampledFeatureFlags m a
-&gt; WithSchemaSampledFeatureFlags m b
$c&lt;$ :: forall (m :: * -&gt; *) a b.
Functor m =&gt;
a
-&gt; WithSchemaSampledFeatureFlags m b
-&gt; WithSchemaSampledFeatureFlags m a
&lt;$ :: forall a b.
a
-&gt; WithSchemaSampledFeatureFlags m b
-&gt; WithSchemaSampledFeatureFlags m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687862755"><span id="local-6989586621687862760"><span id="local-6989586621687862764"><span id="local-6989586621687862768"><span id="local-6989586621687862772"><span class="annot"><span class="annottext">Functor (WithSchemaSampledFeatureFlags m)
Functor (WithSchemaSampledFeatureFlags m) =&gt;
(forall a. a -&gt; WithSchemaSampledFeatureFlags m a)
-&gt; (forall a b.
    WithSchemaSampledFeatureFlags m (a -&gt; b)
    -&gt; WithSchemaSampledFeatureFlags m a
    -&gt; WithSchemaSampledFeatureFlags m b)
-&gt; (forall a b c.
    (a -&gt; b -&gt; c)
    -&gt; WithSchemaSampledFeatureFlags m a
    -&gt; WithSchemaSampledFeatureFlags m b
    -&gt; WithSchemaSampledFeatureFlags m c)
-&gt; (forall a b.
    WithSchemaSampledFeatureFlags m a
    -&gt; WithSchemaSampledFeatureFlags m b
    -&gt; WithSchemaSampledFeatureFlags m b)
-&gt; (forall a b.
    WithSchemaSampledFeatureFlags m a
    -&gt; WithSchemaSampledFeatureFlags m b
    -&gt; WithSchemaSampledFeatureFlags m a)
-&gt; Applicative (WithSchemaSampledFeatureFlags m)
forall a. a -&gt; WithSchemaSampledFeatureFlags m a
forall a b.
WithSchemaSampledFeatureFlags m a
-&gt; WithSchemaSampledFeatureFlags m b
-&gt; WithSchemaSampledFeatureFlags m a
forall a b.
WithSchemaSampledFeatureFlags m a
-&gt; WithSchemaSampledFeatureFlags m b
-&gt; WithSchemaSampledFeatureFlags m b
forall a b.
WithSchemaSampledFeatureFlags m (a -&gt; b)
-&gt; WithSchemaSampledFeatureFlags m a
-&gt; WithSchemaSampledFeatureFlags m b
forall a b c.
(a -&gt; b -&gt; c)
-&gt; WithSchemaSampledFeatureFlags m a
-&gt; WithSchemaSampledFeatureFlags m b
-&gt; WithSchemaSampledFeatureFlags m c
forall (f :: * -&gt; *).
Functor f =&gt;
(forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
forall (m :: * -&gt; *).
Applicative m =&gt;
Functor (WithSchemaSampledFeatureFlags m)
forall (m :: * -&gt; *) a.
Applicative m =&gt;
a -&gt; WithSchemaSampledFeatureFlags m a
forall (m :: * -&gt; *) a b.
Applicative m =&gt;
WithSchemaSampledFeatureFlags m a
-&gt; WithSchemaSampledFeatureFlags m b
-&gt; WithSchemaSampledFeatureFlags m a
forall (m :: * -&gt; *) a b.
Applicative m =&gt;
WithSchemaSampledFeatureFlags m a
-&gt; WithSchemaSampledFeatureFlags m b
-&gt; WithSchemaSampledFeatureFlags m b
forall (m :: * -&gt; *) a b.
Applicative m =&gt;
WithSchemaSampledFeatureFlags m (a -&gt; b)
-&gt; WithSchemaSampledFeatureFlags m a
-&gt; WithSchemaSampledFeatureFlags m b
forall (m :: * -&gt; *) a b c.
Applicative m =&gt;
(a -&gt; b -&gt; c)
-&gt; WithSchemaSampledFeatureFlags m a
-&gt; WithSchemaSampledFeatureFlags m b
-&gt; WithSchemaSampledFeatureFlags m c
$cpure :: forall (m :: * -&gt; *) a.
Applicative m =&gt;
a -&gt; WithSchemaSampledFeatureFlags m a
pure :: forall a. a -&gt; WithSchemaSampledFeatureFlags m a
$c&lt;*&gt; :: forall (m :: * -&gt; *) a b.
Applicative m =&gt;
WithSchemaSampledFeatureFlags m (a -&gt; b)
-&gt; WithSchemaSampledFeatureFlags m a
-&gt; WithSchemaSampledFeatureFlags m b
&lt;*&gt; :: forall a b.
WithSchemaSampledFeatureFlags m (a -&gt; b)
-&gt; WithSchemaSampledFeatureFlags m a
-&gt; WithSchemaSampledFeatureFlags m b
$cliftA2 :: forall (m :: * -&gt; *) a b c.
Applicative m =&gt;
(a -&gt; b -&gt; c)
-&gt; WithSchemaSampledFeatureFlags m a
-&gt; WithSchemaSampledFeatureFlags m b
-&gt; WithSchemaSampledFeatureFlags m c
liftA2 :: forall a b c.
(a -&gt; b -&gt; c)
-&gt; WithSchemaSampledFeatureFlags m a
-&gt; WithSchemaSampledFeatureFlags m b
-&gt; WithSchemaSampledFeatureFlags m c
$c*&gt; :: forall (m :: * -&gt; *) a b.
Applicative m =&gt;
WithSchemaSampledFeatureFlags m a
-&gt; WithSchemaSampledFeatureFlags m b
-&gt; WithSchemaSampledFeatureFlags m b
*&gt; :: forall a b.
WithSchemaSampledFeatureFlags m a
-&gt; WithSchemaSampledFeatureFlags m b
-&gt; WithSchemaSampledFeatureFlags m b
$c&lt;* :: forall (m :: * -&gt; *) a b.
Applicative m =&gt;
WithSchemaSampledFeatureFlags m a
-&gt; WithSchemaSampledFeatureFlags m b
-&gt; WithSchemaSampledFeatureFlags m a
&lt;* :: forall a b.
WithSchemaSampledFeatureFlags m a
-&gt; WithSchemaSampledFeatureFlags m b
-&gt; WithSchemaSampledFeatureFlags m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687862785"><span id="local-6989586621687862790"><span id="local-6989586621687862794"><span class="annot"><span class="annottext">Applicative (WithSchemaSampledFeatureFlags m)
Applicative (WithSchemaSampledFeatureFlags m) =&gt;
(forall a b.
 WithSchemaSampledFeatureFlags m a
 -&gt; (a -&gt; WithSchemaSampledFeatureFlags m b)
 -&gt; WithSchemaSampledFeatureFlags m b)
-&gt; (forall a b.
    WithSchemaSampledFeatureFlags m a
    -&gt; WithSchemaSampledFeatureFlags m b
    -&gt; WithSchemaSampledFeatureFlags m b)
-&gt; (forall a. a -&gt; WithSchemaSampledFeatureFlags m a)
-&gt; Monad (WithSchemaSampledFeatureFlags m)
forall a. a -&gt; WithSchemaSampledFeatureFlags m a
forall a b.
WithSchemaSampledFeatureFlags m a
-&gt; WithSchemaSampledFeatureFlags m b
-&gt; WithSchemaSampledFeatureFlags m b
forall a b.
WithSchemaSampledFeatureFlags m a
-&gt; (a -&gt; WithSchemaSampledFeatureFlags m b)
-&gt; WithSchemaSampledFeatureFlags m b
forall (m :: * -&gt; *).
Monad m =&gt;
Applicative (WithSchemaSampledFeatureFlags m)
forall (m :: * -&gt; *) a.
Monad m =&gt;
a -&gt; WithSchemaSampledFeatureFlags m a
forall (m :: * -&gt; *) a b.
Monad m =&gt;
WithSchemaSampledFeatureFlags m a
-&gt; WithSchemaSampledFeatureFlags m b
-&gt; WithSchemaSampledFeatureFlags m b
forall (m :: * -&gt; *) a b.
Monad m =&gt;
WithSchemaSampledFeatureFlags m a
-&gt; (a -&gt; WithSchemaSampledFeatureFlags m b)
-&gt; WithSchemaSampledFeatureFlags m b
forall (m :: * -&gt; *).
Applicative m =&gt;
(forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
$c&gt;&gt;= :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
WithSchemaSampledFeatureFlags m a
-&gt; (a -&gt; WithSchemaSampledFeatureFlags m b)
-&gt; WithSchemaSampledFeatureFlags m b
&gt;&gt;= :: forall a b.
WithSchemaSampledFeatureFlags m a
-&gt; (a -&gt; WithSchemaSampledFeatureFlags m b)
-&gt; WithSchemaSampledFeatureFlags m b
$c&gt;&gt; :: forall (m :: * -&gt; *) a b.
Monad m =&gt;
WithSchemaSampledFeatureFlags m a
-&gt; WithSchemaSampledFeatureFlags m b
-&gt; WithSchemaSampledFeatureFlags m b
&gt;&gt; :: forall a b.
WithSchemaSampledFeatureFlags m a
-&gt; WithSchemaSampledFeatureFlags m b
-&gt; WithSchemaSampledFeatureFlags m b
$creturn :: forall (m :: * -&gt; *) a.
Monad m =&gt;
a -&gt; WithSchemaSampledFeatureFlags m a
return :: forall a. a -&gt; WithSchemaSampledFeatureFlags m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687862805"><span class="annot"><span class="annottext">Monad (WithSchemaSampledFeatureFlags m)
Monad (WithSchemaSampledFeatureFlags m) =&gt;
(forall a. IO a -&gt; WithSchemaSampledFeatureFlags m a)
-&gt; MonadIO (WithSchemaSampledFeatureFlags m)
forall a. IO a -&gt; WithSchemaSampledFeatureFlags m a
forall (m :: * -&gt; *).
Monad m =&gt;
(forall a. IO a -&gt; m a) -&gt; MonadIO m
forall (m :: * -&gt; *).
MonadIO m =&gt;
Monad (WithSchemaSampledFeatureFlags m)
forall (m :: * -&gt; *) a.
MonadIO m =&gt;
IO a -&gt; WithSchemaSampledFeatureFlags m a
$cliftIO :: forall (m :: * -&gt; *) a.
MonadIO m =&gt;
IO a -&gt; WithSchemaSampledFeatureFlags m a
liftIO :: forall a. IO a -&gt; WithSchemaSampledFeatureFlags m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadIO</span></span></span><span class="hs-special">)</span><span>
</span><span id="line-145"></span><span>
</span><span id="line-146"></span><span id="local-6989586621687862083"><span id="local-6989586621687862827"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/transformers-base-0.4.6-df1098420f8bba181d3d0607518ad0acc5b4d50ee14ae11ab0cfa0957f133c37/share/doc/html/src/Control.Monad.Base.html/Control.Monad.Base.html#MonadBase"><span class="hs-identifier hs-type">MonadBase</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621687862083"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/transformers-base-0.4.6-df1098420f8bba181d3d0607518ad0acc5b4d50ee14ae11ab0cfa0957f133c37/share/doc/html/src/Control.Monad.Base.html/Control.Monad.Base.html#MonadBase"><span class="hs-identifier hs-type">MonadBase</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#WithSchemaSampledFeatureFlags"><span class="hs-identifier hs-type">WithSchemaSampledFeatureFlags</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862083"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-147"></span><span>
</span><span id="line-148"></span><span id="local-6989586621687862098"><span id="local-6989586621687862843"><span id="local-6989586621687862849"><span class="hs-keyword">deriving</span><span> </span><span class="hs-keyword">instance</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/monad-control-1.0.3.1-127c0b1895a90d6faa345827c6b6be6447278996974a93c84184eef9ccf5fbbc/share/doc/html/src/Control.Monad.Trans.Control.html/Control.Monad.Trans.Control.html#MonadBaseControl"><span class="hs-identifier hs-type">MonadBaseControl</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621687862098"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/transformers-base-0.4.6-df1098420f8bba181d3d0607518ad0acc5b4d50ee14ae11ab0cfa0957f133c37/share/doc/html/src/Control.Monad.Base.html/Control.Monad.Base.html#MonadBase"><span class="hs-identifier hs-type">MonadBase</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="annot"><a href="#local-6989586621687862098"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/monad-control-1.0.3.1-127c0b1895a90d6faa345827c6b6be6447278996974a93c84184eef9ccf5fbbc/share/doc/html/src/Control.Monad.Trans.Control.html/Control.Monad.Trans.Control.html#MonadBaseControl"><span class="hs-identifier hs-type">MonadBaseControl</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#WithSchemaSampledFeatureFlags"><span class="hs-identifier hs-type">WithSchemaSampledFeatureFlags</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862098"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-149"></span><span>
</span><span id="line-150"></span><span class="hs-keyword">instance</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadTrans</span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#WithSchemaSampledFeatureFlags"><span class="hs-identifier hs-type">WithSchemaSampledFeatureFlags</span></a></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-151"></span><span>  </span><span id="local-6989586621687862866"><span class="annot"><span class="annottext">lift :: forall (m :: * -&gt; *) a.
Monad m =&gt;
m a -&gt; WithSchemaSampledFeatureFlags m a
</span><a href="#local-6989586621687862866"><span class="hs-identifier hs-var hs-var hs-var">lift</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReaderT SchemaSampledFeatureFlags m a
-&gt; WithSchemaSampledFeatureFlags m a
forall (m :: * -&gt; *) a.
ReaderT SchemaSampledFeatureFlags m a
-&gt; WithSchemaSampledFeatureFlags m a
</span><a href="Hasura.GraphQL.Schema.Common.html#WithSchemaSampledFeatureFlags"><span class="hs-identifier hs-var">WithSchemaSampledFeatureFlags</span></a></span><span> </span><span class="annot"><span class="annottext">(ReaderT SchemaSampledFeatureFlags m a
 -&gt; WithSchemaSampledFeatureFlags m a)
-&gt; (m a -&gt; ReaderT SchemaSampledFeatureFlags m a)
-&gt; m a
-&gt; WithSchemaSampledFeatureFlags m a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">m a -&gt; ReaderT SchemaSampledFeatureFlags m a
forall (m :: * -&gt; *) a.
Monad m =&gt;
m a -&gt; ReaderT SchemaSampledFeatureFlags m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span>
</span><span id="line-152"></span><span>
</span><span id="line-153"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687862114"><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Source.html#MonadResolveSource"><span class="hs-identifier hs-type">MonadResolveSource</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862114"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#MonadResolveSource"><span class="hs-identifier hs-type">MonadResolveSource</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#WithSchemaSampledFeatureFlags"><span class="hs-identifier hs-type">WithSchemaSampledFeatureFlags</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862114"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-154"></span><span>  </span><span id="local-6989586621687862881"><span class="annot"><span class="annottext">getPGSourceResolver :: WithSchemaSampledFeatureFlags
  m (SourceResolver ('Postgres 'Vanilla))
</span><a href="#local-6989586621687862881"><span class="hs-identifier hs-var hs-var hs-var">getPGSourceResolver</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m (Environment
   -&gt; SourceName
   -&gt; PostgresConnConfiguration
   -&gt; IO (Either QErr PGSourceConfig))
-&gt; WithSchemaSampledFeatureFlags
     m
     (Environment
      -&gt; SourceName
      -&gt; PostgresConnConfiguration
      -&gt; IO (Either QErr PGSourceConfig))
forall (m :: * -&gt; *) a.
Monad m =&gt;
m a -&gt; WithSchemaSampledFeatureFlags m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">m (SourceResolver ('Postgres 'Vanilla))
m (Environment
   -&gt; SourceName
   -&gt; PostgresConnConfiguration
   -&gt; IO (Either QErr PGSourceConfig))
forall (m :: * -&gt; *).
MonadResolveSource m =&gt;
m (SourceResolver ('Postgres 'Vanilla))
</span><a href="Hasura.RQL.Types.Source.html#getPGSourceResolver"><span class="hs-identifier hs-var">getPGSourceResolver</span></a></span><span>
</span><span id="line-155"></span><span>  </span><span id="local-6989586621687862886"><span class="annot"><span class="annottext">getMSSQLSourceResolver :: WithSchemaSampledFeatureFlags m (SourceResolver 'MSSQL)
</span><a href="#local-6989586621687862886"><span class="hs-identifier hs-var hs-var hs-var">getMSSQLSourceResolver</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m (Environment
   -&gt; SourceName
   -&gt; MSSQLConnConfiguration
   -&gt; IO (Either QErr MSSQLSourceConfig))
-&gt; WithSchemaSampledFeatureFlags
     m
     (Environment
      -&gt; SourceName
      -&gt; MSSQLConnConfiguration
      -&gt; IO (Either QErr MSSQLSourceConfig))
forall (m :: * -&gt; *) a.
Monad m =&gt;
m a -&gt; WithSchemaSampledFeatureFlags m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *) (m :: * -&gt; *) a.
(MonadTrans t, Monad m) =&gt;
m a -&gt; t m a
</span><span class="hs-identifier hs-var">lift</span></span><span> </span><span class="annot"><span class="annottext">m (Environment
   -&gt; SourceName
   -&gt; MSSQLConnConfiguration
   -&gt; IO (Either QErr MSSQLSourceConfig))
m (SourceResolver 'MSSQL)
forall (m :: * -&gt; *).
MonadResolveSource m =&gt;
m (SourceResolver 'MSSQL)
</span><a href="Hasura.RQL.Types.Source.html#getMSSQLSourceResolver"><span class="hs-identifier hs-var">getMSSQLSourceResolver</span></a></span><span>
</span><span id="line-156"></span><span>
</span><span id="line-157"></span><span id="local-6989586621687862122"><span id="local-6989586621687862123"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#withSchemaSampledFeatureFlags"><span class="hs-identifier hs-type">withSchemaSampledFeatureFlags</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaSampledFeatureFlags"><span class="hs-identifier hs-type">SchemaSampledFeatureFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#WithSchemaSampledFeatureFlags"><span class="hs-identifier hs-type">WithSchemaSampledFeatureFlags</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862122"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862123"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621687862122"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862123"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-158"></span><span id="withSchemaSampledFeatureFlags"><span class="annot"><span class="annottext">withSchemaSampledFeatureFlags :: forall (m :: * -&gt; *) a.
SchemaSampledFeatureFlags
-&gt; WithSchemaSampledFeatureFlags m a -&gt; m a
</span><a href="Hasura.GraphQL.Schema.Common.html#withSchemaSampledFeatureFlags"><span class="hs-identifier hs-var hs-var">withSchemaSampledFeatureFlags</span></a></span></span><span> </span><span id="local-6989586621687862888"><span class="annot"><span class="annottext">SchemaSampledFeatureFlags
</span><a href="#local-6989586621687862888"><span class="hs-identifier hs-var">ffs</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(ReaderT SchemaSampledFeatureFlags m a
 -&gt; SchemaSampledFeatureFlags -&gt; m a)
-&gt; SchemaSampledFeatureFlags
-&gt; ReaderT SchemaSampledFeatureFlags m a
-&gt; m a
forall a b c. (a -&gt; b -&gt; c) -&gt; b -&gt; a -&gt; c
</span><span class="hs-identifier hs-var">flip</span></span><span> </span><span class="annot"><span class="annottext">ReaderT SchemaSampledFeatureFlags m a
-&gt; SchemaSampledFeatureFlags -&gt; m a
forall r (m :: * -&gt; *) a. ReaderT r m a -&gt; r -&gt; m a
</span><span class="hs-identifier hs-var">runReaderT</span></span><span> </span><span class="annot"><span class="annottext">SchemaSampledFeatureFlags
</span><a href="#local-6989586621687862888"><span class="hs-identifier hs-var">ffs</span></a></span><span> </span><span class="annot"><span class="annottext">(ReaderT SchemaSampledFeatureFlags m a -&gt; m a)
-&gt; (WithSchemaSampledFeatureFlags m a
    -&gt; ReaderT SchemaSampledFeatureFlags m a)
-&gt; WithSchemaSampledFeatureFlags m a
-&gt; m a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">WithSchemaSampledFeatureFlags m a
-&gt; ReaderT SchemaSampledFeatureFlags m a
forall (m :: * -&gt; *) a.
WithSchemaSampledFeatureFlags m a
-&gt; ReaderT SchemaSampledFeatureFlags m a
</span><a href="Hasura.GraphQL.Schema.Common.html#unWithSchemaSampledFeatureFlags"><span class="hs-identifier hs-var">unWithSchemaSampledFeatureFlags</span></a></span><span>
</span><span id="line-159"></span><span>
</span><span id="line-160"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687862135"><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621687862135"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hasura.Server.Init.FeatureFlag.html#HasFeatureFlagChecker"><span class="hs-identifier hs-type">FF.HasFeatureFlagChecker</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#WithSchemaSampledFeatureFlags"><span class="hs-identifier hs-type">WithSchemaSampledFeatureFlags</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862135"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-161"></span><span>  </span><span id="local-6989586621687862902"><span class="annot"><span class="annottext">checkFlag :: FeatureFlag -&gt; WithSchemaSampledFeatureFlags m Bool
</span><a href="#local-6989586621687862902"><span class="hs-identifier hs-var hs-var hs-var">checkFlag</span></a></span></span><span> </span><span id="local-6989586621687862904"><span class="annot"><span class="annottext">FeatureFlag
</span><a href="#local-6989586621687862904"><span class="hs-identifier hs-var">ff</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-162"></span><span>    </span><span id="local-6989586621687862905"><span class="annot"><a href="#local-6989586621687862905"><span class="hs-identifier hs-var">flags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ReaderT SchemaSampledFeatureFlags m SchemaSampledFeatureFlags
-&gt; WithSchemaSampledFeatureFlags m SchemaSampledFeatureFlags
forall (m :: * -&gt; *) a.
ReaderT SchemaSampledFeatureFlags m a
-&gt; WithSchemaSampledFeatureFlags m a
</span><a href="Hasura.GraphQL.Schema.Common.html#WithSchemaSampledFeatureFlags"><span class="hs-identifier hs-var">WithSchemaSampledFeatureFlags</span></a></span><span> </span><span class="annot"><span class="annottext">(ReaderT SchemaSampledFeatureFlags m SchemaSampledFeatureFlags
 -&gt; WithSchemaSampledFeatureFlags m SchemaSampledFeatureFlags)
-&gt; ReaderT SchemaSampledFeatureFlags m SchemaSampledFeatureFlags
-&gt; WithSchemaSampledFeatureFlags m SchemaSampledFeatureFlags
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ReaderT SchemaSampledFeatureFlags m SchemaSampledFeatureFlags
forall r (m :: * -&gt; *). MonadReader r m =&gt; m r
</span><span class="hs-identifier hs-var">ask</span></span><span>
</span><span id="line-163"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#sampledCheckFlag"><span class="hs-identifier hs-type">sampledCheckFlag</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862905"><span class="hs-identifier hs-type">flags</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862904"><span class="hs-identifier hs-type">ff</span></a></span><span>
</span><span id="line-164"></span><span>
</span><span id="line-165"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#sampledCheckFlag"><span class="hs-identifier hs-type">sampledCheckFlag</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaSampledFeatureFlags"><span class="hs-identifier hs-type">SchemaSampledFeatureFlags</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.Server.Init.FeatureFlag.html#FeatureFlag"><span class="hs-identifier hs-type">FF.FeatureFlag</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-166"></span><span id="sampledCheckFlag"><span class="annot"><span class="annottext">sampledCheckFlag :: SchemaSampledFeatureFlags -&gt; FeatureFlag -&gt; Bool
</span><a href="Hasura.GraphQL.Schema.Common.html#sampledCheckFlag"><span class="hs-identifier hs-var hs-var">sampledCheckFlag</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaSampledFeatureFlags"><span class="hs-identifier hs-type">SchemaSampledFeatureFlags</span></a></span><span> </span><span id="local-6989586621687862908"><span class="annot"><span class="annottext">[(FeatureFlag, Bool)]
</span><a href="#local-6989586621687862908"><span class="hs-identifier hs-var">flags</span></a></span></span><span class="hs-special">)</span><span> </span><span id="local-6989586621687862909"><span class="annot"><span class="annottext">FeatureFlag
</span><a href="#local-6989586621687862909"><span class="hs-identifier hs-var">ff</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Maybe Bool -&gt; Bool
forall a. a -&gt; Maybe a -&gt; a
</span><span class="hs-identifier hs-var">fromMaybe</span></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">FeatureFlag -&gt; [(FeatureFlag, Bool)] -&gt; Maybe Bool
forall a b. Eq a =&gt; a -&gt; [(a, b)] -&gt; Maybe b
</span><span class="hs-identifier hs-var">lookup</span></span><span> </span><span class="annot"><span class="annottext">FeatureFlag
</span><a href="#local-6989586621687862909"><span class="hs-identifier hs-var">ff</span></a></span><span> </span><span class="annot"><span class="annottext">[(FeatureFlag, Bool)]
</span><a href="#local-6989586621687862908"><span class="hs-identifier hs-var">flags</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-167"></span><span>
</span><span id="line-168"></span><span class="annot"><span class="hs-comment">-- | The kind of schema we're building, and its associated options.</span></span><span>
</span><span id="line-169"></span><span class="hs-keyword">data</span><span> </span><span id="SchemaKind"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaKind"><span class="hs-identifier hs-var">SchemaKind</span></a></span></span><span>
</span><span id="line-170"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="HasuraSchema"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#HasuraSchema"><span class="hs-identifier hs-var">HasuraSchema</span></a></span></span><span>
</span><span id="line-171"></span><span>  </span><span class="hs-glyph">|</span><span> </span><span id="RelaySchema"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#RelaySchema"><span class="hs-identifier hs-var">RelaySchema</span></a></span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#NodeInterfaceParserBuilder"><span class="hs-identifier hs-type">NodeInterfaceParserBuilder</span></a></span><span>
</span><span id="line-172"></span><span>
</span><span id="line-173"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#isHasuraSchema"><span class="hs-identifier hs-type">isHasuraSchema</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaKind"><span class="hs-identifier hs-type">SchemaKind</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Bool</span></span><span>
</span><span id="line-174"></span><span id="isHasuraSchema"><span class="annot"><span class="annottext">isHasuraSchema :: SchemaKind -&gt; Bool
</span><a href="Hasura.GraphQL.Schema.Common.html#isHasuraSchema"><span class="hs-identifier hs-var hs-var">isHasuraSchema</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-175"></span><span>  </span><span class="annot"><span class="annottext">SchemaKind
</span><a href="Hasura.GraphQL.Schema.Common.html#HasuraSchema"><span class="hs-identifier hs-var">HasuraSchema</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">True</span></span><span>
</span><span id="line-176"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#RelaySchema"><span class="hs-identifier hs-type">RelaySchema</span></a></span><span> </span><span class="annot"><span class="annottext">NodeInterfaceParserBuilder
</span><span class="hs-identifier">_</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span>
</span><span id="line-177"></span><span>
</span><span id="line-178"></span><span class="annot"><span class="hs-comment">-- | The set of common constraints required to build the schema.</span></span><span>
</span><span id="line-179"></span><span class="hs-keyword">type</span><span> </span><span id="MonadBuildSchemaBase"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#MonadBuildSchemaBase"><span class="hs-identifier hs-var">MonadBuildSchemaBase</span></a></span></span><span> </span><span id="local-6989586621687862914"><span class="annot"><a href="#local-6989586621687862914"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621687862915"><span class="annot"><a href="#local-6989586621687862915"><span class="hs-identifier hs-type">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-180"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#QErr"><span class="hs-identifier hs-type">QErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862914"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-181"></span><span>    </span><span class="annot"><a href="Control.Monad.Memoize.html#MonadMemoize"><span class="hs-identifier hs-type">P.MonadMemoize</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862914"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-182"></span><span>    </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/schema-parsers-1.0.0/opt/doc/html/schema-parsers/src/Hasura.GraphQL.Parser.Class.html/Hasura.GraphQL.Parser.Class.html#MonadParse"><span class="hs-identifier hs-type">P.MonadParse</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862915"><span class="hs-identifier hs-type">n</span></a></span><span>
</span><span id="line-183"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-184"></span><span>
</span><span id="line-185"></span><span class="hs-comment">-- | How a remote relationship field should be processed when building a</span><span>
</span><span id="line-186"></span><span class="hs-comment">-- schema. Injecting this function from the top level avoids having to know how</span><span>
</span><span id="line-187"></span><span class="hs-comment">-- to do top-level dispatch from deep within the schema code.</span><span>
</span><span id="line-188"></span><span class="hs-comment">--</span><span>
</span><span id="line-189"></span><span class="hs-comment">-- Note: the inner function type uses an existential qualifier: it is expected</span><span>
</span><span id="line-190"></span><span class="hs-comment">-- that the given function will work for _any_ monad @m@ that has the relevant</span><span>
</span><span id="line-191"></span><span class="hs-comment">-- constraints. This prevents us from passing a function that is specfic to the</span><span>
</span><span id="line-192"></span><span class="hs-comment">-- monad in which the schema construction will run, but avoids having to</span><span>
</span><span id="line-193"></span><span class="hs-comment">-- propagate type annotations to each call site.</span><span>
</span><span id="line-194"></span><span class="hs-keyword">newtype</span><span> </span><span id="RemoteRelationshipParserBuilder"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#RemoteRelationshipParserBuilder"><span class="hs-identifier hs-var">RemoteRelationshipParserBuilder</span></a></span></span><span>
</span><span id="line-195"></span><span>  </span><span class="hs-glyph">=</span><span> </span><span id="RemoteRelationshipParserBuilder"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#RemoteRelationshipParserBuilder"><span class="hs-identifier hs-var">RemoteRelationshipParserBuilder</span></a></span></span><span>
</span><span id="line-196"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621687862148"><span class="annot"><a href="#local-6989586621687862148"><span class="hs-identifier hs-type">lhsJoinField</span></a></span></span><span> </span><span id="local-6989586621687862150"><span class="annot"><a href="#local-6989586621687862150"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621687862146"><span class="annot"><a href="#local-6989586621687862146"><span class="hs-identifier hs-type">n</span></a></span></span><span> </span><span id="local-6989586621687862145"><span class="annot"><a href="#local-6989586621687862145"><span class="hs-identifier hs-type">m</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-197"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#MonadBuildSchemaBase"><span class="hs-identifier hs-type">MonadBuildSchemaBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862145"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862146"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-198"></span><span>        </span><span class="annot"><a href="Hasura.RQL.Types.Relationships.Remote.html#RemoteFieldInfo"><span class="hs-identifier hs-type">RemoteFieldInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862148"><span class="hs-identifier hs-type">lhsJoinField</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-199"></span><span>        </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaT"><span class="hs-identifier hs-type">SchemaT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862150"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862145"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#FieldParser"><span class="hs-identifier hs-type">P.FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862146"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Root.html#RemoteRelationshipField"><span class="hs-identifier hs-type">IR.RemoteRelationshipField</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-200"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-201"></span><span>
</span><span id="line-202"></span><span class="hs-comment">-- | A 'RemoteRelationshipParserBuilder' that ignores the field altogether, that can</span><span>
</span><span id="line-203"></span><span class="hs-comment">-- be used in tests or to build a source or remote schema in isolation.</span><span>
</span><span id="line-204"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#ignoreRemoteRelationship"><span class="hs-identifier hs-type">ignoreRemoteRelationship</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#RemoteRelationshipParserBuilder"><span class="hs-identifier hs-type">RemoteRelationshipParserBuilder</span></a></span><span>
</span><span id="line-205"></span><span id="ignoreRemoteRelationship"><span class="annot"><span class="annottext">ignoreRemoteRelationship :: RemoteRelationshipParserBuilder
</span><a href="Hasura.GraphQL.Schema.Common.html#ignoreRemoteRelationship"><span class="hs-identifier hs-var hs-var">ignoreRemoteRelationship</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(forall lhsJoinField r (n :: * -&gt; *) (m :: * -&gt; *).
 MonadBuildSchemaBase m n =&gt;
 RemoteFieldInfo lhsJoinField
 -&gt; SchemaT
      r
      m
      (Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)]))
-&gt; RemoteRelationshipParserBuilder
</span><a href="Hasura.GraphQL.Schema.Common.html#RemoteRelationshipParserBuilder"><span class="hs-identifier hs-var">RemoteRelationshipParserBuilder</span></a></span><span> </span><span class="annot"><span class="annottext">((forall lhsJoinField r (n :: * -&gt; *) (m :: * -&gt; *).
  MonadBuildSchemaBase m n =&gt;
  RemoteFieldInfo lhsJoinField
  -&gt; SchemaT
       r
       m
       (Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)]))
 -&gt; RemoteRelationshipParserBuilder)
-&gt; (forall lhsJoinField r (n :: * -&gt; *) (m :: * -&gt; *).
    MonadBuildSchemaBase m n =&gt;
    RemoteFieldInfo lhsJoinField
    -&gt; SchemaT
         r
         m
         (Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)]))
-&gt; RemoteRelationshipParserBuilder
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">SchemaT
  r
  m
  (Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)])
-&gt; RemoteFieldInfo lhsJoinField
-&gt; SchemaT
     r
     m
     (Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)])
forall a b. a -&gt; b -&gt; a
</span><span class="hs-identifier hs-var">const</span></span><span> </span><span class="annot"><span class="annottext">(SchemaT
   r
   m
   (Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)])
 -&gt; RemoteFieldInfo lhsJoinField
 -&gt; SchemaT
      r
      m
      (Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)]))
-&gt; SchemaT
     r
     m
     (Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)])
-&gt; RemoteFieldInfo lhsJoinField
-&gt; SchemaT
     r
     m
     (Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)])
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)]
-&gt; SchemaT
     r
     m
     (Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)])
forall a. a -&gt; SchemaT r m a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">Maybe [FieldParser n (RemoteRelationshipField UnpreparedValue)]
forall a. Maybe a
</span><span class="hs-identifier hs-var">Nothing</span></span><span>
</span><span id="line-206"></span><span>
</span><span id="line-207"></span><span class="hs-comment">-- | How to build the 'Relay' node.</span><span>
</span><span id="line-208"></span><span class="hs-comment">--</span><span>
</span><span id="line-209"></span><span class="hs-comment">-- Similarly to what we do for remote relationships, we pass in the context the</span><span>
</span><span id="line-210"></span><span class="hs-comment">-- builder function required to build the 'Node' interface, in order to avoid</span><span>
</span><span id="line-211"></span><span class="hs-comment">-- the cross-sources cycles it creates otherwise.</span><span>
</span><span id="line-212"></span><span class="hs-keyword">newtype</span><span> </span><span id="NodeInterfaceParserBuilder"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#NodeInterfaceParserBuilder"><span class="hs-identifier hs-var">NodeInterfaceParserBuilder</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="NodeInterfaceParserBuilder"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#NodeInterfaceParserBuilder"><span class="hs-identifier hs-var">NodeInterfaceParserBuilder</span></a></span></span><span>
</span><span id="line-213"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="runNodeBuilder"><span class="annot"><span class="annottext">NodeInterfaceParserBuilder
-&gt; forall (m :: * -&gt; *) (n :: * -&gt; *).
   MonadBuildSchemaBase m n =&gt;
   SchemaContext -&gt; SchemaOptions -&gt; m (Parser 'Output n NodeMap)
</span><a href="Hasura.GraphQL.Schema.Common.html#runNodeBuilder"><span class="hs-identifier hs-var hs-var">runNodeBuilder</span></a></span></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-214"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621687862166"><span class="annot"><a href="#local-6989586621687862166"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621687862167"><span class="annot"><a href="#local-6989586621687862167"><span class="hs-identifier hs-type">n</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-215"></span><span>        </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#MonadBuildSchemaBase"><span class="hs-identifier hs-type">MonadBuildSchemaBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862166"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862167"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-216"></span><span>        </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaContext"><span class="hs-identifier hs-type">SchemaContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-217"></span><span>        </span><span class="annot"><a href="Hasura.RQL.Types.Schema.Options.html#SchemaOptions"><span class="hs-identifier hs-type">SchemaOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-218"></span><span>        </span><span class="annot"><a href="#local-6989586621687862166"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#Parser"><span class="hs-identifier hs-type">P.Parser</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/schema-parsers-1.0.0/opt/doc/html/schema-parsers/src/Hasura.GraphQL.Parser.Schema.Definition.html/Hasura.GraphQL.Parser.Schema.Definition.html#Output"><span class="hs-identifier hs-type">P.Output</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862167"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Node.html#NodeMap"><span class="hs-identifier hs-type">NodeMap</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-219"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-220"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-221"></span><span>
</span><span id="line-222"></span><span class="hs-comment">-- TODO: move this to Prelude?</span><span>
</span><span id="line-223"></span><span id="local-6989586621687862174"><span id="local-6989586621687862175"><span id="local-6989586621687862176"><span id="local-6989586621687862178"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#retrieve"><span class="hs-identifier hs-type">retrieve</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-224"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadReader</span></span><span> </span><span class="annot"><a href="#local-6989586621687862174"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862175"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/data-has-0.4.0.0-53a688b2221046a4de0fb8e7927d1d69f385837da1af187d22b34ea76ed4183c/share/doc/html/src/Data.Has.html/Data.Has.html#Has"><span class="hs-identifier hs-type">Has</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862176"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862174"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-225"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621687862176"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621687862178"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-226"></span><span>  </span><span class="annot"><a href="#local-6989586621687862175"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862178"><span class="hs-identifier hs-type">b</span></a></span></span></span></span></span><span>
</span><span id="line-227"></span><span id="retrieve"><span class="annot"><span class="annottext">retrieve :: forall r (m :: * -&gt; *) a b.
(MonadReader r m, Has a r) =&gt;
(a -&gt; b) -&gt; m b
</span><a href="Hasura.GraphQL.Schema.Common.html#retrieve"><span class="hs-identifier hs-var hs-var">retrieve</span></a></span></span><span> </span><span id="local-6989586621687862933"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621687862933"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(r -&gt; b) -&gt; m b
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">((r -&gt; b) -&gt; m b) -&gt; (r -&gt; b) -&gt; m b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621687862933"><span class="hs-identifier hs-var">f</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; (r -&gt; a) -&gt; r -&gt; b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; a
forall a t. Has a t =&gt; t -&gt; a
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/data-has-0.4.0.0-53a688b2221046a4de0fb8e7927d1d69f385837da1af187d22b34ea76ed4183c/share/doc/html/src/Data.Has.html/Data.Has.html#getter"><span class="hs-identifier hs-var">getter</span></a></span><span>
</span><span id="line-228"></span><span>
</span><span id="line-229"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-230"></span><span>
</span><span id="line-231"></span><span class="hs-comment">{- Note [SchemaT and stacking]

The schema is explicitly built in `SchemaT`, rather than in an arbitrary monad
`m` that happens to have the desired properties (`MonadReader`, `MonadMemoize`,
`MonadError`, and so on). The main reason why we do this is that we want to
avoid a specific performance issue that arises out of two specific constraints:

  - we want to build each part of the schema (such as sources and remote
    schemas) with its own dedicated minimal reader context (i.e. not using a
    shared reader context that is the union of all the information required);
  - we want to be able to process remote-relationships, which means &quot;altering&quot;
    the reader context when jumping from one &quot;part&quot; of the schema to another.

What that means, in practice, is that we have to call `runReaderT` (or an
equivalent) every time we build a part of the schema (at the root level or as
part of a remote relationship) so that the part we build has access to its
context. When processing a remote relationship, the calling code is *already* in
a monad stack that contains a `ReaderT`, since we were processing a given part
of the schema. If we directly call `runReaderT` to process the RHS of the remote
relationship, we implicitly make it so that the monad stack of the LHS is the
base underneath the `ReaderT` of the RHS; in other terms, we stack another
reader on top of the existing monad stack.

As the schema is built in a &quot;depth-first&quot; way, in a complicated schema with a
lot of remote relationships we would end up with several readers stacked upon
one another. A manually run benchmark showed that this could significantly
impact performance in complicated schemas. We do now have a benchmark set to
replicate this specific case (see the &quot;deep_schema&quot; benchmark set for more
information).

To prevent this stacking, we need to be able to &quot;bring back&quot; the result of the
`runReaderT` back into the calling monad, rather than defaulting to having the
calling monad be the base of the reader. The simplest way of doing this is to
enforce that we are always building the schema in a monad stack that has the
reader on top of some arbitrary *shared* base. This gives us the guarantee that
the LHS of any remote relationship, the calling context for `runReaderT`, is
itself a `ReaderT` on top og that known shared base, meaning that after a call
to `runReaderT` on another part of the schema, we can always go back to the
calling monad with a simple `lift`, as demonstrated in
'remoteRelationshipField'.
-}</span><span>
</span><span id="line-272"></span><span>
</span><span id="line-273"></span><span class="hs-comment">-- | The monad in which the schema is built.</span><span>
</span><span id="line-274"></span><span class="hs-comment">--</span><span>
</span><span id="line-275"></span><span class="hs-comment">-- The implementation of 'SchemaT' is intended to be opaque: running a</span><span>
</span><span id="line-276"></span><span class="hs-comment">-- computation in 'SchemaT' is intended to be done via calls to</span><span>
</span><span id="line-277"></span><span class="hs-comment">-- 'runSourceSchema' and 'runRemoteSchema', which also enforce what the @r@</span><span>
</span><span id="line-278"></span><span class="hs-comment">-- parameter should be in each case.</span><span>
</span><span id="line-279"></span><span class="hs-comment">--</span><span>
</span><span id="line-280"></span><span class="hs-comment">-- The reason why we want to enforce that the schema is built in a reader on top</span><span>
</span><span id="line-281"></span><span class="hs-comment">-- of an arbitrary base monad is for performance: see Note [SchemaT and</span><span>
</span><span id="line-282"></span><span class="hs-comment">-- stacking] for more information.</span><span>
</span><span id="line-283"></span><span class="hs-comment">--</span><span>
</span><span id="line-284"></span><span class="hs-comment">-- In the future, we might monomorphize this further to make `MemoizeT` explicit.</span><span>
</span><span id="line-285"></span><span class="hs-keyword">newtype</span><span> </span><span id="SchemaT"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaT"><span class="hs-identifier hs-var">SchemaT</span></a></span></span><span> </span><span id="local-6989586621687862188"><span class="annot"><a href="#local-6989586621687862188"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621687862189"><span class="annot"><a href="#local-6989586621687862189"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621687862190"><span class="annot"><a href="#local-6989586621687862190"><span class="hs-identifier hs-type">a</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="SchemaT"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaT"><span class="hs-identifier hs-var">SchemaT</span></a></span></span><span> </span><span class="hs-special">{</span><span id="runSchemaT"><span class="annot"><span class="annottext">forall r (m :: * -&gt; *) a. SchemaT r m a -&gt; ReaderT r m a
</span><a href="Hasura.GraphQL.Schema.Common.html#runSchemaT"><span class="hs-identifier hs-var hs-var">runSchemaT</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ReaderT</span></span><span> </span><span class="annot"><a href="#local-6989586621687862188"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862189"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862190"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">}</span><span>
</span><span id="line-286"></span><span>  </span><span class="hs-keyword">deriving</span><span> </span><span class="annot"><span class="hs-keyword">newtype</span></span><span> </span><span class="hs-special">(</span><span id="local-6989586621687862940"><span id="local-6989586621687862944"><span class="annot"><span class="annottext">(forall a b. (a -&gt; b) -&gt; SchemaT r m a -&gt; SchemaT r m b)
-&gt; (forall a b. a -&gt; SchemaT r m b -&gt; SchemaT r m a)
-&gt; Functor (SchemaT r m)
forall a b. a -&gt; SchemaT r m b -&gt; SchemaT r m a
forall a b. (a -&gt; b) -&gt; SchemaT r m a -&gt; SchemaT r m b
forall r (m :: * -&gt; *) a b.
Functor m =&gt;
a -&gt; SchemaT r m b -&gt; SchemaT r m a
forall r (m :: * -&gt; *) a b.
Functor m =&gt;
(a -&gt; b) -&gt; SchemaT r m a -&gt; SchemaT r m b
forall (f :: * -&gt; *).
(forall a b. (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b. a -&gt; f b -&gt; f a) -&gt; Functor f
$cfmap :: forall r (m :: * -&gt; *) a b.
Functor m =&gt;
(a -&gt; b) -&gt; SchemaT r m a -&gt; SchemaT r m b
fmap :: forall a b. (a -&gt; b) -&gt; SchemaT r m a -&gt; SchemaT r m b
$c&lt;$ :: forall r (m :: * -&gt; *) a b.
Functor m =&gt;
a -&gt; SchemaT r m b -&gt; SchemaT r m a
&lt;$ :: forall a b. a -&gt; SchemaT r m b -&gt; SchemaT r m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Functor</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687862953"><span id="local-6989586621687862957"><span id="local-6989586621687862961"><span id="local-6989586621687862965"><span id="local-6989586621687862969"><span class="annot"><span class="annottext">Functor (SchemaT r m)
Functor (SchemaT r m) =&gt;
(forall a. a -&gt; SchemaT r m a)
-&gt; (forall a b.
    SchemaT r m (a -&gt; b) -&gt; SchemaT r m a -&gt; SchemaT r m b)
-&gt; (forall a b c.
    (a -&gt; b -&gt; c) -&gt; SchemaT r m a -&gt; SchemaT r m b -&gt; SchemaT r m c)
-&gt; (forall a b. SchemaT r m a -&gt; SchemaT r m b -&gt; SchemaT r m b)
-&gt; (forall a b. SchemaT r m a -&gt; SchemaT r m b -&gt; SchemaT r m a)
-&gt; Applicative (SchemaT r m)
forall a. a -&gt; SchemaT r m a
forall a b. SchemaT r m a -&gt; SchemaT r m b -&gt; SchemaT r m a
forall a b. SchemaT r m a -&gt; SchemaT r m b -&gt; SchemaT r m b
forall a b. SchemaT r m (a -&gt; b) -&gt; SchemaT r m a -&gt; SchemaT r m b
forall a b c.
(a -&gt; b -&gt; c) -&gt; SchemaT r m a -&gt; SchemaT r m b -&gt; SchemaT r m c
forall r (m :: * -&gt; *). Applicative m =&gt; Functor (SchemaT r m)
forall r (m :: * -&gt; *) a. Applicative m =&gt; a -&gt; SchemaT r m a
forall r (m :: * -&gt; *) a b.
Applicative m =&gt;
SchemaT r m a -&gt; SchemaT r m b -&gt; SchemaT r m a
forall r (m :: * -&gt; *) a b.
Applicative m =&gt;
SchemaT r m a -&gt; SchemaT r m b -&gt; SchemaT r m b
forall r (m :: * -&gt; *) a b.
Applicative m =&gt;
SchemaT r m (a -&gt; b) -&gt; SchemaT r m a -&gt; SchemaT r m b
forall r (m :: * -&gt; *) a b c.
Applicative m =&gt;
(a -&gt; b -&gt; c) -&gt; SchemaT r m a -&gt; SchemaT r m b -&gt; SchemaT r m c
forall (f :: * -&gt; *).
Functor f =&gt;
(forall a. a -&gt; f a)
-&gt; (forall a b. f (a -&gt; b) -&gt; f a -&gt; f b)
-&gt; (forall a b c. (a -&gt; b -&gt; c) -&gt; f a -&gt; f b -&gt; f c)
-&gt; (forall a b. f a -&gt; f b -&gt; f b)
-&gt; (forall a b. f a -&gt; f b -&gt; f a)
-&gt; Applicative f
$cpure :: forall r (m :: * -&gt; *) a. Applicative m =&gt; a -&gt; SchemaT r m a
pure :: forall a. a -&gt; SchemaT r m a
$c&lt;*&gt; :: forall r (m :: * -&gt; *) a b.
Applicative m =&gt;
SchemaT r m (a -&gt; b) -&gt; SchemaT r m a -&gt; SchemaT r m b
&lt;*&gt; :: forall a b. SchemaT r m (a -&gt; b) -&gt; SchemaT r m a -&gt; SchemaT r m b
$cliftA2 :: forall r (m :: * -&gt; *) a b c.
Applicative m =&gt;
(a -&gt; b -&gt; c) -&gt; SchemaT r m a -&gt; SchemaT r m b -&gt; SchemaT r m c
liftA2 :: forall a b c.
(a -&gt; b -&gt; c) -&gt; SchemaT r m a -&gt; SchemaT r m b -&gt; SchemaT r m c
$c*&gt; :: forall r (m :: * -&gt; *) a b.
Applicative m =&gt;
SchemaT r m a -&gt; SchemaT r m b -&gt; SchemaT r m b
*&gt; :: forall a b. SchemaT r m a -&gt; SchemaT r m b -&gt; SchemaT r m b
$c&lt;* :: forall r (m :: * -&gt; *) a b.
Applicative m =&gt;
SchemaT r m a -&gt; SchemaT r m b -&gt; SchemaT r m a
&lt;* :: forall a b. SchemaT r m a -&gt; SchemaT r m b -&gt; SchemaT r m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Applicative</span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687862977"><span id="local-6989586621687862981"><span id="local-6989586621687862985"><span class="annot"><span class="annottext">Applicative (SchemaT r m)
Applicative (SchemaT r m) =&gt;
(forall a b.
 SchemaT r m a -&gt; (a -&gt; SchemaT r m b) -&gt; SchemaT r m b)
-&gt; (forall a b. SchemaT r m a -&gt; SchemaT r m b -&gt; SchemaT r m b)
-&gt; (forall a. a -&gt; SchemaT r m a)
-&gt; Monad (SchemaT r m)
forall a. a -&gt; SchemaT r m a
forall a b. SchemaT r m a -&gt; SchemaT r m b -&gt; SchemaT r m b
forall a b. SchemaT r m a -&gt; (a -&gt; SchemaT r m b) -&gt; SchemaT r m b
forall r (m :: * -&gt; *). Monad m =&gt; Applicative (SchemaT r m)
forall r (m :: * -&gt; *) a. Monad m =&gt; a -&gt; SchemaT r m a
forall r (m :: * -&gt; *) a b.
Monad m =&gt;
SchemaT r m a -&gt; SchemaT r m b -&gt; SchemaT r m b
forall r (m :: * -&gt; *) a b.
Monad m =&gt;
SchemaT r m a -&gt; (a -&gt; SchemaT r m b) -&gt; SchemaT r m b
forall (m :: * -&gt; *).
Applicative m =&gt;
(forall a b. m a -&gt; (a -&gt; m b) -&gt; m b)
-&gt; (forall a b. m a -&gt; m b -&gt; m b)
-&gt; (forall a. a -&gt; m a)
-&gt; Monad m
$c&gt;&gt;= :: forall r (m :: * -&gt; *) a b.
Monad m =&gt;
SchemaT r m a -&gt; (a -&gt; SchemaT r m b) -&gt; SchemaT r m b
&gt;&gt;= :: forall a b. SchemaT r m a -&gt; (a -&gt; SchemaT r m b) -&gt; SchemaT r m b
$c&gt;&gt; :: forall r (m :: * -&gt; *) a b.
Monad m =&gt;
SchemaT r m a -&gt; SchemaT r m b -&gt; SchemaT r m b
&gt;&gt; :: forall a b. SchemaT r m a -&gt; SchemaT r m b -&gt; SchemaT r m b
$creturn :: forall r (m :: * -&gt; *) a. Monad m =&gt; a -&gt; SchemaT r m a
return :: forall a. a -&gt; SchemaT r m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Monad</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687862993"><span id="local-6989586621687862997"><span id="local-6989586621687863001"><span class="annot"><span class="hs-identifier hs-type">MonadReader</span></span><span> </span><span class="annot"><a href="#local-6989586621687862188"><span class="hs-identifier hs-type">r</span></a></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687863019"><span class="annot"><span class="annottext">Monad (SchemaT r m)
Monad (SchemaT r m) =&gt;
(forall a p.
 (Ord a, Typeable a, Typeable p) =&gt;
 Name -&gt; a -&gt; SchemaT r m p -&gt; SchemaT r m p)
-&gt; MonadMemoize (SchemaT r m)
forall a p.
(Ord a, Typeable a, Typeable p) =&gt;
Name -&gt; a -&gt; SchemaT r m p -&gt; SchemaT r m p
forall r (m :: * -&gt; *). MonadMemoize m =&gt; Monad (SchemaT r m)
forall r (m :: * -&gt; *) a p.
(MonadMemoize m, Ord a, Typeable a, Typeable p) =&gt;
Name -&gt; a -&gt; SchemaT r m p -&gt; SchemaT r m p
forall (m :: * -&gt; *).
Monad m =&gt;
(forall a p.
 (Ord a, Typeable a, Typeable p) =&gt;
 Name -&gt; a -&gt; m p -&gt; m p)
-&gt; MonadMemoize m
$cmemoizeOn :: forall r (m :: * -&gt; *) a p.
(MonadMemoize m, Ord a, Typeable a, Typeable p) =&gt;
Name -&gt; a -&gt; SchemaT r m p -&gt; SchemaT r m p
memoizeOn :: forall a p.
(Ord a, Typeable a, Typeable p) =&gt;
Name -&gt; a -&gt; SchemaT r m p -&gt; SchemaT r m p
</span><a href="Control.Monad.Memoize.html#MonadMemoize"><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">P.MonadMemoize</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687863038"><span class="annot"><span class="annottext">(forall (m :: * -&gt; *). Monad m =&gt; Monad (SchemaT r m)) =&gt;
(forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; SchemaT r m a)
-&gt; MonadTrans (SchemaT r)
forall r (m :: * -&gt; *). Monad m =&gt; Monad (SchemaT r m)
forall r (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; SchemaT r m a
forall (m :: * -&gt; *). Monad m =&gt; Monad (SchemaT r m)
forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; SchemaT r m a
forall (t :: (* -&gt; *) -&gt; * -&gt; *).
(forall (m :: * -&gt; *). Monad m =&gt; Monad (t m)) =&gt;
(forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; t m a) -&gt; MonadTrans t
$clift :: forall r (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; SchemaT r m a
lift :: forall (m :: * -&gt; *) a. Monad m =&gt; m a -&gt; SchemaT r m a
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var">MonadTrans</span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687863044"><span id="local-6989586621687863050"><span id="local-6989586621687863055"><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="#local-6989586621687863044"><span class="hs-identifier hs-type">e</span></a></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-287"></span><span>
</span><span id="line-288"></span><span class="hs-keyword">instance</span><span> </span><span id="local-6989586621687862265"><span id="local-6989586621687862266"><span class="hs-special">(</span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/data-has-0.4.0.0-53a688b2221046a4de0fb8e7927d1d69f385837da1af187d22b34ea76ed4183c/share/doc/html/src/Data.Has.html/Data.Has.html#Has"><span class="hs-identifier hs-type">Has</span></a></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaContext"><span class="hs-identifier hs-type">SchemaContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862265"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Monad</span></span><span> </span><span class="annot"><a href="#local-6989586621687862266"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hasura.Server.Init.FeatureFlag.html#HasFeatureFlagChecker"><span class="hs-identifier hs-type">FF.HasFeatureFlagChecker</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaT"><span class="hs-identifier hs-type">SchemaT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862265"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862266"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span></span></span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-289"></span><span>  </span><span id="local-6989586621687863073"><span class="annot"><span class="annottext">checkFlag :: FeatureFlag -&gt; SchemaT r m Bool
</span><a href="Hasura.Server.Init.FeatureFlag.html#checkFlag"><span class="hs-identifier hs-var hs-var hs-var">checkFlag</span></a></span></span><span> </span><span id="local-6989586621687863074"><span class="annot"><span class="annottext">FeatureFlag
</span><a href="#local-6989586621687863074"><span class="hs-identifier hs-var">ff</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-290"></span><span>    </span><span id="local-6989586621687863075"><span class="annot"><a href="#local-6989586621687863075"><span class="hs-identifier hs-var">flags</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(r -&gt; SchemaSampledFeatureFlags)
-&gt; SchemaT r m SchemaSampledFeatureFlags
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SchemaContext -&gt; SchemaSampledFeatureFlags
</span><a href="Hasura.GraphQL.Schema.Common.html#scSampledFeatureFlags"><span class="hs-identifier hs-var">scSampledFeatureFlags</span></a></span><span> </span><span class="annot"><span class="annottext">(SchemaContext -&gt; SchemaSampledFeatureFlags)
-&gt; (r -&gt; SchemaContext) -&gt; r -&gt; SchemaSampledFeatureFlags
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; SchemaContext
forall a t. Has a t =&gt; t -&gt; a
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/data-has-0.4.0.0-53a688b2221046a4de0fb8e7927d1d69f385837da1af187d22b34ea76ed4183c/share/doc/html/src/Data.Has.html/Data.Has.html#getter"><span class="hs-identifier hs-var">getter</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-291"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#sampledCheckFlag"><span class="hs-identifier hs-type">sampledCheckFlag</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863075"><span class="hs-identifier hs-type">flags</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863074"><span class="hs-identifier hs-type">ff</span></a></span><span>
</span><span id="line-292"></span><span>
</span><span id="line-293"></span><span class="hs-keyword">type</span><span> </span><span id="MonadBuildSourceSchema"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#MonadBuildSourceSchema"><span class="hs-identifier hs-var">MonadBuildSourceSchema</span></a></span></span><span> </span><span id="local-6989586621687863076"><span class="annot"><a href="#local-6989586621687863076"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621687863077"><span class="annot"><a href="#local-6989586621687863077"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621687863078"><span class="annot"><a href="#local-6989586621687863078"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621687863079"><span class="annot"><a href="#local-6989586621687863079"><span class="hs-identifier hs-type">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-294"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#MonadBuildSchemaBase"><span class="hs-identifier hs-type">MonadBuildSchemaBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863078"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863079"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-295"></span><span>    </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/data-has-0.4.0.0-53a688b2221046a4de0fb8e7927d1d69f385837da1af187d22b34ea76ed4183c/share/doc/html/src/Data.Has.html/Data.Has.html#Has"><span class="hs-identifier hs-type">Has</span></a></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaContext"><span class="hs-identifier hs-type">SchemaContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863077"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-296"></span><span>    </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/data-has-0.4.0.0-53a688b2221046a4de0fb8e7927d1d69f385837da1af187d22b34ea76ed4183c/share/doc/html/src/Data.Has.html/Data.Has.html#Has"><span class="hs-identifier hs-type">Has</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Schema.Options.html#SchemaOptions"><span class="hs-identifier hs-type">SchemaOptions</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863077"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-297"></span><span>    </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/data-has-0.4.0.0-53a688b2221046a4de0fb8e7927d1d69f385837da1af187d22b34ea76ed4183c/share/doc/html/src/Data.Has.html/Data.Has.html#Has"><span class="hs-identifier hs-type">Has</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceInfo"><span class="hs-identifier hs-type">SourceInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863076"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621687863077"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-298"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-299"></span><span>
</span><span id="line-300"></span><span class="annot"><span class="hs-comment">-- | Runs a schema-building computation with all the context required to build a source.</span></span><span>
</span><span id="line-301"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#runSourceSchema"><span class="hs-identifier hs-type">runSourceSchema</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-302"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621687862267"><span class="annot"><a href="#local-6989586621687862267"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621687862269"><span class="annot"><a href="#local-6989586621687862269"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621687862270"><span class="annot"><a href="#local-6989586621687862270"><span class="hs-identifier hs-type">a</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-303"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaContext"><span class="hs-identifier hs-type">SchemaContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-304"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Schema.Options.html#SchemaOptions"><span class="hs-identifier hs-type">SchemaOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-305"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceInfo"><span class="hs-identifier hs-type">SourceInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862267"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-306"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaT"><span class="hs-identifier hs-type">SchemaT</span></a></span><span>
</span><span id="line-307"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaContext"><span class="hs-identifier hs-type">SchemaContext</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-308"></span><span>      </span><span class="annot"><a href="Hasura.RQL.Types.Schema.Options.html#SchemaOptions"><span class="hs-identifier hs-type">SchemaOptions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-309"></span><span>      </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceInfo"><span class="hs-identifier hs-type">SourceInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862267"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-310"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-311"></span><span>    </span><span class="annot"><a href="#local-6989586621687862269"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-312"></span><span>    </span><span class="annot"><a href="#local-6989586621687862270"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-313"></span><span>  </span><span class="annot"><a href="#local-6989586621687862269"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862270"><span class="hs-identifier hs-type">a</span></a></span><span>
</span><span id="line-314"></span><span id="runSourceSchema"><span class="annot"><span class="annottext">runSourceSchema :: forall (b :: BackendType) (m :: * -&gt; *) a.
SchemaContext
-&gt; SchemaOptions
-&gt; SourceInfo b
-&gt; SchemaT (SchemaContext, SchemaOptions, SourceInfo b) m a
-&gt; m a
</span><a href="Hasura.GraphQL.Schema.Common.html#runSourceSchema"><span class="hs-identifier hs-var hs-var">runSourceSchema</span></a></span></span><span> </span><span id="local-6989586621687863080"><span class="annot"><span class="annottext">SchemaContext
</span><a href="#local-6989586621687863080"><span class="hs-identifier hs-var">context</span></a></span></span><span> </span><span id="local-6989586621687863081"><span class="annot"><span class="annottext">SchemaOptions
</span><a href="#local-6989586621687863081"><span class="hs-identifier hs-var">options</span></a></span></span><span> </span><span id="local-6989586621687863082"><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621687863082"><span class="hs-identifier hs-var">sourceInfo</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaT"><span class="hs-identifier hs-type">SchemaT</span></a></span><span> </span><span id="local-6989586621687863083"><span class="annot"><span class="annottext">ReaderT (SchemaContext, SchemaOptions, SourceInfo b) m a
</span><a href="#local-6989586621687863083"><span class="hs-identifier hs-var">action</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReaderT (SchemaContext, SchemaOptions, SourceInfo b) m a
-&gt; (SchemaContext, SchemaOptions, SourceInfo b) -&gt; m a
forall r (m :: * -&gt; *) a. ReaderT r m a -&gt; r -&gt; m a
</span><span class="hs-identifier hs-var">runReaderT</span></span><span> </span><span class="annot"><span class="annottext">ReaderT (SchemaContext, SchemaOptions, SourceInfo b) m a
</span><a href="#local-6989586621687863083"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SchemaContext
</span><a href="#local-6989586621687863080"><span class="hs-identifier hs-var">context</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SchemaOptions
</span><a href="#local-6989586621687863081"><span class="hs-identifier hs-var">options</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621687863082"><span class="hs-identifier hs-var">sourceInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-315"></span><span>
</span><span id="line-316"></span><span class="hs-keyword">type</span><span> </span><span id="MonadBuildRemoteSchema"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#MonadBuildRemoteSchema"><span class="hs-identifier hs-var">MonadBuildRemoteSchema</span></a></span></span><span> </span><span id="local-6989586621687863084"><span class="annot"><a href="#local-6989586621687863084"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621687863085"><span class="annot"><a href="#local-6989586621687863085"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621687863086"><span class="annot"><a href="#local-6989586621687863086"><span class="hs-identifier hs-type">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-317"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#MonadBuildSchemaBase"><span class="hs-identifier hs-type">MonadBuildSchemaBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863085"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863086"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-318"></span><span>    </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/data-has-0.4.0.0-53a688b2221046a4de0fb8e7927d1d69f385837da1af187d22b34ea76ed4183c/share/doc/html/src/Data.Has.html/Data.Has.html#Has"><span class="hs-identifier hs-type">Has</span></a></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaContext"><span class="hs-identifier hs-type">SchemaContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863084"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-319"></span><span>    </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/data-has-0.4.0.0-53a688b2221046a4de0fb8e7927d1d69f385837da1af187d22b34ea76ed4183c/share/doc/html/src/Data.Has.html/Data.Has.html#Has"><span class="hs-identifier hs-type">Has</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Schema.Options.html#RemoteNullForwardingPolicy"><span class="hs-identifier hs-type">Options.RemoteNullForwardingPolicy</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863084"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-320"></span><span>    </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/data-has-0.4.0.0-53a688b2221046a4de0fb8e7927d1d69f385837da1af187d22b34ea76ed4183c/share/doc/html/src/Data.Has.html/Data.Has.html#Has"><span class="hs-identifier hs-type">Has</span></a></span><span> </span><span class="annot"><a href="Hasura.RemoteSchema.SchemaCache.Types.html#CustomizeRemoteFieldName"><span class="hs-identifier hs-type">CustomizeRemoteFieldName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863084"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-321"></span><span>    </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/data-has-0.4.0.0-53a688b2221046a4de0fb8e7927d1d69f385837da1af187d22b34ea76ed4183c/share/doc/html/src/Data.Has.html/Data.Has.html#Has"><span class="hs-identifier hs-type">Has</span></a></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Typename.html#MkTypename"><span class="hs-identifier hs-type">MkTypename</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863084"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-322"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-323"></span><span>
</span><span id="line-324"></span><span class="annot"><span class="hs-comment">-- | Runs a schema-building computation with all the context required to build a remote schema.</span></span><span>
</span><span id="line-325"></span><span id="local-6989586621687862277"><span id="local-6989586621687862278"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#runRemoteSchema"><span class="hs-identifier hs-type">runRemoteSchema</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-326"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaContext"><span class="hs-identifier hs-type">SchemaContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-327"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Schema.Options.html#RemoteNullForwardingPolicy"><span class="hs-identifier hs-type">Options.RemoteNullForwardingPolicy</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-328"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaT"><span class="hs-identifier hs-type">SchemaT</span></a></span><span>
</span><span id="line-329"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaContext"><span class="hs-identifier hs-type">SchemaContext</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-330"></span><span>      </span><span class="annot"><a href="Hasura.RQL.Types.Schema.Options.html#RemoteNullForwardingPolicy"><span class="hs-identifier hs-type">Options.RemoteNullForwardingPolicy</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-331"></span><span>      </span><span class="annot"><a href="Hasura.GraphQL.Schema.Typename.html#MkTypename"><span class="hs-identifier hs-type">MkTypename</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-332"></span><span>      </span><span class="annot"><a href="Hasura.RemoteSchema.SchemaCache.Types.html#CustomizeRemoteFieldName"><span class="hs-identifier hs-type">CustomizeRemoteFieldName</span></a></span><span>
</span><span id="line-333"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-334"></span><span>    </span><span class="annot"><a href="#local-6989586621687862277"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-335"></span><span>    </span><span class="annot"><a href="#local-6989586621687862278"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-336"></span><span>  </span><span class="annot"><a href="#local-6989586621687862277"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862278"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-337"></span><span id="runRemoteSchema"><span class="annot"><span class="annottext">runRemoteSchema :: forall (m :: * -&gt; *) a.
SchemaContext
-&gt; RemoteNullForwardingPolicy
-&gt; SchemaT
     (SchemaContext, RemoteNullForwardingPolicy, MkTypename,
      CustomizeRemoteFieldName)
     m
     a
-&gt; m a
</span><a href="Hasura.GraphQL.Schema.Common.html#runRemoteSchema"><span class="hs-identifier hs-var hs-var">runRemoteSchema</span></a></span></span><span> </span><span id="local-6989586621687863091"><span class="annot"><span class="annottext">SchemaContext
</span><a href="#local-6989586621687863091"><span class="hs-identifier hs-var">context</span></a></span></span><span> </span><span id="local-6989586621687863092"><span class="annot"><span class="annottext">RemoteNullForwardingPolicy
</span><a href="#local-6989586621687863092"><span class="hs-identifier hs-var">nullForwarding</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaT"><span class="hs-identifier hs-type">SchemaT</span></a></span><span> </span><span id="local-6989586621687863093"><span class="annot"><span class="annottext">ReaderT
  (SchemaContext, RemoteNullForwardingPolicy, MkTypename,
   CustomizeRemoteFieldName)
  m
  a
</span><a href="#local-6989586621687863093"><span class="hs-identifier hs-var">action</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReaderT
  (SchemaContext, RemoteNullForwardingPolicy, MkTypename,
   CustomizeRemoteFieldName)
  m
  a
-&gt; (SchemaContext, RemoteNullForwardingPolicy, MkTypename,
    CustomizeRemoteFieldName)
-&gt; m a
forall r (m :: * -&gt; *) a. ReaderT r m a -&gt; r -&gt; m a
</span><span class="hs-identifier hs-var">runReaderT</span></span><span> </span><span class="annot"><span class="annottext">ReaderT
  (SchemaContext, RemoteNullForwardingPolicy, MkTypename,
   CustomizeRemoteFieldName)
  m
  a
</span><a href="#local-6989586621687863093"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SchemaContext
</span><a href="#local-6989586621687863091"><span class="hs-identifier hs-var">context</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">RemoteNullForwardingPolicy
</span><a href="#local-6989586621687863092"><span class="hs-identifier hs-var">nullForwarding</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">MkTypename
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">CustomizeRemoteFieldName
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span class="hs-special">)</span><span>
</span><span id="line-338"></span><span>
</span><span id="line-339"></span><span class="hs-keyword">type</span><span> </span><span id="MonadBuildActionSchema"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#MonadBuildActionSchema"><span class="hs-identifier hs-var">MonadBuildActionSchema</span></a></span></span><span> </span><span id="local-6989586621687863094"><span class="annot"><a href="#local-6989586621687863094"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621687863095"><span class="annot"><a href="#local-6989586621687863095"><span class="hs-identifier hs-type">m</span></a></span></span><span> </span><span id="local-6989586621687863096"><span class="annot"><a href="#local-6989586621687863096"><span class="hs-identifier hs-type">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-340"></span><span>  </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#MonadBuildSchemaBase"><span class="hs-identifier hs-type">MonadBuildSchemaBase</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863095"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863096"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-341"></span><span>    </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/data-has-0.4.0.0-53a688b2221046a4de0fb8e7927d1d69f385837da1af187d22b34ea76ed4183c/share/doc/html/src/Data.Has.html/Data.Has.html#Has"><span class="hs-identifier hs-type">Has</span></a></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaContext"><span class="hs-identifier hs-type">SchemaContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863094"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-342"></span><span>    </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/data-has-0.4.0.0-53a688b2221046a4de0fb8e7927d1d69f385837da1af187d22b34ea76ed4183c/share/doc/html/src/Data.Has.html/Data.Has.html#Has"><span class="hs-identifier hs-type">Has</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Schema.Options.html#SchemaOptions"><span class="hs-identifier hs-type">SchemaOptions</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863094"><span class="hs-identifier hs-type">r</span></a></span><span>
</span><span id="line-343"></span><span>  </span><span class="hs-special">)</span><span>
</span><span id="line-344"></span><span>
</span><span id="line-345"></span><span class="annot"><span class="hs-comment">-- | Runs a schema-building computation with all the context required to build actions.</span></span><span>
</span><span id="line-346"></span><span id="local-6989586621687862282"><span id="local-6989586621687862283"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#runActionSchema"><span class="hs-identifier hs-type">runActionSchema</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-347"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaContext"><span class="hs-identifier hs-type">SchemaContext</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-348"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Schema.Options.html#SchemaOptions"><span class="hs-identifier hs-type">SchemaOptions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-349"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaT"><span class="hs-identifier hs-type">SchemaT</span></a></span><span>
</span><span id="line-350"></span><span>    </span><span class="hs-special">(</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaContext"><span class="hs-identifier hs-type">SchemaContext</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-351"></span><span>      </span><span class="annot"><a href="Hasura.RQL.Types.Schema.Options.html#SchemaOptions"><span class="hs-identifier hs-type">SchemaOptions</span></a></span><span>
</span><span id="line-352"></span><span>    </span><span class="hs-special">)</span><span>
</span><span id="line-353"></span><span>    </span><span class="annot"><a href="#local-6989586621687862282"><span class="hs-identifier hs-type">m</span></a></span><span>
</span><span id="line-354"></span><span>    </span><span class="annot"><a href="#local-6989586621687862283"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-355"></span><span>  </span><span class="annot"><a href="#local-6989586621687862282"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862283"><span class="hs-identifier hs-type">a</span></a></span></span></span><span>
</span><span id="line-356"></span><span id="runActionSchema"><span class="annot"><span class="annottext">runActionSchema :: forall (m :: * -&gt; *) a.
SchemaContext
-&gt; SchemaOptions
-&gt; SchemaT (SchemaContext, SchemaOptions) m a
-&gt; m a
</span><a href="Hasura.GraphQL.Schema.Common.html#runActionSchema"><span class="hs-identifier hs-var hs-var">runActionSchema</span></a></span></span><span> </span><span id="local-6989586621687863097"><span class="annot"><span class="annottext">SchemaContext
</span><a href="#local-6989586621687863097"><span class="hs-identifier hs-var">context</span></a></span></span><span> </span><span id="local-6989586621687863098"><span class="annot"><span class="annottext">SchemaOptions
</span><a href="#local-6989586621687863098"><span class="hs-identifier hs-var">options</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaT"><span class="hs-identifier hs-type">SchemaT</span></a></span><span> </span><span id="local-6989586621687863099"><span class="annot"><span class="annottext">ReaderT (SchemaContext, SchemaOptions) m a
</span><a href="#local-6989586621687863099"><span class="hs-identifier hs-var">action</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ReaderT (SchemaContext, SchemaOptions) m a
-&gt; (SchemaContext, SchemaOptions) -&gt; m a
forall r (m :: * -&gt; *) a. ReaderT r m a -&gt; r -&gt; m a
</span><span class="hs-identifier hs-var">runReaderT</span></span><span> </span><span class="annot"><span class="annottext">ReaderT (SchemaContext, SchemaOptions) m a
</span><a href="#local-6989586621687863099"><span class="hs-identifier hs-var">action</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SchemaContext
</span><a href="#local-6989586621687863097"><span class="hs-identifier hs-var">context</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">SchemaOptions
</span><a href="#local-6989586621687863098"><span class="hs-identifier hs-var">options</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-357"></span><span>
</span><span id="line-358"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-359"></span><span>
</span><span id="line-360"></span><span class="hs-keyword">type</span><span> </span><span id="SelectExp"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SelectExp"><span class="hs-identifier hs-var">SelectExp</span></a></span></span><span> </span><span id="local-6989586621687863100"><span class="annot"><a href="#local-6989586621687863100"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AnnSimpleSelectG"><span class="hs-identifier hs-type">IR.AnnSimpleSelectG</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863100"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Root.html#RemoteRelationshipField"><span class="hs-identifier hs-type">IR.RemoteRelationshipField</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863100"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-361"></span><span>
</span><span id="line-362"></span><span class="hs-keyword">type</span><span> </span><span id="StreamSelectExp"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#StreamSelectExp"><span class="hs-identifier hs-var">StreamSelectExp</span></a></span></span><span> </span><span id="local-6989586621687863102"><span class="annot"><a href="#local-6989586621687863102"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AnnSimpleStreamSelectG"><span class="hs-identifier hs-type">IR.AnnSimpleStreamSelectG</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863102"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Root.html#RemoteRelationshipField"><span class="hs-identifier hs-type">IR.RemoteRelationshipField</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863102"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-363"></span><span>
</span><span id="line-364"></span><span class="hs-keyword">type</span><span> </span><span id="AggSelectExp"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#AggSelectExp"><span class="hs-identifier hs-var">AggSelectExp</span></a></span></span><span> </span><span id="local-6989586621687863104"><span class="annot"><a href="#local-6989586621687863104"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AnnAggregateSelectG"><span class="hs-identifier hs-type">IR.AnnAggregateSelectG</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863104"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Root.html#RemoteRelationshipField"><span class="hs-identifier hs-type">IR.RemoteRelationshipField</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863104"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-365"></span><span>
</span><span id="line-366"></span><span class="hs-keyword">type</span><span> </span><span id="ConnectionSelectExp"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#ConnectionSelectExp"><span class="hs-identifier hs-var">ConnectionSelectExp</span></a></span></span><span> </span><span id="local-6989586621687863106"><span class="annot"><a href="#local-6989586621687863106"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#ConnectionSelect"><span class="hs-identifier hs-type">IR.ConnectionSelect</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863106"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Root.html#RemoteRelationshipField"><span class="hs-identifier hs-type">IR.RemoteRelationshipField</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863106"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-367"></span><span>
</span><span id="line-368"></span><span class="hs-keyword">type</span><span> </span><span id="SelectArgs"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SelectArgs"><span class="hs-identifier hs-var">SelectArgs</span></a></span></span><span> </span><span id="local-6989586621687863108"><span class="annot"><a href="#local-6989586621687863108"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Select.Args.html#SelectArgsG"><span class="hs-identifier hs-type">IR.SelectArgsG</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863108"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863108"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-369"></span><span>
</span><span id="line-370"></span><span class="hs-keyword">type</span><span> </span><span id="SelectStreamArgs"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SelectStreamArgs"><span class="hs-identifier hs-var">SelectStreamArgs</span></a></span></span><span> </span><span id="local-6989586621687863110"><span class="annot"><a href="#local-6989586621687863110"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Select.Args.html#SelectStreamArgsG"><span class="hs-identifier hs-type">IR.SelectStreamArgsG</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863110"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863110"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-371"></span><span>
</span><span id="line-372"></span><span class="hs-keyword">type</span><span> </span><span id="TablePerms"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#TablePerms"><span class="hs-identifier hs-var">TablePerms</span></a></span></span><span> </span><span id="local-6989586621687863112"><span class="annot"><a href="#local-6989586621687863112"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Select.TablePerm.html#TablePermG"><span class="hs-identifier hs-type">IR.TablePermG</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863112"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863112"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-373"></span><span>
</span><span id="line-374"></span><span class="hs-keyword">type</span><span> </span><span id="AnnotatedFields"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#AnnotatedFields"><span class="hs-identifier hs-var">AnnotatedFields</span></a></span></span><span> </span><span id="local-6989586621687863113"><span class="annot"><a href="#local-6989586621687863113"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AnnFieldsG"><span class="hs-identifier hs-type">IR.AnnFieldsG</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863113"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Root.html#RemoteRelationshipField"><span class="hs-identifier hs-type">IR.RemoteRelationshipField</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863113"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-375"></span><span>
</span><span id="line-376"></span><span class="hs-keyword">type</span><span> </span><span id="AnnotatedField"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#AnnotatedField"><span class="hs-identifier hs-var">AnnotatedField</span></a></span></span><span> </span><span id="local-6989586621687863115"><span class="annot"><a href="#local-6989586621687863115"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AnnFieldG"><span class="hs-identifier hs-type">IR.AnnFieldG</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863115"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Root.html#RemoteRelationshipField"><span class="hs-identifier hs-type">IR.RemoteRelationshipField</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863115"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-377"></span><span>
</span><span id="line-378"></span><span class="hs-keyword">type</span><span> </span><span id="ConnectionFields"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#ConnectionFields"><span class="hs-identifier hs-var">ConnectionFields</span></a></span></span><span> </span><span id="local-6989586621687863117"><span class="annot"><a href="#local-6989586621687863117"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#ConnectionFields"><span class="hs-identifier hs-type">IR.ConnectionFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863117"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Root.html#RemoteRelationshipField"><span class="hs-identifier hs-type">IR.RemoteRelationshipField</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863117"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-379"></span><span>
</span><span id="line-380"></span><span class="hs-keyword">type</span><span> </span><span id="EdgeFields"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#EdgeFields"><span class="hs-identifier hs-var">EdgeFields</span></a></span></span><span> </span><span id="local-6989586621687863119"><span class="annot"><a href="#local-6989586621687863119"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#EdgeFields"><span class="hs-identifier hs-type">IR.EdgeFields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863119"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Root.html#RemoteRelationshipField"><span class="hs-identifier hs-type">IR.RemoteRelationshipField</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863119"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-381"></span><span>
</span><span id="line-382"></span><span class="hs-keyword">type</span><span> </span><span id="AnnotatedActionFields"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#AnnotatedActionFields"><span class="hs-identifier hs-var">AnnotatedActionFields</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Action.html#ActionFieldsG"><span class="hs-identifier hs-type">IR.ActionFieldsG</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Root.html#RemoteRelationshipField"><span class="hs-identifier hs-type">IR.RemoteRelationshipField</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-383"></span><span>
</span><span id="line-384"></span><span class="hs-keyword">type</span><span> </span><span id="AnnotatedActionField"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#AnnotatedActionField"><span class="hs-identifier hs-var">AnnotatedActionField</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Action.html#ActionFieldG"><span class="hs-identifier hs-type">IR.ActionFieldG</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Root.html#RemoteRelationshipField"><span class="hs-identifier hs-type">IR.RemoteRelationshipField</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-385"></span><span>
</span><span id="line-386"></span><span class="hs-keyword">type</span><span> </span><span id="AnnotatedNestedObjectSelect"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#AnnotatedNestedObjectSelect"><span class="hs-identifier hs-var">AnnotatedNestedObjectSelect</span></a></span></span><span> </span><span id="local-6989586621687863123"><span class="annot"><a href="#local-6989586621687863123"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AnnNestedObjectSelectG"><span class="hs-identifier hs-type">IR.AnnNestedObjectSelectG</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863123"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Root.html#RemoteRelationshipField"><span class="hs-identifier hs-type">IR.RemoteRelationshipField</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863123"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-387"></span><span>
</span><span id="line-388"></span><span class="hs-keyword">type</span><span> </span><span id="AnnotatedNestedArraySelect"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#AnnotatedNestedArraySelect"><span class="hs-identifier hs-var">AnnotatedNestedArraySelect</span></a></span></span><span> </span><span id="local-6989586621687863125"><span class="annot"><a href="#local-6989586621687863125"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Select.html#AnnNestedArraySelectG"><span class="hs-identifier hs-type">IR.AnnNestedArraySelectG</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863125"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Root.html#RemoteRelationshipField"><span class="hs-identifier hs-type">IR.RemoteRelationshipField</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863125"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-389"></span><span>
</span><span id="line-390"></span><span class="hs-comment">-------------------------------------------------------------------------------</span><span>
</span><span id="line-391"></span><span>
</span><span id="line-392"></span><span class="hs-keyword">data</span><span> </span><span id="RemoteSchemaParser"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#RemoteSchemaParser"><span class="hs-identifier hs-var">RemoteSchemaParser</span></a></span></span><span> </span><span id="local-6989586621687862286"><span class="annot"><a href="#local-6989586621687862286"><span class="hs-identifier hs-type">n</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="RemoteSchemaParser"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#RemoteSchemaParser"><span class="hs-identifier hs-var">RemoteSchemaParser</span></a></span></span><span>
</span><span id="line-393"></span><span>  </span><span class="hs-special">{</span><span> </span><span id="piQuery"><span class="annot"><span class="annottext">forall (n :: * -&gt; *).
RemoteSchemaParser n
-&gt; [FieldParser
      n
      (NamespacedField
         (RemoteSchemaRootField
            (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable))]
</span><a href="Hasura.GraphQL.Schema.Common.html#piQuery"><span class="hs-identifier hs-var hs-var">piQuery</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#FieldParser"><span class="hs-identifier hs-type">P.FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862286"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Namespace.html#NamespacedField"><span class="hs-identifier hs-type">NamespacedField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.RemoteSchema.html#RemoteSchemaRootField"><span class="hs-identifier hs-type">IR.RemoteSchemaRootField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Root.html#RemoteRelationshipField"><span class="hs-identifier hs-type">IR.RemoteRelationshipField</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Hasura.RemoteSchema.SchemaCache.Types.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-394"></span><span>    </span><span id="piMutation"><span class="annot"><span class="annottext">forall (n :: * -&gt; *).
RemoteSchemaParser n
-&gt; Maybe
     [FieldParser
        n
        (NamespacedField
           (RemoteSchemaRootField
              (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable))]
</span><a href="Hasura.GraphQL.Schema.Common.html#piMutation"><span class="hs-identifier hs-var hs-var">piMutation</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#FieldParser"><span class="hs-identifier hs-type">P.FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862286"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Namespace.html#NamespacedField"><span class="hs-identifier hs-type">NamespacedField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.RemoteSchema.html#RemoteSchemaRootField"><span class="hs-identifier hs-type">IR.RemoteSchemaRootField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Root.html#RemoteRelationshipField"><span class="hs-identifier hs-type">IR.RemoteRelationshipField</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Hasura.RemoteSchema.SchemaCache.Types.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><span id="line-395"></span><span>    </span><span id="piSubscription"><span class="annot"><span class="annottext">forall (n :: * -&gt; *).
RemoteSchemaParser n
-&gt; Maybe
     [FieldParser
        n
        (NamespacedField
           (RemoteSchemaRootField
              (RemoteRelationshipField UnpreparedValue) RemoteSchemaVariable))]
</span><a href="Hasura.GraphQL.Schema.Common.html#piSubscription"><span class="hs-identifier hs-var hs-var">piSubscription</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#FieldParser"><span class="hs-identifier hs-type">P.FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862286"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Namespace.html#NamespacedField"><span class="hs-identifier hs-type">NamespacedField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.RemoteSchema.html#RemoteSchemaRootField"><span class="hs-identifier hs-type">IR.RemoteSchemaRootField</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Root.html#RemoteRelationshipField"><span class="hs-identifier hs-type">IR.RemoteRelationshipField</span></a></span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="Hasura.RemoteSchema.SchemaCache.Types.html#RemoteSchemaVariable"><span class="hs-identifier hs-type">RemoteSchemaVariable</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-396"></span><span>  </span><span class="hs-special">}</span><span>
</span><span id="line-397"></span><span>
</span><span id="line-398"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#getTableRoles"><span class="hs-identifier hs-type">getTableRoles</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#BackendSourceInfo"><span class="hs-identifier hs-type">BackendSourceInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.Authentication.Role.html#RoleName"><span class="hs-identifier hs-type">RoleName</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-399"></span><span id="getTableRoles"><span class="annot"><span class="annottext">getTableRoles :: BackendSourceInfo -&gt; [RoleName]
</span><a href="Hasura.GraphQL.Schema.Common.html#getTableRoles"><span class="hs-identifier hs-var hs-var">getTableRoles</span></a></span></span><span> </span><span id="local-6989586621687863131"><span class="annot"><span class="annottext">BackendSourceInfo
</span><a href="#local-6989586621687863131"><span class="hs-identifier hs-var">bsi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (c :: BackendType -&gt; Constraint) (i :: BackendType -&gt; *) r.
AllBackendsSatisfy c =&gt;
AnyBackend i -&gt; (forall (b :: BackendType). c b =&gt; i b -&gt; r) -&gt; r
</span><a href="Hasura.SQL.AnyBackend.html#dispatchAnyBackend"><span class="hs-identifier hs-var">AB.dispatchAnyBackend</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#Backend"><span class="hs-identifier hs-type">Backend</span></a></span><span> </span><span class="annot"><span class="annottext">BackendSourceInfo
</span><a href="#local-6989586621687863131"><span class="hs-identifier hs-var">bsi</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b -&gt; [RoleName]
forall (b :: BackendType). Backend b =&gt; SourceInfo b -&gt; [RoleName]
forall {b :: BackendType}. SourceInfo b -&gt; [RoleName]
</span><a href="#local-6989586621687863133"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-400"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-401"></span><span>    </span><span id="local-6989586621687863133"><span class="annot"><span class="annottext">go :: SourceInfo b -&gt; [RoleName]
</span><a href="#local-6989586621687863133"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621687863137"><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621687863137"><span class="hs-identifier hs-var">si</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashMap RoleName (RolePermInfo b) -&gt; [RoleName]
forall k v. HashMap k v -&gt; [k]
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/unordered-containers-0.2.20-6d56f9b3abc6011ddb6e237c415126423ab5ceb5c078221bba2ff80dbe921009/share/doc/html/src/Data.HashMap.Internal.html/Data.HashMap.Internal.html#keys"><span class="hs-identifier hs-var">HashMap.keys</span></a></span><span> </span><span class="annot"><span class="annottext">(HashMap RoleName (RolePermInfo b) -&gt; [RoleName])
-&gt; (TableInfo b -&gt; HashMap RoleName (RolePermInfo b))
-&gt; TableInfo b
-&gt; [RoleName]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; HashMap RoleName (RolePermInfo b)
forall (b :: BackendType). TableInfo b -&gt; RolePermInfoMap b
</span><a href="Hasura.Table.Cache.html#_tiRolePermInfoMap"><span class="hs-identifier hs-var">_tiRolePermInfoMap</span></a></span><span> </span><span class="annot"><span class="annottext">(TableInfo b -&gt; [RoleName]) -&gt; [TableInfo b] -&gt; [RoleName]
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">HashMap (TableName b) (TableInfo b) -&gt; [TableInfo b]
forall k v. HashMap k v -&gt; [v]
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/unordered-containers-0.2.20-6d56f9b3abc6011ddb6e237c415126423ab5ceb5c078221bba2ff80dbe921009/share/doc/html/src/Data.HashMap.Internal.html/Data.HashMap.Internal.html#elems"><span class="hs-identifier hs-var">HashMap.elems</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceInfo b -&gt; HashMap (TableName b) (TableInfo b)
forall (b :: BackendType). SourceInfo b -&gt; TableCache b
</span><a href="Hasura.RQL.Types.Source.html#_siTables"><span class="hs-identifier hs-var">_siTables</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621687863137"><span class="hs-identifier hs-var">si</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-402"></span><span>
</span><span id="line-403"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#getLogicalModelRoles"><span class="hs-identifier hs-type">getLogicalModelRoles</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#BackendSourceInfo"><span class="hs-identifier hs-type">BackendSourceInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="Hasura.Authentication.Role.html#RoleName"><span class="hs-identifier hs-type">RoleName</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-404"></span><span id="getLogicalModelRoles"><span class="annot"><span class="annottext">getLogicalModelRoles :: BackendSourceInfo -&gt; [RoleName]
</span><a href="Hasura.GraphQL.Schema.Common.html#getLogicalModelRoles"><span class="hs-identifier hs-var hs-var">getLogicalModelRoles</span></a></span></span><span> </span><span id="local-6989586621687863143"><span class="annot"><span class="annottext">BackendSourceInfo
</span><a href="#local-6989586621687863143"><span class="hs-identifier hs-var">bsi</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">forall (c :: BackendType -&gt; Constraint) (i :: BackendType -&gt; *) r.
AllBackendsSatisfy c =&gt;
AnyBackend i -&gt; (forall (b :: BackendType). c b =&gt; i b -&gt; r) -&gt; r
</span><a href="Hasura.SQL.AnyBackend.html#dispatchAnyBackend"><span class="hs-identifier hs-var">AB.dispatchAnyBackend</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#Backend"><span class="hs-identifier hs-type">Backend</span></a></span><span> </span><span class="annot"><span class="annottext">BackendSourceInfo
</span><a href="#local-6989586621687863143"><span class="hs-identifier hs-var">bsi</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b -&gt; [RoleName]
forall (b :: BackendType). Backend b =&gt; SourceInfo b -&gt; [RoleName]
forall {b :: BackendType}. SourceInfo b -&gt; [RoleName]
</span><a href="#local-6989586621687863144"><span class="hs-identifier hs-var">go</span></a></span><span>
</span><span id="line-405"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-406"></span><span>    </span><span id="local-6989586621687863144"><span class="annot"><span class="annottext">go :: SourceInfo b -&gt; [RoleName]
</span><a href="#local-6989586621687863144"><span class="hs-identifier hs-var hs-var">go</span></a></span></span><span> </span><span id="local-6989586621687863150"><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621687863150"><span class="hs-identifier hs-var">si</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-407"></span><span>      </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687863151"><span class="annot"><span class="annottext">namedLogicalModelRoles :: [RoleName]
</span><a href="#local-6989586621687863151"><span class="hs-identifier hs-var hs-var">namedLogicalModelRoles</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashMap RoleName (RolePermInfo b) -&gt; [RoleName]
forall k v. HashMap k v -&gt; [k]
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/unordered-containers-0.2.20-6d56f9b3abc6011ddb6e237c415126423ab5ceb5c078221bba2ff80dbe921009/share/doc/html/src/Data.HashMap.Internal.html/Data.HashMap.Internal.html#keys"><span class="hs-identifier hs-var">HashMap.keys</span></a></span><span> </span><span class="annot"><span class="annottext">(HashMap RoleName (RolePermInfo b) -&gt; [RoleName])
-&gt; (LogicalModelInfo b -&gt; HashMap RoleName (RolePermInfo b))
-&gt; LogicalModelInfo b
-&gt; [RoleName]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">LogicalModelInfo b -&gt; HashMap RoleName (RolePermInfo b)
forall (b :: BackendType). LogicalModelInfo b -&gt; RolePermInfoMap b
</span><a href="Hasura.LogicalModel.Cache.html#_lmiPermissions"><span class="hs-identifier hs-var">_lmiPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">(LogicalModelInfo b -&gt; [RoleName])
-&gt; [LogicalModelInfo b] -&gt; [RoleName]
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">HashMap LogicalModelName (LogicalModelInfo b)
-&gt; [LogicalModelInfo b]
forall k v. HashMap k v -&gt; [v]
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/unordered-containers-0.2.20-6d56f9b3abc6011ddb6e237c415126423ab5ceb5c078221bba2ff80dbe921009/share/doc/html/src/Data.HashMap.Internal.html/Data.HashMap.Internal.html#elems"><span class="hs-identifier hs-var">HashMap.elems</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceInfo b -&gt; HashMap LogicalModelName (LogicalModelInfo b)
forall (b :: BackendType). SourceInfo b -&gt; LogicalModelCache b
</span><a href="Hasura.RQL.Types.Source.html#_siLogicalModels"><span class="hs-identifier hs-var">_siLogicalModels</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621687863150"><span class="hs-identifier hs-var">si</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-408"></span><span>          </span><span id="local-6989586621687863153"><span class="annot"><span class="annottext">inlineLogicalModelRoles :: [RoleName]
</span><a href="#local-6989586621687863153"><span class="hs-identifier hs-var hs-var">inlineLogicalModelRoles</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashMap RoleName (RolePermInfo b) -&gt; [RoleName]
forall k v. HashMap k v -&gt; [k]
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/unordered-containers-0.2.20-6d56f9b3abc6011ddb6e237c415126423ab5ceb5c078221bba2ff80dbe921009/share/doc/html/src/Data.HashMap.Internal.html/Data.HashMap.Internal.html#keys"><span class="hs-identifier hs-var">HashMap.keys</span></a></span><span> </span><span class="annot"><span class="annottext">(HashMap RoleName (RolePermInfo b) -&gt; [RoleName])
-&gt; (NativeQueryInfo b -&gt; HashMap RoleName (RolePermInfo b))
-&gt; NativeQueryInfo b
-&gt; [RoleName]
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">LogicalModelInfo b -&gt; HashMap RoleName (RolePermInfo b)
forall (b :: BackendType). LogicalModelInfo b -&gt; RolePermInfoMap b
</span><a href="Hasura.LogicalModel.Cache.html#_lmiPermissions"><span class="hs-identifier hs-var">_lmiPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">(LogicalModelInfo b -&gt; HashMap RoleName (RolePermInfo b))
-&gt; (NativeQueryInfo b -&gt; LogicalModelInfo b)
-&gt; NativeQueryInfo b
-&gt; HashMap RoleName (RolePermInfo b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">NativeQueryInfo b -&gt; LogicalModelInfo b
forall (b :: BackendType). NativeQueryInfo b -&gt; LogicalModelInfo b
</span><a href="Hasura.NativeQuery.Cache.html#_nqiReturns"><span class="hs-identifier hs-var">_nqiReturns</span></a></span><span> </span><span class="annot"><span class="annottext">(NativeQueryInfo b -&gt; [RoleName])
-&gt; [NativeQueryInfo b] -&gt; [RoleName]
forall (m :: * -&gt; *) a b. Monad m =&gt; (a -&gt; m b) -&gt; m a -&gt; m b
</span><span class="hs-operator hs-var">=&lt;&lt;</span></span><span> </span><span class="annot"><span class="annottext">HashMap NativeQueryName (NativeQueryInfo b) -&gt; [NativeQueryInfo b]
forall k v. HashMap k v -&gt; [v]
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/unordered-containers-0.2.20-6d56f9b3abc6011ddb6e237c415126423ab5ceb5c078221bba2ff80dbe921009/share/doc/html/src/Data.HashMap.Internal.html/Data.HashMap.Internal.html#elems"><span class="hs-identifier hs-var">HashMap.elems</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceInfo b -&gt; HashMap NativeQueryName (NativeQueryInfo b)
forall (b :: BackendType). SourceInfo b -&gt; NativeQueryCache b
</span><a href="Hasura.RQL.Types.Source.html#_siNativeQueries"><span class="hs-identifier hs-var">_siNativeQueries</span></a></span><span> </span><span class="annot"><span class="annottext">SourceInfo b
</span><a href="#local-6989586621687863150"><span class="hs-identifier hs-var">si</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-409"></span><span>       </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">[RoleName]
</span><a href="#local-6989586621687863151"><span class="hs-identifier hs-var">namedLogicalModelRoles</span></a></span><span> </span><span class="annot"><span class="annottext">[RoleName] -&gt; [RoleName] -&gt; [RoleName]
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[RoleName]
</span><a href="#local-6989586621687863153"><span class="hs-identifier hs-var">inlineLogicalModelRoles</span></a></span><span>
</span><span id="line-410"></span><span>
</span><span id="line-411"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#askScalarTypeParsingContext"><span class="hs-identifier hs-type">askScalarTypeParsingContext</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-412"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621687862333"><span class="annot"><a href="#local-6989586621687862333"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621687862331"><span class="annot"><a href="#local-6989586621687862331"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621687862332"><span class="annot"><a href="#local-6989586621687862332"><span class="hs-identifier hs-type">m</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-413"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadReader</span></span><span> </span><span class="annot"><a href="#local-6989586621687862331"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862332"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/data-has-0.4.0.0-53a688b2221046a4de0fb8e7927d1d69f385837da1af187d22b34ea76ed4183c/share/doc/html/src/Data.Has.html/Data.Has.html#Has"><span class="hs-identifier hs-type">Has</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceInfo"><span class="hs-identifier hs-type">SourceInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862333"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621687862331"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/data-has-0.4.0.0-53a688b2221046a4de0fb8e7927d1d69f385837da1af187d22b34ea76ed4183c/share/doc/html/src/Data.Has.html/Data.Has.html#Has"><span class="hs-identifier hs-type">Has</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.SourceConfiguration.html#ScalarTypeParsingContext"><span class="hs-identifier hs-type">ScalarTypeParsingContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862333"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.SourceConfiguration.html#SourceConfig"><span class="hs-identifier hs-type">SourceConfig</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862333"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-414"></span><span>  </span><span class="annot"><a href="#local-6989586621687862332"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.SourceConfiguration.html#ScalarTypeParsingContext"><span class="hs-identifier hs-type">ScalarTypeParsingContext</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862333"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-415"></span><span id="askScalarTypeParsingContext"><span class="annot"><span class="annottext">askScalarTypeParsingContext :: forall (b :: BackendType) r (m :: * -&gt; *).
(MonadReader r m, Has (SourceInfo b) r,
 Has (ScalarTypeParsingContext b) (SourceConfig b)) =&gt;
m (ScalarTypeParsingContext b)
</span><a href="Hasura.GraphQL.Schema.Common.html#askScalarTypeParsingContext"><span class="hs-identifier hs-var hs-var">askScalarTypeParsingContext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(r -&gt; ScalarTypeParsingContext b) -&gt; m (ScalarTypeParsingContext b)
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SourceConfig b -&gt; ScalarTypeParsingContext b
forall a t. Has a t =&gt; t -&gt; a
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/data-has-0.4.0.0-53a688b2221046a4de0fb8e7927d1d69f385837da1af187d22b34ea76ed4183c/share/doc/html/src/Data.Has.html/Data.Has.html#getter"><span class="hs-identifier hs-var">getter</span></a></span><span> </span><span class="annot"><span class="annottext">(SourceConfig b -&gt; ScalarTypeParsingContext b)
-&gt; (r -&gt; SourceConfig b) -&gt; r -&gt; ScalarTypeParsingContext b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">forall (b :: BackendType). SourceInfo b -&gt; SourceConfig b
</span><a href="Hasura.RQL.Types.Source.html#_siConfiguration"><span class="hs-identifier hs-var">_siConfiguration</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621687862333"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><span class="annottext">(SourceInfo b -&gt; SourceConfig b)
-&gt; (r -&gt; SourceInfo b) -&gt; r -&gt; SourceConfig b
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; SourceInfo b
forall a t. Has a t =&gt; t -&gt; a
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/data-has-0.4.0.0-53a688b2221046a4de0fb8e7927d1d69f385837da1af187d22b34ea76ed4183c/share/doc/html/src/Data.Has.html/Data.Has.html#getter"><span class="hs-identifier hs-var">getter</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-416"></span><span>
</span><span id="line-417"></span><span class="hs-comment">-- | Looks up table information for the given table name. This function</span><span>
</span><span id="line-418"></span><span class="hs-comment">-- should never fail, since the schema cache construction process is</span><span>
</span><span id="line-419"></span><span class="hs-comment">-- supposed to ensure all dependencies are resolved.</span><span>
</span><span id="line-420"></span><span class="hs-comment">-- TODO: deduplicate this with `CacheRM`.</span><span>
</span><span id="line-421"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#askTableInfo"><span class="hs-identifier hs-type">askTableInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-422"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621687862340"><span class="annot"><a href="#local-6989586621687862340"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621687862342"><span class="annot"><a href="#local-6989586621687862342"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621687862341"><span class="annot"><a href="#local-6989586621687862341"><span class="hs-identifier hs-type">m</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-423"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#Backend"><span class="hs-identifier hs-type">Backend</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862340"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#QErr"><span class="hs-identifier hs-type">QErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862341"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadReader</span></span><span> </span><span class="annot"><a href="#local-6989586621687862342"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862341"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/data-has-0.4.0.0-53a688b2221046a4de0fb8e7927d1d69f385837da1af187d22b34ea76ed4183c/share/doc/html/src/Data.Has.html/Data.Has.html#Has"><span class="hs-identifier hs-type">Has</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceInfo"><span class="hs-identifier hs-type">SourceInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862340"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621687862342"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-424"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#TableName"><span class="hs-identifier hs-type">TableName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862340"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-425"></span><span>  </span><span class="annot"><a href="#local-6989586621687862341"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Table.Cache.html#TableInfo"><span class="hs-identifier hs-type">TableInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862340"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-426"></span><span id="askTableInfo"><span class="annot"><span class="annottext">askTableInfo :: forall (b :: BackendType) r (m :: * -&gt; *).
(Backend b, MonadError QErr m, MonadReader r m,
 Has (SourceInfo b) r) =&gt;
TableName b -&gt; m (TableInfo b)
</span><a href="Hasura.GraphQL.Schema.Common.html#askTableInfo"><span class="hs-identifier hs-var hs-var">askTableInfo</span></a></span></span><span> </span><span id="local-6989586621687863192"><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621687863192"><span class="hs-identifier hs-var">tableName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-427"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceInfo"><span class="hs-identifier hs-type">SourceInfo</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687863194"><span id="local-6989586621687863195"><span id="local-6989586621687863196"><span id="local-6989586621687863197"><span id="local-6989586621687863198"><span id="local-6989586621687863199"><span id="local-6989586621687863200"><span id="local-6989586621687863201"><span id="local-6989586621687863202"><span id="local-6989586621687863203"><span id="local-6989586621687863204"><span class="annot"><a href="Hasura.RQL.Types.Source.html#_siTables"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(r -&gt; SourceInfo b) -&gt; m (SourceInfo b)
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; SourceInfo b
forall a t. Has a t =&gt; t -&gt; a
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/data-has-0.4.0.0-53a688b2221046a4de0fb8e7927d1d69f385837da1af187d22b34ea76ed4183c/share/doc/html/src/Data.Has.html/Data.Has.html#getter"><span class="hs-identifier hs-var">getter</span></a></span><span>
</span><span id="line-428"></span><span>  </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/unordered-containers-0.2.20-6d56f9b3abc6011ddb6e237c415126423ab5ceb5c078221bba2ff80dbe921009/share/doc/html/src/Data.HashMap.Internal.html/Data.HashMap.Internal.html#lookup"><span class="hs-identifier hs-type">HashMap.lookup</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863192"><span class="hs-identifier hs-type">tableName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863196"><span class="hs-identifier hs-type">_siTables</span></a></span><span>
</span><span id="line-429"></span><span>    </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#onNothing"><span class="hs-operator hs-type">`onNothing`</span></a></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#throw500"><span class="hs-identifier hs-type">throw500</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;askTableInfo: no info for table &quot;</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;&gt;</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Extended.html/Data.Text.Extended.html#dquote"><span class="hs-identifier hs-type">dquote</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863192"><span class="hs-identifier hs-type">tableName</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;&gt;</span></span><span> </span><span class="annot"><span class="hs-string">&quot; in source &quot;</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;&gt;</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Extended.html/Data.Text.Extended.html#dquote"><span class="hs-identifier hs-type">dquote</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863194"><span class="hs-identifier hs-type">_siName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-430"></span><span>
</span><span id="line-431"></span><span class="hs-comment">-- | Looks up logical model information for the given logical model name. This function</span><span>
</span><span id="line-432"></span><span class="hs-comment">-- should never fail, since the schema cache construction process is</span><span>
</span><span id="line-433"></span><span class="hs-comment">-- supposed to ensure all dependencies are resolved.</span><span>
</span><span id="line-434"></span><span class="hs-comment">-- TODO: deduplicate this with `CacheRM`.</span><span>
</span><span id="line-435"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#askLogicalModelInfo"><span class="hs-identifier hs-type">askLogicalModelInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-436"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621687862373"><span class="annot"><a href="#local-6989586621687862373"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621687862372"><span class="annot"><a href="#local-6989586621687862372"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621687862371"><span class="annot"><a href="#local-6989586621687862371"><span class="hs-identifier hs-type">m</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-437"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#QErr"><span class="hs-identifier hs-type">QErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862371"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadReader</span></span><span> </span><span class="annot"><a href="#local-6989586621687862372"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862371"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/data-has-0.4.0.0-53a688b2221046a4de0fb8e7927d1d69f385837da1af187d22b34ea76ed4183c/share/doc/html/src/Data.Has.html/Data.Has.html#Has"><span class="hs-identifier hs-type">Has</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceInfo"><span class="hs-identifier hs-type">SourceInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862373"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621687862372"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-438"></span><span>  </span><span class="annot"><a href="Hasura.LogicalModel.Types.html#LogicalModelName"><span class="hs-identifier hs-type">LogicalModelName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-439"></span><span>  </span><span class="annot"><a href="#local-6989586621687862371"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.LogicalModel.Cache.html#LogicalModelInfo"><span class="hs-identifier hs-type">LogicalModelInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862373"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-440"></span><span id="askLogicalModelInfo"><span class="annot"><span class="annottext">askLogicalModelInfo :: forall (b :: BackendType) r (m :: * -&gt; *).
(MonadError QErr m, MonadReader r m, Has (SourceInfo b) r) =&gt;
LogicalModelName -&gt; m (LogicalModelInfo b)
</span><a href="Hasura.GraphQL.Schema.Common.html#askLogicalModelInfo"><span class="hs-identifier hs-var hs-var">askLogicalModelInfo</span></a></span></span><span> </span><span id="local-6989586621687863238"><span class="annot"><span class="annottext">LogicalModelName
</span><a href="#local-6989586621687863238"><span class="hs-identifier hs-var">logicalModelName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-441"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceInfo"><span class="hs-identifier hs-type">SourceInfo</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687863239"><span id="local-6989586621687863240"><span id="local-6989586621687863241"><span id="local-6989586621687863242"><span id="local-6989586621687863243"><span id="local-6989586621687863244"><span id="local-6989586621687863245"><span id="local-6989586621687863246"><span id="local-6989586621687863247"><span id="local-6989586621687863248"><span id="local-6989586621687863249"><span class="annot"><a href="Hasura.RQL.Types.Source.html#_siTables"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(r -&gt; SourceInfo b) -&gt; m (SourceInfo b)
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; SourceInfo b
forall a t. Has a t =&gt; t -&gt; a
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/data-has-0.4.0.0-53a688b2221046a4de0fb8e7927d1d69f385837da1af187d22b34ea76ed4183c/share/doc/html/src/Data.Has.html/Data.Has.html#getter"><span class="hs-identifier hs-var">getter</span></a></span><span>
</span><span id="line-442"></span><span>  </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/unordered-containers-0.2.20-6d56f9b3abc6011ddb6e237c415126423ab5ceb5c078221bba2ff80dbe921009/share/doc/html/src/Data.HashMap.Internal.html/Data.HashMap.Internal.html#lookup"><span class="hs-identifier hs-type">HashMap.lookup</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863238"><span class="hs-identifier hs-type">logicalModelName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863245"><span class="hs-identifier hs-type">_siLogicalModels</span></a></span><span>
</span><span id="line-443"></span><span>    </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#onNothing"><span class="hs-operator hs-type">`onNothing`</span></a></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#throw500"><span class="hs-identifier hs-type">throw500</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;askLogicalModelInfo: no info for logical model &quot;</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;&gt;</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Extended.html/Data.Text.Extended.html#dquote"><span class="hs-identifier hs-type">dquote</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863238"><span class="hs-identifier hs-type">logicalModelName</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;&gt;</span></span><span> </span><span class="annot"><span class="hs-string">&quot; in source &quot;</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;&gt;</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Extended.html/Data.Text.Extended.html#dquote"><span class="hs-identifier hs-type">dquote</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863239"><span class="hs-identifier hs-type">_siName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-444"></span><span>
</span><span id="line-445"></span><span class="hs-comment">-- | Looks up native query information for the given native query name. This function</span><span>
</span><span id="line-446"></span><span class="hs-comment">-- should never fail, since the schema cache construction process is</span><span>
</span><span id="line-447"></span><span class="hs-comment">-- supposed to ensure all dependencies are resolved.</span><span>
</span><span id="line-448"></span><span class="hs-comment">-- TODO: deduplicate this with `CacheRM`.</span><span>
</span><span id="line-449"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#askNativeQueryInfo"><span class="hs-identifier hs-type">askNativeQueryInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-450"></span><span>  </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621687862379"><span class="annot"><a href="#local-6989586621687862379"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621687862378"><span class="annot"><a href="#local-6989586621687862378"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621687862377"><span class="annot"><a href="#local-6989586621687862377"><span class="hs-identifier hs-type">m</span></a></span></span><span class="hs-operator">.</span><span>
</span><span id="line-451"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#QErr"><span class="hs-identifier hs-type">QErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862377"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadReader</span></span><span> </span><span class="annot"><a href="#local-6989586621687862378"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862377"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/data-has-0.4.0.0-53a688b2221046a4de0fb8e7927d1d69f385837da1af187d22b34ea76ed4183c/share/doc/html/src/Data.Has.html/Data.Has.html#Has"><span class="hs-identifier hs-type">Has</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceInfo"><span class="hs-identifier hs-type">SourceInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862379"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621687862378"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-452"></span><span>  </span><span class="annot"><a href="Hasura.NativeQuery.Types.html#NativeQueryName"><span class="hs-identifier hs-type">NativeQueryName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-453"></span><span>  </span><span class="annot"><a href="#local-6989586621687862377"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.NativeQuery.Cache.html#NativeQueryInfo"><span class="hs-identifier hs-type">NativeQueryInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862379"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-454"></span><span id="askNativeQueryInfo"><span class="annot"><span class="annottext">askNativeQueryInfo :: forall (b :: BackendType) r (m :: * -&gt; *).
(MonadError QErr m, MonadReader r m, Has (SourceInfo b) r) =&gt;
NativeQueryName -&gt; m (NativeQueryInfo b)
</span><a href="Hasura.GraphQL.Schema.Common.html#askNativeQueryInfo"><span class="hs-identifier hs-var hs-var">askNativeQueryInfo</span></a></span></span><span> </span><span id="local-6989586621687863272"><span class="annot"><span class="annottext">NativeQueryName
</span><a href="#local-6989586621687863272"><span class="hs-identifier hs-var">nativeQueryName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-455"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceInfo"><span class="hs-identifier hs-type">SourceInfo</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687863273"><span id="local-6989586621687863274"><span id="local-6989586621687863275"><span id="local-6989586621687863276"><span id="local-6989586621687863277"><span id="local-6989586621687863278"><span id="local-6989586621687863279"><span id="local-6989586621687863280"><span id="local-6989586621687863281"><span id="local-6989586621687863282"><span id="local-6989586621687863283"><span class="annot"><a href="Hasura.RQL.Types.Source.html#_siTables"><span class="hs-glyph hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">..</span></a></span></span></span></span></span></span></span></span></span></span></span></span><span class="hs-special">}</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(r -&gt; SourceInfo b) -&gt; m (SourceInfo b)
forall r (m :: * -&gt; *) a. MonadReader r m =&gt; (r -&gt; a) -&gt; m a
</span><span class="hs-identifier hs-var">asks</span></span><span> </span><span class="annot"><span class="annottext">r -&gt; SourceInfo b
forall a t. Has a t =&gt; t -&gt; a
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/data-has-0.4.0.0-53a688b2221046a4de0fb8e7927d1d69f385837da1af187d22b34ea76ed4183c/share/doc/html/src/Data.Has.html/Data.Has.html#getter"><span class="hs-identifier hs-var">getter</span></a></span><span>
</span><span id="line-456"></span><span>  </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/unordered-containers-0.2.20-6d56f9b3abc6011ddb6e237c415126423ab5ceb5c078221bba2ff80dbe921009/share/doc/html/src/Data.HashMap.Internal.html/Data.HashMap.Internal.html#lookup"><span class="hs-identifier hs-type">HashMap.lookup</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863272"><span class="hs-identifier hs-type">nativeQueryName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863277"><span class="hs-identifier hs-type">_siNativeQueries</span></a></span><span>
</span><span id="line-457"></span><span>    </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#onNothing"><span class="hs-operator hs-type">`onNothing`</span></a></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#throw500"><span class="hs-identifier hs-type">throw500</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-string">&quot;askNativeQueryInfo: no info for native query &quot;</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;&gt;</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Extended.html/Data.Text.Extended.html#dquote"><span class="hs-identifier hs-type">dquote</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863272"><span class="hs-identifier hs-type">nativeQueryName</span></a></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;&gt;</span></span><span> </span><span class="annot"><span class="hs-string">&quot; in source &quot;</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">&lt;&gt;</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Extended.html/Data.Text.Extended.html#dquote"><span class="hs-identifier hs-type">dquote</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863273"><span class="hs-identifier hs-type">_siName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-458"></span><span>
</span><span id="line-459"></span><span class="annot"><span class="hs-comment">-- | Whether the request is sent with `x-hasura-use-backend-only-permissions` set to `true`.</span></span><span>
</span><span id="line-460"></span><span class="hs-keyword">data</span><span> </span><span id="Scenario"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#Scenario"><span class="hs-identifier hs-var">Scenario</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="Backend"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#Backend"><span class="hs-identifier hs-var">Backend</span></a></span></span><span> </span><span class="hs-glyph">|</span><span> </span><span id="Frontend"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#Frontend"><span class="hs-identifier hs-var">Frontend</span></a></span></span><span> </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621687863287"><span id="local-6989586621687863297"><span id="local-6989586621687863304"><span id="local-6989586621687863317"><span id="local-6989586621687863320"><span id="local-6989586621687863325"><span id="local-6989586621687863331"><span id="local-6989586621687863335"><span class="annot"><span class="annottext">Int -&gt; Scenario
Scenario -&gt; Int
Scenario -&gt; [Scenario]
Scenario -&gt; Scenario
Scenario -&gt; Scenario -&gt; [Scenario]
Scenario -&gt; Scenario -&gt; Scenario -&gt; [Scenario]
(Scenario -&gt; Scenario)
-&gt; (Scenario -&gt; Scenario)
-&gt; (Int -&gt; Scenario)
-&gt; (Scenario -&gt; Int)
-&gt; (Scenario -&gt; [Scenario])
-&gt; (Scenario -&gt; Scenario -&gt; [Scenario])
-&gt; (Scenario -&gt; Scenario -&gt; [Scenario])
-&gt; (Scenario -&gt; Scenario -&gt; Scenario -&gt; [Scenario])
-&gt; Enum Scenario
forall a.
(a -&gt; a)
-&gt; (a -&gt; a)
-&gt; (Int -&gt; a)
-&gt; (a -&gt; Int)
-&gt; (a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; [a])
-&gt; (a -&gt; a -&gt; a -&gt; [a])
-&gt; Enum a
$csucc :: Scenario -&gt; Scenario
succ :: Scenario -&gt; Scenario
$cpred :: Scenario -&gt; Scenario
pred :: Scenario -&gt; Scenario
$ctoEnum :: Int -&gt; Scenario
toEnum :: Int -&gt; Scenario
$cfromEnum :: Scenario -&gt; Int
fromEnum :: Scenario -&gt; Int
$cenumFrom :: Scenario -&gt; [Scenario]
enumFrom :: Scenario -&gt; [Scenario]
$cenumFromThen :: Scenario -&gt; Scenario -&gt; [Scenario]
enumFromThen :: Scenario -&gt; Scenario -&gt; [Scenario]
$cenumFromTo :: Scenario -&gt; Scenario -&gt; [Scenario]
enumFromTo :: Scenario -&gt; Scenario -&gt; [Scenario]
$cenumFromThenTo :: Scenario -&gt; Scenario -&gt; Scenario -&gt; [Scenario]
enumFromThenTo :: Scenario -&gt; Scenario -&gt; Scenario -&gt; [Scenario]
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Enum</span></span></span></span></span></span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687863343"><span id="local-6989586621687863345"><span id="local-6989586621687863349"><span class="annot"><span class="annottext">Int -&gt; Scenario -&gt; ShowS
[Scenario] -&gt; ShowS
Scenario -&gt; String
(Int -&gt; Scenario -&gt; ShowS)
-&gt; (Scenario -&gt; String) -&gt; ([Scenario] -&gt; ShowS) -&gt; Show Scenario
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; Scenario -&gt; ShowS
showsPrec :: Int -&gt; Scenario -&gt; ShowS
$cshow :: Scenario -&gt; String
show :: Scenario -&gt; String
$cshowList :: [Scenario] -&gt; ShowS
showList :: [Scenario] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687863352"><span id="local-6989586621687863356"><span class="annot"><span class="annottext">Scenario -&gt; Scenario -&gt; Bool
(Scenario -&gt; Scenario -&gt; Bool)
-&gt; (Scenario -&gt; Scenario -&gt; Bool) -&gt; Eq Scenario
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: Scenario -&gt; Scenario -&gt; Bool
== :: Scenario -&gt; Scenario -&gt; Bool
$c/= :: Scenario -&gt; Scenario -&gt; Bool
/= :: Scenario -&gt; Scenario -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-461"></span><span>
</span><span id="line-462"></span><span id="local-6989586621687862388"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#textToName"><span class="hs-identifier hs-type">textToName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#QErr"><span class="hs-identifier hs-type">QErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862388"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621687862388"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.Name.html/Language.GraphQL.Draft.Syntax.Name.html#Name"><span class="hs-identifier hs-type">G.Name</span></a></span></span><span>
</span><span id="line-463"></span><span id="textToName"><span class="annot"><span class="annottext">textToName :: forall (m :: * -&gt; *). MonadError QErr m =&gt; Text -&gt; m Name
</span><a href="Hasura.GraphQL.Schema.Common.html#textToName"><span class="hs-identifier hs-var hs-var">textToName</span></a></span></span><span> </span><span id="local-6989586621687863371"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687863371"><span class="hs-identifier hs-var">textName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-464"></span><span>  </span><span class="annot"><span class="annottext">Text -&gt; Maybe Name
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.Name.html/Language.GraphQL.Draft.Syntax.Name.html#mkName"><span class="hs-identifier hs-var">G.mkName</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687863371"><span class="hs-identifier hs-var">textName</span></a></span><span>
</span><span id="line-465"></span><span>    </span><span class="annot"><span class="annottext">Maybe Name -&gt; m Name -&gt; m Name
forall (m :: * -&gt; *) a. Applicative m =&gt; Maybe a -&gt; m a -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#onNothing"><span class="hs-operator hs-var">`onNothing`</span></a></span><span> </span><span class="annot"><span class="annottext">Code -&gt; Text -&gt; m Name
forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span>
</span><span id="line-466"></span><span>      </span><span class="annot"><span class="annottext">Code
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#ValidationFailed"><span class="hs-identifier hs-var">ValidationFailed</span></a></span><span>
</span><span id="line-467"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;cannot include &quot;</span></span><span>
</span><span id="line-468"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687863371"><span class="hs-identifier hs-var">textName</span></a></span><span>
</span><span id="line-469"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Extended.html/Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; in the GraphQL schema because &quot;</span></span><span>
</span><span id="line-470"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; it is not a valid GraphQL identifier&quot;</span></span><span>
</span><span id="line-471"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-472"></span><span>
</span><span id="line-473"></span><span id="local-6989586621687862395"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#textToGQLIdentifier"><span class="hs-identifier hs-type">textToGQLIdentifier</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#QErr"><span class="hs-identifier hs-type">QErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862395"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621687862395"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Casing.html/Data.Text.Casing.html#GQLNameIdentifier"><span class="hs-identifier hs-type">GQLNameIdentifier</span></a></span></span><span>
</span><span id="line-474"></span><span id="textToGQLIdentifier"><span class="annot"><span class="annottext">textToGQLIdentifier :: forall (m :: * -&gt; *).
MonadError QErr m =&gt;
Text -&gt; m GQLNameIdentifier
</span><a href="Hasura.GraphQL.Schema.Common.html#textToGQLIdentifier"><span class="hs-identifier hs-var hs-var">textToGQLIdentifier</span></a></span></span><span> </span><span id="local-6989586621687863395"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687863395"><span class="hs-identifier hs-var">textName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-475"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687863396"><span class="annot"><span class="annottext">gqlIdents :: Maybe GQLNameIdentifier
</span><a href="#local-6989586621687863396"><span class="hs-identifier hs-var hs-var">gqlIdents</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-476"></span><span>        </span><span class="hs-special">(</span><span id="local-6989586621687863397"><span class="annot"><a href="#local-6989586621687863397"><span class="hs-identifier hs-var">pref</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687863398"><span class="annot"><a href="#local-6989586621687863398"><span class="hs-identifier hs-var">suffs</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Maybe (Text, [Text])
forall a. [a] -&gt; Maybe (a, [a])
</span><span class="hs-identifier hs-var">uncons</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; [Text]
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Casing.html/Data.Text.Casing.html#fromSnake"><span class="hs-identifier hs-var">C.fromSnake</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687863395"><span class="hs-identifier hs-var">textName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-477"></span><span>        </span><span id="local-6989586621687863400"><span class="annot"><a href="#local-6989586621687863400"><span class="hs-identifier hs-var">prefName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.Name.html/Language.GraphQL.Draft.Syntax.Name.html#mkName"><span class="hs-identifier hs-type">G.mkName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863397"><span class="hs-identifier hs-type">pref</span></a></span><span>
</span><span id="line-478"></span><span>        </span><span id="local-6989586621687863401"><span class="annot"><a href="#local-6989586621687863401"><span class="hs-identifier hs-var">suffNames</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="hs-identifier hs-type">traverse</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.Name.html/Language.GraphQL.Draft.Syntax.Name.html#mkNameSuffix"><span class="hs-identifier hs-type">G.mkNameSuffix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863398"><span class="hs-identifier hs-type">suffs</span></a></span><span>
</span><span id="line-479"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Casing.html/Data.Text.Casing.html#fromAutogeneratedTuple"><span class="hs-identifier hs-type">C.fromAutogeneratedTuple</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621687863400"><span class="hs-identifier hs-type">prefName</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="#local-6989586621687863401"><span class="hs-identifier hs-type">suffNames</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-480"></span><span>  </span><span class="annot"><span class="annottext">Maybe GQLNameIdentifier
</span><a href="#local-6989586621687863396"><span class="hs-identifier hs-var">gqlIdents</span></a></span><span>
</span><span id="line-481"></span><span>    </span><span class="annot"><span class="annottext">Maybe GQLNameIdentifier
-&gt; m GQLNameIdentifier -&gt; m GQLNameIdentifier
forall (m :: * -&gt; *) a. Applicative m =&gt; Maybe a -&gt; m a -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#onNothing"><span class="hs-operator hs-var">`onNothing`</span></a></span><span> </span><span class="annot"><span class="annottext">Code -&gt; Text -&gt; m GQLNameIdentifier
forall (m :: * -&gt; *) a. QErrM m =&gt; Code -&gt; Text -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#throw400"><span class="hs-identifier hs-var">throw400</span></a></span><span>
</span><span id="line-482"></span><span>      </span><span class="annot"><span class="annottext">Code
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#ValidationFailed"><span class="hs-identifier hs-var">ValidationFailed</span></a></span><span>
</span><span id="line-483"></span><span>      </span><span class="hs-special">(</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;cannot include &quot;</span></span><span>
</span><span id="line-484"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687863395"><span class="hs-identifier hs-var">textName</span></a></span><span>
</span><span id="line-485"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall t. ToTxt t =&gt; t -&gt; Text -&gt; Text
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Extended.html/Data.Text.Extended.html#%3C%3C%3E"><span class="hs-operator hs-var">&lt;&lt;&gt;</span></a></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; in the GraphQL schema because &quot;</span></span><span>
</span><span id="line-486"></span><span>          </span><span class="annot"><span class="annottext">Text -&gt; Text -&gt; Text
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot; it is not a valid GraphQL identifier&quot;</span></span><span>
</span><span id="line-487"></span><span>      </span><span class="hs-special">)</span><span>
</span><span id="line-488"></span><span>
</span><span id="line-489"></span><span id="local-6989586621687862403"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#partialSQLExpToUnpreparedValue"><span class="hs-identifier hs-type">partialSQLExpToUnpreparedValue</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.BoolExp.html#PartialSQLExp"><span class="hs-identifier hs-type">PartialSQLExp</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862403"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.IR.Value.html#UnpreparedValue"><span class="hs-identifier hs-type">IR.UnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862403"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-490"></span><span id="partialSQLExpToUnpreparedValue"><span class="annot"><span class="annottext">partialSQLExpToUnpreparedValue :: forall (b :: BackendType). PartialSQLExp b -&gt; UnpreparedValue b
</span><a href="Hasura.GraphQL.Schema.Common.html#partialSQLExpToUnpreparedValue"><span class="hs-identifier hs-var hs-var">partialSQLExpToUnpreparedValue</span></a></span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.BoolExp.html#PSESessVar"><span class="hs-identifier hs-type">PSESessVar</span></a></span><span> </span><span id="local-6989586621687863406"><span class="annot"><span class="annottext">SessionVarType b
</span><a href="#local-6989586621687863406"><span class="hs-identifier hs-var">pftype</span></a></span></span><span> </span><span id="local-6989586621687863407"><span class="annot"><span class="annottext">SessionVariable
</span><a href="#local-6989586621687863407"><span class="hs-identifier hs-var">var</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SessionVarType b -&gt; SessionVariable -&gt; UnpreparedValue b
forall (b :: BackendType).
SessionVarType b -&gt; SessionVariable -&gt; UnpreparedValue b
</span><a href="Hasura.RQL.IR.Value.html#UVSessionVar"><span class="hs-identifier hs-var">IR.UVSessionVar</span></a></span><span> </span><span class="annot"><span class="annottext">SessionVarType b
</span><a href="#local-6989586621687863406"><span class="hs-identifier hs-var">pftype</span></a></span><span> </span><span class="annot"><span class="annottext">SessionVariable
</span><a href="#local-6989586621687863407"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-491"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#partialSQLExpToUnpreparedValue"><span class="hs-identifier hs-var">partialSQLExpToUnpreparedValue</span></a></span><span> </span><span class="annot"><span class="annottext">PartialSQLExp b
</span><a href="Hasura.RQL.IR.BoolExp.html#PSESession"><span class="hs-identifier hs-var">PSESession</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">UnpreparedValue b
forall (b :: BackendType). UnpreparedValue b
</span><a href="Hasura.RQL.IR.Value.html#UVSession"><span class="hs-identifier hs-var">IR.UVSession</span></a></span><span>
</span><span id="line-492"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#partialSQLExpToUnpreparedValue"><span class="hs-identifier hs-var">partialSQLExpToUnpreparedValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.BoolExp.html#PSESQLExp"><span class="hs-identifier hs-type">PSESQLExp</span></a></span><span> </span><span id="local-6989586621687863412"><span class="annot"><span class="annottext">SQLExpression b
</span><a href="#local-6989586621687863412"><span class="hs-identifier hs-var">sqlExp</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SQLExpression b -&gt; UnpreparedValue b
forall (b :: BackendType). SQLExpression b -&gt; UnpreparedValue b
</span><a href="Hasura.RQL.IR.Value.html#UVLiteral"><span class="hs-identifier hs-var">IR.UVLiteral</span></a></span><span> </span><span class="annot"><span class="annottext">SQLExpression b
</span><a href="#local-6989586621687863412"><span class="hs-identifier hs-var">sqlExp</span></a></span><span>
</span><span id="line-493"></span><span>
</span><span id="line-494"></span><span id="local-6989586621687862410"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#getRedactionExprForColumn"><span class="hs-identifier hs-type">getRedactionExprForColumn</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#Backend"><span class="hs-identifier hs-type">Backend</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862410"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hasura.Table.Cache.html#SelPermInfo"><span class="hs-identifier hs-type">SelPermInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862410"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#Column"><span class="hs-identifier hs-type">Column</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862410"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.BoolExp.html#AnnRedactionExpUnpreparedValue"><span class="hs-identifier hs-type">IR.AnnRedactionExpUnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862410"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-495"></span><span id="getRedactionExprForColumn"><span class="annot"><span class="annottext">getRedactionExprForColumn :: forall (b :: BackendType).
Backend b =&gt;
SelPermInfo b
-&gt; Column b -&gt; Maybe (AnnRedactionExpUnpreparedValue b)
</span><a href="Hasura.GraphQL.Schema.Common.html#getRedactionExprForColumn"><span class="hs-identifier hs-var hs-var">getRedactionExprForColumn</span></a></span></span><span> </span><span id="local-6989586621687863425"><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621687863425"><span class="hs-identifier hs-var">selectPermissions</span></a></span></span><span> </span><span id="local-6989586621687863426"><span class="annot"><span class="annottext">Column b
</span><a href="#local-6989586621687863426"><span class="hs-identifier hs-var">columnName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-496"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687863427"><span class="annot"><span class="annottext">redactionExp :: Maybe (AnnRedactionExpPartialSQL b)
</span><a href="#local-6989586621687863427"><span class="hs-identifier hs-var hs-var">redactionExp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Column b
-&gt; HashMap (Column b) (AnnRedactionExpPartialSQL b)
-&gt; Maybe (AnnRedactionExpPartialSQL b)
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/unordered-containers-0.2.20-6d56f9b3abc6011ddb6e237c415126423ab5ceb5c078221bba2ff80dbe921009/share/doc/html/src/Data.HashMap.Internal.html/Data.HashMap.Internal.html#lookup"><span class="hs-identifier hs-var">HashMap.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">Column b
</span><a href="#local-6989586621687863426"><span class="hs-identifier hs-var">columnName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SelPermInfo b -&gt; HashMap (Column b) (AnnRedactionExpPartialSQL b)
forall (b :: BackendType).
SelPermInfo b -&gt; HashMap (Column b) (AnnRedactionExpPartialSQL b)
</span><a href="Hasura.Table.Cache.html#spiCols"><span class="hs-identifier hs-var">spiCols</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621687863425"><span class="hs-identifier hs-var">selectPermissions</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-497"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(PartialSQLExp b -&gt; UnpreparedValue b)
-&gt; AnnRedactionExpPartialSQL b
-&gt; AnnRedactionExp b (UnpreparedValue b)
forall a b. (a -&gt; b) -&gt; AnnRedactionExp b a -&gt; AnnRedactionExp b b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">PartialSQLExp b -&gt; UnpreparedValue b
forall (b :: BackendType). PartialSQLExp b -&gt; UnpreparedValue b
</span><a href="Hasura.GraphQL.Schema.Common.html#partialSQLExpToUnpreparedValue"><span class="hs-identifier hs-var">partialSQLExpToUnpreparedValue</span></a></span><span> </span><span class="annot"><span class="annottext">(AnnRedactionExpPartialSQL b
 -&gt; AnnRedactionExp b (UnpreparedValue b))
-&gt; Maybe (AnnRedactionExpPartialSQL b)
-&gt; Maybe (AnnRedactionExp b (UnpreparedValue b))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (AnnRedactionExpPartialSQL b)
</span><a href="#local-6989586621687863427"><span class="hs-identifier hs-var">redactionExp</span></a></span><span>
</span><span id="line-498"></span><span>
</span><span id="line-499"></span><span id="local-6989586621687862419"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#getRedactionExprForComputedField"><span class="hs-identifier hs-type">getRedactionExprForComputedField</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#Backend"><span class="hs-identifier hs-type">Backend</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862419"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hasura.Table.Cache.html#SelPermInfo"><span class="hs-identifier hs-type">SelPermInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862419"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.ComputedField.Name.html#ComputedFieldName"><span class="hs-identifier hs-type">ComputedFieldName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.BoolExp.html#AnnRedactionExpUnpreparedValue"><span class="hs-identifier hs-type">IR.AnnRedactionExpUnpreparedValue</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862419"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-500"></span><span id="getRedactionExprForComputedField"><span class="annot"><span class="annottext">getRedactionExprForComputedField :: forall (b :: BackendType).
Backend b =&gt;
SelPermInfo b
-&gt; ComputedFieldName -&gt; Maybe (AnnRedactionExpUnpreparedValue b)
</span><a href="Hasura.GraphQL.Schema.Common.html#getRedactionExprForComputedField"><span class="hs-identifier hs-var hs-var">getRedactionExprForComputedField</span></a></span></span><span> </span><span id="local-6989586621687863436"><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621687863436"><span class="hs-identifier hs-var">selectPermissions</span></a></span></span><span> </span><span id="local-6989586621687863437"><span class="annot"><span class="annottext">ComputedFieldName
</span><a href="#local-6989586621687863437"><span class="hs-identifier hs-var">cfName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-501"></span><span>  </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621687863438"><span class="annot"><span class="annottext">redactionExp :: Maybe (AnnRedactionExpPartialSQL b)
</span><a href="#local-6989586621687863438"><span class="hs-identifier hs-var hs-var">redactionExp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ComputedFieldName
-&gt; HashMap ComputedFieldName (AnnRedactionExpPartialSQL b)
-&gt; Maybe (AnnRedactionExpPartialSQL b)
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/unordered-containers-0.2.20-6d56f9b3abc6011ddb6e237c415126423ab5ceb5c078221bba2ff80dbe921009/share/doc/html/src/Data.HashMap.Internal.html/Data.HashMap.Internal.html#lookup"><span class="hs-identifier hs-var">HashMap.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">ComputedFieldName
</span><a href="#local-6989586621687863437"><span class="hs-identifier hs-var">cfName</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">SelPermInfo b
-&gt; HashMap ComputedFieldName (AnnRedactionExpPartialSQL b)
forall (b :: BackendType).
SelPermInfo b
-&gt; HashMap ComputedFieldName (AnnRedactionExpPartialSQL b)
</span><a href="Hasura.Table.Cache.html#spiComputedFields"><span class="hs-identifier hs-var">spiComputedFields</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621687863436"><span class="hs-identifier hs-var">selectPermissions</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-502"></span><span>   </span><span class="hs-keyword">in</span><span> </span><span class="annot"><span class="annottext">(PartialSQLExp b -&gt; UnpreparedValue b)
-&gt; AnnRedactionExpPartialSQL b
-&gt; AnnRedactionExp b (UnpreparedValue b)
forall a b. (a -&gt; b) -&gt; AnnRedactionExp b a -&gt; AnnRedactionExp b b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">PartialSQLExp b -&gt; UnpreparedValue b
forall (b :: BackendType). PartialSQLExp b -&gt; UnpreparedValue b
</span><a href="Hasura.GraphQL.Schema.Common.html#partialSQLExpToUnpreparedValue"><span class="hs-identifier hs-var">partialSQLExpToUnpreparedValue</span></a></span><span> </span><span class="annot"><span class="annottext">(AnnRedactionExpPartialSQL b
 -&gt; AnnRedactionExp b (UnpreparedValue b))
-&gt; Maybe (AnnRedactionExpPartialSQL b)
-&gt; Maybe (AnnRedactionExp b (UnpreparedValue b))
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe (AnnRedactionExpPartialSQL b)
</span><a href="#local-6989586621687863438"><span class="hs-identifier hs-var">redactionExp</span></a></span><span>
</span><span id="line-503"></span><span>
</span><span id="line-504"></span><span id="local-6989586621687862423"><span id="local-6989586621687862424"><span id="local-6989586621687862426"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#mapField"><span class="hs-identifier hs-type">mapField</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-505"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621687862423"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-506"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#InputFieldsParser"><span class="hs-identifier hs-type">P.InputFieldsParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862423"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621687862424"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-507"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621687862424"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621687862426"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-508"></span><span>  </span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#InputFieldsParser"><span class="hs-identifier hs-type">P.InputFieldsParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862423"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="#local-6989586621687862426"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span></span></span></span><span>
</span><span id="line-509"></span><span id="mapField"><span class="annot"><span class="annottext">mapField :: forall (m :: * -&gt; *) a b.
Functor m =&gt;
InputFieldsParser m (Maybe a)
-&gt; (a -&gt; b) -&gt; InputFieldsParser m (Maybe b)
</span><a href="Hasura.GraphQL.Schema.Common.html#mapField"><span class="hs-identifier hs-var hs-var">mapField</span></a></span></span><span> </span><span id="local-6989586621687863444"><span class="annot"><span class="annottext">InputFieldsParser m (Maybe a)
</span><a href="#local-6989586621687863444"><span class="hs-identifier hs-var">fp</span></a></span></span><span> </span><span id="local-6989586621687863445"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621687863445"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe a -&gt; Maybe b)
-&gt; InputFieldsParser m (Maybe a)
-&gt; InputFieldsParser MetadataObjId m (Maybe b)
forall a b.
(a -&gt; b)
-&gt; InputFieldsParser MetadataObjId m a
-&gt; InputFieldsParser MetadataObjId m b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621687863445"><span class="hs-identifier hs-var">f</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">InputFieldsParser m (Maybe a)
</span><a href="#local-6989586621687863444"><span class="hs-identifier hs-var">fp</span></a></span><span>
</span><span id="line-510"></span><span>
</span><span id="line-511"></span><span id="local-6989586621687862434"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#parsedSelectionsToFields"><span class="hs-identifier hs-type">parsedSelectionsToFields</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-512"></span><span>  </span><span class="annot"><span class="hs-comment">-- | how to handle @__typename@ fields</span></span><span>
</span><span id="line-513"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621687862434"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-514"></span><span>  </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/insert-ordered-containers-0.2.5.3-dcb71999c8104475fd299533bb40a6c15ee8a9411f3a03b68aa99a14a4143c19/share/doc/html/src/Data.HashMap.Strict.InsOrd.html/Data.HashMap.Strict.InsOrd.html#InsOrdHashMap"><span class="hs-identifier hs-type">InsOrdHashMap.InsOrdHashMap</span></a></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.Name.html/Language.GraphQL.Draft.Syntax.Name.html#Name"><span class="hs-identifier hs-type">G.Name</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/schema-parsers-1.0.0/opt/doc/html/schema-parsers/src/Hasura.GraphQL.Parser.Internal.Parser.html/Hasura.GraphQL.Parser.Internal.Parser.html#ParsedSelection"><span class="hs-identifier hs-type">P.ParsedSelection</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862434"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-515"></span><span>  </span><span class="annot"><a href="Hasura.RQL.Types.Common.html#Fields"><span class="hs-identifier hs-type">Fields</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862434"><span class="hs-identifier hs-type">a</span></a></span></span><span>
</span><span id="line-516"></span><span id="parsedSelectionsToFields"><span class="annot"><span class="annottext">parsedSelectionsToFields :: forall a.
(Text -&gt; a) -&gt; InsOrdHashMap Name (ParsedSelection a) -&gt; Fields a
</span><a href="Hasura.GraphQL.Schema.Common.html#parsedSelectionsToFields"><span class="hs-identifier hs-var hs-var">parsedSelectionsToFields</span></a></span></span><span> </span><span id="local-6989586621687863450"><span class="annot"><span class="annottext">Text -&gt; a
</span><a href="#local-6989586621687863450"><span class="hs-identifier hs-var">mkTypenameFromText</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-517"></span><span>  </span><span class="annot"><span class="annottext">InsOrdHashMap Name (ParsedSelection a)
-&gt; [(Name, ParsedSelection a)]
forall k v. InsOrdHashMap k v -&gt; [(k, v)]
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/insert-ordered-containers-0.2.5.3-dcb71999c8104475fd299533bb40a6c15ee8a9411f3a03b68aa99a14a4143c19/share/doc/html/src/Data.HashMap.Strict.InsOrd.html/Data.HashMap.Strict.InsOrd.html#toList"><span class="hs-identifier hs-var">InsOrdHashMap.toList</span></a></span><span>
</span><span id="line-518"></span><span>    </span><span class="annot"><span class="annottext">(InsOrdHashMap Name (ParsedSelection a)
 -&gt; [(Name, ParsedSelection a)])
-&gt; ([(Name, ParsedSelection a)] -&gt; Fields a)
-&gt; InsOrdHashMap Name (ParsedSelection a)
-&gt; Fields a
forall {k} (cat :: k -&gt; k -&gt; *) (a :: k) (b :: k) (c :: k).
Category cat =&gt;
cat a b -&gt; cat b c -&gt; cat a c
</span><span class="hs-operator hs-var">&gt;&gt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">((Name, ParsedSelection a) -&gt; (FieldName, a))
-&gt; [(Name, ParsedSelection a)] -&gt; Fields a
forall a b. (a -&gt; b) -&gt; [a] -&gt; [b]
</span><span class="hs-identifier hs-var">map</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; FieldName
</span><a href="Hasura.RQL.Types.Common.html#FieldName"><span class="hs-identifier hs-var">FieldName</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; FieldName) -&gt; (Name -&gt; Text) -&gt; Name -&gt; FieldName
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.Name.html/Language.GraphQL.Draft.Syntax.Name.html#unName"><span class="hs-identifier hs-var">G.unName</span></a></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; FieldName)
-&gt; (ParsedSelection a -&gt; a)
-&gt; (Name, ParsedSelection a)
-&gt; (FieldName, a)
forall b c b' c'. (b -&gt; c) -&gt; (b' -&gt; c') -&gt; (b, b') -&gt; (c, c')
forall (a :: * -&gt; * -&gt; *) b c b' c'.
Arrow a =&gt;
a b c -&gt; a b' c' -&gt; a (b, b') (c, c')
</span><span class="hs-operator hs-var">***</span></span><span> </span><span class="annot"><span class="annottext">(Name -&gt; a) -&gt; ParsedSelection a -&gt; a
forall a. (Name -&gt; a) -&gt; ParsedSelection a -&gt; a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/schema-parsers-1.0.0/opt/doc/html/schema-parsers/src/Hasura.GraphQL.Parser.Internal.Parser.html/Hasura.GraphQL.Parser.Internal.Parser.html#handleTypename"><span class="hs-identifier hs-var">P.handleTypename</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Text -&gt; a
</span><a href="#local-6989586621687863450"><span class="hs-identifier hs-var">mkTypenameFromText</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; a) -&gt; (Name -&gt; Text) -&gt; Name -&gt; a
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">Name -&gt; Text
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.Name.html/Language.GraphQL.Draft.Syntax.Name.html#unName"><span class="hs-identifier hs-var">G.unName</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-519"></span><span>
</span><span id="line-520"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#numericAggOperators"><span class="hs-identifier hs-type">numericAggOperators</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Casing.html/Data.Text.Casing.html#GQLNameIdentifier"><span class="hs-identifier hs-type">C.GQLNameIdentifier</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-521"></span><span id="numericAggOperators"><span class="annot"><span class="annottext">numericAggOperators :: [GQLNameIdentifier]
</span><a href="Hasura.GraphQL.Schema.Common.html#numericAggOperators"><span class="hs-identifier hs-var hs-var">numericAggOperators</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-522"></span><span>  </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Name -&gt; GQLNameIdentifier
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Casing.html/Data.Text.Casing.html#fromAutogeneratedName"><span class="hs-identifier hs-var">C.fromAutogeneratedName</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.Name.html/Language.GraphQL.Draft.Syntax.Name.html#litName"><span class="hs-identifier hs-type">G.litName</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;sum&quot;</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-523"></span><span>    </span><span class="annot"><span class="annottext">Name -&gt; GQLNameIdentifier
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Casing.html/Data.Text.Casing.html#fromAutogeneratedName"><span class="hs-identifier hs-var">C.fromAutogeneratedName</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.Name.html/Language.GraphQL.Draft.Syntax.Name.html#litName"><span class="hs-identifier hs-type">G.litName</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;avg&quot;</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-524"></span><span>    </span><span class="annot"><span class="annottext">Name -&gt; GQLNameIdentifier
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Casing.html/Data.Text.Casing.html#fromAutogeneratedName"><span class="hs-identifier hs-var">C.fromAutogeneratedName</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.Name.html/Language.GraphQL.Draft.Syntax.Name.html#litName"><span class="hs-identifier hs-type">G.litName</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;stddev&quot;</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-525"></span><span>    </span><span class="annot"><span class="annottext">(Name, [NameSuffix]) -&gt; GQLNameIdentifier
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Casing.html/Data.Text.Casing.html#fromAutogeneratedTuple"><span class="hs-identifier hs-var">C.fromAutogeneratedTuple</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.Name.html/Language.GraphQL.Draft.Syntax.Name.html#litGQLIdentifier"><span class="hs-identifier hs-type">G.litGQLIdentifier</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-string">&quot;stddev&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;samp&quot;</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-526"></span><span>    </span><span class="annot"><span class="annottext">(Name, [NameSuffix]) -&gt; GQLNameIdentifier
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Casing.html/Data.Text.Casing.html#fromAutogeneratedTuple"><span class="hs-identifier hs-var">C.fromAutogeneratedTuple</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.Name.html/Language.GraphQL.Draft.Syntax.Name.html#litGQLIdentifier"><span class="hs-identifier hs-type">G.litGQLIdentifier</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-string">&quot;stddev&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;pop&quot;</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-527"></span><span>    </span><span class="annot"><span class="annottext">Name -&gt; GQLNameIdentifier
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Casing.html/Data.Text.Casing.html#fromAutogeneratedName"><span class="hs-identifier hs-var">C.fromAutogeneratedName</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.Name.html/Language.GraphQL.Draft.Syntax.Name.html#litName"><span class="hs-identifier hs-type">G.litName</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;variance&quot;</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-528"></span><span>    </span><span class="annot"><span class="annottext">(Name, [NameSuffix]) -&gt; GQLNameIdentifier
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Casing.html/Data.Text.Casing.html#fromAutogeneratedTuple"><span class="hs-identifier hs-var">C.fromAutogeneratedTuple</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.Name.html/Language.GraphQL.Draft.Syntax.Name.html#litGQLIdentifier"><span class="hs-identifier hs-type">G.litGQLIdentifier</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-string">&quot;var&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;samp&quot;</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-529"></span><span>    </span><span class="annot"><span class="annottext">(Name, [NameSuffix]) -&gt; GQLNameIdentifier
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Casing.html/Data.Text.Casing.html#fromAutogeneratedTuple"><span class="hs-identifier hs-var">C.fromAutogeneratedTuple</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.Name.html/Language.GraphQL.Draft.Syntax.Name.html#litGQLIdentifier"><span class="hs-identifier hs-type">G.litGQLIdentifier</span></a></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="hs-string">&quot;var&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-string">&quot;pop&quot;</span></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-530"></span><span>  </span><span class="hs-special">]</span><span>
</span><span id="line-531"></span><span>
</span><span id="line-532"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#comparisonAggOperators"><span class="hs-identifier hs-type">comparisonAggOperators</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Casing.html/Data.Text.Casing.html#GQLNameIdentifier"><span class="hs-identifier hs-type">C.GQLNameIdentifier</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-533"></span><span id="comparisonAggOperators"><span class="annot"><span class="annottext">comparisonAggOperators :: [GQLNameIdentifier]
</span><a href="Hasura.GraphQL.Schema.Common.html#comparisonAggOperators"><span class="hs-identifier hs-var hs-var">comparisonAggOperators</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-534"></span><span>  </span><span class="hs-special">[</span><span> </span><span class="annot"><span class="annottext">Name -&gt; GQLNameIdentifier
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Casing.html/Data.Text.Casing.html#fromAutogeneratedName"><span class="hs-identifier hs-var">C.fromAutogeneratedName</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.Name.html/Language.GraphQL.Draft.Syntax.Name.html#litName"><span class="hs-identifier hs-type">G.litName</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;max&quot;</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-535"></span><span>    </span><span class="annot"><span class="annottext">Name -&gt; GQLNameIdentifier
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Casing.html/Data.Text.Casing.html#fromAutogeneratedName"><span class="hs-identifier hs-var">C.fromAutogeneratedName</span></a></span><span> </span><span class="hs-special">$$</span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.Name.html/Language.GraphQL.Draft.Syntax.Name.html#litName"><span class="hs-identifier hs-type">G.litName</span></a></span><span> </span><span class="annot"><span class="hs-string">&quot;min&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-536"></span><span>  </span><span class="hs-special">]</span><span>
</span><span id="line-537"></span><span>
</span><span id="line-538"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#mkDescriptionWith"><span class="hs-identifier hs-type">mkDescriptionWith</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.Backends.Postgres.SQL.Types.html#PGDescription"><span class="hs-identifier hs-type">Postgres.PGDescription</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Text</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.html/Language.GraphQL.Draft.Syntax.html#Description"><span class="hs-identifier hs-type">G.Description</span></a></span><span>
</span><span id="line-539"></span><span id="mkDescriptionWith"><span class="annot"><span class="annottext">mkDescriptionWith :: Maybe PGDescription -&gt; Text -&gt; Description
</span><a href="Hasura.GraphQL.Schema.Common.html#mkDescriptionWith"><span class="hs-identifier hs-var hs-var">mkDescriptionWith</span></a></span></span><span> </span><span id="local-6989586621687863463"><span class="annot"><span class="annottext">Maybe PGDescription
</span><a href="#local-6989586621687863463"><span class="hs-identifier hs-var">descM</span></a></span></span><span> </span><span id="local-6989586621687863464"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687863464"><span class="hs-identifier hs-var">defaultTxt</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Text -&gt; Description
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.html/Language.GraphQL.Draft.Syntax.html#Description"><span class="hs-identifier hs-var">G.Description</span></a></span><span> </span><span class="annot"><span class="annottext">(Text -&gt; Description) -&gt; Text -&gt; Description
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe PGDescription
</span><a href="#local-6989586621687863463"><span class="hs-identifier hs-var">descM</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-540"></span><span>  </span><span class="annot"><span class="annottext">Maybe PGDescription
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687863464"><span class="hs-identifier hs-var">defaultTxt</span></a></span><span>
</span><span id="line-541"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.Backends.Postgres.SQL.Types.html#PGDescription"><span class="hs-identifier hs-type">Postgres.PGDescription</span></a></span><span> </span><span id="local-6989586621687863467"><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687863467"><span class="hs-identifier hs-var">descTxt</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">[Text] -&gt; Text
</span><span class="hs-identifier hs-var">T.unlines</span></span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687863467"><span class="hs-identifier hs-var">descTxt</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><span class="hs-string">&quot;\n&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Text
</span><a href="#local-6989586621687863464"><span class="hs-identifier hs-var">defaultTxt</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-542"></span><span>
</span><span id="line-543"></span><span class="hs-comment">-- TODO why do we do these validations at this point? What does it mean to track</span><span>
</span><span id="line-544"></span><span class="hs-comment">--      a function but not add it to the schema...?</span><span>
</span><span id="line-545"></span><span class="hs-comment">--      Auke:</span><span>
</span><span id="line-546"></span><span class="hs-comment">--        I believe the intention is simply to allow the console to do postgres data management</span><span>
</span><span id="line-547"></span><span class="hs-comment">--      Karthikeyan: Yes, this is correct. We allowed this pre PDV but somehow</span><span>
</span><span id="line-548"></span><span class="hs-comment">--        got removed in PDV. OTOH, I&#8217;m not sure how prevalent this feature</span><span>
</span><span id="line-549"></span><span class="hs-comment">--        actually is</span><span>
</span><span id="line-550"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#takeValidTables"><span class="hs-identifier hs-type">takeValidTables</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621687862457"><span class="annot"><a href="#local-6989586621687862457"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#Backend"><span class="hs-identifier hs-type">Backend</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862457"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hasura.Table.Cache.html#TableCache"><span class="hs-identifier hs-type">TableCache</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862457"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.Table.Cache.html#TableCache"><span class="hs-identifier hs-type">TableCache</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862457"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-551"></span><span id="takeValidTables"><span class="annot"><span class="annottext">takeValidTables :: forall (b :: BackendType).
Backend b =&gt;
TableCache b -&gt; TableCache b
</span><a href="Hasura.GraphQL.Schema.Common.html#takeValidTables"><span class="hs-identifier hs-var hs-var">takeValidTables</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(TableName b -&gt; TableInfo b -&gt; Bool)
-&gt; HashMap (TableName b) (TableInfo b)
-&gt; HashMap (TableName b) (TableInfo b)
forall k v. (k -&gt; v -&gt; Bool) -&gt; HashMap k v -&gt; HashMap k v
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/unordered-containers-0.2.20-6d56f9b3abc6011ddb6e237c415126423ab5ceb5c078221bba2ff80dbe921009/share/doc/html/src/Data.HashMap.Internal.html/Data.HashMap.Internal.html#filterWithKey"><span class="hs-identifier hs-var">HashMap.filterWithKey</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b -&gt; TableInfo b -&gt; Bool
</span><a href="#local-6989586621687863472"><span class="hs-identifier hs-var">graphQLTableFilter</span></a></span><span>
</span><span id="line-552"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-553"></span><span>    </span><span id="local-6989586621687863472"><span class="annot"><span class="annottext">graphQLTableFilter :: TableName b -&gt; TableInfo b -&gt; Bool
</span><a href="#local-6989586621687863472"><span class="hs-identifier hs-var hs-var">graphQLTableFilter</span></a></span></span><span> </span><span id="local-6989586621687863473"><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621687863473"><span class="hs-identifier hs-var">tableName</span></a></span></span><span> </span><span id="local-6989586621687863474"><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621687863474"><span class="hs-identifier hs-var">tableInfo</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-554"></span><span>      </span><span class="hs-comment">-- either the table name should be GraphQL compliant</span><span>
</span><span id="line-555"></span><span>      </span><span class="hs-comment">-- or it should have a GraphQL custom name set with it</span><span>
</span><span id="line-556"></span><span>      </span><span class="annot"><span class="annottext">Either QErr Name -&gt; Bool
forall a b. Either a b -&gt; Bool
</span><span class="hs-identifier hs-var">isRight</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">forall (b :: BackendType).
Backend b =&gt;
TableName b -&gt; Either QErr Name
</span><a href="Hasura.RQL.Types.Backend.html#tableGraphQLName"><span class="hs-identifier hs-var">tableGraphQLName</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621687862457"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621687863473"><span class="hs-identifier hs-var">tableName</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-557"></span><span>        </span><span class="annot"><span class="annottext">Bool -&gt; Bool -&gt; Bool
</span><span class="hs-operator hs-var">||</span></span><span> </span><span class="annot"><span class="annottext">Maybe Name -&gt; Bool
forall a. Maybe a -&gt; Bool
</span><span class="hs-identifier hs-var">isJust</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TableConfig b -&gt; Maybe Name
forall (b :: BackendType). TableConfig b -&gt; Maybe Name
</span><a href="Hasura.Table.Cache.html#_tcCustomName"><span class="hs-identifier hs-var">_tcCustomName</span></a></span><span> </span><span class="annot"><span class="annottext">(TableConfig b -&gt; Maybe Name) -&gt; TableConfig b -&gt; Maybe Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableCoreInfoG b (FieldInfo b) (ColumnInfo b) -&gt; TableConfig b
forall (b :: BackendType) field primaryKeyColumn.
TableCoreInfoG b field primaryKeyColumn -&gt; TableConfig b
</span><a href="Hasura.Table.Cache.html#_tciCustomConfig"><span class="hs-identifier hs-var">_tciCustomConfig</span></a></span><span> </span><span class="annot"><span class="annottext">(TableCoreInfoG b (FieldInfo b) (ColumnInfo b) -&gt; TableConfig b)
-&gt; TableCoreInfoG b (FieldInfo b) (ColumnInfo b) -&gt; TableConfig b
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">TableInfo b -&gt; TableCoreInfoG b (FieldInfo b) (ColumnInfo b)
forall (b :: BackendType). TableInfo b -&gt; TableCoreInfo b
</span><a href="Hasura.Table.Cache.html#_tiCoreInfo"><span class="hs-identifier hs-var">_tiCoreInfo</span></a></span><span> </span><span class="annot"><span class="annottext">TableInfo b
</span><a href="#local-6989586621687863474"><span class="hs-identifier hs-var">tableInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-558"></span><span>
</span><span id="line-559"></span><span class="hs-comment">-- TODO and what about graphql-compliant function names here too?</span><span>
</span><span id="line-560"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#takeValidFunctions"><span class="hs-identifier hs-type">takeValidFunctions</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621687862474"><span class="annot"><a href="#local-6989586621687862474"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Hasura.Function.Cache.html#FunctionCache"><span class="hs-identifier hs-type">FunctionCache</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862474"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.Function.Cache.html#FunctionCache"><span class="hs-identifier hs-type">FunctionCache</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862474"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-561"></span><span id="takeValidFunctions"><span class="annot"><span class="annottext">takeValidFunctions :: forall (b :: BackendType). FunctionCache b -&gt; FunctionCache b
</span><a href="Hasura.GraphQL.Schema.Common.html#takeValidFunctions"><span class="hs-identifier hs-var hs-var">takeValidFunctions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(FunctionInfo b -&gt; Bool)
-&gt; HashMap (FunctionName b) (FunctionInfo b)
-&gt; HashMap (FunctionName b) (FunctionInfo b)
forall v k. (v -&gt; Bool) -&gt; HashMap k v -&gt; HashMap k v
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/unordered-containers-0.2.20-6d56f9b3abc6011ddb6e237c415126423ab5ceb5c078221bba2ff80dbe921009/share/doc/html/src/Data.HashMap.Internal.html/Data.HashMap.Internal.html#filter"><span class="hs-identifier hs-var">HashMap.filter</span></a></span><span> </span><span class="annot"><span class="annottext">FunctionInfo b -&gt; Bool
forall {b :: BackendType}. FunctionInfo b -&gt; Bool
</span><a href="#local-6989586621687863482"><span class="hs-identifier hs-var">functionFilter</span></a></span><span>
</span><span id="line-562"></span><span>  </span><span class="hs-keyword">where</span><span>
</span><span id="line-563"></span><span>    </span><span id="local-6989586621687863482"><span class="annot"><span class="annottext">functionFilter :: FunctionInfo b -&gt; Bool
</span><a href="#local-6989586621687863482"><span class="hs-identifier hs-var hs-var">functionFilter</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Bool -&gt; Bool
</span><span class="hs-identifier hs-var">not</span></span><span> </span><span class="annot"><span class="annottext">(Bool -&gt; Bool)
-&gt; (FunctionInfo b -&gt; Bool) -&gt; FunctionInfo b -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">SystemDefined -&gt; Bool
</span><a href="Hasura.RQL.Types.Common.html#isSystemDefined"><span class="hs-identifier hs-var">isSystemDefined</span></a></span><span> </span><span class="annot"><span class="annottext">(SystemDefined -&gt; Bool)
-&gt; (FunctionInfo b -&gt; SystemDefined) -&gt; FunctionInfo b -&gt; Bool
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">FunctionInfo b -&gt; SystemDefined
forall (b :: BackendType). FunctionInfo b -&gt; SystemDefined
</span><a href="Hasura.Function.Cache.html#_fiSystemDefined"><span class="hs-identifier hs-var">_fiSystemDefined</span></a></span><span>
</span><span id="line-564"></span><span>
</span><span id="line-565"></span><span class="annot"><span class="hs-comment">-- | @TODO: Currently we do no validation on native queries in schema. Should we?</span></span><span>
</span><span id="line-566"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#takeValidNativeQueries"><span class="hs-identifier hs-type">takeValidNativeQueries</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621687862483"><span class="annot"><a href="#local-6989586621687862483"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Hasura.NativeQuery.Cache.html#NativeQueryCache"><span class="hs-identifier hs-type">NativeQueryCache</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862483"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.NativeQuery.Cache.html#NativeQueryCache"><span class="hs-identifier hs-type">NativeQueryCache</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862483"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-567"></span><span id="takeValidNativeQueries"><span class="annot"><span class="annottext">takeValidNativeQueries :: forall (b :: BackendType). NativeQueryCache b -&gt; NativeQueryCache b
</span><a href="Hasura.GraphQL.Schema.Common.html#takeValidNativeQueries"><span class="hs-identifier hs-var hs-var">takeValidNativeQueries</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">NativeQueryCache b -&gt; NativeQueryCache b
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-568"></span><span>
</span><span id="line-569"></span><span class="annot"><span class="hs-comment">-- | @TODO: Currently we do no validation on stored procedures in schema. Should we?</span></span><span>
</span><span id="line-570"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#takeValidStoredProcedures"><span class="hs-identifier hs-type">takeValidStoredProcedures</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621687862486"><span class="annot"><a href="#local-6989586621687862486"><span class="hs-identifier hs-type">b</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="annot"><a href="Hasura.StoredProcedure.Cache.html#StoredProcedureCache"><span class="hs-identifier hs-type">StoredProcedureCache</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862486"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.StoredProcedure.Cache.html#StoredProcedureCache"><span class="hs-identifier hs-type">StoredProcedureCache</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862486"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-571"></span><span id="takeValidStoredProcedures"><span class="annot"><span class="annottext">takeValidStoredProcedures :: forall (b :: BackendType).
StoredProcedureCache b -&gt; StoredProcedureCache b
</span><a href="Hasura.GraphQL.Schema.Common.html#takeValidStoredProcedures"><span class="hs-identifier hs-var hs-var">takeValidStoredProcedures</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">HashMap (FunctionName b) (StoredProcedureInfo b)
-&gt; HashMap (FunctionName b) (StoredProcedureInfo b)
forall a. a -&gt; a
</span><span class="hs-identifier hs-var">id</span></span><span>
</span><span id="line-572"></span><span>
</span><span id="line-573"></span><span class="hs-comment">-- root field builder helpers</span><span>
</span><span id="line-574"></span><span>
</span><span id="line-575"></span><span id="local-6989586621687862489"><span id="local-6989586621687862490"><span id="local-6989586621687862491"><span id="local-6989586621687862492"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#requiredFieldParser"><span class="hs-identifier hs-type">requiredFieldParser</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-576"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621687862489"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621687862490"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-577"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621687862491"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621687862492"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-578"></span><span>  </span><span class="annot"><a href="#local-6989586621687862490"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#FieldParser"><span class="hs-identifier hs-type">P.FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862489"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862491"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-579"></span><span>  </span><span class="annot"><a href="#local-6989586621687862490"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#FieldParser"><span class="hs-identifier hs-type">P.FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862489"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862492"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-580"></span><span id="requiredFieldParser"><span class="annot"><span class="annottext">requiredFieldParser :: forall (n :: * -&gt; *) (m :: * -&gt; *) a b.
(Functor n, Functor m) =&gt;
(a -&gt; b) -&gt; m (FieldParser n a) -&gt; m (Maybe (FieldParser n b))
</span><a href="Hasura.GraphQL.Schema.Common.html#requiredFieldParser"><span class="hs-identifier hs-var hs-var">requiredFieldParser</span></a></span></span><span> </span><span id="local-6989586621687863492"><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621687863492"><span class="hs-identifier hs-var">f</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(FieldParser n a -&gt; Maybe (FieldParser n b))
-&gt; m (FieldParser n a) -&gt; m (Maybe (FieldParser n b))
forall a b. (a -&gt; b) -&gt; m a -&gt; m b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">((FieldParser n a -&gt; Maybe (FieldParser n b))
 -&gt; m (FieldParser n a) -&gt; m (Maybe (FieldParser n b)))
-&gt; (FieldParser n a -&gt; Maybe (FieldParser n b))
-&gt; m (FieldParser n a)
-&gt; m (Maybe (FieldParser n b))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">FieldParser n b -&gt; Maybe (FieldParser n b)
forall a. a -&gt; Maybe a
</span><span class="hs-identifier hs-var">Just</span></span><span> </span><span class="annot"><span class="annottext">(FieldParser n b -&gt; Maybe (FieldParser n b))
-&gt; (FieldParser n a -&gt; FieldParser n b)
-&gt; FieldParser n a
-&gt; Maybe (FieldParser n b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; FieldParser n a -&gt; FieldParser n b
forall a b.
(a -&gt; b)
-&gt; FieldParser MetadataObjId n a -&gt; FieldParser MetadataObjId n b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">a -&gt; b
</span><a href="#local-6989586621687863492"><span class="hs-identifier hs-var">f</span></a></span><span>
</span><span id="line-581"></span><span>
</span><span id="line-582"></span><span id="local-6989586621687862500"><span id="local-6989586621687862501"><span id="local-6989586621687862502"><span id="local-6989586621687862503"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#optionalFieldParser"><span class="hs-identifier hs-type">optionalFieldParser</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-583"></span><span>  </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621687862500"><span class="hs-identifier hs-type">n</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Functor</span></span><span> </span><span class="annot"><a href="#local-6989586621687862501"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-584"></span><span>  </span><span class="hs-special">(</span><span class="annot"><a href="#local-6989586621687862502"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="#local-6989586621687862503"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-585"></span><span>  </span><span class="annot"><a href="#local-6989586621687862501"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#FieldParser"><span class="hs-identifier hs-type">P.FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862500"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862502"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-586"></span><span>  </span><span class="annot"><a href="#local-6989586621687862501"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#FieldParser"><span class="hs-identifier hs-type">P.FieldParser</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862500"><span class="hs-identifier hs-type">n</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862503"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span class="hs-special">)</span></span></span></span></span><span>
</span><span id="line-587"></span><span id="optionalFieldParser"><span class="annot"><span class="annottext">optionalFieldParser :: forall (n :: * -&gt; *) (m :: * -&gt; *) a b.
(Functor n, Functor m) =&gt;
(a -&gt; b)
-&gt; m (Maybe (FieldParser n a)) -&gt; m (Maybe (FieldParser n b))
</span><a href="Hasura.GraphQL.Schema.Common.html#optionalFieldParser"><span class="hs-identifier hs-var hs-var">optionalFieldParser</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(Maybe (FieldParser n a) -&gt; Maybe (FieldParser n b))
-&gt; m (Maybe (FieldParser n a)) -&gt; m (Maybe (FieldParser n b))
forall a b. (a -&gt; b) -&gt; m a -&gt; m b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">((Maybe (FieldParser n a) -&gt; Maybe (FieldParser n b))
 -&gt; m (Maybe (FieldParser n a)) -&gt; m (Maybe (FieldParser n b)))
-&gt; ((a -&gt; b) -&gt; Maybe (FieldParser n a) -&gt; Maybe (FieldParser n b))
-&gt; (a -&gt; b)
-&gt; m (Maybe (FieldParser n a))
-&gt; m (Maybe (FieldParser n b))
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(FieldParser n a -&gt; FieldParser n b)
-&gt; Maybe (FieldParser n a) -&gt; Maybe (FieldParser n b)
forall a b. (a -&gt; b) -&gt; Maybe a -&gt; Maybe b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">((FieldParser n a -&gt; FieldParser n b)
 -&gt; Maybe (FieldParser n a) -&gt; Maybe (FieldParser n b))
-&gt; ((a -&gt; b) -&gt; FieldParser n a -&gt; FieldParser n b)
-&gt; (a -&gt; b)
-&gt; Maybe (FieldParser n a)
-&gt; Maybe (FieldParser n b)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">(a -&gt; b) -&gt; FieldParser n a -&gt; FieldParser n b
forall a b.
(a -&gt; b)
-&gt; FieldParser MetadataObjId n a -&gt; FieldParser MetadataObjId n b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span>
</span><span id="line-588"></span><span>
</span><span id="line-589"></span><span class="annot"><span class="hs-comment">-- | Builds the type name for referenced enum tables.</span></span><span>
</span><span id="line-590"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#mkEnumTypeName"><span class="hs-identifier hs-type">mkEnumTypeName</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-keyword">forall</span><span> </span><span id="local-6989586621687862508"><span class="annot"><a href="#local-6989586621687862508"><span class="hs-identifier hs-type">b</span></a></span></span><span> </span><span id="local-6989586621687862510"><span class="annot"><a href="#local-6989586621687862510"><span class="hs-identifier hs-type">r</span></a></span></span><span> </span><span id="local-6989586621687862509"><span class="annot"><a href="#local-6989586621687862509"><span class="hs-identifier hs-type">m</span></a></span></span><span class="hs-operator">.</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#Backend"><span class="hs-identifier hs-type">Backend</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862508"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadError</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/src/Hasura.Base.Error.html/Hasura.Base.Error.html#QErr"><span class="hs-identifier hs-type">QErr</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862509"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/data-has-0.4.0.0-53a688b2221046a4de0fb8e7927d1d69f385837da1af187d22b34ea76ed4183c/share/doc/html/src/Data.Has.html/Data.Has.html#Has"><span class="hs-identifier hs-type">Has</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Source.html#SourceInfo"><span class="hs-identifier hs-type">SourceInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862508"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><a href="#local-6989586621687862510"><span class="hs-identifier hs-type">r</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#TableName"><span class="hs-identifier hs-type">TableName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862508"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.Name.html/Language.GraphQL.Draft.Syntax.Name.html#Name"><span class="hs-identifier hs-type">G.Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#SchemaT"><span class="hs-identifier hs-type">SchemaT</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862510"><span class="hs-identifier hs-type">r</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862509"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.Name.html/Language.GraphQL.Draft.Syntax.Name.html#Name"><span class="hs-identifier hs-type">G.Name</span></a></span><span>
</span><span id="line-591"></span><span id="mkEnumTypeName"><span class="annot"><span class="annottext">mkEnumTypeName :: forall (b :: BackendType) r (m :: * -&gt; *).
(Backend b, MonadError QErr m, Has (SourceInfo b) r) =&gt;
TableName b -&gt; Maybe Name -&gt; SchemaT r m Name
</span><a href="Hasura.GraphQL.Schema.Common.html#mkEnumTypeName"><span class="hs-identifier hs-var hs-var">mkEnumTypeName</span></a></span></span><span> </span><span id="local-6989586621687863511"><span class="annot"><span class="annottext">TableName b
</span><a href="#local-6989586621687863511"><span class="hs-identifier hs-var">enumTableName</span></a></span></span><span> </span><span id="local-6989586621687863512"><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621687863512"><span class="hs-identifier hs-var">enumTableCustomName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-592"></span><span>  </span><span id="local-6989586621687863513"><span class="annot"><a href="#local-6989586621687863513"><span class="hs-identifier hs-var">customization</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">(SourceInfo b -&gt; ResolvedSourceCustomization)
-&gt; SchemaT r m ResolvedSourceCustomization
forall r (m :: * -&gt; *) a b.
(MonadReader r m, Has a r) =&gt;
(a -&gt; b) -&gt; m b
</span><a href="Hasura.GraphQL.Schema.Common.html#retrieve"><span class="hs-identifier hs-var">retrieve</span></a></span><span> </span><span class="annot"><span class="annottext">((SourceInfo b -&gt; ResolvedSourceCustomization)
 -&gt; SchemaT r m ResolvedSourceCustomization)
-&gt; (SourceInfo b -&gt; ResolvedSourceCustomization)
-&gt; SchemaT r m ResolvedSourceCustomization
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">forall (b :: BackendType).
SourceInfo b -&gt; ResolvedSourceCustomization
</span><a href="Hasura.RQL.Types.Source.html#_siCustomization"><span class="hs-identifier hs-var">_siCustomization</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621687862508"><span class="hs-identifier hs-type">b</span></a></span><span>
</span><span id="line-593"></span><span>  </span><span id="local-6989586621687863514"><span class="annot"><a href="#local-6989586621687863514"><span class="hs-identifier hs-var">enumTableGQLName</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#getTableIdentifier"><span class="hs-identifier hs-type">getTableIdentifier</span></a></span><span> </span><span class="hs-glyph">@</span><span class="annot"><a href="#local-6989586621687862508"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863511"><span class="hs-identifier hs-type">enumTableName</span></a></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-prelude-0.1.0.0/opt/doc/html/hasura-prelude/src/Hasura.Prelude.html/Hasura.Prelude.html#onLeft"><span class="hs-operator hs-type">`onLeft`</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">throwError</span></span><span>
</span><span id="line-594"></span><span>  </span><span class="annot"><span class="hs-identifier hs-type">pure</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#addEnumSuffix"><span class="hs-identifier hs-type">addEnumSuffix</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863513"><span class="hs-identifier hs-type">customization</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863514"><span class="hs-identifier hs-type">enumTableGQLName</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687863512"><span class="hs-identifier hs-type">enumTableCustomName</span></a></span><span>
</span><span id="line-595"></span><span>
</span><span id="line-596"></span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#addEnumSuffix"><span class="hs-identifier hs-type">addEnumSuffix</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.SourceCustomization.html#ResolvedSourceCustomization"><span class="hs-identifier hs-type">ResolvedSourceCustomization</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-extras-1.0.0/opt/doc/html/hasura-extras/src/Data.Text.Casing.html/Data.Text.Casing.html#GQLNameIdentifier"><span class="hs-identifier hs-type">GQLNameIdentifier</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.Name.html/Language.GraphQL.Draft.Syntax.Name.html#Name"><span class="hs-identifier hs-type">G.Name</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.Name.html/Language.GraphQL.Draft.Syntax.Name.html#Name"><span class="hs-identifier hs-type">G.Name</span></a></span><span>
</span><span id="line-597"></span><span id="addEnumSuffix"><span class="annot"><span class="annottext">addEnumSuffix :: ResolvedSourceCustomization
-&gt; GQLNameIdentifier -&gt; Maybe Name -&gt; Name
</span><a href="Hasura.GraphQL.Schema.Common.html#addEnumSuffix"><span class="hs-identifier hs-var hs-var">addEnumSuffix</span></a></span></span><span> </span><span id="local-6989586621687863517"><span class="annot"><span class="annottext">ResolvedSourceCustomization
</span><a href="#local-6989586621687863517"><span class="hs-identifier hs-var">customization</span></a></span></span><span> </span><span id="local-6989586621687863518"><span class="annot"><span class="annottext">GQLNameIdentifier
</span><a href="#local-6989586621687863518"><span class="hs-identifier hs-var">enumTableGQLName</span></a></span></span><span> </span><span id="local-6989586621687863519"><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621687863519"><span class="hs-identifier hs-var">enumTableCustomName</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-598"></span><span>  </span><span class="annot"><span class="annottext">MkTypename -&gt; Name -&gt; Name
</span><a href="Hasura.GraphQL.Schema.Typename.html#runMkTypename"><span class="hs-identifier hs-var">runMkTypename</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ResolvedSourceCustomization -&gt; MkTypename
</span><a href="Hasura.RQL.Types.SourceCustomization.html#_rscTypeNames"><span class="hs-identifier hs-var">_rscTypeNames</span></a></span><span> </span><span class="annot"><span class="annottext">ResolvedSourceCustomization
</span><a href="#local-6989586621687863517"><span class="hs-identifier hs-var">customization</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-599"></span><span>    </span><span class="annot"><span class="annottext">(Name -&gt; Name) -&gt; Name -&gt; Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">NamingCase -&gt; GQLNameIdentifier -&gt; Name
</span><a href="Hasura.RQL.Types.SourceCustomization.html#applyTypeNameCaseIdentifier"><span class="hs-identifier hs-var">applyTypeNameCaseIdentifier</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ResolvedSourceCustomization -&gt; NamingCase
</span><a href="Hasura.RQL.Types.SourceCustomization.html#_rscNamingConvention"><span class="hs-identifier hs-var">_rscNamingConvention</span></a></span><span> </span><span class="annot"><span class="annottext">ResolvedSourceCustomization
</span><a href="#local-6989586621687863517"><span class="hs-identifier hs-var">customization</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-600"></span><span>    </span><span class="annot"><span class="annottext">(GQLNameIdentifier -&gt; Name) -&gt; GQLNameIdentifier -&gt; Name
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">GQLNameIdentifier -&gt; Maybe Name -&gt; GQLNameIdentifier
</span><a href="Hasura.RQL.Types.SourceCustomization.html#mkEnumTableTypeName"><span class="hs-identifier hs-var">mkEnumTableTypeName</span></a></span><span> </span><span class="annot"><span class="annottext">GQLNameIdentifier
</span><a href="#local-6989586621687863518"><span class="hs-identifier hs-var">enumTableGQLName</span></a></span><span> </span><span class="annot"><span class="annottext">Maybe Name
</span><a href="#local-6989586621687863519"><span class="hs-identifier hs-var">enumTableCustomName</span></a></span><span>
</span><span id="line-601"></span><span>
</span><span id="line-602"></span><span class="hs-comment">-- TODO: figure out what the purpose of this method is.</span><span>
</span><span id="line-603"></span><span id="local-6989586621687862518"><span id="local-6989586621687862521"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#peelWithOrigin"><span class="hs-identifier hs-type">peelWithOrigin</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/schema-parsers-1.0.0/opt/doc/html/schema-parsers/src/Hasura.GraphQL.Parser.Class.html/Hasura.GraphQL.Parser.Class.html#MonadParse"><span class="hs-identifier hs-type">P.MonadParse</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862518"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#Parser"><span class="hs-identifier hs-type">P.Parser</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/schema-parsers-1.0.0/opt/doc/html/schema-parsers/src/Hasura.GraphQL.Parser.Schema.Definition.html/Hasura.GraphQL.Parser.Schema.Definition.html#Both"><span class="hs-identifier hs-type">P.Both</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862518"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862521"><span class="hs-identifier hs-type">a</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Parser.html#Parser"><span class="hs-identifier hs-type">P.Parser</span></a></span><span> </span><span class="hs-special">'</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/schema-parsers-1.0.0/opt/doc/html/schema-parsers/src/Hasura.GraphQL.Parser.Schema.Definition.html/Hasura.GraphQL.Parser.Schema.Definition.html#Both"><span class="hs-identifier hs-type">P.Both</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862518"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.IR.Value.html#ValueWithOrigin"><span class="hs-identifier hs-type">IR.ValueWithOrigin</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862521"><span class="hs-identifier hs-type">a</span></a></span><span class="hs-special">)</span></span></span><span>
</span><span id="line-604"></span><span id="peelWithOrigin"><span class="annot"><span class="annottext">peelWithOrigin :: forall (m :: * -&gt; *) a.
MonadParse m =&gt;
Parser 'Both m a -&gt; Parser 'Both m (ValueWithOrigin a)
</span><a href="Hasura.GraphQL.Schema.Common.html#peelWithOrigin"><span class="hs-identifier hs-var hs-var">peelWithOrigin</span></a></span></span><span> </span><span id="local-6989586621687863536"><span class="annot"><span class="annottext">Parser 'Both m a
</span><a href="#local-6989586621687863536"><span class="hs-identifier hs-var">parser</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-605"></span><span>  </span><span class="annot"><span class="annottext">Parser 'Both m a
</span><a href="#local-6989586621687863536"><span class="hs-identifier hs-var">parser</span></a></span><span>
</span><span id="line-606"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/schema-parsers-1.0.0/opt/doc/html/schema-parsers/src/Hasura.GraphQL.Parser.Internal.Types.html/Hasura.GraphQL.Parser.Internal.Types.html#pParser"><span class="hs-identifier hs-var">P.pParser</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-glyph">\</span><span class="hs-glyph">case</span><span>
</span><span id="line-607"></span><span>        </span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/schema-parsers-1.0.0/opt/doc/html/schema-parsers/src/Hasura.GraphQL.Parser.Variable.html/Hasura.GraphQL.Parser.Variable.html#GraphQLValue"><span class="hs-identifier hs-type">P.GraphQLValue</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.html/Language.GraphQL.Draft.Syntax.html#VVariable"><span class="hs-identifier hs-type">G.VVariable</span></a></span><span> </span><span id="local-6989586621687863540"><span class="annot"><span class="annottext">var :: Variable
</span><a href="#local-6989586621687863540"><span class="hs-identifier hs-var">var</span></a></span></span><span class="hs-glyph">@</span><span class="annot"><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/schema-parsers-1.0.0/opt/doc/html/schema-parsers/src/Hasura.GraphQL.Parser.Variable.html/Hasura.GraphQL.Parser.Variable.html#Variable"><span class="hs-identifier hs-type">P.Variable</span></a></span><span> </span><span class="hs-special">{</span><span id="local-6989586621687863542"><span class="annot"><span class="annottext">VariableInfo
vInfo :: VariableInfo
vInfo :: Variable -&gt; VariableInfo
</span><a href="#local-6989586621687863542"><span class="hs-identifier hs-var hs-var">vInfo</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621687863544"><span class="annot"><span class="annottext">Maybe (InputValue Void)
vValue :: Maybe (InputValue Void)
vValue :: Variable -&gt; Maybe (InputValue Void)
</span><a href="#local-6989586621687863544"><span class="hs-identifier hs-var hs-var">vValue</span></a></span></span><span class="hs-special">}</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-608"></span><span>          </span><span class="hs-comment">-- Check types c.f. 5.8.5 of the June 2018 GraphQL spec</span><span>
</span><span id="line-609"></span><span>          </span><span class="annot"><span class="annottext">Bool -&gt; GType -&gt; Variable -&gt; m ()
forall (m :: * -&gt; *).
MonadParse m =&gt;
Bool -&gt; GType -&gt; Variable -&gt; m ()
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/schema-parsers-1.0.0/opt/doc/html/schema-parsers/src/Hasura.GraphQL.Parser.Internal.TypeChecking.html/Hasura.GraphQL.Parser.Internal.TypeChecking.html#typeCheck"><span class="hs-identifier hs-var">P.typeCheck</span></a></span><span> </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">False</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Type MetadataObjId 'Both -&gt; GType
forall origin (k :: Kind). Type origin k -&gt; GType
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/schema-parsers-1.0.0/opt/doc/html/schema-parsers/src/Hasura.GraphQL.Parser.Schema.Definition.html/Hasura.GraphQL.Parser.Schema.Definition.html#toGraphQLType"><span class="hs-identifier hs-var">P.toGraphQLType</span></a></span><span> </span><span class="annot"><span class="annottext">(Type MetadataObjId 'Both -&gt; GType)
-&gt; Type MetadataObjId 'Both -&gt; GType
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Both m a -&gt; Type MetadataObjId 'Both
forall origin (k :: Kind) (m :: * -&gt; *) a.
Parser origin k m a -&gt; Type origin k
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/schema-parsers-1.0.0/opt/doc/html/schema-parsers/src/Hasura.GraphQL.Parser.Internal.Types.html/Hasura.GraphQL.Parser.Internal.Types.html#pType"><span class="hs-identifier hs-var">P.pType</span></a></span><span> </span><span class="annot"><span class="annottext">Parser 'Both m a
</span><a href="#local-6989586621687863536"><span class="hs-identifier hs-var">parser</span></a></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">Variable
</span><a href="#local-6989586621687863540"><span class="hs-identifier hs-var">var</span></a></span><span>
</span><span id="line-610"></span><span>          </span><span class="annot"><span class="annottext">(a -&gt; ValueWithOrigin a) -&gt; m a -&gt; m (ValueWithOrigin a)
forall a b. (a -&gt; b) -&gt; m a -&gt; m b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">VariableInfo -&gt; a -&gt; ValueWithOrigin a
forall a. VariableInfo -&gt; a -&gt; ValueWithOrigin a
</span><a href="Hasura.RQL.IR.Value.html#ValueWithOrigin"><span class="hs-identifier hs-var">IR.ValueWithOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">VariableInfo
</span><a href="#local-6989586621687863542"><span class="hs-identifier hs-var">vInfo</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-611"></span><span>            </span><span class="annot"><span class="annottext">(m a -&gt; m (ValueWithOrigin a)) -&gt; m a -&gt; m (ValueWithOrigin a)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Both m a -&gt; ParserInput 'Both -&gt; m a
forall origin (k :: Kind) (m :: * -&gt; *) a.
Parser origin k m a -&gt; ParserInput k -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/schema-parsers-1.0.0/opt/doc/html/schema-parsers/src/Hasura.GraphQL.Parser.Internal.Types.html/Hasura.GraphQL.Parser.Internal.Types.html#pParser"><span class="hs-identifier hs-var">P.pParser</span></a></span><span> </span><span class="annot"><span class="annottext">Parser 'Both m a
</span><a href="#local-6989586621687863536"><span class="hs-identifier hs-var">parser</span></a></span><span>
</span><span id="line-612"></span><span>            </span><span class="annot"><span class="annottext">(ParserInput 'Both -&gt; m a) -&gt; ParserInput 'Both -&gt; m a
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe (InputValue Void)
</span><a href="#local-6989586621687863544"><span class="hs-identifier hs-var">vValue</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-613"></span><span>              </span><span class="hs-comment">-- TODO: why is faking a null value here semantically correct? RE: GraphQL spec June 2018, section 2.9.5</span><span>
</span><span id="line-614"></span><span>              </span><span class="annot"><span class="annottext">Maybe (InputValue Void)
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Value Variable -&gt; InputValue Variable
forall v. Value v -&gt; InputValue v
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/schema-parsers-1.0.0/opt/doc/html/schema-parsers/src/Hasura.GraphQL.Parser.Variable.html/Hasura.GraphQL.Parser.Variable.html#GraphQLValue"><span class="hs-identifier hs-var">P.GraphQLValue</span></a></span><span> </span><span class="annot"><span class="annottext">Value Variable
forall var. Value var
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/src/Language.GraphQL.Draft.Syntax.html/Language.GraphQL.Draft.Syntax.html#VNull"><span class="hs-identifier hs-var">G.VNull</span></a></span><span>
</span><span id="line-615"></span><span>              </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621687863551"><span class="annot"><span class="annottext">InputValue Void
</span><a href="#local-6989586621687863551"><span class="hs-identifier hs-var">val</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">Void -&gt; Variable
forall a. Void -&gt; a
</span><span class="hs-identifier hs-var">absurd</span></span><span> </span><span class="annot"><span class="annottext">(Void -&gt; Variable) -&gt; InputValue Void -&gt; InputValue Variable
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">InputValue Void
</span><a href="#local-6989586621687863551"><span class="hs-identifier hs-var">val</span></a></span><span>
</span><span id="line-616"></span><span>        </span><span id="local-6989586621687863553"><span class="annot"><span class="annottext">ParserInput 'Both
</span><a href="#local-6989586621687863553"><span class="hs-identifier hs-var">value</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">a -&gt; ValueWithOrigin a
forall a. a -&gt; ValueWithOrigin a
</span><a href="Hasura.RQL.IR.Value.html#ValueNoOrigin"><span class="hs-identifier hs-var">IR.ValueNoOrigin</span></a></span><span> </span><span class="annot"><span class="annottext">(a -&gt; ValueWithOrigin a) -&gt; m a -&gt; m (ValueWithOrigin a)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">Parser 'Both m a -&gt; ParserInput 'Both -&gt; m a
forall origin (k :: Kind) (m :: * -&gt; *) a.
Parser origin k m a -&gt; ParserInput k -&gt; m a
</span><a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/schema-parsers-1.0.0/opt/doc/html/schema-parsers/src/Hasura.GraphQL.Parser.Internal.Types.html/Hasura.GraphQL.Parser.Internal.Types.html#pParser"><span class="hs-identifier hs-var">P.pParser</span></a></span><span> </span><span class="annot"><span class="annottext">Parser 'Both m a
</span><a href="#local-6989586621687863536"><span class="hs-identifier hs-var">parser</span></a></span><span> </span><span class="annot"><span class="annottext">ParserInput 'Both
</span><a href="#local-6989586621687863553"><span class="hs-identifier hs-var">value</span></a></span><span>
</span><span id="line-617"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-618"></span><span>
</span><span id="line-619"></span><span id="local-6989586621687862551"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#getIntrospectionResult"><span class="hs-identifier hs-type">getIntrospectionResult</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hasura.RQL.Types.Schema.Options.html#RemoteSchemaPermissions"><span class="hs-identifier hs-type">Options.RemoteSchemaPermissions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.Authentication.Role.html#RoleName"><span class="hs-identifier hs-type">RoleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.RemoteSchema.SchemaCache.Types.html#RemoteSchemaCtxG"><span class="hs-identifier hs-type">RemoteSchemaCtxG</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862551"><span class="hs-identifier hs-type">remoteFieldInfo</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><a href="Hasura.RemoteSchema.SchemaCache.Types.html#IntrospectionResult"><span class="hs-identifier hs-type">IntrospectionResult</span></a></span></span><span>
</span><span id="line-620"></span><span id="getIntrospectionResult"><span class="annot"><span class="annottext">getIntrospectionResult :: forall remoteFieldInfo.
RemoteSchemaPermissions
-&gt; RoleName
-&gt; RemoteSchemaCtxG remoteFieldInfo
-&gt; Maybe IntrospectionResult
</span><a href="Hasura.GraphQL.Schema.Common.html#getIntrospectionResult"><span class="hs-identifier hs-var hs-var">getIntrospectionResult</span></a></span></span><span> </span><span id="local-6989586621687863564"><span class="annot"><span class="annottext">RemoteSchemaPermissions
</span><a href="#local-6989586621687863564"><span class="hs-identifier hs-var">remoteSchemaPermsCtx</span></a></span></span><span> </span><span id="local-6989586621687863565"><span class="annot"><span class="annottext">RoleName
</span><a href="#local-6989586621687863565"><span class="hs-keyword hs-var">role</span></a></span></span><span> </span><span id="local-6989586621687863566"><span class="annot"><span class="annottext">RemoteSchemaCtxG remoteFieldInfo
</span><a href="#local-6989586621687863566"><span class="hs-identifier hs-var">remoteSchemaContext</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-621"></span><span>  </span><span class="hs-keyword">if</span><span>
</span><span id="line-622"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- admin doesn't have a custom annotated introspection, defaulting to the original one</span><span>
</span><span id="line-623"></span><span>      </span><span class="annot"><span class="annottext">RoleName
</span><a href="#local-6989586621687863565"><span class="hs-keyword hs-var">role</span></a></span><span> </span><span class="annot"><span class="annottext">RoleName -&gt; RoleName -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">RoleName
</span><a href="Hasura.Authentication.Role.html#adminRoleName"><span class="hs-identifier hs-var">adminRoleName</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-624"></span><span>        </span><span class="annot"><span class="annottext">IntrospectionResult -&gt; Maybe IntrospectionResult
forall a. a -&gt; Maybe a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(IntrospectionResult -&gt; Maybe IntrospectionResult)
-&gt; IntrospectionResult -&gt; Maybe IntrospectionResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaCtxG remoteFieldInfo -&gt; IntrospectionResult
forall remoteFieldInfo.
RemoteSchemaCtxG remoteFieldInfo -&gt; IntrospectionResult
</span><a href="Hasura.RemoteSchema.SchemaCache.Types.html#_rscIntroOriginal"><span class="hs-identifier hs-var">_rscIntroOriginal</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaCtxG remoteFieldInfo
</span><a href="#local-6989586621687863566"><span class="hs-identifier hs-var">remoteSchemaContext</span></a></span><span>
</span><span id="line-625"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- if permissions are disabled, the role map will be empty, defaulting to the original one</span><span>
</span><span id="line-626"></span><span>      </span><span class="annot"><span class="annottext">RemoteSchemaPermissions
</span><a href="#local-6989586621687863564"><span class="hs-identifier hs-var">remoteSchemaPermsCtx</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaPermissions -&gt; RemoteSchemaPermissions -&gt; Bool
forall a. Eq a =&gt; a -&gt; a -&gt; Bool
</span><span class="hs-operator hs-var">==</span></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaPermissions
</span><a href="Hasura.RQL.Types.Schema.Options.html#DisableRemoteSchemaPermissions"><span class="hs-identifier hs-var">Options.DisableRemoteSchemaPermissions</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-627"></span><span>        </span><span class="annot"><span class="annottext">IntrospectionResult -&gt; Maybe IntrospectionResult
forall a. a -&gt; Maybe a
forall (f :: * -&gt; *) a. Applicative f =&gt; a -&gt; f a
</span><span class="hs-identifier hs-var">pure</span></span><span> </span><span class="annot"><span class="annottext">(IntrospectionResult -&gt; Maybe IntrospectionResult)
-&gt; IntrospectionResult -&gt; Maybe IntrospectionResult
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaCtxG remoteFieldInfo -&gt; IntrospectionResult
forall remoteFieldInfo.
RemoteSchemaCtxG remoteFieldInfo -&gt; IntrospectionResult
</span><a href="Hasura.RemoteSchema.SchemaCache.Types.html#_rscIntroOriginal"><span class="hs-identifier hs-var">_rscIntroOriginal</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaCtxG remoteFieldInfo
</span><a href="#local-6989586621687863566"><span class="hs-identifier hs-var">remoteSchemaContext</span></a></span><span>
</span><span id="line-628"></span><span>    </span><span class="hs-glyph">|</span><span> </span><span class="hs-comment">-- otherwise, look the role up in the map; if we find nothing, then the role doesn't have access</span><span>
</span><span id="line-629"></span><span>      </span><span class="annot"><span class="annottext">Bool
</span><span class="hs-identifier hs-var">otherwise</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-630"></span><span>        </span><span class="annot"><span class="annottext">RoleName
-&gt; HashMap RoleName IntrospectionResult
-&gt; Maybe IntrospectionResult
forall k v. (Eq k, Hashable k) =&gt; k -&gt; HashMap k v -&gt; Maybe v
</span><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/unordered-containers-0.2.20-6d56f9b3abc6011ddb6e237c415126423ab5ceb5c078221bba2ff80dbe921009/share/doc/html/src/Data.HashMap.Internal.html/Data.HashMap.Internal.html#lookup"><span class="hs-identifier hs-var">HashMap.lookup</span></a></span><span> </span><span class="annot"><span class="annottext">RoleName
</span><a href="#local-6989586621687863565"><span class="hs-keyword hs-var">role</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">RemoteSchemaCtxG remoteFieldInfo
-&gt; HashMap RoleName IntrospectionResult
forall remoteFieldInfo.
RemoteSchemaCtxG remoteFieldInfo
-&gt; HashMap RoleName IntrospectionResult
</span><a href="Hasura.RemoteSchema.SchemaCache.Types.html#_rscPermissions"><span class="hs-identifier hs-var">_rscPermissions</span></a></span><span> </span><span class="annot"><span class="annottext">RemoteSchemaCtxG remoteFieldInfo
</span><a href="#local-6989586621687863566"><span class="hs-identifier hs-var">remoteSchemaContext</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-631"></span><span>
</span><span id="line-632"></span><span id="local-6989586621687862557"><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#tablePermissionsInfo"><span class="hs-identifier hs-type">tablePermissionsInfo</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hasura.RQL.Types.Backend.html#Backend"><span class="hs-identifier hs-type">Backend</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862557"><span class="hs-identifier hs-type">b</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span> </span><span class="annot"><a href="Hasura.Table.Cache.html#SelPermInfo"><span class="hs-identifier hs-type">SelPermInfo</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862557"><span class="hs-identifier hs-type">b</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><a href="Hasura.GraphQL.Schema.Common.html#TablePerms"><span class="hs-identifier hs-type">TablePerms</span></a></span><span> </span><span class="annot"><a href="#local-6989586621687862557"><span class="hs-identifier hs-type">b</span></a></span></span><span>
</span><span id="line-633"></span><span id="tablePermissionsInfo"><span class="annot"><span class="annottext">tablePermissionsInfo :: forall (b :: BackendType).
Backend b =&gt;
SelPermInfo b -&gt; TablePerms b
</span><a href="Hasura.GraphQL.Schema.Common.html#tablePermissionsInfo"><span class="hs-identifier hs-var hs-var">tablePermissionsInfo</span></a></span></span><span> </span><span id="local-6989586621687863575"><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621687863575"><span class="hs-identifier hs-var">selectPermissions</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-634"></span><span>  </span><span class="annot"><a href="Hasura.RQL.IR.Select.TablePerm.html#TablePerm"><span class="hs-identifier hs-type">IR.TablePerm</span></a></span><span>
</span><span id="line-635"></span><span>    </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">_tpFilter :: AnnBoolExp b (UnpreparedValue b)
</span><a href="Hasura.RQL.IR.Select.TablePerm.html#_tpFilter"><span class="hs-identifier hs-var">IR._tpFilter</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(PartialSQLExp b -&gt; UnpreparedValue b)
-&gt; AnnBoolExpFld b (PartialSQLExp b)
-&gt; AnnBoolExpFld b (UnpreparedValue b)
forall a b. (a -&gt; b) -&gt; AnnBoolExpFld b a -&gt; AnnBoolExpFld b b
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-identifier hs-var">fmap</span></span><span> </span><span class="annot"><span class="annottext">PartialSQLExp b -&gt; UnpreparedValue b
forall (b :: BackendType). PartialSQLExp b -&gt; UnpreparedValue b
</span><a href="Hasura.GraphQL.Schema.Common.html#partialSQLExpToUnpreparedValue"><span class="hs-identifier hs-var">partialSQLExpToUnpreparedValue</span></a></span><span> </span><span class="annot"><span class="annottext">(AnnBoolExpFld b (PartialSQLExp b)
 -&gt; AnnBoolExpFld b (UnpreparedValue b))
-&gt; GBoolExp b (AnnBoolExpFld b (PartialSQLExp b))
-&gt; AnnBoolExp b (UnpreparedValue b)
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b -&gt; GBoolExp b (AnnBoolExpFld b (PartialSQLExp b))
forall (b :: BackendType). SelPermInfo b -&gt; AnnBoolExpPartialSQL b
</span><a href="Hasura.Table.Cache.html#spiFilter"><span class="hs-identifier hs-var">spiFilter</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621687863575"><span class="hs-identifier hs-var">selectPermissions</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-636"></span><span>      </span><span class="annot"><span class="annottext">_tpLimit :: Maybe Int
</span><a href="Hasura.RQL.IR.Select.TablePerm.html#_tpLimit"><span class="hs-identifier hs-var">IR._tpLimit</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">SelPermInfo b -&gt; Maybe Int
forall (b :: BackendType). SelPermInfo b -&gt; Maybe Int
</span><a href="Hasura.Table.Cache.html#spiLimit"><span class="hs-identifier hs-var">spiLimit</span></a></span><span> </span><span class="annot"><span class="annottext">SelPermInfo b
</span><a href="#local-6989586621687863575"><span class="hs-identifier hs-var">selectPermissions</span></a></span><span>
</span><span id="line-637"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-638"></span></pre></body></html>