<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Hasura.RemoteSchema.SchemaCache.Permission</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">graphql-engine-1.0.0: GraphQL API over Postgres</span><ul class="links" id="page-menu"><li id="quick-jump-button"><a href="#">Quick Jump</a></li><li><a href="src/Hasura.RemoteSchema.SchemaCache.Permission.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Hasura.RemoteSchema.SchemaCache.Permission</p></div><div id="description"><p class="caption">Description</p><div class="doc"><h1>Remote Schema Permissions Validation</h1><p>This module parses the GraphQL IDL (Schema Document) that's provided by
 the user for configuring permissions for remote schemas to a schema
 introspection object, which is then used to construct the remote schema for
 the particular role.</p><p>This module does two things essentially:</p><ol><li value="1">Checks if the given schema document is a subset of the upstream remote
    schema document. This is done by checking if all the objects, interfaces,
    unions, enums, scalars and input objects provided in the schema document
    exist in the upstream remote schema too. We validate the fields, directives
    and arguments too, wherever applicable.</li><li value="2">Parse the <code>preset</code> directives (if any) on input object fields or argument fields.
    A <code>preset</code> directive is used to specify any preset argument on a field, it can be
    either a static value or session variable value. There is some validation done
    on preset directives. For example:
    - Preset directives can only be specified at
      <code>ARGUMENT_DEFINITION</code> or <code>INPUT_FIELD_DEFINITION</code>
    - A field expecting object cannot have a scalar/enum preset directive and vice versa.</li></ol><p>If a preset directive value is a session variable (like `x-hasura-*`), then it's
    considered to be a session variable value. In the case, the user wants to treat the
    session variable value literally, they can add the <code>static</code> key to the preset directive
    to indicate that the value provided should be considered literally. For example:</p><p>`user(id: Int @preset(value: &quot;x-hasura-user-id&quot;, static: true))</p><p>In this case `x-hasura-user-id` will be considered literally.</p><p>For validation, we use the <code><a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/monad-validate-1.3.0.0-c41b32956c00b88d3b80e27aeda5f3e18aed6fbf5f96dc264eab5b7b0f3d2f4e/share/doc/html/Control-Monad-Validate.html#t:MonadValidate" title="Control.Monad.Validate">MonadValidate</a></code> monad transformer to collect as many errors
 as possible and then report all those errors at one go to the user.</p></div></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a id="v:resolveRoleBasedRemoteSchema" class="def">resolveRoleBasedRemoteSchema</a> :: <a href="file:///root/.local/state/cabal/store/ghc-9.10.1-inplace/binary-parser-0.5.7.6-f0ac707e6923af097e412270ae5b3b843c584dc7e141fb4f8d0870c6638e1e86/share/doc/html/BinaryParser-Prelude.html#t:MonadError" title="BinaryParser.Prelude">MonadError</a> <a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/hasura-base-1.0.0/opt/doc/html/hasura-base/Hasura-Base-Error.html#t:QErr" title="Hasura.Base.Error">QErr</a> m =&gt; <a href="Hasura-Authentication-Role.html#t:RoleName" title="Hasura.Authentication.Role">RoleName</a> -&gt; <a href="Hasura-RemoteSchema-Metadata-Base.html#t:RemoteSchemaName" title="Hasura.RemoteSchema.Metadata.Base">RemoteSchemaName</a> -&gt; <a href="Hasura-RemoteSchema-SchemaCache-Types.html#t:IntrospectionResult" title="Hasura.RemoteSchema.SchemaCache.Types">IntrospectionResult</a> -&gt; <a href="file:///workdir/dist-newstyle/build/x86_64-linux/ghc-9.10.1/graphql-parser-0.2.0.0/opt/doc/html/graphql-parser/Language-GraphQL-Draft-Syntax.html#t:SchemaDocument" title="Language.GraphQL.Draft.Syntax">SchemaDocument</a> -&gt; m (<a href="Hasura-RemoteSchema-SchemaCache-Types.html#t:IntrospectionResult" title="Hasura.RemoteSchema.SchemaCache.Types">IntrospectionResult</a>, <a href="Hasura-RQL-Types-SchemaCacheTypes.html#t:SchemaDependency" title="Hasura.RQL.Types.SchemaCacheTypes">SchemaDependency</a>) <a href="src/Hasura.RemoteSchema.SchemaCache.Permission.html#resolveRoleBasedRemoteSchema" class="link">Source</a> <a href="#v:resolveRoleBasedRemoteSchema" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.28.0</p></div></body></html>